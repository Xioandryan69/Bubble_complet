!function(){"use strict";function t(n){return function(t){return typeof t===n}}function u(t){return function(){return t}}function n(t){return t}function r(){return m}var o,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(t){return n=typeof(t=t),(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===o;var n},c=t("boolean"),f=t("function"),l=t("number"),d=u(!(o="string")),a=u(!0),m={fold:function(t,n){return t()},isSome:d,isNone:a,getOr:n,getOrThunk:s,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:s,map:r,each:function(){},bind:r,exists:d,forall:a,filter:function(){return m},toArray:function(){return[]},toString:u("none()")};function s(t){return t()}function g(r){function t(){return e}function n(t){return t(r)}var o=u(r),e={fold:function(t,n){return n(r)},isSome:a,isNone:d,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:t,orThunk:t,map:function(t){return g(t(r))},each:function(t){t(r)},bind:n,exists:n,forall:n,filter:function(t){return t(r)?e:m},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return e}function h(t,n){for(var r=0,o=t.length;r<o;r++)n(t[r],r)}function p(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}}function v(t,n){if(1!==(t=t.dom).nodeType)return!1;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function y(n){return function(t){return t.dom.nodeType===n}}function w(t){for(var n=t.dom.childNodes,r=P.fromDom,o=n.length,e=new Array(o),u=0;u<o;u++){var i=n[u];e[u]=r(i,u)}return e}function D(t,n,r){if(t=t.dom,!(i(r)||c(r)||l(r)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,r+"")}function N(t,n){t.dom.removeAttribute(n)}function T(t){var n,t=U(t);return!F(n=t)||null==n.dom.host?E():k(t)}function S(t){return P.fromDom(t.dom.host)}function b(t){var n,r,o,e=j(t)?t.dom.parentNode:t.dom;return null!=e&&null!==e.ownerDocument&&(n=e.ownerDocument,T(P.fromDom(e)).fold(function(){return n.body.contains(e)},(r=b,o=S,function(t){return r(o(t))})))}function O(t,n,r){for(var o=function(t){return v(t,n)},e=t.dom,u=f(r)?r:d;e.parentNode;){var e=e.parentNode,i=P.fromDom(e);if(o(i))return k(i);if(u(i))break}return E()}function A(t,n){var r=t.dom,o=window.getComputedStyle(r).getPropertyValue(n);return""!==o||b(t)?o:(t=n,I(o=r)?o.style.getPropertyValue(t):"")}function C(t){return"rtl"===A(t,"direction")?"rtl":"ltr"}function H(t,n){for(var r=function(t){return v(t,n)},o=w(t),e=r,u=[],i=0,c=o.length;i<c;i++){var f=o[i];e(f,i)&&u.push(f)}return u}function V(t){return L(t.dom.parentNode).map(P.fromDom).filter(R)}var M,k=g,E=r,L=function(t){return null==t?m:g(t)},P={fromHtml:function(t,n){n=(n||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return p(n.childNodes[0])},fromTag:function(t,n){n=(n||document).createElement(t);return p(n)},fromText:function(t,n){n=(n||document).createTextNode(t);return p(n)},fromDom:p,fromPoint:function(t,n,r){return L(t.dom.elementFromPoint(n,r)).map(p)}},R=("undefined"==typeof window&&Function("return this;")(),y(1)),j=y(3),z=y(9),F=y(11),U=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode)?function(t){return P.fromDom(t.dom.getRootNode())}:function(t){return z(t)?t:P.fromDom(t.dom.ownerDocument)},I=function(t){return void 0!==t.style&&f(t.style.getPropertyValue)},K=(M="li",function(t){return R(t)&&t.dom.nodeName.toLowerCase()===M}),x=function(t,o){var n=t.selection.getSelectedBlocks();0<n.length&&(h(n,function(t){var t=P.fromDom(t),n=K(t),r=(t=t,(n?O(t,"ol,ul"):k(t)).getOr(t));V(r).each(function(t){C(t)!==o?D(r,"dir",o):C(r)!==o&&N(r,"dir"),n&&(t=H(r,"li[dir]"),h(t,function(t){N(t,"dir")}))})}),t.nodeChanged())},B=function(r,o){return function(n){function t(t){t=P.fromDom(t.element),n.setActive(C(t)===o)}return r.on("NodeChange",t),function(){return r.off("NodeChange",t)}}};e.add("directionality",function(t){var n,r;(n=t).addCommand("mceDirectionLTR",function(){x(n,"ltr")}),n.addCommand("mceDirectionRTL",function(){x(n,"rtl")}),(r=t).ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return r.execCommand("mceDirectionLTR")},onSetup:B(r,"ltr")}),r.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return r.execCommand("mceDirectionRTL")},onSetup:B(r,"rtl")})})}();