!function(){"use strict";function H(e){return{isFullscreen:function(){return null!==e.get()}}}function e(r){return function(e){return n=typeof(e=e),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===r;var n}}function n(n){return function(e){return typeof e===n}}function W(e){return e}var c=function(e){var n=e;return{get:function(){return n},set:function(e){n=e}}},q=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=e("string"),j=e("array"),B=n("boolean"),r=function(e){return!(null==e)},s=n("function"),I=n("number"),a=function(){},d=function(e){return function(){return e}};function o(){return u}var l=d(!1),i=d(!0),u={fold:function(e,n){return e()},isSome:l,isNone:i,getOr:P=W,getOrThunk:f,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:P,orThunk:f,map:o,each:a,bind:o,exists:l,forall:i,filter:function(){return u},toArray:function(){return[]},toString:d("none()")};function f(e){return e()}function m(r){function e(){return o}function n(e){return e(r)}var t=d(r),o={fold:function(e,n){return n(r)},isSome:i,isNone:l,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(e){return m(e(r))},each:function(e){e(r)},bind:n,exists:n,forall:n,filter:function(e){return e(r)?o:u},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o}function h(e){function n(){r.get().each(e)}var r=c(k.none());return{clear:function(){n(),r.set(k.none())},isSet:function(){return r.get().isSome()},get:function(){return r.get()},set:function(e){n(),r.set(k.some(e))}}}function V(){return h(function(e){return e.unbind()})}function v(e,n){for(var r=0,t=e.length;r<t;r++)n(e[r],r)}function g(e,n){for(var r=[],t=0,o=e.length;t<o;t++){var i=e[t];n(i,t)&&r.push(i)}return r}function _(e,n){for(var r=C(e,n),t=[],o=0,i=r.length;o<i;++o){if(!j(r[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+r);be.apply(t,r[o])}return t}function z(e){return e=e,(n=0)<=n&&n<e.length?k.some(e[n]):k.none();var n}function p(e,n){return-1!==e.indexOf(n)}function w(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function y(n){return function(e){return e.dom.nodeType===n}}function X(){return R(0,0)}function b(n){return function(e){return p(e,n)}}function U(e){function n(e){return function(){return r===e}}var r=e.current,e=e.version;return{current:r,version:e,isEdge:n(Me),isChrome:n(Ne),isIE:n(He),isOpera:n(We),isFirefox:n(qe),isSafari:n(je)}}function $(e){function n(e){return function(){return r===e}}var r=e.current,e=e.version;return{current:r,version:e,isWindows:n(Ve),isiOS:n(_e),isAndroid:n(ze),isOSX:n(Ue),isLinux:n(Xe),isSolaris:n($e),isFreeBSD:n(Ke),isChromeOS:n(Ye)}}function K(e){return window.matchMedia(e).matches}function Y(e,n){if(1!==(e=e.dom).nodeType)return!1;if(void 0!==e.matches)return e.matches(n);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(n);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(n);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}function S(e){return A.fromDom(e.dom.ownerDocument)}function G(n){return k.from(n.dom.parentNode).map(A.fromDom).map(J).map(function(e){return g(e,function(e){return n.dom!==e.dom})}).getOr([])}function J(e){return C(e.dom.childNodes,A.fromDom)}function x(e){var n,e=nn(e);return Ce(n=e)&&r(n.dom.host)?k.some(e):k.none()}function E(e){return A.fromDom(e.dom.host)}function Q(e){if(en()&&r(e.target)){var n=A.fromDom(e.target);if(Te(n)&&r(n.dom.shadowRoot)&&(e.composed&&e.composedPath)){n=e.composedPath();if(n)return z(n)}}return k.from(e.target)}function Z(e){var n,r,t,o=ke(e)?e.dom.parentNode:e.dom;return null!=o&&null!==o.ownerDocument&&(n=o.ownerDocument,x(A.fromDom(o)).fold(function(){return n.body.contains(o)},(r=Z,t=E,function(e){return r(t(e))})))}function ee(e,n,r){if(e=e.dom,!(t(r)||B(r)||I(r)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")}function ne(e,n){return null===(e=e.dom.getAttribute(n))?void 0:e}function re(e,n){e.dom.removeAttribute(n)}function O(e,n){var r=e.dom;Oe(n,function(e,n){rn(r,n,e)})}function te(e,n){var r=e.dom,t=window.getComputedStyle(r).getPropertyValue(n);return""!==t||Z(e)?t:(e=n,Fe(t=r)?t.style.getPropertyValue(e):"")}function oe(e,n,r,t,o){function i(e){u(e)&&c(tn(e))}var u,c;return u=r,c=t,e.dom.addEventListener(n,i,o),{unbind:function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=o.concat(e);return t.apply(null,r)}}(ie,e,n,i,o)}}function ie(e,n,r,t){e.dom.removeEventListener(n,r,t)}function ue(e,n,r){return oe(e,n,on,r,!1)}function ce(r,t){return{left:r,top:t,translate:function(e,n){return ce(r+e,t+n)}}}function se(e,n,r,t){return{x:e,y:n,width:r,height:t,right:e+r,bottom:n+t}}function ae(e){var n,r=void 0===e?window:e,e=r.document,t=(e=void 0!==(e=A.fromDom(e))?e.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop,un(n,e));return M(r).fold(function(){var e=r.document.documentElement,n=e.clientWidth,e=e.clientHeight;return se(t.left,t.top,n,e)},function(e){return se(Math.max(e.pageLeft,t.left),Math.max(e.pageTop,t.top),e.width,e.height)})}function le(r,t,e){return M(e).map(function(e){function n(e){return t(tn(e))}return e.addEventListener(r,n),{unbind:function(){return e.removeEventListener(r,n)}}}).getOrThunk(function(){return{unbind:a}})}function fe(e,n){e.fire("FullscreenStateChanged",{state:n}),e.fire("ResizeEditor")}function F(e){return e.getParam("fullscreen_native",!1,"boolean")}function me(e){var n=A.fromDom(e.getElement());return x(n).map(E).getOrThunk(function(){var e=S(n);if(null==(e=e.dom.body))throw new Error("Body is not available yet");return A.fromDom(e)})}function de(e){return e.dom===(void 0!==(e=S(e).dom).fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null)}function he(e,n,r){return g(function(e,n){for(var r=s(n)?n:l,t=e.dom,o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=A.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(e,r),n)}function ve(e){return e=e,n=void 0===n?document:n.dom,1!==(r=n).nodeType&&9!==r.nodeType&&11!==r.nodeType||0===r.childElementCount?[]:C(n.querySelectorAll(e),A.fromDom);var n,r}function ge(e,n){return r=function(e){return Y(e,n)},g(G(e),r);var r}function pe(t,e,n){function r(r){return function(e){var n=ne(e,"style"),n=void 0===n?"no-styles":n.trim();n!==r&&(ee(e,N,n),O(e,t.parseStyle(r)))}}o="*";var o,i=he(e,function(e){return Y(e,o)},i),u=_(i,function(e){return ge(e,"*:not(.tox-silver-sink)")}),n=function(e){e=te(e,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":"background-color:rgb(255,255,255)!important;"}(n);v(u,r("display:none!important;")),v(i,r(an+ln+n)),r((!0===fn?"":an)+ln+n)(e)}var we,ye,T,k={some:m,none:o,from:function(e){return null==e?u:m(e)}},D=function(){return(D=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},be=Array.prototype.push,C=function(e,n){for(var r=e.length,t=new Array(r),o=0;o<r;o++){var i=e[o];t[o]=n(i,o)}return t},Se=function(e,n){for(var r=e,t=n,o=l,i=0,u=r.length;i<u;i++){var c=r[i];if(t(c,i))return k.some(c);if(o(c,i))break}return k.none()},xe=function(e,n){for(var r=0;r<e.length;r++){var t=n(e[r],r);if(t.isSome())return t}return k.none()},Ee=Object.keys,Oe=function(e,n){for(var r=Ee(e),t=0,o=r.length;t<o;t++){var i=r[t];n(e[i],i)}},Fe=function(e){return void 0!==e.style&&s(e.style.getPropertyValue)},A={fromHtml:function(e,n){n=(n||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return w(n.childNodes[0])},fromTag:function(e,n){n=(n||document).createElement(e);return w(n)},fromText:function(e,n){n=(n||document).createTextNode(e);return w(n)},fromDom:w,fromPoint:function(e,n,r){return k.from(e.dom.elementFromPoint(n,r)).map(w)}},Te=("undefined"==typeof window&&Function("return this;")(),y(1)),ke=y(3),De=y(9),Ce=y(11),Ae=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}},R=function(e,n){return{major:e,minor:n}},L={nu:R,detect:function(e,n){var r,t,n=String(n).toLowerCase();return 0===e.length?X():(t=Ae(e=e,r=n))?R((e=function(e){return Number(r.replace(t,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:X},Re=function(e,n){var r=String(n).toLowerCase();return Se(e,function(e){return e.search(r)})},P=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,P=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return p(e,"edge/")&&p(e,"chrome")&&p(e,"safari")&&p(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,P],search:function(e){return p(e,"chrome")&&!p(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return p(e,"msie")||p(e,"trident")}},{name:"Opera",versionRegexes:[P,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:b("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:b("firefox")},{name:"Safari",versionRegexes:[P,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(p(e,"safari")||p(e,"mobile/"))&&p(e,"applewebkit")}}],Le=[{name:"Windows",search:b("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return p(e,"iphone")||p(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:b("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:b("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:b("linux"),versionRegexes:[]},{name:"Solaris",search:b("sunos"),versionRegexes:[]},{name:"FreeBSD",search:b("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:b("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Pe={browsers:d(P),oses:d(Le)},Me="Edge",Ne="Chrome",He="IE",We="Opera",qe="Firefox",je="Safari",Be=function(){return U({current:void 0,version:L.unknown()})},Ie=U,Ve=(d(Me),d(Ne),d(He),d(We),d(qe),d(je),"Windows"),_e="iOS",ze="Android",Xe="Linux",Ue="OSX",$e="Solaris",Ke="FreeBSD",Ye="ChromeOS",Ge=function(){return $({current:void 0,version:L.unknown()})},Je=$,Qe=(d(Ve),d(_e),d(ze),d(Xe),d(Ue),d($e),d(Ke),d(Ye),function(e,n,r){var t,o,i,u,c,s,a,l=Pe.browsers(),f=Pe.oses(),n=n.bind(function(e){return t=l,xe(e.brands,function(n){var r=n.brand.toLowerCase();return Se(t,function(e){return r===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:L.nu(parseInt(n.version,10),0)}})});var t}).orThunk(function(){return Re(l,r=e).map(function(e){var n=L.detect(e.versionRegexes,r);return{current:e.name,version:n}});var r}).fold(Be,Ie),f=Re(f,t=e).map(function(e){var n=L.detect(e.versionRegexes,t);return{current:e.name,version:n}}).fold(Ge,Je),m=(i=n,u=e,r=r,m=(o=f).isiOS()&&!0===/ipad/i.test(u),c=o.isiOS()&&!m,s=o.isiOS()||o.isAndroid(),a=s||r("(pointer:coarse)"),r=m||!c&&s&&r("(min-device-width:768px)"),s=c||s&&!r,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!s&&!r&&!i,{isiPad:d(m),isiPhone:d(c),isTablet:d(r),isPhone:d(s),isTouch:d(a),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:d(i),isDesktop:d(u)});return{browser:n,os:f,deviceType:m}}),Ze=(T=!(we=function(){return Qe(navigator.userAgent,k.from(navigator.userAgentData),K)}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return T||(T=!0,ye=we.apply(null,e)),ye}),P=s(Element.prototype.attachShadow)&&s(Node.prototype.getRootNode),en=d(P),nn=P?function(e){return A.fromDom(e.dom.getRootNode())}:function(e){return De(e)?e:S(e)},rn=function(e,n,r){if(!t(r))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);Fe(e)&&e.style.setProperty(n,r)},tn=function(e){function n(){return e.stopPropagation()}function r(){return e.preventDefault()}function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o(i.apply(null,e))}var o,i,u=A.fromDom(Q(e).getOr(e.target));o=r,i=n;return{target:u,x:e.clientX,y:e.clientY,stop:n,prevent:r,kill:t,raw:e}},on=i,un=ce,M=function(e){e=void 0===e?window:e;return Ze().browser.isFirefox()?k.none():k.from(e.visualViewport)},Le=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),cn=tinymce.util.Tools.resolve("tinymce.Env"),sn=tinymce.util.Tools.resolve("tinymce.util.Delay"),N="data-ephox-mobile-fullscreen-style",an="position:absolute!important;",ln="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",fn=cn.os.isAndroid(),mn=Le.DOM,dn=M().fold(function(){return{bind:a,unbind:a}},function(n){r=h(a);var r,t=D(D({},r),{on:function(e){return r.get().each(e)}}),o=V(),i=V(),u=sn.throttle(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(function(){t.on(function(e){return O(e,{top:n.offsetTop+"px",left:n.offsetLeft+"px",height:n.height+"px",width:n.width+"px"})})})},50);return{bind:function(e){t.set(e),u(),o.set(le("resize",u)),i.set(le("scroll",u))},unbind:function(){t.on(function(){o.clear(),i.clear()}),t.clear()}}}),hn=function(n,t){function o(n){n(i,"tox-fullscreen"),n(u,"tox-fullscreen"),n(c,"tox-fullscreen"),x(s).map(function(e){return E(e).dom}).each(function(e){n(e,"tox-fullscreen"),n(e,"tox-shadowhost")})}function e(){var r,e;m&&(r=n.dom,e=ve("["+N+"]"),v(e,function(e){var n=ne(e,N);"no-styles"!==n?O(e,r.parseStyle(n)):re(e,"style"),re(e,N)})),o(mn.removeClass),dn.unbind(),k.from(t.get()).each(function(e){return e.fullscreenChangeHandler.unbind()})}var r,i=document.body,u=document.documentElement,c=n.getContainer(),s=A.fromDom(c),a=me(n),l=t.get(),f=A.fromDom(n.getBody()),m=cn.deviceType.isTouch(),d=c.style,h=n.iframeElement.style;l?(l.fullscreenChangeHandler.unbind(),F(n)&&de(a)&&((r=(r=S(a)).dom).exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.webkitCancelFullScreen&&r.webkitCancelFullScreen()),h.width=l.iframeWidth,h.height=l.iframeHeight,d.width=l.containerWidth,d.height=l.containerHeight,d.top=l.containerTop,d.left=l.containerLeft,e(),r=l.scrollPos,window.scrollTo(r.x,r.y),t.set(null),fe(n,!1),n.off("remove",e)):(l=ue(S(a),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",function(e){!F(n)||de(a)||null===t.get()||hn(n,t)}),l={scrollPos:ae(window),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:h.width,iframeHeight:h.height,fullscreenChangeHandler:l},m&&pe(n.dom,s,f),h.width=h.height="100%",d.width=d.height="",o(mn.addClass),dn.bind(s),n.on("remove",e),t.set(l),F(n)&&((f=(f=a).dom).requestFullscreen?f.requestFullscreen():f.msRequestFullscreen?f.msRequestFullscreen():f.webkitRequestFullScreen&&f.webkitRequestFullScreen()),fe(n,!0))},vn=function(r,t){return function(n){n.setActive(null!==t.get());function e(e){return n.setActive(e.state)}return r.on("FullscreenStateChanged",e),function(){return r.off("FullscreenStateChanged",e)}}};q.add("fullscreen",function(e){var n,r,t,o,i=c(null);return e.inline||(r=i,(n=e).addCommand("mceFullScreen",function(){hn(n,r)}),o=i,(t=e).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:u,onSetup:vn(t,o)}),t.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:u,onSetup:vn(t,o)}),e.addShortcut("Meta+Shift+F","","mceFullScreen")),H(i);function u(){return t.execCommand("mceFullScreen")}})}();