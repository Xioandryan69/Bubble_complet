!function(){"use strict";function o(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===n;var t}}function U(t){return function(e){return typeof e===t}}function _(){}function $(e){return e}function F(e,t){return e===t}function j(t){return function(e){return!t(e)}}function H(){return a}var K=tinymce.util.Tools.resolve("tinymce.PluginManager"),V=o("string"),u=o("object"),W=o("array"),Q=U("boolean"),q=U("function"),z=U("number"),m=function(e){return function(){return e}},i=m(!1),X=m(!0),a={fold:function(e,t){return e()},isSome:i,isNone:X,getOr:r=$,getOrThunk:Y,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:r,orThunk:Y,map:H,each:_,bind:H,exists:i,forall:X,filter:function(){return a},toArray:function(){return[]},toString:m("none()")};function Y(e){return e()}function Z(n){function e(){return o}function t(e){return e(n)}var r=m(n),o={fold:function(e,t){return t(n)},isSome:X,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:e,orThunk:e,map:function(e){return Z(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?o:a},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o}function s(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function c(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n}function G(e,n,r){return s(e,function(e,t){r=n(r,e,t)}),r}function l(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return d(i);if(n(i,r))break}return p()}function J(e){return(e=re.call(e,0)).reverse(),e}function ee(e,t){return 0<=t&&t<e.length?d(e[t]):p()}function te(e){return ee(e,0)}function f(e){return ee(e,e.length-1)}var d=Z,p=H,ne=function(e){return null==e?a:Z(e)},re=Array.prototype.slice,oe=Array.prototype.push,g=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},h=function(e,t){return l(e,t,i)},ie=function(e,t){for(var n=g(e,t),r=[],o=0,i=n.length;o<i;++o){if(!W(n[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+n);oe.apply(r,n[o])}return r},ue=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return p()},ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function se(){return Et(0,0)}function n(e,t){return-1!==e.indexOf(t)}function e(t){return function(e){return n(e,t)}}function ce(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isEdge:t(Mt),isChrome:t(Ut),isIE:t(_t),isOpera:t($t),isFirefox:t(Ft),isSafari:t(jt)}}function le(e){function t(e){return function(){return n===e}}var n=e.current,e=e.version;return{current:n,version:e,isWindows:t(Vt),isiOS:t(Wt),isAndroid:t(Qt),isOSX:t(zt),isLinux:t(qt),isSolaris:t(Xt),isFreeBSD:t(Yt),isChromeOS:t(Zt)}}function fe(e){return window.matchMedia(e).matches}function de(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}}function me(e,t){return e.dom===t.dom}function pe(e,t){return e=e.dom,t=t.dom,n=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(e.compareDocumentPosition(t)&n);var n}function ge(e,t){return(tn().browser.isIE()?pe:function(e,t){e=e.dom,t=t.dom;return e!==t&&e.contains(t)})(e,t)}function he(e,t){for(var n=sn(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}}function ve(e,t){var n,r,o,i,u={};return n=t,i=u,r=function(e,t){i[t]=e},o=_,he(e,function(e,t){(n(e,t)?r:o)(e,t)}),u}function ye(e){return e.dom.nodeName.toLowerCase()}function Se(t){return function(e){return cn(e)&&ye(e)===t}}function v(e,t){var r=e.dom;he(t,function(e,t){var n=r;if(!(V(e)||Q(e)||z(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")})}function Ce(e){return G(e.dom.attributes,function(e,t){return e[t.name]=t.value,e},{})}function be(e){return ne(e.dom.parentNode).map(k)}function Ne(e,t){return e=e.dom.childNodes,ne(e[t]).map(k)}function Oe(e){return Ne(e,0)}function Le(e){return Ne(e,e.dom.childNodes.length-1)}function Te(t,n){be(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})}function y(e,t){e.dom.appendChild(t.dom)}function Ae(t,e){s(e,function(e){y(t,e)})}function we(e){null!==(e=e.dom).parentNode&&e.parentNode.removeChild(e)}function xe(e){return t=!0,k(e.dom.cloneNode(t));var t}function ke(e,t){var t=function(e,t){t=nn(t),e=Ce(e);return v(t,e),t}(e,t),n=(Te(e,t),ln(e));return Ae(t,n),we(e),t}function De(t){return function(e){return e&&e.nodeName.toLowerCase()===t}}function t(t){return function(e){return e&&t.test(e.nodeName)}}function S(e){return e&&3===e.nodeType}function Ee(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}function Be(e,t){return e&&e.nodeName in t}function C(e,t,n){var r=e.isEmpty(t);return!(n&&0<e.select("span[data-mce-type=bookmark]",t).length)&&r}function Ie(e,t){return e.isChildOf(t,e.getRoot())}function Pe(e,t){var n,r,o,i=e.dom,u=e.schema.getBlockElements(),a=i.createFragment(),s=function(e){e=e.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e}(e);if(s&&((r=i.create(s)).tagName===s.toUpperCase()&&i.setAttribs(r,e.getParam("forced_root_block_attrs",{})),Be(t.firstChild,u)||a.appendChild(r)),t)for(;n=t.firstChild;){var c=n.nodeName;o||"SPAN"===c&&"bookmark"===n.getAttribute("data-mce-type")||(o=!0),Be(n,u)?(a.appendChild(n),r=null):(s?(r||(r=i.create(s),a.appendChild(r)),r):a).appendChild(n)}return s?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a}function Re(e,t,n){var r,o=I.select('span[data-mce-type="bookmark"]',t),i=Pe(e,n),u=I.createRng();u.setStartAfter(n),u.setEndAfter(t);for(var a=(u=u.extractContents()).firstChild;a;a=a.firstChild)if("LI"===a.nodeName&&e.dom.isEmpty(a)){I.remove(a);break}e.dom.isEmpty(u)||I.insertAfter(u,t),I.insertAfter(i,t),C(e.dom,n.parentNode)&&(r=n.parentNode,D.each(o,function(e){r.parentNode.insertBefore(e,n.parentNode)}),I.remove(r)),I.remove(n),C(e.dom,t)&&I.remove(t)}function Me(e){yn(e)&&ke(e,"dd")}function Ue(r,e,t){s(t,"Indent"===e?Me:function(e){var t,n;t=r,vn(n=e)?ke(n,"dt"):yn(n)&&be(n).each(function(e){return Re(t,e.dom,n.dom)})})}function _e(e,t){var n;return S(e)?{container:e,offset:t}:(n=on.getNode(e,t),S(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&S(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&S(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t})}function b(e){var t=e.cloneRange(),n=_e(e.startContainer,e.startOffset),n=(t.setStart(n.container,n.offset),_e(e.endContainer,e.endOffset));return t.setEnd(n.container,n.offset),t}function $e(e){var t,n,r=P(e),e=e.selection.getSelectedBlocks();return n=e,(t=r)&&1===n.length&&n[0]===t?c(r.querySelectorAll("ol,ul,dl"),E):c(e,function(e){return E(e)&&r!==e})}function Fe(e){var t=e.selection.getSelectedBlocks();return c(function(n,e){e=D.map(e,function(e){var t=n.dom.getParent(e,"li,dd,dt",N(n,e));return t||e});return Sn.unique(e)}(e,t),mn)}function N(e,t){return 0<(t=e.dom.getParents(t,"TD,TH")).length?t[0]:e.getBody()}function je(e){r=Cn(n=e,n.selection.getStart()),n=c(n.selection.getSelectedBlocks(),fn);var t,n,r=r.toArray().concat(n);return t=e,n=g(r,function(e){return Cn(t,e).getOr(e)}),Sn.unique(n)}function He(e,t,n){return void 0===n&&(n=F),e.exists(function(e){return n(e,t)})}function Ke(e,t,n){return e.isSome()&&t.isSome()?d(n(e.getOrDie(),t.getOrDie())):p()}function O(e,t,n){e.fire("ListMutation",{action:t,element:n})}function Ve(e,t,n){if(!V(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);var r;void 0!==(r=e).style&&q(r.style.getPropertyValue)&&e.style.setProperty(t,n)}function We(e,t){y(e.item,t.list)}function Qe(e,t,n){for(var r=[],o=0;o<n;o++)r.push(function(e,t){t={list:nn(t,e),item:nn("li",e)};return y(t.list,t.item),t}(e,t.listType));return r}function qe(e,t){for(var n=0;n<e.length-1;n++){var r=e[n].item,o="list-style-type",i="none";r=r.dom,Ve(r,o,i)}f(e).each(function(e){v(e.list,t.listAttributes),v(e.item,t.itemAttributes),Ae(e.item,t.content)})}function ze(r,e,o){return e=e.slice(0,o.depth),f(e).each(function(e){var t,n=function(e,t,n){e=nn("li",e);return v(e,t),Ae(e,n),e}(r,o.itemAttributes,o.content);n=n,y((t=e).list,n),t.item=n,t=o,ye((n=e).list)!==t.listType&&(n.list=ke(n.list,t.listType)),v(n.list,t.listAttributes)}),e}function Xe(e,t,n){for(var r=e=Qe(e,n,n.depth-t.length),o=1;o<r.length;o++)We(r[o-1],r[o]);return qe(e,n),n=e,Ke(f(t),te(n),We),t.concat(e)}function Ye(e){return Oe(e).exists(R)}function Ze(e){return 0<e.depth}function Ge(e){return e.isSelected}function Je(e){var t=ln(e),e=Le(e).exists(R)?t.slice(0,-1):t;return g(e,xe)}function et(e,t){function n(e){return e.depth===o&&!e.dirty}function r(e){return e.depth<o}var o=e[t].depth;return l(J(e.slice(0,t)),n,r).orThunk(function(){return l(e.slice(t+1),n,r)})}function tt(t){return s(t,function(n,e){et(t,e).fold(function(){n.dirty&&(n.listAttributes=ve(n.listAttributes,function(e,t){return"start"!==t}))},function(e){return e=e,(t=n).listType=e.listType,void(t.listAttributes=ae({},e.listAttributes));var t})}),t}function nt(r,e){return e=tt(e),g(e,function(e){e=e.content,t=(n||document).createDocumentFragment(),s(e,function(e){t.appendChild(e.dom)});var t,n=k(t);return k(Pe(r,n.dom))})}function rt(e,t){return t=tt(t),function(n,e){e=G(e,function(e,t){return(t.depth>e.length?Xe:ze)(n,e,t)},[]);return te(e).map(function(e){return e.list})}(e.contentDocument,t).toArray()}function ot(e,n){s(c(e,Ge),function(e){var t=e;switch(n){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})}function it(o,e,i){e=e,t=function(e){e=g(Fe(e),k);return Ke(h(e,j(Ye)),h(J(e),j(Ye)),function(e,t){return{start:e,end:t}})}(o),n=!1,r={get:function(){return n},set:function(e){n=e}};var t,n,r,e=g(e,function(e){return{sourceList:e,entries:Nn(0,t,r,e)}});s(e,function(e){ot(e.entries,i);t=o,r=e.entries;var t,n,r=ie(function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,u=e.length;i<u;i++){var a=e[i],s=t(a);s!==n&&(r.push(o),o=[]),n=s,o.push(a)}return 0!==o.length&&r.push(o),r}(r,Ze),function(e){return(te(e).exists(Ze)?rt:nt)(t,e)});s(r,function(e){O(o,"Indent"===i?"IndentList":"OutdentList",e.dom)}),n=e.sourceList,s(r,function(e){Te(n,e)}),we(e.sourceList)})}function ut(e,t){var n,r=g(je(e),k),o=g(c(Fe(e),pn),k),i=!1;return(r.length||o.length)&&(n=e.selection.getBookmark(),it(e,r,t),Ue(e,t,o),e.selection.moveToBookmark(n),e.selection.setRng(b(e.selection.getRng())),e.nodeChanged(),i=!0),i}function L(o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1===n.nodeType&&(t=M.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):M.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r}var i={};return e(!0),o.collapsed||e(),i}function T(o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,M.remove(t),!n.hasChildNodes())&&M.isBlock(n)&&n.appendChild(M.create("br")),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=M.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),b(t)}function A(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}}function at(e){return/\btox\-/.test(e.className)}function st(n,e){D.each(e,function(e,t){n.setAttribute(t,e)})}function w(e,t,n){var r,o=e,i=t,u=n;u=u["list-style-type"]||null,o.setStyle(i,"list-style-type",u),o=e,st(i=t,(r=n)["list-attributes"]),D.each(o.select("li",i),function(e){st(e,r["list-item-attributes"])})}function ct(e,t,n,r){var o=t[n?"startContainer":"endContainer"],t=t[n?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(t,o.childNodes.length-1)]||o),!n&&B(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(Ee(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o}function lt(u,a,s){var e,t=u.selection.getRng(),c="LI",n=N(u,u.selection.getStart(!0)),l=u.dom;"false"!==l.getContentEditable(u.selection.getNode())&&("DL"===(a=a.toUpperCase())&&(c="DT"),e=L(t),t=function(n,e,r){for(var o,i=[],u=n.dom,t=ct(n,e,!0,r),a=ct(n,e,!1,r),s=[],c=t;c&&(s.push(c),c!==a);c=c.nextSibling);return D.each(s,function(e){var t;Ee(n,e)?(i.push(e),o=null):u.isBlock(e)||B(e)?(B(e)&&u.remove(e),o=null):(t=e.nextSibling,An.isBookmarkNode(e)&&(E(t)||Ee(n,t)||!t&&e.parentNode===r)?o=null:(o||(o=u.create("p"),e.parentNode.insertBefore(o,e),i.push(o)),o.appendChild(e)))}),i}(u,t,n),D.each(t,function(e){var t,n,r,o=e.previousSibling,i=e.parentNode;mn(i)||(o&&E(o)&&o.nodeName===a&&function(e,t,n){e=e.getStyle(t,"list-style-type"),t=n?n["list-style-type"]:"";return e===(null===t?"":t)}(l,o,s)?(t=o,e=l.rename(e,c),o.appendChild(e)):(t=l.create(a),e.parentNode.insertBefore(t,e),t.appendChild(e),e=l.rename(e,c)),n=l,r=e,i=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],D.each(i,function(e){var t;return n.setStyle(r,((t={})[e]="",t))}),w(l,t,s),ft(u.dom,t))}),u.selection.setRng(T(e)))}function ft(e,t){var n,r=t.nextSibling;if(xn(e,t,r)){for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(r=t.previousSibling,xn(e,t,r)){for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}}function dt(i,e,t,u,a){var n,r=E(e);r&&e.nodeName===u&&!mt(a)?Tn(i):(lt(i,u,a),n=L(i.selection.getRng()),r=r?function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e],t,!0):t,D.each(r,function(e){var t,n,r,o;t=i,n=u,r=a,(e=e).nodeName!==n?(o=t.dom.rename(e,n),w(t.dom,o,r),O(t,A(n),o)):(w(t.dom,e,r),O(t,A(n),e))}),i.selection.setRng(T(n)))}function mt(e){return"list-style-type"in e}function pt(o,e){e=D.grep(o.select("ol,ul",e)),D.each(e,function(e){var t,n,r;t=o,"LI"===(r=(e=e).parentNode).nodeName&&r.firstChild===e&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),C(t,r)&&Dn.remove(r)):Dn.setStyle(r,"listStyleType","none")),E(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)})}function gt(e,t,n,r){var o=t.startContainer,t=t.startOffset;if(S(o)&&(n?t<o.data.length:0<t))return o;var i=e.schema.getNonEmptyElements(),u=(1===o.nodeType&&(o=on.getNode(o,t)),new un(o,r));for(n&&(t=e.dom,B(r=o))&&t.isBlock(r.nextSibling)&&!B(r.previousSibling)&&u.next();o=u[n?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(S(o)&&0<o.data.length)return o}}function ht(e,t){return 1===(t=t.childNodes).length&&!E(t[0])&&e.isBlock(t[0])}function vt(e,t,n){var r,o,i=ht(e,n)?n.firstChild:n;if(ht(n=e,o=t)&&n.remove(o.firstChild,!0),!C(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}function yt(t,e,n){var r,o=e.parentNode;Ie(t,e)&&Ie(t,n)&&(E(n.lastChild)&&(r=n.lastChild),o===n.lastChild&&B(o.previousSibling)&&t.remove(o.previousSibling),(o=n.lastChild)&&B(o)&&e.hasChildNodes()&&t.remove(o),C(t,n,!0)&&t.$(n).empty(),vt(t,e,n),r&&n.appendChild(r),o=ge(k(n),k(e))?t.getParents(e,E,n):[],t.remove(e),s(o,function(e){C(t,e)&&e!==t.getRoot()&&t.remove(e)}))}function St(e,t,n,r){var o,i,u,a=e.dom;a.isEmpty(r)?(i=n,u=r,(o=e).dom.$(u).empty(),yt(o.dom,i,u),o.selection.setCursorLocation(u,0)):(i=L(t),yt(a,n,r),e.selection.setRng(T(i)))}function Ct(o,i){var e=o.dom,t=o.selection,n=t.getStart(),n=N(o,n),u=e.getParent(t.getStart(),"LI",n);if(u){var r=u.parentNode;if(r===o.getBody()&&C(e,r))return!0;var a=b(t.getRng()),s=e.getParent(gt(o,a,i,n),"LI",n);if(s&&s!==u)return o.undoManager.transact(function(){var e,t,n,r;i?St(o,a,s,u):u.parentNode.firstChild===u?Ln(o):(e=o,n=u,r=s,t=L(t=a),yt(e.dom,n,r),n=T(t),e.selection.setRng(n))}),!0;if(!s&&!i&&0===a.startOffset&&0===a.endOffset)return o.undoManager.transact(function(){Tn(o)}),!0}return!1}function bt(r,o){var i=r.dom,e=r.selection.getStart(),u=N(r,e),a=i.getParent(e,i.isBlock,u);if(a&&i.isEmpty(a)){var e=b(r.selection.getRng()),s=i.getParent(gt(r,e,o,u),"LI",u);if(s)return r.undoManager.transact(function(){var e=i,t=a,n=u;n=e.getParent(t.parentNode,e.isBlock,n),e.remove(t),n&&e.isEmpty(n)&&e.remove(n),ft(i,s.parentNode),r.selection.select(s,!0),r.selection.collapse(o)}),!0}return!1}function Nt(e){return e=J(It(e).split("")),e=g(e,function(e,t){e=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*e}),G(e,function(e,t){return e+t},0)}function Ot(e){var t;return--e<0?"":(t=e%26,e=Math.floor(e/26),Ot(e)+String.fromCharCode("A".charCodeAt(0)+t))}function Lt(t){function e(e){return function(){return t.execCommand(e)}}t.hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:function(e){return wn(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:function(e){return wn(t,"UL",e.setActive)}}))}var Tt,At,wt,xt,kt,Dt=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Et=function(e,t){return{major:e,minor:t}},x={nu:Et,detect:function(e,t){var n,r,t=String(t).toLowerCase();return 0===e.length?se():(r=Dt(e=e,n=t))?Et((e=function(e){return Number(n.replace(r,"$"+e))})(1),e(2)):{major:0,minor:0}},unknown:se},Bt=function(e,t){var n=String(t).toLowerCase();return h(e,function(e){return e.search(n)})},It=(Tt=/^\s+|\s+$/g,function(e){return e.replace(Tt,"")}),r=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return n(e,"edge/")&&n(e,"chrome")&&n(e,"safari")&&n(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,r],search:function(e){return n(e,"chrome")&&!n(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return n(e,"msie")||n(e,"trident")}},{name:"Opera",versionRegexes:[r,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:e("firefox")},{name:"Safari",versionRegexes:[r,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(n(e,"safari")||n(e,"mobile/"))&&n(e,"applewebkit")}}],Pt=[{name:"Windows",search:e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return n(e,"iphone")||n(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:e("linux"),versionRegexes:[]},{name:"Solaris",search:e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Rt={browsers:m(r),oses:m(Pt)},Mt="Edge",Ut="Chrome",_t="IE",$t="Opera",Ft="Firefox",jt="Safari",Ht=function(){return ce({current:void 0,version:x.unknown()})},Kt=ce,Vt=(m(Mt),m(Ut),m(_t),m($t),m(Ft),m(jt),"Windows"),Wt="iOS",Qt="Android",qt="Linux",zt="OSX",Xt="Solaris",Yt="FreeBSD",Zt="ChromeOS",Gt=function(){return le({current:void 0,version:x.unknown()})},Jt=le,en=(m(Vt),m(Wt),m(Qt),m(qt),m(zt),m(Xt),m(Yt),m(Zt),function(e,t,n){var r,o,i,u,a,s,c,l=Rt.browsers(),f=Rt.oses(),t=t.bind(function(e){return r=l,ue(e.brands,function(t){var n=t.brand.toLowerCase();return h(r,function(e){return n===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(function(e){return{current:e.name,version:x.nu(parseInt(t.version,10),0)}})});var r}).orThunk(function(){return Bt(l,n=e).map(function(e){var t=x.detect(e.versionRegexes,n);return{current:e.name,version:t}});var n}).fold(Ht,Kt),f=Bt(f,r=e).map(function(e){var t=x.detect(e.versionRegexes,r);return{current:e.name,version:t}}).fold(Gt,Jt),d=(i=t,u=e,n=n,d=(o=f).isiOS()&&!0===/ipad/i.test(u),a=o.isiOS()&&!d,s=o.isiOS()||o.isAndroid(),c=s||n("(pointer:coarse)"),n=d||!a&&s&&n("(min-device-width:768px)"),s=a||s&&!n,i=i.isSafari()&&o.isiOS()&&!1===/safari/i.test(u),u=!s&&!n&&!i,{isiPad:m(d),isiPhone:m(a),isTablet:m(n),isPhone:m(s),isTouch:m(c),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:m(i),isDesktop:m(u)});return{browser:t,os:f,deviceType:d}}),tn=(xt=!(At=function(){return en(navigator.userAgent,ne(navigator.userAgentData),fe)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return xt||(xt=!0,wt=At.apply(null,e)),wt}),nn=function(e,t){t=(t||document).createElement(e);return de(t)},k=de,rn=function(e,t){e=e.dom;if(1!==e.nodeType)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},on=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),un=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),an=tinymce.util.Tools.resolve("tinymce.util.VK"),sn=Object.keys,cn=("undefined"!=typeof window||Function("return this;")(),kt=1,function(e){return e.dom.nodeType===kt}),ln=function(e){return g(e.dom.childNodes,k)},r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),D=tinymce.util.Tools.resolve("tinymce.util.Tools"),E=t(/^(OL|UL|DL)$/),fn=t(/^(OL|UL)$/),dn=De("ol"),mn=t(/^(LI|DT|DD)$/),pn=t(/^(DT|DD)$/),gn=t(/^(TH|TD)$/),B=De("br"),hn=function(e){return e.getParam("lists_indent_on_tab",!0)},I=r.DOM,vn=Se("dd"),yn=Se("dt"),Sn=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),P=function(e,t){t=t||e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",N(e,t))},Cn=function(e,t){e=e.dom.getParents(t,"ol,ul",N(e,t));return f(e)},R=function(e){return rn(e,"OL,UL")},bn=function(i,u,a,s){return Oe(s).filter(R).fold(function(){u.each(function(e){me(e.start,s)&&a.set(!0)});t=s,n=i,r=a.get();var t,n,r,e=be(t).filter(cn).map(function(e){return{depth:n,dirty:!1,isSelected:r,content:Je(t),itemAttributes:Ce(t),listAttributes:Ce(e),listType:ye(e)}}),o=(u.each(function(e){me(e.end,s)&&a.set(!1)}),Le(s).filter(R).map(function(e){return Nn(i,u,a,e)}).getOr([]));return e.toArray().concat(o)},function(e){return Nn(i,u,a,e)})},Nn=function(t,n,r,e){return ie(ln(e),function(e){return(R(e)?Nn:bn)(t+1,n,r,e)})},On=function(e){return ut(e,"Indent")},Ln=function(e){return ut(e,"Outdent")},Tn=function(e){return ut(e,"Flatten")},An=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),M=r.DOM,wn=function(e,t,n){function r(e){e=l(e.parents,E,gn).filter(function(e){return e.nodeName===t&&!at(e)}).isSome(),n(e)}var o=e.dom.getParents(e.selection.getNode());return r({parents:o}),e.on("NodeChange",r),function(){return e.off("NodeChange",r)}},xn=function(e,t,n){return o=n,(r=t)&&o&&E(r)&&r.nodeName===o.nodeName&&(r=n,(o=e).getStyle(t,"list-style-type",!0)===o.getStyle(r,"list-style-type",!0))&&t.className===n.className;var r,o},kn=function(e,t,n){var r,o=P(e),i=$e(e),n=u(n)?n:{};0<i.length?dt(e,o,i,t,n):(i=t,t=n,(n=o)!==(o=e).getBody()&&(n?n.nodeName!==i||mt(t)||at(n)?(e=L(o.selection.getRng()),w(o.dom,n,t),r=o.dom.rename(n,i),ft(o.dom,r),o.selection.setRng(T(e)),lt(o,i,t),O(o,A(i),r)):Tn(o):(lt(o,i,t),O(o,A(i),n))))},Dn=r.DOM,En=function(e,t){return e.selection.isCollapsed()?Ct(r=e,t=t)||bt(r,t):(r=(n=e).selection.getStart(),t=N(n,r),!!(n.dom.getParent(r,"LI,DT,DD",t)||0<Fe(n).length)&&(n.undoManager.transact(function(){n.execCommand("Delete"),pt(n.dom,n.getBody())}),!0));var n,r},Bn=function(t){t.on("keydown",function(e){e.keyCode===an.BACKSPACE?En(t,!1)&&e.preventDefault():e.keyCode===an.DELETE&&En(t,!0)&&e.preventDefault()})},In=function(n,e){var r=P(n);n.undoManager.transact(function(){u(e.styles)&&n.dom.setStyles(r,e.styles),u(e.attrs)&&he(e.attrs,function(e,t){n.dom.setAttrib(r,t,e)})})},Pn=function(t){var e,n=P(t);dn(n)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(n={start:t.dom.getAttrib(n,"start","1"),listStyleType:d(t.dom.getStyle(n,"list-style-type"))},e=parseInt(n.start,10),He(n.listStyleType,"upper-alpha")?Ot(e):He(n.listStyleType,"lower-alpha")?Ot(e).toLowerCase():n.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){!function(e){switch(/^[0-9]+$/.test(t=e)?2:/^[A-Z]+$/.test(t)?0:/^[a-z]+$/.test(t)?1:0<t.length?4:3){case 2:return d({listStyleType:p(),start:e});case 0:return d({listStyleType:d("upper-alpha"),start:Nt(e).toString()});case 1:return d({listStyleType:d("lower-alpha"),start:Nt(e).toString()});case 3:return d({listStyleType:p(),start:""});case 4:return p()}var t}(e.getData().start).each(function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})}),e.close()}})},Rn=function(t,n){return function(){var e=P(t);return e&&e.nodeName===n}},Mn=function(e){e.addCommand("mceListProps",function(){Pn(e)})},Un=function(t){t.on("keydown",function(e){e.keyCode!==an.TAB||an.metaKeyPressed(e)||t.undoManager.transact(function(){(e.shiftKey?Ln:On)(t)&&e.preventDefault()})})};K.add("lists",function(e){var n,t,r,o;return!1===e.hasPlugin("rtc",!0)?(hn(t=e)&&Un(t),Bn(t),(n=e).on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"indent"===e?On(n):"outdent"===e&&Ln(n)}),n.addCommand("InsertUnorderedList",function(e,t){kn(n,"UL",t)}),n.addCommand("InsertOrderedList",function(e,t){kn(n,"OL",t)}),n.addCommand("InsertDefinitionList",function(e,t){kn(n,"DL",t)}),n.addCommand("RemoveList",function(){Tn(n)}),Mn(n),n.addCommand("mceListUpdate",function(e,t){u(t)&&In(n,t)}),n.addQueryStateHandler("InsertUnorderedList",Rn(n,"UL")),n.addQueryStateHandler("InsertOrderedList",Rn(n,"OL")),n.addQueryStateHandler("InsertDefinitionList",Rn(n,"DL"))):Mn(e),Lt(e),(r=e).ui.registry.addMenuItem("listprops",{text:"List properties...",icon:"ordered-list",onAction:function(){return r.execCommand("mceListProps")},onSetup:function(t){return wn(r,"OL",function(e){return t.setDisabled(!e)})}}),r.ui.registry.addContextMenu("lists",{update:function(e){e=P(r,e);return dn(e)?["listprops"]:[]}}),o=e,{backspaceDelete:function(e){En(o,e)}}})}();