!function(){"use strict";function r(t){return function(n){return e=typeof(n=n),(null===n?"null":"object"==e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e)===t;var e}}function o(e){return function(n){return typeof n===e}}function u(e){return function(n){return e===n}}function i(n,e){return n===e}var H=r("string"),V=r("object"),a=r("array"),U=u(null),c=o("boolean"),q=u(void 0),G=function(n){return!(null==n)},$=o("function"),K=o("number"),p=function(){},d=function(n){return function(){return n}},w=function(n){return n};function y(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.concat(n);return r.apply(null,t)}}function X(e){return function(n){return!e(n)}}function Y(){return J}var C=d(!1),S=d(!0),J={fold:function(n,e){return n()},isSome:C,isNone:S,getOr:ie=w,getOrThunk:Q,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:d(null),getOrUndefined:d(void 0),or:ie,orThunk:Q,map:Y,each:p,bind:Y,exists:C,forall:S,filter:function(){return J},toArray:function(){return[]},toString:d("none()")};function Q(n){return n()}function Z(t){function n(){return o}function e(n){return n(t)}var r=d(t),o={fold:function(n,e){return e(t)},isSome:S,isNone:C,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return Z(n(t))},each:function(n){n(t)},bind:e,exists:e,forall:e,filter:function(n){return n(t)?o:J},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o}function nn(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t}function en(n,e){for(var t={},r=0,o=n.length;r<o;r++){var u=n[r];t[String(u)]=e(u,r)}return t}function tn(n){return[n]}function rn(n,e){return 0<=e&&e<n.length?T.some(n[e]):T.none()}var T={some:Z,none:Y,from:function(n){return null==n?J:Z(n)}},on=Array.prototype.slice,un=Array.prototype.indexOf,cn=Array.prototype.push,ln=function(n,e){return un.call(n,e)},l=function(n,e){return-1<ln(n,e)},g=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return!0;return!1},b=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},x=function(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)},an=function(n,e){for(var t=n.length-1;0<=t;t--)e(n[t],t)},fn=function(n,e){for(var t=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(e(i,o)?t:r).push(i)}return{pass:t,fail:r}},R=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},sn=function(n,t,r){return an(n,function(n,e){r=t(r,n,e)}),r},mn=function(n,t,r){return x(n,function(n,e){r=t(r,n,e)}),r},dn=function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return T.some(u);if(t(u,r))break}return T.none()},gn=function(n,e){return dn(n,e,C)},pn=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return T.some(t);return T.none()},bn=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!a(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);cn.apply(e,n[t])}return e},h=function(n,e){return bn(b(n,e))},hn=function(n,e){for(var t=0,r=n.length;t<r;++t)if(!0!==e(n[t],t))return!1;return!0},vn=function(n,e){n=on.call(n,0);return n.sort(e),n},wn=function(n){return rn(n,0)},yn=function(n){return rn(n,n.length-1)},Cn=function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return T.none()},v=function(){return(v=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function Sn(n,e,t){if(t||2===arguments.length)for(var r,o=0,u=e.length;o<u;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return n.concat(r||Array.prototype.slice.call(e))}function Tn(t){var r,o=!1;return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o||(o=!0,r=t.apply(null,n)),r}}function xn(){return ee(0,0)}function t(n,e){return-1!==n.indexOf(e)}function Rn(n,e){return oe(n,e,0)}function Dn(n,e){return oe(n,e,n.length-e.length)}function On(n){return 0<n.length}function An(e){return function(n){return t(n,e)}}function kn(n){function e(n){return function(){return t===n}}var t=n.current,n=n.version;return{current:t,version:n,isEdge:e(ae),isChrome:e(fe),isIE:e(se),isOpera:e(me),isFirefox:e(de),isSafari:e(ge)}}function In(n){function e(n){return function(){return t===n}}var t=n.current,n=n.version;return{current:t,version:n,isWindows:e(he),isiOS:e(ve),isAndroid:e(we),isOSX:e(Ce),isLinux:e(ye),isSolaris:e(Se),isFreeBSD:e(Te),isChromeOS:e(xe)}}function Bn(n){return window.matchMedia(n).matches}function Mn(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}function En(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function Pn(n,e){return e=void 0===e?document:e.dom,En(e)?T.none():T.from(e.querySelector(n)).map(D.fromDom)}function Nn(n,e){return n=n.dom,e=e.dom,t=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(e)&t);var t}function zn(n,e){return(ke().browser.isIE()?Nn:function(n,e){n=n.dom,e=e.dom;return n!==e&&n.contains(e)})(n,e)}function Ln(n,e){var t,r,o,u,i={};return t=e,u=i,r=function(n,e){u[e]=n},o=p,A(n,function(n,e){(t(n,e)?r:o)(n,e)}),i}function _n(n){return Pe(n).length}function Wn(n,e){return jn(n,e)?T.from(n[e]):T.none()}function jn(n,e){return Ne.call(n,e)}function Fn(n,e,t){return{element:n,rowspan:e,colspan:t}}function Hn(e){return function(n){return Ge(n)===e}}function Vn(n){return Ge(n)===Ie||"#comment"===I(n)}function Un(e){return function(n){return $e(n)&&I(n)===e}}function qn(n){return D.fromDom(n.dom.ownerDocument)}function Gn(n,e){for(var t=$(e)?e:C,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=D.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}function $n(n){return T.from(n.dom.previousSibling).map(D.fromDom)}function Kn(n,e){return n=n.dom.childNodes,T.from(n[e]).map(D.fromDom)}function Xn(n){return D.fromDom(n.dom.host)}function Yn(n){if(null==(n=n.dom.body))throw new Error("Body is not available yet");return D.fromDom(n)}function Jn(n,e,t){return r=function(n){return Be(n,e)},R(Gn(n,t),r);var r}function Qn(n,e){return Me(e,n)}var Zn,ne=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}},ee=function(n,e){return{major:n,minor:e}},te={nu:ee,detect:function(n,e){var t,r,e=String(e).toLowerCase();return 0===n.length?xn():(r=ne(n=n,t=e))?ee((n=function(n){return Number(t.replace(r,"$"+n))})(1),n(2)):{major:0,minor:0}},unknown:xn},re=function(n,e){var t=String(e).toLowerCase();return gn(n,function(n){return n.search(t)})},oe=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},ue=(Zn=/^\s+|\s+$/g,function(n){return n.replace(Zn,"")}),ie=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ie=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return t(n,"edge/")&&t(n,"chrome")&&t(n,"safari")&&t(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ie],search:function(n){return t(n,"chrome")&&!t(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return t(n,"msie")||t(n,"trident")}},{name:"Opera",versionRegexes:[ie,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:An("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:An("firefox")},{name:"Safari",versionRegexes:[ie,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(t(n,"safari")||t(n,"mobile/"))&&t(n,"applewebkit")}}],ce=[{name:"Windows",search:An("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return t(n,"iphone")||t(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:An("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:An("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:An("linux"),versionRegexes:[]},{name:"Solaris",search:An("sunos"),versionRegexes:[]},{name:"FreeBSD",search:An("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:An("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],le={browsers:d(ie),oses:d(ce)},ae="Edge",fe="Chrome",se="IE",me="Opera",de="Firefox",ge="Safari",pe=function(){return kn({current:void 0,version:te.unknown()})},be=kn,he=(d(ae),d(fe),d(se),d(me),d(de),d(ge),"Windows"),ve="iOS",we="Android",ye="Linux",Ce="OSX",Se="Solaris",Te="FreeBSD",xe="ChromeOS",Re=function(){return In({current:void 0,version:te.unknown()})},De=In,Oe=(d(he),d(ve),d(we),d(ye),d(Ce),d(Se),d(Te),d(xe),function(n,e,t){var r,o,u,i,c,l,a,f=le.browsers(),s=le.oses(),e=e.bind(function(n){return r=f,Cn(n.brands,function(e){var t=e.brand.toLowerCase();return gn(r,function(n){return t===(null==(n=n.brand)?void 0:n.toLowerCase())}).map(function(n){return{current:n.name,version:te.nu(parseInt(e.version,10),0)}})});var r}).orThunk(function(){return re(f,t=n).map(function(n){var e=te.detect(n.versionRegexes,t);return{current:n.name,version:e}});var t}).fold(pe,be),s=re(s,r=n).map(function(n){var e=te.detect(n.versionRegexes,r);return{current:n.name,version:e}}).fold(Re,De),m=(u=e,i=n,t=t,m=(o=s).isiOS()&&!0===/ipad/i.test(i),c=o.isiOS()&&!m,l=o.isiOS()||o.isAndroid(),a=l||t("(pointer:coarse)"),t=m||!c&&l&&t("(min-device-width:768px)"),l=c||l&&!t,u=u.isSafari()&&o.isiOS()&&!1===/safari/i.test(i),i=!l&&!t&&!u,{isiPad:d(m),isiPhone:d(c),isTablet:d(t),isPhone:d(l),isTouch:d(a),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:d(u),isDesktop:d(i)});return{browser:e,os:s,deviceType:m}}),Ae=Tn(function(){return Oe(navigator.userAgent,T.from(navigator.userAgentData),Bn)}),ke=function(){return Ae()},Ie=8,D={fromHtml:function(n,e){e=(e||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Mn(e.childNodes[0])},fromTag:function(n,e){e=(e||document).createElement(n);return Mn(e)},fromText:function(n,e){e=(e||document).createTextNode(n);return Mn(e)},fromDom:Mn,fromPoint:function(n,e,t){return T.from(n.dom.elementFromPoint(e,t)).map(Mn)}},Be=function(n,e){n=n.dom;if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Me=function(n,e){e=void 0===e?document:e.dom;return En(e)?[]:b(e.querySelectorAll(n),D.fromDom)},O=function(n,e){return n.dom===e.dom},Ee=Be,Pe=Object.keys,Ne=Object.hasOwnProperty,A=function(n,e){for(var t=Pe(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}},ze=function(n,t){return r=function(n,e){return{k:e,v:t(n,e)}},o={},A(n,function(n,e){n=r(n,e);o[n.k]=n.v}),o;var r,o},Le=function(n,t){var r=[];return A(n,function(n,e){r.push(t(n,e))}),r},_e=function(n){return Le(n,w)},We=function(n,e){return jn(n,e)&&void 0!==n[e]&&null!==n[e]},je=["tfoot","thead","tbody","colgroup"],Fe=function(n,e){return{rows:n,columns:e}},He=function(n,e,t,r,o,u){return{element:n,rowspan:e,colspan:t,row:r,column:o,isLocked:u}},Ve=function(n,e,t){return{element:n,cells:e,section:t}},k=function(n,e,t){return{element:n,isNew:e,isLocked:t}},Ue=function(n,e,t,r){return{element:n,cells:e,section:t,isNew:r}},qe=function(n,e){return{element:n,columns:e}},I=("undefined"!=typeof window||Function("return this;")(),function(n){return n.dom.nodeName.toLowerCase()}),Ge=function(n){return n.dom.nodeType},$e=Hn(1),Ke=Hn(3),Xe=Hn(9),Ye=Hn(11),Je=function(n){return Xe(n)?n:qn(n)},Qe=function(n){return T.from(n.dom.parentNode).map(D.fromDom)},Ze=function(n){return T.from(n.dom.nextSibling).map(D.fromDom)},f=function(n){return b(n.dom.childNodes,D.fromDom)},nt=function(n){return Kn(n,0)},et=function(n){return Ye(n)&&G(n.dom.host)},ie=$(Element.prototype.attachShadow)&&$(Node.prototype.getRootNode),tt=d(ie),rt=ie?function(n){return D.fromDom(n.dom.getRootNode())}:Je,ot=function(n){return G(n.dom.shadowRoot)},ut=function(n){var e,t,r,o=Ke(n)?n.dom.parentNode:n.dom;return null!=o&&null!==o.ownerDocument&&(e=o.ownerDocument,function(n){n=rt(n);return et(n)?T.some(n):T.none()}(D.fromDom(o)).fold(function(){return e.body.contains(o)},(t=ut,r=Xn,function(n){return t(r(n))})))},it=function(n,e){var t=[];return x(f(n),function(n){t=(t=e(n)?t.concat([n]):t).concat(it(n,e))}),t},ct=function(n,e){return t=function(n){return Be(n,e)},R(f(n),t);var t};function lt(n,e,t,r,o){return n(t,r)?T.some(t):$(o)&&o(t)?T.none():e(t,r,o)}function at(n,r){function o(n){for(var e=0;e<n.childNodes.length;e++){var t=D.fromDom(n.childNodes[e]);if(r(t))return T.some(t);t=o(n.childNodes[e]);if(t.isSome())return t}return T.none()}return o(n.dom)}function ft(n,e){return Pn(e,n)}function st(n,e){var t=n.dom;A(e,function(n,e){Vt(t,e,n)})}function mt(n){return mn(n.dom.attributes,function(n,e){return n[e.name]=e.value,n},{})}function dt(n,e,t){return n.isSome()&&e.isSome()?T.some(t(n.getOrDie(),e.getOrDie())):T.none()}function gt(n){return void 0!==n.style&&$(n.style.getPropertyValue)}function pt(n,e){return rr(n,e,1)}function bt(n){return Un("col")(n)?1<rr(n,"span",1):1<pt(n,"colspan")}function ht(n){return 1<pt(n,"rowspan")}function vt(n){return cr(n,"th,td")}function wt(n){return Be(n,"colgroup")?ct(n,"col"):h(mr(n),function(n){return ct(n,"col")})}function yt(n){var e=sr(n),n=Sn(Sn([],mr(n),!0),e,!0);return dr(n,gr)}function Ct(n,e){return Ue(n.element,e,n.section,n.isNew)}function St(n,e,t){return t=b(n.cells,t),Ue(e(n.element),t,n.section,!0)}function Tt(n,e){return n=h(n.all,function(n){return n.cells}),R(n,e)}function xt(n){var a={},e=[],f=wn(n).map(function(n){return n.element}).bind(E).bind(Sr).getOr({}),t=0,s=0,m=0,r=(n=fn(n,function(n){return"colgroup"===n.section})).pass,n=n.fail;x(n,function(n){var l=[];x(n.cells,function(n){for(var e=0;void 0!==a[xr(m,e)];)e++;for(var t=We(f,e.toString()),r=He(n.element,n.rowspan,n.colspan,m,e,t),o=0;o<n.colspan;o++)for(var u=0;u<n.rowspan;u++){var i=e+o,c=xr(m+u,i);a[c]=r,s=Math.max(s,i+1)}l.push(r)}),t++,e.push(Ve(n.element,l,n.section)),m++});r=(n=yn(r).map(function(n){var e=Rr(n);return{colgroups:[qe(n.element,_e(e))],columns:e}}).getOrThunk(function(){return{colgroups:[],columns:{}}})).columns,n=n.colgroups;return{grid:Fe(t,s),access:a,all:e,columns:r,colgroups:n}}function Rt(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,e=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&e>=n.startRow}function Dt(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow}function Ot(n,e,t){var e=z.findItem(n,e,O),r=z.findItem(n,t,O);return e.bind(function(t){return r.map(function(n){return e=t,n=n,{startRow:Math.min(e.row,n.row),startCol:Math.min(e.column,n.column),finishRow:Math.max(e.row+e.rowspan-1,n.row+n.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,n.column+n.colspan-1)};var e})})}function At(c,n,e){return Ot(c,n,e).bind(function(n){for(var e=c,t=n,r=!0,o=y(Dt,t),u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++)r=r&&z.getAt(e,u,i).exists(o);return r?T.some(t):T.none()})}function kt(e,n,t){return Ot(e,n,t).map(function(n){n=z.filterItems(e,y(Rt,n));return b(n,function(n){return n.element})})}function It(n,e){return z.findItem(n,e,function(n,e){return zn(e,n)}).map(function(n){return n.element})}function Bt(e,u,i){return E(e).bind(function(n){var t,r,o,n=Dr(n);return t=n,r=u,o=i,z.findItem(t,e,O).bind(function(n){var e=0<r?n.row+n.rowspan-1:n.row,n=0<o?n.column+n.colspan-1:n.column;return z.getAt(t,e+r,n+o).map(function(n){return n.element})})})}function Mt(n,e,t,r,o){var u=Dr(n),t=O(n,t)?T.some(e):It(u,e),i=O(n,o)?T.some(r):It(u,r);return t.bind(function(e){return i.bind(function(n){return kt(u,e,n)})})}function Et(e,t){nt(e).fold(function(){L(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})}function Pt(n,e){Or(n,e),L(e,n)}function Nt(t,r){x(r,function(n,e){e=0===e?t:r[e-1];Ar(e,n)})}function zt(n){var e=f(n);0<e.length&&kr(n,e),_(n)}var Lt,_t,Wt=function(n,e,t){for(var r=n.dom,o=$(t)?t:C;r.parentNode;){var r=r.parentNode,u=D.fromDom(r);if(e(u))return T.some(u);if(o(u))break}return T.none()},jt=function(n,e,t){return lt(function(n,e){return e(n)},Wt,n,e,t)},Ft=function(n,e,t){return Wt(n,function(n){return Be(n,e)},t)},Ht=function(n,e){return t=function(n){return Be(n,e)},gn(n.dom.childNodes,function(n){return t(D.fromDom(n))}).map(D.fromDom);var t},s=function(n,e,t){return lt(function(n,e){return Be(n,e)},Ft,n,e,t)},Vt=function(n,e,t){if(!(H(t)||c(t)||K(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},B=function(n,e,t){Vt(n.dom,e,t)},Ut=function(n,e){n=n.dom.getAttribute(e);return null===n?void 0:n},qt=function(n,e){return T.from(Ut(n,e))},M=function(n,e){n.dom.removeAttribute(e)},Gt=function(n,e,t){return void 0===t&&(t=i),n.exists(function(n){return t(n,e)})},$t=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},Kt=function(n,e){return n?T.some(e):T.none()},Xt=function(n,e,t){if(!H(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);gt(n)&&n.style.setProperty(e,t)},Yt=function(n,e){gt(n)&&n.style.removeProperty(e)},m=function(n,e,t){n=n.dom;Xt(n,e,t)},Jt=function(n,e){var t=n.dom;A(e,function(n,e){Xt(t,e,n)})},Qt=function(n,e){var t=n.dom,r=window.getComputedStyle(t).getPropertyValue(e);return""!==r||ut(n)?r:Zt(t,e)},Zt=function(n,e){return gt(n)?n.style.getPropertyValue(e):""},nr=function(n,e){n=n.dom,n=Zt(n,e);return T.from(n).filter(function(n){return 0<n.length})},er=function(n,e){var t=n.dom;Yt(t,e),Gt(qt(n,"style").map(ue),"")&&M(n,"style")},tr=function(n,e){n=n.dom,e=e.dom;gt(n)&&gt(e)&&(e.style.cssText=n.style.cssText)},rr=function(n,e,t){return void 0===t&&(t=0),qt(n,e).map(function(n){return parseInt(n,10)}).getOr(t)},or=function(n,e){return parseInt(Qt(n,e),10)},ur=d(10),ir=d(10),cr=function(n,e){return lr(n,e,S)},lr=function(n,e,t){return h(f(n),function(n){return Be(n,e)?t(n)?[n]:[]:lr(n,e,t)})},ar=function(n,e,t){return(t=void 0===t?C:t)(e)?T.none():l(n,I(e))?T.some(e):Ft(e,n.join(","),function(n){return Be(n,"table")||t(n)})},fr=function(n,e){return ar(["td","th"],n,e)},E=function(n,e){return s(n,"table",e)},sr=function(n){return cr(n,"tr")},mr=function(n){return E(n).fold(d([]),function(n){return ct(n,"colgroup")})},dr=function(n,t){return b(n,function(n){var e;return"colgroup"===I(n)?(e=b(wt(n),function(n){var e=rr(n,"span",1);return Fn(n,1,e)}),Ve(n,e,"colgroup")):(e=b(vt(n),function(n){var e=rr(n,"rowspan",1),t=rr(n,"colspan",1);return Fn(n,e,t)}),Ve(n,e,t(n)))})},gr=function(n){return Qe(n).map(function(n){n=I(n);return l(je,n)?n:"tbody"}).getOr("tbody")},pr=function(n,e){return dr(n,function(){return e})},br=function(n,e,t){var r=n.cells,o=r.slice(0,e),r=r.slice(e),e=o.concat(t).concat(r);return Ct(n,e)},hr=function(n,e,t){return br(n,e,[t])},vr=function(n,e,t){n.cells[e]=t},wr=function(n,e){return n.cells[e]},P=function(n,e){return wr(n,e).element},yr=function(n){return n.cells.length},N=function(n){n=fn(n,function(n){return"colgroup"===n.section});return{rows:n.fail,cols:n.pass}},Cr="data-snooker-locked-cols",Sr=function(n){return qt(n,Cr).bind(function(n){return T.from(n.match(/\d+/g))}).map(function(n){return en(n,S)})},Tr=function(n){n=mn(N(n).rows,function(t,n){return x(n.cells,function(n,e){n.isLocked&&(t[e]=!0)}),t},{}),n=Le(n,function(n,e){return parseInt(e,10)});return vn(n)},xr=function(n,e){return n+","+e},Rr=function(n){var r={},o=0;return x(n.cells,function(e){var t=e.colspan;nn(t,function(n){n=o+n;r[n]={element:e.element,colspan:t,column:n}}),o+=t}),r},z={fromTable:function(n){n=yt(n);return xt(n)},generate:xt,getAt:function(n,e,t){return T.from(n.access[xr(e,t)])},findItem:function(n,e,t){n=Tt(n,function(n){return t(e,n.element)});return 0<n.length?T.some(n[0]):T.none()},filterItems:Tt,justCells:function(n){return h(n.all,function(n){return n.cells})},justColumns:function(n){return _e(n.columns)},hasColumns:function(n){return 0<Pe(n.columns).length},getColumnAt:function(n,e){return T.from(n.columns[e])}},Dr=z.fromTable,Or=function(e,t){Qe(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},Ar=function(n,e){Ze(n).fold(function(){Qe(n).each(function(n){L(n,e)})},function(n){Or(n,e)})},L=function(n,e){n.dom.appendChild(e.dom)},kr=function(e,n){x(n,function(n){Or(e,n)})},Ir=function(e,n){x(n,function(n){L(e,n)})},Br=function(n){n.dom.textContent="",x(f(n),function(n){_(n)})},_=function(n){n=n.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},Mr=(Lt=Ke,_t="text",{get:function(n){if(Lt(n))return Er(n).getOr("");throw new Error("Can only get "+_t+" value of a "+_t+" node")},getOption:Er,set:function(n,e){if(!Lt(n))throw new Error("Can only set raw "+_t+" value of a "+_t+" node");n.dom.nodeValue=e}});function Er(n){return Lt(n)?T.from(n.dom.nodeValue):T.none()}function Pr(n,e){return Mr.set(n,e)}var Nr=function(n){return Mr.get(n)},zr=function(n){return Mr.getOption(n)},Lr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function _r(){return{up:d({selector:Ft,closest:s,predicate:Wt,all:Gn}),down:d({selector:Qn,predicate:it}),styles:d({get:Qt,getRaw:nr,set:m,remove:er}),attrs:d({get:Ut,set:B,remove:M,copyTo:function(n,e){n=mt(n);st(e,n)}}),insert:d({before:Or,after:Ar,afterAll:Nt,append:L,appendAll:Ir,prepend:Et,wrap:Pt}),remove:d({unwrap:zt,remove:_}),create:d({nu:D.fromTag,clone:function(n){return D.fromDom(n.dom.cloneNode(!1))},text:D.fromText}),query:d({comparePosition:function(n,e){return n.dom.compareDocumentPosition(e.dom)},prevSibling:$n,nextSibling:Ze}),property:d({children:f,name:I,parent:Qe,document:function(n){return Je(n).dom},isText:Ke,isComment:Vn,isElement:$e,isSpecial:function(n){n=I(n);return l(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],n)},getLanguage:function(n){return $e(n)?qt(n,"lang"):T.none()},getText:Nr,setText:Pr,isBoundary:function(n){return!!$e(n)&&("body"===I(n)||l(Lr,I(n)))},isEmptyTag:function(n){return!!$e(n)&&l(["br","img","hr","input"],I(n))},isNonEditable:function(n){return $e(n)&&"false"===Ut(n,"contenteditable")}}),eq:O,is:Ee}}function Wr(t,r,n,e){return n=r(t,n),sn(e,function(n,e){e=r(t,e);return bo(t,n,e)},n)}function jr(t,n){return ho(wo,function(n,e){return t(e)},n)}function Fr(n){return Ft(n,"table")}function Hr(n,e,t,r,o){return u=o,gn(n,function(n){return Be(n,u)}).bind(function(n){return Bt(n,e,t).bind(function(n){return t=r,Ft(e=n,"table").bind(function(n){return ft(n,t).bind(function(n){return yo(n,e).bind(function(e){return e.boxes.map(function(n){return{boxes:n,start:e.start,finish:e.finish}})})})});var e,t})});var u}function Vr(r,n,e){return So(r,n,e).bind(function(o){function n(n){return O(r,n)}var e="thead,tfoot,tbody,table",t=Ft(o.first,e,n),u=Ft(o.last,e,n);return t.bind(function(r){return u.bind(function(n){var e,t;return O(r,n)?(n=o.table,e=o.first,t=o.last,n=Dr(n),At(n,e,t)):T.none()})})})}function Ur(n,e,t,r){return n.fold(e,t,r)}function qr(n,e){return D.fromDom(n.dom.cloneNode(e))}function Gr(n){return qr(n,!1)}function $r(n){return qr(n,!0)}function Kr(n,e){return e=D.fromTag(e),n=mt(n),st(e,n),e}function Xr(t,r){function n(n){var e=r(n);return e<=0||null===e?(n=Qt(n,t),parseFloat(n)||0):e}function o(t,n){return mn(n,function(n,e){e=Qt(t,e),e=void 0===e?0:parseInt(e,10);return isNaN(e)?n:n+e},0)}return{set:function(n,e){if(!K(e)&&!e.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+e);n=n.dom;gt(n)&&(n.style[t]=e+"px")},get:n,getOuter:n,aggregate:o,max:function(n,e,t){n=o(n,t);return n<e?e-n:0}}}function Yr(){var n=ke().browser;return n.isIE()||n.isEdge()}function Jr(n,e,t){return ko(Qt(n,e),t)}function Qr(n){return Qt(n,"box-sizing")}function Zr(n,e){var t=(t=n.dom).getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?t:Io(n,t,"left","right")}function no(n,e,t){var r=n();return gn(r,e).orThunk(function(){return T.from(r[0]).orThunk(t)}).map(function(n){return n.element})}function eo(e,t){var n,r;return t<0||t>=e.length-1?T.none():(n=e[t].fold(function(){var n=function(n){n=on.call(n,0);return n.reverse(),n}(e.slice(0,t));return Cn(n,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return T.some({value:n,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return Cn(n,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return T.some({value:n,delta:1})}),n.bind(function(t){return r.map(function(n){var e=n.delta+t.delta;return Math.abs(n.value-t.value)/e})}))}function to(e,t){return function(n){return"rtl"==("rtl"===Qt(n,"direction")?"rtl":"ltr")?t:e}}function ro(n){return _o.getOuter(n)}function oo(t,r){return{left:t,top:r,translate:function(n,e){return oo(t+n,r+e)}}}function uo(n,e){return{row:n,y:e}}function io(n,e){return{col:n,x:e}}function co(n){return Vo(n).left+Eo(n)}function lo(n){return Vo(n).left}function ao(n,e){return io(n,lo(e))}function fo(n,e){return io(n,co(e))}function so(n){return Vo(n).top}function mo(n,e){return uo(n,so(e))}function go(n,e){return uo(n,so(e)+ro(e))}function po(t,e,r){var n,o;return 0===r.length?[]:(n=b(r.slice(1),function(n,e){return n.map(function(n){return t(e,n)})}),o=r[r.length-1].map(function(n){return e(r.length-1,n)}),n.concat([o]))}var bo=function(e,n,t){return n.bind(function(n){return t.filter(y(e.eq,n))})},ho=function(n,e,t){return 0<t.length?Wr(n,e,t[0],t.slice(1)):T.none()},vo=function(e,n,t,r){void 0===r&&(r=C);function o(e){return pn(e,r).fold(function(){return e},function(n){return e.slice(0,n+1)})}var n=[n].concat(e.up().all(n)),t=[t].concat(e.up().all(t)),n=o(n),u=o(t),t=gn(n,function(n){return g(u,y(e.eq,n))});return{firstpath:n,secondpath:u,shared:t}},wo=_r(),yo=function(u,i,c){function l(e){return function(n){return void 0!==c&&c(n)||O(n,e)}}return O(u,i)?T.some({boxes:T.some([u]),start:u,finish:i}):Fr(u).bind(function(o){return Fr(i).bind(function(r){var n,e,t;return O(o,r)?T.some({boxes:function(n,e,t){n=Dr(n);return kt(n,e,t)}(o,u,i),start:u,finish:i}):zn(o,r)?(e=0<(n=Jn(i,"td,th",l(o))).length?n[n.length-1]:i,T.some({boxes:Mt(o,u,o,i,r),start:u,finish:e})):zn(r,o)?(e=0<(n=Jn(u,"td,th",l(r))).length?n[n.length-1]:u,T.some({boxes:Mt(r,u,o,i,r),start:u,finish:e})):vo(wo,u,i,t).shared.bind(function(n){return s(n,"table",c).bind(function(n){var e=Jn(i,"td,th",l(n)),e=0<e.length?e[e.length-1]:i,t=Jn(u,"td,th",l(n)),t=0<t.length?t[t.length-1]:u;return T.some({boxes:Mt(n,u,o,i,r),start:t,finish:e})})})})})},Co=function(n,e){n=Qn(n,e);return 0<n.length?T.some(n):T.none()},So=function(n,e,r){return ft(n,e).bind(function(t){return ft(n,r).bind(function(e){return jr(Fr,[t,e]).map(function(n){return{first:t,last:e,table:n}})})})},To=function(n,e){return Co(n,e)},ce=function(i){if(!a(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],t={};return x(i,function(n,r){var e=Pe(n);if(1!==e.length)throw new Error("one and only one name per case");var o=e[0],u=n[o];if(void 0!==t[o])throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!a(u))throw new Error("case arguments must be an array");c.push(o),t[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=t.length;if(e!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+e);return{fold:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+n.length);return n[r].apply(null,t)},match:function(n){var e=Pe(n);if(c.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+e.join(","));if(hn(c,function(n){return l(e,n)}))return n[o].apply(null,t);throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+c.join(", "))},log:function(n){console.log(n,{constructors:c,constructor:o,params:t})}}}}),t},ie=ce([{none:[]},{multiple:["elements"]},{single:["element"]}]),xo=ie.none,Ro=ie.multiple,Do=ie.single,Oo=function(n,e,t){return{get:function(){return To(n(),t).fold(function(){return e().fold(xo,Do)},function(n){return Ro(n)})}}},ie=tinymce.util.Tools.resolve("tinymce.PluginManager"),Ao=function(n,e){var e=Kr(n,e),t=(Or(n,e),f(n));return Ir(e,t),_(n),e},ko=function(n,e){return function(n){n=parseFloat(n);return isNaN(n)?T.none():T.some(n)}(n).getOr(e)},Io=function(n,e,t,r){return e-Jr(n,"padding-"+t,0)-Jr(n,"padding-"+r,0)-Jr(n,"border-"+t+"-width",0)-Jr(n,"border-"+r+"-width",0)},Bo=Xr("width",function(n){return n.dom.offsetWidth}),Mo=function(n){return Bo.get(n)},Eo=function(n){return Bo.getOuter(n)},Po=function(n){return Zr(n,"content-box")},No=function(n){return Yr()?Zr(n,Qr(n)):Jr(n,"width",n.dom.offsetWidth)},zo=function(t,r){void 0===r&&(r=S);var n=t.grid,e=nn(n.columns,w),o=nn(n.rows,w);return b(e,function(e){return no(function(){return h(o,function(n){return z.getAt(t,n,e).filter(function(n){return n.column===e}).toArray()})},function(n){return 1===n.colspan&&r(n.element)},function(){return z.getAt(t,0,e)})})},Lo=function(t){var n=t.grid,e=nn(n.rows,w),r=nn(n.columns,w);return b(e,function(e){return no(function(){return h(r,function(n){return z.getAt(t,e,n).filter(function(n){return n.row===e}).fold(d([]),function(n){return[n]})})},function(n){return 1===n.rowspan},function(){return z.getAt(t,e,0)})})},_o=Xr("height",function(n){var e=n.dom;return ut(n)?e.getBoundingClientRect().height:e.offsetHeight}),Wo=function(n){return _o.get(n)},jo=function(n){return Yr()?(t=Qr(e=n),r=(r=e.dom).getBoundingClientRect().height||r.offsetHeight,"border-box"===t?r:Io(e,r,"top","bottom")):Jr(n,"height",n.dom.offsetHeight);var e,t,r},Fo=oo,Ho=function(n,e){return void 0!==n?n:void 0!==e?e:0},Vo=function(n){var e,t,r=n.dom.ownerDocument,o=r.body,u=r.defaultView,r=r.documentElement;return o===n.dom?Fo(o.offsetLeft,o.offsetTop):(e=Ho(null==u?void 0:u.pageYOffset,r.scrollTop),u=Ho(null==u?void 0:u.pageXOffset,r.scrollLeft),t=Ho(r.clientTop,o.clientTop),r=Ho(r.clientLeft,o.clientLeft),Uo(n).translate(u-r,e-t))},Uo=function(n){var e=n.dom,t=e.ownerDocument.body;return t===e?Fo(t.offsetLeft,t.offsetTop):ut(n)?(t=(t=e).getBoundingClientRect(),Fo(t.left,t.top)):Fo(0,0)},qo={delta:w,positions:function(n){return po(mo,go,n)},edge:so},Go=to({delta:w,edge:lo,positions:function(n){return po(ao,fo,n)}},{delta:function(n){return-n},edge:co,positions:function(n){return po(fo,ao,n)}}),$o={delta:function(n,e){return Go(e).delta(n,e)},positions:function(n,e){return Go(e).positions(n,e)},edge:function(n){return Go(n).edge(n)}},Ko={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Xo=(Tf=["Infinity",(Tf="[0-9]+")+"\\."+Yo(Tf)+Yo(e="[eE][+-]?[0-9]+"),"\\."+Tf+Yo(e),Tf+Yo(e)].join("|"),new RegExp("^("+("[+-]?(?:"+Tf+")")+")(.*)$"));function Yo(n){return"(?:"+n+")?"}function Jo(n,r){return T.from(Xo.exec(n)).bind(function(n){var e,t=Number(n[1]),n=n[2];return e=n,g(r,function(n){return g(Ko[n],function(n){return e===n})})?T.some({value:t,unit:n}):T.none()})}function Qo(n,e){m(n,"width",e+"px")}function Zo(n,e){m(n,"width",e+"%")}function nu(n,e,t,r){var o,u,i=parseFloat(n);return Dn(n,"%")&&"table"!==I(e)?(o=i,u=t,n=r,r=E(t=e).map(function(n){n=u(n);return Math.floor(o/100*n)}).getOr(o),n(t,r),r):i}function eu(n){var e=jo(n)+"px";return e?nu(e,n,Wo,Ua):Wo(n)}function tu(n){return qa(n,"width")}function ru(n){return e="rowspan",eu(n=n)/pt(n,e);var e}function ou(n,e,t){m(n,"width",e+t)}function uu(n){return Va(n,Mo,Po)+"%"}function iu(n){return tu(n).getOrThunk(function(){return $a(n)+"px"})}function cu(n){return qa(n,"height").getOrThunk(function(){return ru(n)+"px"})}function lu(n,e,t,r,o,u){return n.filter(r).fold(function(){return u(eo(t,e))},function(n){return o(n)})}function au(n){return n.map(function(n){return n+"px"}).getOr("")}function fu(n,e,t,r,o){var n=Lo(n),u=[T.some(t.edge(e))].concat(b(t.positions(n,e),function(n){return n.map(function(n){return n.y})}));return b(n,function(n,e){return lu(n,e,u,X(ht),r,o)})}function su(t){var n=ef(t,Mo),e=d(0);return{width:n,pixelWidth:n,getWidths:function(n,e){return Qa(n,t,e)},getCellDelta:e,singleColumnWidth:d([0]),minCellWidth:e,setElementWidth:p,adjustTableWidth:p,isRelative:!0,label:"none"}}function mu(n,e,t,r){for(var o=e.grid.columns,u=e.grid.rows,i=0;i<u;i++)for(var c,l,a,f=!1,s=0;s<o;s++)i<t.minRow||i>t.maxRow||s<t.minCol||s>t.maxCol||(z.getAt(e,i,s).filter(r).isNone()?(l=f,c=(c=n)[a=i].element,a=D.fromTag("td"),L(a,D.fromTag("br")),(l?L:Et)(c,a)):f=!0)}function du(n,e){function t(n){return Be(n.element,e)}var o,u,i,c,l,a,f,r=$r(n),s=yt(r),m=of(n),d=z.generate(s),g=(o=t,g=d.grid.columns,u=d.grid.rows,i=g,l=c=0,a=[],f=[],A(d.access,function(n){var e,t,r;a.push(n),o(n)&&(f.push(n),t=(e=n.row)+n.rowspan-1,n=(r=n.column)+n.colspan-1,e<u?u=e:c<t&&(c=t),r<i?i=r:l<n&&(l=n))}),{minRow:u,minCol:i,maxRow:c,maxCol:l,allCells:a,selectedCells:f}),p="th:not("+e+"),td:not("+e+")",b=lr(r,"th,td",function(n){return Be(n,p)}),b=(x(b,_),mu(s,d,g,t),z.fromTable(n)),m=(s=n,n=b,b=m,0===(m=g).minCol&&n.grid.columns===m.maxCol+1?0:(n=Qa(n,s,b),s=mn(n,function(n,e){return n+e},0),n=mn(n.slice(m.minCol,m.maxCol+1),function(n,e){return n+e},0)/s*b.pixelWidth()-b.pixelWidth(),b.getCellDelta(n))),s=r,h=g,n=m;return A((b=d).columns,function(n){(n.column<h.minCol||n.column>h.maxCol)&&_(n.element)}),b=R(cr(s,"tr"),function(n){return 0===n.dom.childElementCount}),x(b,_),h.minCol!==h.maxCol&&h.minRow!==h.maxRow||x(cr(s,"th,td"),function(n){M(n,"rowspan"),M(n,"colspan")}),M(s,Cr),M(s,"data-snooker-col-series"),of(s).adjustTableWidth(n),r}function gu(n){return zr(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("Â ")}).isSome()||l(af,I(n))}function pu(n){return n}function bu(r,o,u){function i(n,e){tr(n.element,e),er(e,"height"),1!==n.colspan&&er(e,"width")}return{col:function(n){var e=D.fromTag(I(n.element),o.dom);return i(n,e),r(n.element,e),e},colgroup:pf(o),row:bf(o),cell:function(n){var e=D.fromTag(I(n.element),o.dom),t=u.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),t=0<t.length?vf(n.element,e,t):e;return L(t,D.fromTag("br")),i(n,e),wf(n.element,e),r(n.element,e),e},replace:hf,colGap:gf(o),gap:df(o)}}function hu(n){return{col:gf(n),colgroup:pf(n),row:bf(n),cell:df(n),replace:pu,colGap:gf(n),gap:df(n)}}function vu(n){return b(n,D.fromDom)}function wu(n){return n.getBoundingClientRect().width}function yu(n){return n.getBoundingClientRect().height}function Cu(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n}function Su(n){function e(n){return M(n,"data-mce-style")}M(n,"data-mce-style"),x(vt(n),e),x(wt(n),e),x(sr(n),e)}function Tu(n){return Ur(n.get(),d([]),w,tn)}function xu(n){function e(n,e){return qt(n,e).exists(function(n){return 1<parseInt(n,10)})}return 0<(n=Tu(n)).length&&hn(n,function(n){return e(n,"rowspan")||e(n,"colspan")})?T.some(n):T.none()}function Ru(n,e,t){return{element:t,mergable:(r=e,o=Rf,Ur(n.get(),T.none,function(e){return e.length<=1?T.none():Vr(r,o.firstSelectedSelector,o.lastSelectedSelector).map(function(n){return{bounds:n,cells:e}})},T.none)),unmergable:xu(n),selection:Tu(n)};var r,o}function Du(r){return function(n,e){var t=I(n),t="col"===t||"colgroup"===t?E(t=n).bind(function(n){return To(n,Rf.firstSelectedSelector)}).fold(d(t),function(n){return n[0]}):n;return s(t,r,e)}}function Ou(n,e,t){for(var r=0,o=n;o<e;o++)r+=void 0!==t[o]?t[o]:0;return r}function Au(n,e){var t,r,o;return z.hasColumns(n)?(r=n,t=e,r=z.justColumns(n),b(r,function(n,e){return{element:n.element,width:t[e],colspan:n.colspan}})):(r=n,o=e,r=z.justCells(n),b(r,function(n){var e=Ou(n.column,n.column+n.colspan,o);return{element:n.element,width:e,colspan:n.colspan}}))}function ku(n,e,t,r,o){var n=z.fromTable(n),e=o.getCellDelta(e),u=o.getWidths(n,o),i=t===n.grid.columns-1,e=r.clampTableDelta(u,t,e,o.minCellWidth(),i),t=Bf(u,t,e,o,r),t=b(t,function(n,e){return n+u[e]});Nf(n,t,o),r.resizeTable(o.adjustTableWidth,e,i)}function Iu(o){return function(n,e,t,r){return o(t)?(r=Math.max(r,n[e]-Math.abs(t)),r=Math.abs(r-n[e]),0<=t?r:-r):t}}function Bu(){function i(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return b(n,function(n,e){return(e===t?u:n/o)-n})}function c(n,e,t,r,o,u){return u?i(n,e,r,o):(u=t,e=_f(t=n,n=e,e=r,o),Lf(t,n,u+1,[e,0],zf))}return{resizeTable:function(n,e){return n(e)},clampTableDelta:_f,calcLeftEdgeDeltas:c,calcMiddleDeltas:function(n,e,t,r,o,u,i){return c(n,t,r,o,u,i)},calcRightEdgeDeltas:function(n,e,t,r,o,u){return u?i(n,t,r,o):(u=_f(n,t,r,o),zf(n.slice(0,t)).concat([u]))},calcRedestributedWidths:function(n,e,t,r){var o;return r?(o=(e+t)/e,r=b(n,function(n){return n/o}),{delta:100*o-100,newSizes:r}):{delta:t,newSizes:n}}}}function Mu(){function i(n,e,t,r,o){return r=Wf(n,0<=r?t:e,r,o),Lf(n,e,t+1,[r,-r],zf)}return{resizeTable:function(n,e,t){t&&n(e)},clampTableDelta:function(n,e,t,r,o){return o?0<=t?t:(o=mn(n,function(n,e){return n+e-r},0),Math.max(-o,t)):_f(n,e,t,r)},calcLeftEdgeDeltas:i,calcMiddleDeltas:function(n,e,t,r,o,u){return i(n,t,r,o,u)},calcRightEdgeDeltas:function(n,e,t,r,o,u){return u?zf(n):(u=r/n.length,b(n,d(u)))},calcRedestributedWidths:function(n,e,t,r){return{delta:0,newSizes:n}}}}function Eu(n,e,t){var n=t.substring(0,t.length-n.length),r=parseFloat(n);return n===r.toString()?e(r):Hf.invalid(t)}function Pu(n,r,o){return n.fold(function(){return r},function(n){return t=(e=n)/o,b(r,function(n){return Vf.from(n).fold(function(){return n},function(n){return n*t+"px"},function(n){return n/100*e+"px"})});var e,t},function(n){return e=o,b(r,function(n){return Vf.from(n).fold(function(){return n},function(n){return n/e*100+"%"},function(n){return n+"%"})});var e})}function Nu(n,e){return 0===n.length?e:sn(n,function(n,e){return Vf.from(e).fold(d(0),w,w)+n},0)}function zu(o,n,e){var u=z.fromTable(o),i=u.all,c=z.justCells(u),l=z.justColumns(u);n.each(function(n){var e=Jf(n),t=Mo(o),r=Ja(u,o),r=Uf(r,t,n);z.hasColumns(u)?Xf(r,l,e):Kf(r,c,e),m(o,"width",n)}),e.each(function(n){var e=Jf(n),t=Wo(o),r=nf(u,o,qo),r=Uf(r,t,n);Yf(r,i,c,e),m(o,"height",n)})}function Lu(n){return z.fromTable(n).grid}function _u(n){return n.slice(0).sort()}function Wu(e,n){0<(n=R(n,function(n){return!l(e,n)})).length&&rs(n)}function ju(n){return os(Wu,n,{validate:$,label:"function"})}function Fu(){var o=T.none(),u=ts({move:es(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){var e,t;e=r,t=n,n=o.map(function(n){return e.compare(n,t)}),o=T.some(t),n.each(function(n){u.trigger.move(n)})})},reset:function(){o=T.none()},events:u.registry}}function Hu(){n=ts({move:es(["info"])});var n,e={onEvent:p,reset:p,events:n.registry},t=Fu(),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(n,e){r.onEvent(n,e)},events:t.events}}function Vu(e,t,n){function r(){d.stop(),a.isOn()&&(a.off(),l.trigger.stop())}var o,u,i,c=!1,l=ts({start:es([]),stop:es([])}),a=Hu(),f=(o=r,u=200,i=null,{cancel:s,throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];s(),i=setTimeout(function(){i=null,o.apply(null,n)},u)}});function s(){U(i)||(clearTimeout(i),i=null)}function m(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];c&&t.apply(null,n)}}a.events.move.bind(function(n){t.mutate(e,n.info)});var d=t.sink(is({forceDrop:r,drop:m(r),move:m(function(n){f.cancel(),a.onEvent(n,t)}),delayDrop:m(f.throttle)}),n);return{element:d.element,go:function(n){d.start(n),a.on(),l.trigger.start()},on:function(){c=!0},off:function(){c=!1},destroy:function(){d.destroy()},events:l.registry}}function Uu(n){function e(){return n.stopPropagation()}function t(){return n.preventDefault()}function r(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o(u.apply(null,n))}var o,u,i=D.fromDom(function(n){if(tt()&&G(n.target)){var e=D.fromDom(n.target);if($e(e)&&ot(e)&&n.composed&&n.composedPath){e=n.composedPath();if(e)return wn(e)}}return T.from(n.target)}(n).getOr(n.target));return o=t,u=e,{target:i,x:n.clientX,y:n.clientY,stop:e,prevent:t,kill:r,raw:n}}function qu(n,e,t,r,o){function u(n){i(n)&&c(Uu(n))}var i,c;return i=t,c=r,n.dom.addEventListener(e,u,o),{unbind:y(Gu,n,e,u,o)}}function Gu(n,e,t,r){n.dom.removeEventListener(e,t,r)}function $u(n,e){return void 0===(n=Ut(n,e))||""===n?[]:n.split(" ")}function Ku(n,e){var t,r;t=e,0<(r=R($u(e=n,n="class"),function(n){return n!==t})).length?B(e,n,r.join(" ")):M(e,n)}function Xu(n){0===(ss(n)?n.dom.classList:$u(n,"class")).length&&M(n,"class")}function Yu(n){var e=n.replace(/\./g,"-");return{resolve:function(n){return e+"-"+n}}}function Ju(n){return s(n,"[contenteditable]")}function Qu(n){return n.dom.contentEditable}function Zu(e,n,t){var r=e.origin();x(n,function(n){n.each(function(n){n=t(r,n);ds(n,ys),L(e.parent(),n)})})}function ni(n,e,i,c){Zu(n,e,function(n,e){t=e.col,e=e.x-n.left,n=i.top-n.top,r=7,o=c,u=D.fromTag("div"),Jt(u,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),st(u,{"data-column":t,role:"presentation"});var t,r,o,u,e=u;return ds(e,Ss),e})}function ei(n,e,i,c){Zu(n,e,function(n,e){t=e.row,u=i.left-n.left,e=e.y-n.top,n=c,r=7,o=D.fromTag("div"),Jt(o,{position:"absolute",left:u+"px",top:e-r/2+"px",height:r+"px",width:n+"px"}),st(o,{"data-row":t,role:"presentation"});var t,r,o,u=o;return ds(u,Cs),u})}function ti(n,e){n=Qn(n.parent(),"."+ys),x(n,e)}function ri(o){function n(n,e){return T.from(Ut(n,e))}function u(n,e){return or(n,e)-rr(n,"data-initial-"+e,0)}function e(n,e){f.trigger.startAdjust(),r.assign(n),B(n,"data-initial-"+e,or(n,e)),ds(n,Is),m(n,"opacity","0.2"),i.go(o.parent())}function t(n){return O(n,o.view())}var r=ws(),i=hs(r,{}),c=T.none(),l=(r.events.drag.bind(function(t){n(t.target,"data-row").each(function(n){var e=or(t.target,"top");m(t.target,"top",e+t.yDelta+"px")}),n(t.target,"data-column").each(function(n){var e=or(t.target,"left");m(t.target,"left",e+t.xDelta+"px")})}),i.events.stop.bind(function(){r.get().each(function(r){c.each(function(t){n(r,"data-row").each(function(n){var e=u(r,"top");M(r,"data-initial-top"),f.trigger.adjustHeight(t,e,parseInt(n,10))}),n(r,"data-column").each(function(n){var e=u(r,"left");M(r,"data-initial-left"),f.trigger.adjustWidth(t,e,parseInt(n,10))}),Rs(o,t)})})}),as(o.parent(),"mousedown",function(n){As(n.target)&&e(n.target,"top"),ks(n.target)&&e(n.target,"left")})),a=as(o.view(),"mouseover",function(n){var e;e=n.target,s(e,"table",t).filter(vs).fold(function(){ut(n.target)&&Ts(o)},function(n){c=T.some(n),Rs(o,n)})}),f=ts({adjustHeight:es(["table","delta","row"]),adjustWidth:es(["table","delta","column"]),startAdjust:es([])});return{destroy:function(){l.unbind(),a.unbind(),i.destroy(),Ts(o)},refresh:function(n){Rs(o,n)},on:i.on,off:i.off,hideBars:y(Ds,o),showBars:y(Os,o),events:f.registry}}function oi(n,e){n.fire("newrow",{node:e})}function ui(n,e){n.fire("newcell",{node:e})}function ii(n,e,t,r,o){n.fire("TableSelectionChange",{cells:e,start:t,finish:r,otherCells:o})}function ci(n){n.fire("TableSelectionClear")}function li(n,e,t){n.fire("TableModified",v(v({},t),{table:e}))}function ai(n){return n.getParam("table_border_widths",Ns,"array")}function fi(n){return n.getParam("table_border_styles",zs,"array")}function si(n){return n.getParam("table_default_attributes",Ls,"object")}function mi(n){return n.getParam("table_default_styles",yi(n=n)?(e=null!=(e=(e=n.dom).getParent(n.selection.getStart(),e.isBlock))?e:n.getBody(),e=Po(D.fromDom(e)),v(v({},Ps),{width:e+"px"})):Ci(n)?Ln(Ps,function(n,e){return"width"!==e}):Ps,"object");var e}function di(n){return n.getParam("table_cell_advtab",!0,"boolean")}function gi(n){return n.getParam("table_row_advtab",!0,"boolean")}function pi(n){return n.getParam("table_advtab",!0,"boolean")}function bi(n){return n.getParam("table_style_by_css",!1,"boolean")}function hi(n){return n.getParam("table_cell_class_list",[],"array")}function vi(n){return n.getParam("table_class_list",[],"array")}function wi(n){return"relative"===Ws(n)||!0===js(n)}function yi(n){return"fixed"===Ws(n)||!1===js(n)}function Ci(n){return"responsive"===Ws(n)}function Si(n){var e="section",n=n.getParam("table_header_type",e,"string");return l(["section","cells","sectionCells","auto"],n)?n:e}function Ti(n){var e=n.getParam("table_column_resizing",_s,"string");return gn(["preservetable","resizetable"],function(n){return n===e}).getOr(_s)}function xi(n){return"preservetable"===Ti(n)}function Ri(n){return"resizetable"===Ti(n)}function Di(n){return n=n.getParam("table_clone_elements"),H(n)?T.some(n.split(/[ ,]/)):Array.isArray(n)?T.some(n):T.none()}function Oi(n){return n.getParam("table_background_color_map",[],"array")}function Ai(n){return n.getParam("table_border_color_map",[],"array")}function ki(n,e){return(wi(n)?cf:yi(n)?uf:of)(e)}function Ii(n){M(n,"width")}function Bi(){var n=D.fromTag("div");return Jt(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),L(Yn(D.fromDom(document)),n),n}function Mi(n){return"false"!==Ut(n,"data-mce-resize")}function Ei(n,e){return{element:n,offset:e}}function Pi(n,e){return(n.property().isText(e)?n.property().getText(e):n.property().children(e)).length}function Ni(n,e){var t,e=$s(n,e,n.query().prevSibling).getOr(e);return!n.property().isText(e)&&0<(t=n.property().children(e)).length?Ni(n,t[t.length-1]):Ei(e,Pi(n,e))}function zi(t,r){1===pt(t,"colspan")&&tu(t).bind(function(n){return Jo(n,["fixed","relative","empty"])}).each(function(n){var e=n.value/2;ou(t,e,n.unit),ou(r,e,n.unit)})}function Li(n){var e=R(n,function(n){return Ys(n.element)});return 0===e.length?T.some("td"):e.length===n.length?T.some("th"):T.none()}function _i(){return{transformRow:nm,transformCell:function(n,e,t){t=t(n.element,e),e="td"!==I(t)?Ao(t,"td"):t;return k(e,n.isNew,n.isLocked)}}}function Wi(){return{transformRow:nm,transformCell:Zs}}function ji(){return{transformRow:function(n,e){return nm(n,"thead"===e?"tbody":e)},transformCell:Zs}}function Fi(n,e,t){yn(ct(n,e)).fold(function(){return Et(n,t)},function(n){return Ar(n,t)})}function Hi(o,n){function e(n,e){var t,r;0<n.length?(n=n,r=cm(o,t=e),t=("colgroup"===t?i:u)(n),Ir(r,t)):Ht(o,e).each(_)}var t=[],r=[],u=function(n){return b(n,function(n){n.isNew&&t.push(n.element);var e=n.element;return Br(e),x(n.cells,function(n){n.isNew&&r.push(n.element),im(n.element,"colspan",n.colspan,1),im(n.element,"rowspan",n.rowspan,1),L(e,n.element)}),e})},i=function(n){return h(n,function(n){return b(n.cells,function(n){return im(n.element,"span",n.colspan,1),n.element})})},c=[],l=[],a=[],f=[];return x(n,function(n){switch(n.section){case"thead":c.push(n);break;case"tbody":l.push(n);break;case"tfoot":a.push(n);break;case"colgroup":f.push(n)}}),e(f,"colgroup"),e(c,"thead"),e(l,"tbody"),e(a,"tfoot"),{newRows:t,newCells:r}}function Vi(n,e){var t;return 0===n.length?0:(t=n[0],pn(n,function(n){return!e(t.element,n.element)}).getOr(n.length))}function Ui(n,e,t,r){var o,u=n[e],i="colgroup"===u.section;return{colspan:Vi(u.cells.slice(t),r),rowspan:i?1:Vi((u=n.slice(e),o=t,b(u,function(n){return wr(n,o)})),r)}}function qi(n){return lm(n,O)}function n(a,e,f,s,m){return function(o,u,n,r,i){var c=z.fromTable(u),l=T.from(null==i?void 0:i.section).getOrThunk(um);return e(c,n).map(function(n){var e=am(c,r,!1),e=a(e,n,O,m(r),l),t=Tr(e.grid);return{info:n,grid:qi(e.grid),cursor:e.cursor,lockedColumns:t}}).bind(function(n){var e=Hi(u,n.grid),t=T.from(null==i?void 0:i.sizing).getOrThunk(function(){return of(u)}),r=T.from(null==i?void 0:i.resize).getOrThunk(Mu);return f(u,n.grid,n.info,{sizing:t,resize:r,section:l}),s(u),Rs(o,u),M(u,Cr),0<n.lockedColumns.length&&B(u,Cr,n.lockedColumns.join(",")),T.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})})}}function Gi(n,e){return sm(n,e,S).map(function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}})}function $i(n,e){return sm(n,e,function(n){return!n.isLocked})}function Ki(e,n){return hn(n,function(n){return dm(e,n)})}function Xi(e,n){return n.mergable.filter(function(n){return Ki(e,n.cells)})}function Yi(e,n){return n.unmergable.filter(function(n){return Ki(e,n)})}function Ji(n,e,t,r){for(var o=N(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<yr(o[0]);c++){var l=o[i],a=wr(l,c),f=t(a.element,e);!0===f&&!1===u?vr(l,c,k(r(),!0,a.isLocked)):!0===f&&(u=!1)}return n}function Qi(t){return{isValue:S,isError:C,getOr:d(t),getOrThunk:d(t),getOrDie:d(t),or:function(n){return Qi(t)},orThunk:function(n){return Qi(t)},fold:function(n,e){return e(t)},map:function(n){return Qi(n(t))},mapError:function(n){return Qi(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return T.some(t)}}}function Zi(t){return{isValue:C,isError:S,getOr:w,getOrThunk:function(n){return n()},getOrDie:function(){throw n=String(t),new Error(n);var n},or:w,orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return Zi(t)},mapError:function(n){return Zi(n(t))},each:p,bind:function(n){return Zi(t)},exists:C,forall:S,toOptional:T.none}}function nc(n,e,t,r){var o="colgroup"===e.section?t.col:t.cell;return nn(n,function(n){return k(o(),!0,r(n))})}function ec(n,e,t,r){var o=n[n.length-1];return n.concat(nn(e,function(){var n="colgroup"===o.section?t.colgroup:t.row,n=St(o,n,w),e=nc(n.cells.length,n,t,function(n){return jn(r,n.toString())});return Ct(n,e)}))}function tc(n,t,r,o){return b(n,function(n){var e=nc(t,n,r,C);return br(n,o,e)})}function rc(t,n,e,r,o){gm(n,t,o,r.cell);var o=ym(e,n),u=Sm(e,o,r),e=ym(n,u),o=Sm(n,e,r);return b(o,function(n,e){return br(n,t,u[e].cells)})}function oc(n,e,t,r,o){pm(e,n,o,r.cell);var o=Tr(e),u=wm(e,t),u=v(v({},u),{colDelta:u.colDelta-o.length}),o=Sm(e,u,r),i=(u=N(o)).cols,u=u.rows,o=Tr(o),e=wm(t,e),e=v(v({},e),{colDelta:e.colDelta+o.length}),t=Cm(t,r,o),o=Sm(t,e,r);return i.concat(u.slice(0,n)).concat(o).concat(u.slice(n,u.length))}function uc(n,t,e,r,o){var u=(n=N(n)).rows,n=n.cols,i=u.slice(0,t),c=u.slice(t),e=Dm(u[e],function(n,e){return 0<t&&t<u.length&&r(P(u[t-1],e),P(u[t],e))?wr(u[t],e):k(o(n.element,r),!0,n.isLocked)},r,o);return n.concat(i).concat([e]).concat(c)}function ic(n,t,r,o,u){return b(n,function(n){var e=0<t&&t<yr(n)&&o(P(n,t-1),P(n,t)),e=Om(n,t,n.section,e,r,o,u);return hr(n,t,e)})}function cc(n,e,t,r){return i=t,c=r,void 0!==P((o=n)[u=e],i)&&0<u&&c(P(o[u-1],i),P(o[u],i))||(c=n[e],o=r,0<(u=t)&&o(P(c,u-1),P(c,u)));var o,u,i,c}function lc(n,e,t,r){function o(n){return("row"===n?ht:bt)(e)?n+"group":n}return n?Ys(e)?o(t):null:r&&Ys(e)?o("row"===t?"col":"row"):null}function ac(n,e,t,r,o){var u=N(n).rows,e=h(e,function(n){return Pm(u,n,r)}),i=b(n,function(n){return Js(n.cells)}),c=km(e,i),t=Bm(t,i);return Em(n,e,r,o,Mm,t,c)}function fc(n,e,t,r){var o=N(n).rows,e=b(e,function(n){return wr(o[n.row],n.column)});return Em(n,e,t,r,Mm,T.none,S)}function sc(n){return"tr"===I(n)||_m(n)}function mc(n){return{element:n,colspan:rr(n,"colspan",1),rowspan:rr(n,"rowspan",1)}}function dc(n){return qt(n,"scope").map(function(n){return n.substr(0,3)})}function gc(n){var o=function(n){return"br"===I(n)},u=function(n){return"li"===I(n)||Wt(n,Hm).isSome()},i=function(n){return Ze(n).map(function(n){return!!Fm(n)||!!Vm(n)&&"img"!==I(n)}).getOr(!1)},e=0===(e=h(n,function(n){var r,e=f(n);return hn(e,function(n){return o(n)||Ke(n)&&0===Nr(n).trim().length})?[]:e.concat(sf(r=n).bind(function(e){var t=i(e);return Qe(e).map(function(n){return!0===t||u(n)||o(e)||Fm(n)&&!O(r,n)?[]:[D.fromTag("br")]})}).getOr([]))})).length?[D.fromTag("br")]:e;Br(n[0]),Ir(n[0],e)}function pc(n){return vs(n,!0)}function bc(n){0===vt(n).length&&_(n)}function W(n,e,t){return e=qm(n,e,t),Um(n,e)}function hc(n){return mn(n,function(n,e){return g(n,function(n){return n.row===e.row})?n:n.concat([e])},[]).sort(function(n,e){return n.row-e.row})}function vc(d,g){return function(n,e,t,r,o){var u,i,c,l,a,f,s=hc(e),s=b(s,function(n){return n.row}),m=(n=n,s=s,u=d,m=g,i=t,t=r.replaceOrInit,c=o,n=N(n),r=n.cols,l=n.rows,n=l[s[0]],o=h(s,function(n){return Nm(l,n,i)}),a=b(n.cells,function(n,e){return Js(Pm(l,e,i))}),f=Sn([],l,!0),x(s,function(n){f[n]=c.transformRow(l[n],u)}),s=r.concat(f),r=Am(n,a),n=Im(m,a),Em(s,o,i,t,c.transformCell,n,r));return W(m,e[0].row,e[0].column)}}function wc(n,e,t){return n=pr(n,t.section),t=z.generate(n),am(t,e,!0)}function yc(n,e,t,r){var o;e=e,r=r.sizing,e=z.generate(e),o=r.getWidths(e,r),Nf(e,o,r)}function Cc(n,e,t,r){return e=e,t=t,o=r.sizing,r=r.resize,e=z.generate(e),u=o.getWidths(e,o),i=o.pixelWidth(),r=r.calcRedestributedWidths(u,i,t.pixelDelta,o.isRelative),u=r.newSizes,i=r.delta,Nf(e,u,o),void o.adjustTableWidth(i);var o,u,i}function Sc(n,e){return g(e,function(n){return 0===n.column&&n.isLocked})}function Tc(e,n){return g(n,function(n){return n.column+n.colspan>=e.grid.columns&&n.isLocked})}function xc(n,e){var t=zo(n),n=zm(e);return mn(n,function(n,e){return n+t[e.column].map(Eo).getOr(0)},0)}function Rc(t){return function(e,n){return mm(e,n).filter(function(n){return!(t?Sc:Tc)(e,n)}).map(function(n){return{details:n,pixelDelta:xc(e,n)}})}}function Dc(t){return function(e,n){return Gi(e,n).filter(function(n){return!(t?Sc:Tc)(e,n.cells)})}}function Oc(n,e){var o=z.fromTable(n);return mm(o,e).bind(function(n){var e=n[n.length-1],t=n[0].column,r=e.column+e.colspan,n=bn(b(o.all,function(n){return R(n.cells,function(n){return n.column>=t&&n.column<r})}));return Li(n)}).getOr("")}function Ac(n,e){return n=z.fromTable(n),mm(n,e).bind(Li).getOr("")}function kc(n,e,t,r){for(var o=D.fromTag("tr"),u=0;u<n;u++){var i=r<e||u<t?D.fromTag("th"):D.fromTag("td");u<t&&B(i,"scope","row"),r<e&&B(i,"scope","col"),L(i,D.fromTag("br")),L(o,i)}return o}function Ic(n){var e=D.fromTag("colgroup");return nn(n,function(){return L(e,D.fromTag("col"))}),e}function Bc(n,e,t,r){return nn(n,function(n){return kc(e,t,r,n)})}function Mc(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)}function Ec(r,t,o,u,i){var c=mi(r),l={styles:c,attributes:si(r),colGroups:r.getParam("table_use_colgroups",!1,"boolean")};return r.undoManager.ignore(function(){var n,e=function(n,e,t,r,o,u){void 0===u&&(u=vd);var i=D.fromTag("table"),c="cells"!==o,u=(Jt(i,u.styles),st(i,u.attributes),u.colGroups&&L(i,Ic(e)),Math.min(n,t)),l=(c&&0<t&&(l=D.fromTag("thead"),L(i,l),o=Bc(t,e,"sectionCells"===o?u:0,r),Ir(l,o)),D.fromTag("tbody"));L(i,l);o=Bc(c?n-u:n,e,c?0:t,r);return Ir(l,o),i}(o,t,i,u,Si(r),l),e=(B(e,"data-mce-id","__mce"),e=e,n=D.fromTag("div"),e=D.fromDom(e.dom.cloneNode(!0)),L(n,e),n.dom.innerHTML);r.insertContent(e),r.addVisual()}),ft(yf(r),'table[data-mce-id="__mce"]').map(function(n){var e,t;return yi(r)?Vs(n):Ci(r)?Us(n):(wi(r)||(t=c.width,H(t)&&-1!==t.indexOf("%")))&&Hs(n),Su(n),M(n,"data-mce-id"),e=r,x(Qn(n,"tr"),function(n){oi(e,n.dom),x(Qn(n,"th,td"),function(n){ui(e,n.dom)})}),t=r,ft(n,"td,th").each(y(Mc,t)),n.dom}).getOr(null)}function Pc(n,e,t,r,o){function u(n){return K(n)&&0<n}var i;return void 0===r&&(r={}),u(e)&&u(t)?(i=r.headerRows||0,r=r.headerColumns||0,Ec(n,t,e,r,i)):(console.error(o),null)}function Nc(n){return function(){return n().fold(function(){return[]},function(n){return b(n,function(n){return n.dom})})}}function zc(e){return function(n){n=0<n.length?T.some(vu(n)):T.none();e(n)}}function Lc(n,e,t){var r=rr(n,e,1);1===t||r<=1?M(n,e):B(n,e,Math.min(t,r))}function _c(n,e){var l=z.fromTable(n);return $i(l,e).map(function(n){var e,t,r,o,u=n[n.length-1],n=n[0].column,u=u.column+u.colspan,i=(i=l,e=n,t=u,z.hasColumns(i)?(i=R(z.justColumns(i),function(n){return n.column>=e&&n.column<t}),i=b(i,function(n){n=$r(n.element);return Lc(n,"span",t-e),n}),c=D.fromTag("colgroup"),Ir(c,i),[c]):[]),c=(r=n,o=u,b(l.all,function(n){var n=R(n.cells,function(n){return n.column>=r&&n.column<o}),n=b(n,function(n){n=$r(n.element);return Lc(n,"colspan",o-r),n}),e=D.fromTag("tr");return Ir(e,n),e}));return Sn(Sn([],i,!0),c,!0)})}function Wc(n,e,t){var r=z.fromTable(n);return mm(r,e).bind(function(n){var e=am(r,t,!1),e=N(e).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),n=h(e,function(n){var e=R(n.cells,function(n){return!n.isLocked});return 0<e.length?[v(v({},n),{cells:e})]:[]}),e=qi(n);return Kt(0<e.length,e)}).map(function(n){return b(n,function(n){var t=Gr(n.element);return x(n.cells,function(n){var e=$r(n.element);im(e,"colspan",n.colspan,1),im(e,"rowspan",n.rowspan,1),L(t,e)}),t})})}function jc(n,e,t){for(var e=n.select("td,th",e),r=void 0,o=e,u=0;u<o.length;u++){var i=n.getStyle(o[u],t);if((r=void 0===r?i:r)!==i)return""}return r}function Fc(n,e,t){t&&n.formatter.apply("align"+t,{},e)}function Hc(e,t){yd.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})}function Vc(n){return(Rn(n=n,e="#")?(e=e.length,n.substring(e)):n).toUpperCase();var e}function Uc(n){return e=n,Sd.test(e)||Td.test(e)?T.some({value:Vc(n)}):T.none();var e}function qc(n){return(1===(n=n.toString(16)).length?"0"+n:n).toUpperCase()}function Gc(n){return{value:qc(n.red)+qc(n.green)+qc(n.blue)}}function $c(n,e,t,r){return{red:n,green:e,blue:t,alpha:r}}function Kc(n,e,t,r){return n=parseInt(n,10),e=parseInt(e,10),t=parseInt(t,10),r=parseFloat(r),$c(n,e,t,r)}function Xc(o){return Uc(o).orThunk(function(){return("transparent"===(n=o)?T.some($c(0,0,0,0)):null!==(e=xd.exec(n))?T.some(Kc(e[1],e[2],e[3],"1")):null!==(e=Rd.exec(n))?T.some(Kc(e[1],e[2],e[3],e[4])):T.none()).map(Gc);var n,e}).getOrThunk(function(){var n=document.createElement("canvas"),e=(n.height=1,n.width=1,n.getContext("2d")),n=(e.clearRect(0,0,n.width,n.height),e.fillStyle="#FFFFFF",e.fillStyle=o,e.fillRect(0,0,1,1),e.getImageData(0,0,1,1).data),e=n[0],t=n[1],r=n[2],n=n[3];return Gc($c(e,t,r,n))})}function Yc(n){var e=n;return{get:function(){return e},set:function(n){e=n}}}function Jc(n){function e(){t.get().each(n)}var t=Yc(T.none());return{clear:function(){e(),t.set(T.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(n){e(),t.set(T.some(n))}}}function Qc(){var e=Jc(p);return v(v({},e),{on:function(n){return e.get().each(n)}})}function Zc(u,i,c,l){return function(t){function n(){function n(n){return u.formatter.match(c,{value:l},n.dom,o)}var e=Af(i);o?(t.setActive(!g(e,n)),r.set(u.formatter.formatChanged(c,function(n){return t.setActive(!n)},!0))):(t.setActive(hn(e,n)),r.set(u.formatter.formatChanged(c,t.setActive,!1,{value:l})))}var r=Jc(function(n){return n.unbind()}),o=!On(l);return u.initialized?n():u.on("init",n),r.clear}}function nl(n){return We(n,"menu")}function el(n){return b(n,function(n){var e=n.text||n.title;return nl(n)?{text:e,items:el(n.menu)}:{text:e,value:n.value}})}function tl(t,r,n,o,u){return b(n,function(n){var e=n.text||n.title;return nl(n)?{type:"nestedmenuitem",text:e,getSubmenuItems:function(){return tl(t,r,n.menu,o,u)}}:{text:e,type:"togglemenuitem",onAction:function(){return u(n.value)},onSetup:Zc(t,r,o,n.value)}})}function rl(t,r){return function(n){var e;t.execCommand("mceTableApplyCellStyle",!1,((e={})[r]=n,e))}}function ol(n){return h(n,function(n){return nl(n)?[v(v({},n),{menu:ol(n.menu)})]:On(n.value)?[n]:[]})}function ul(e,t,r,o,u){return function(n){return n(tl(e,t,r,o,u))}}function il(t,n,r){return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<(n=b(n,function(n){return{text:n.title,value:"#"+Xc(n.value).value,type:"choiceitem"}})).length?n:void 0,allowCustomColors:!1},onAction:function(n){var e,n="remove"===n.value?"":n.value;t.execCommand("mceTableApplyCellStyle",!1,((e={})[r]=n,e))}}]}function cl(e){return function(){var n=e.queryCommandValue("mceTableRowType");e.execCommand("mceTableRowType",!1,{type:"header"===n?"body":"header"})}}function ll(e){return function(){var n=e.queryCommandValue("mceTableColType");e.execCommand("mceTableColType",!1,{type:"th"===n?"td":"th"})}}function al(n){return Dd.concat(function(n){n=el(hi(n));return 0<n.length?T.some({name:"class",type:"listbox",label:"Class",items:n}):T.none()}(n).toArray())}function fl(n,e){return n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(el(fi(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],{title:"Advanced",name:"advanced",items:"cell"===e?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}}function sl(u){return function(t,r){var o=t.dom;return{setAttrib:function(n,e){u&&!e||o.setAttrib(r,n,e)},setStyle:function(n,e){u&&!e||o.setStyle(r,n,e)},setFormat:function(n,e){u&&!e||(""===e?t.formatter.remove(n,{value:null},r,!0):t.formatter.apply(n,{value:e},r))}}}}function ml(e){return function(n){return Rn(n,"rgb")?e.toHex(n):n}}function dl(n,e){return e=D.fromDom(e),{borderwidth:nr(e,"border-width").getOr(""),borderstyle:nr(e,"border-style").getOr(""),bordercolor:nr(e,"border-color").map(ml(n)).getOr(""),backgroundcolor:nr(e,"background-color").map(ml(n)).getOr("")}}function gl(n){var o=n[0],n=n.slice(1);return x(n,function(n){x(Pe(o),function(r){A(n,function(n,e){var t=o[r];""!==t&&r===e&&t!==n&&(o[r]="")})})}),o}function pl(n,e,t,r){return gn(n,function(n){return!q(t.formatter.matchNode(r,e+n))}).getOr("")}function bl(n,e,t){var r,o=n.dom;return v({height:o.getStyle(e,"height")||o.getAttrib(e,"height"),class:o.getAttrib(e,"class",""),type:(r=e,E(D.fromDom(r)).map(function(n){var e={selection:vu(r.cells)};return bd(n,e)}).getOr("")),align:Ad(n,e)},t?dl(o,e):{})}function hl(n,e,t,r){function o(n,e){return u.getStyle(n,e)||u.getAttrib(n,e)}var u=n.dom,r=r.getOr(e);return v({width:o(r,"width"),height:o(e,"height"),scope:u.getAttrib(e,"scope"),celltype:e.nodeName.toLowerCase(),class:u.getAttrib(e,"class",""),halign:Ad(n,e),valign:kd(n,e)},t?dl(u,e):{})}function vl(n,t){var e=z.fromTable(n),n=z.justCells(e),n=R(n,function(e){return g(t,function(n){return O(e.element,n)})});return b(n,function(n){return{element:n.element.dom,column:z.getColumnAt(e,n.column).map(function(n){return n.element.dom})}})}function wl(c,n,l){var a=1===n.length;x(n,function(n){var e,t,r,o,u=n.element,i=a?Od.normal(c,u):Od.ifTruthy(c,u),n=n.column.map(function(n){return a?Od.normal(c,n):Od.ifTruthy(c,n)}).getOr(i);n=n,o=l,(e=i).setAttrib("scope",o.scope),e.setAttrib("class",o.class),e.setStyle("height",Cu(o.height)),n.setStyle("width",Cu(o.width)),di(c)&&(e=l,(n=i).setFormat("tablecellbackgroundcolor",e.backgroundcolor),n.setFormat("tablecellbordercolor",e.bordercolor),n.setFormat("tablecellborderstyle",e.borderstyle),n.setFormat("tablecellborderwidth",Cu(e.borderwidth))),a&&(Hc(c,u),t=c,r=u,yd.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},r)})),l.halign&&Fc(c,u,l.halign),l.valign&&(o=c,i=u,n=l.valign)&&o.formatter.apply("valign"+n,{},i)})}function yl(n,e,r,t){var l=t.getData();t.close(),n.undoManager.transact(function(){var o,u,t,i,c;o=n,u=e,t=r,c=Ln(i=l,function(n,e){return t[e]!==n}),0<_n(c)&&1<=u.length&&E(u[0]).each(function(n){var e=vl(n,u),t=0<_n(Ln(c,function(n,e){return"scope"!==e&&"celltype"!==e})),r=jn(c,"celltype");(t||jn(c,"scope"))&&wl(o,e,i),r&&o.execCommand("mceTableCellType",!1,{type:i.celltype,no_events:!0}),li(o,n.dom,{structure:r,style:t})}),n.focus()})}function Cl(n,e){var t,r,o,u,i;0!==(e=Af(e)).length&&(t=n,o=E((r=e)[0]).map(function(n){return b(vl(n,r),function(n){return hl(t,n.element,di(t),n.column)})}),o=gl(o.getOrDie()),u={type:"tabpanel",tabs:[{title:"General",name:"general",items:al(n)},fl(n,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:al(n)}]},n.windowManager.open({title:"Cell Properties",size:"normal",body:di(n)?u:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:y(yl,n,e,o)}))}function Sl(n){return Id.concat(function(n){n=el(n.getParam("table_row_class_list",[],"array"));return 0<n.length?T.some({name:"class",type:"listbox",label:"Class",items:n}):T.none()}(n).toArray())}function Tl(o,n,u,i){var c=1===n.length;x(n,function(n){var e,t,r=c?Od.normal(o,n):Od.ifTruthy(o,n);e=u,(t=r).setAttrib("class",e.class),t.setStyle("height",Cu(e.height)),gi(o)&&(t=u,(e=r).setStyle("background-color",t.backgroundcolor),e.setStyle("border-color",t.bordercolor),e.setStyle("border-style",t.borderstyle)),u.align!==i.align&&(Hc(o,n),Fc(o,n,u.align))})}function xl(c,l,a,n){var f=n.getData();n.close(),c.undoManager.transact(function(){var e,n,t,r,o,u,i;e=c,n=l,t=a,i=Ln(r=f,function(n,e){return t[e]!==n}),0<_n(i)&&(o=jn(i,"type"),(u=!o||1<_n(i))&&Tl(e,n,r,t),o&&e.execCommand("mceTableRowType",!1,{type:r.type,no_events:!0}),E(D.fromDom(n[0])).each(function(n){return li(e,n.dom,{structure:o,style:u})})),c.focus()})}function Rl(e){var t,n,r,o,u;u=Sf(e),t=Rf.selected,u=Of(u),n=u.bind(function(n){return E(n)}).map(function(n){return sr(n)}),0!==(u=dt(u,n,function(e,n){return R(n,function(n){return g(vu(n.dom.cells),function(n){return"1"===Ut(n,t)||O(n,e)})})}).getOr([])).length&&(n=b(u,function(n){return bl(e,n.dom,gi(e))}),n=gl(n),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:Sl(e)},fl(e,"row")]},o={type:"panel",items:[{type:"grid",columns:2,items:Sl(e)}]},e.windowManager.open({title:"Row Properties",size:"normal",body:gi(e)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:y(xl,e,b(u,function(n){return n.dom}),n)}))}function Dl(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)H(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var o=0;o<e.children.length;o++)Dl(n,e.children[o],t,r)}function Ol(f,s,t,n){var m=f.dom,d=n.getData(),g=Ln(d,function(n,e){return t[e]!==n});n.close(),""===d.class&&delete d.class,f.undoManager.transact(function(){var n,e;if(s||(i=parseInt(d.cols,10)||1,c=parseInt(d.rows,10)||1,s=Ec(f,i,c,0,0)),0<_n(g)){var t=f,r=s,o=d,u=t.dom,i={},c={};if(i.class=o.class,c.height=Cu(o.height),u.getAttrib(r,"width")&&!bi(t)?i.width=(a=o.width)?a.replace(/px$/,""):"":c.width=Cu(o.width),bi(t)?(c["border-width"]=Cu(o.border),c["border-spacing"]=Cu(o.cellspacing)):(i.border=o.border,i.cellpadding=o.cellpadding,i.cellspacing=o.cellspacing),bi(t)&&r.children)for(var l=0;l<r.children.length;l++)Dl(u,r.children[l],{"border-width":Cu(o.border),padding:Cu(o.cellpadding)}),pi(t)&&Dl(u,r.children[l],{"border-color":o.bordercolor});pi(t)&&(c["background-color"]=o.backgroundcolor,c["border-color"]=o.bordercolor,c["border-style"]=o.borderstyle),i.style=u.serializeStyle(v(v({},mi(t)),c)),u.setAttribs(r,v(v({},si(t)),i));var a=m.select("caption",s)[0];(a&&!d.caption||!a&&d.caption)&&f.execCommand("mceTableToggleCaption"),""===d.align?Hc(f,s):Fc(f,s,d.align)}f.focus(),f.addVisual(),0<_n(g)&&(e=!(n=jn(g,"caption"))||1<_n(g),li(f,s,{structure:n,style:e}))})}function Al(n,e){var t,r,o,u,i=n.dom,c=(u=pi(r=n),c=mi(r),o=si(r),u=u?(u=r.dom,{borderstyle:Wn(c,"border-style").getOr(""),bordercolor:ml(u)(Wn(c,"border-color").getOr("")),backgroundcolor:ml(u)(Wn(c,"background-color").getOr(""))}):{},v(v(v(v(v(v({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),c),o),u),(u=c["border-width"],bi(r)&&u?{border:u}:Wn(o,"border").fold(function(){return{}},function(n){return{border:n}}))),(r=Wn(c,"border-spacing").or(Wn(o,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),u=Wn(c,"border-padding").or(Wn(o,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),v(v({},r),u)))),l=(!1===e?(t=i.getParent(n.selection.getStart(),"table",n.getBody()))?(o=t,u=pi(r=n),i=r.dom,a=bi(r)?i.getStyle(o,"border-spacing")||i.getAttrib(o,"cellspacing"):i.getAttrib(o,"cellspacing")||i.getStyle(o,"border-spacing"),f=bi(r)?jc(i,o,"padding")||i.getAttrib(o,"cellpadding"):i.getAttrib(o,"cellpadding")||jc(i,o,"padding"),c=v({width:i.getStyle(o,"width")||i.getAttrib(o,"width"),height:i.getStyle(o,"height")||i.getAttrib(o,"height"),cellspacing:a,cellpadding:f,border:(a=i,f=o,l=nr(D.fromDom(f),"border-width"),bi(r)&&l.isSome()?l.getOr(""):a.getAttrib(f,"border")||jc(r.dom,f,"border-width")||jc(r.dom,f,"border")),caption:!!i.select("caption",o)[0],class:i.getAttrib(o,"class",""),align:Ad(r,o)},u?dl(i,o):{})):pi(n)&&(c.borderstyle="",c.bordercolor="",c.backgroundcolor=""):(c.cols="1",c.rows="1",pi(n)&&(c.borderstyle="",c.bordercolor="",c.backgroundcolor="")),el(vi(n))),a=(0<l.length&&c.class&&(c.class=c.class.replace(/\s*mce\-item\-table\s*/g,"")),{type:"grid",columns:2,items:function(n,e,t){t=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],n=n.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],e=0<e.length?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return t.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(n).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(e)}(n,l,e)}),f=pi(n)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},fl(n,"table")]}:{type:"panel",items:[a]};n.windowManager.open({title:"Table Properties",size:"normal",body:f,onSubmit:y(Ol,n,t,c),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:c})}function kl(n){return Df(Sf(n),Cf(n))}function Il(n,e,t,r,o){void 0===o&&(o=S);var u=1===r;return!u&&t<=0?Ld.first(n[0]):u&&t>=n.length-1?Ld.last(n[n.length-1]):o(t=n[u=t+r])?Ld.middle(e,t):Il(n,e,u,r,o)}function Bl(t,n){return E(t,n).bind(function(n){var e=vt(n);return pn(e,function(n){return O(t,n)}).map(function(n){return{index:n,all:e}})})}function Ml(n,e){return(n=n.document.createRange()).selectNode(e.dom),n}function El(n,e){return(n=n.document.createRange()).selectNodeContents(e.dom),n}function Pl(n,e,t){var r,o,n=n.document.createRange();return r=n,e.fold(function(n){r.setStartBefore(n.dom)},function(n,e){r.setStart(n.dom,e)},function(n){r.setStartAfter(n.dom)}),o=n,t.fold(function(n){o.setEndBefore(n.dom)},function(n,e){o.setEnd(n.dom,e)},function(n){o.setEndAfter(n.dom)}),n}function Nl(n,e,t,r,o){return(n=n.document.createRange()).setStart(e.dom,t),n.setEnd(r.dom,o),n}function zl(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function Ll(n,e,t){return e(D.fromDom(t.startContainer),t.startOffset,D.fromDom(t.endContainer),t.endOffset)}function _l(u,n){return Hd(u,n).match({ltr:function(n,e,t,r){var o=u.document.createRange();return o.setStart(n.dom,e),o.setEnd(t.dom,r),o},rtl:function(n,e,t,r){var o=u.document.createRange();return o.setStart(t.dom,r),o.setEnd(n.dom,e),o}})}function Wl(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}function jl(t,r,n,e,o){function u(n){var e=t.dom.createRange();return e.setStart(r.dom,n),e.collapse(!0),e}var i=Nr(r).length,n=function(n,e,t,r,o){if(0!==o){if(e===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),l=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||u<l)return i-1;u=l}}}return 0}(function(n){return u(n).getBoundingClientRect()},n,e,o.right,i);return u(n)}function Fl(n,e,t,r){return(Ke(e)?Vd:Ud)(n,e,t,r)}function Hl(n,e){return e-n.left<n.right-e}function Vl(n,e,t){return(n=n.dom.createRange()).selectNode(e.dom),n.collapse(t),n}function Ul(n,e){var t=I(n);return"input"===t?F.after(n):l(["br","img"],t)?0===e?F.before(n):F.after(n):F.on(n,e)}function ql(n,e){return n=n.fold(F.before,Ul,F.after),e=e.fold(F.before,Ul,F.after),jd.relative(n,e)}function Gl(n,e,t,r){return n=Ul(n,e),e=Ul(t,r),jd.relative(n,e)}function $l(n,e,t,r){l=e,o=t,u=r,(i=qn(c=n).dom.createRange()).setStart(c.dom,l),i.setEnd(o.dom,u);var o,u,i,c=i,l=O(n,t)&&e===r;return c.collapsed&&!l}function Kl(n){return T.from(n.getSelection())}function Xl(n,e){Kl(n).each(function(n){n.removeAllRanges(),n.addRange(e)})}function Yl(n,e,t,r,o){e=Nl(n,e,t,r,o),Xl(n,e)}function Jl(l,n){Hd(l,n).match({ltr:function(n,e,t,r){Yl(l,n,e,t,r)},rtl:function(o,u,i,c){Kl(l).each(function(n){if(n.setBaseAndExtent)n.setBaseAndExtent(o.dom,u,i.dom,c);else if(n.extend)try{t=i,r=c,(e=n).collapse(o.dom,u),e.extend(t.dom,r)}catch(n){Yl(l,i,c,o,u)}else Yl(l,i,c,o,u);var e,t,r})}})}function Ql(n,e,t,r,o){e=Gl(e,t,r,o),Jl(n,e)}function Zl(n,e,t){e=ql(e,t),Jl(n,e)}function na(n){function e(n,e,t,r){return Nl(o,n,e,t,r)}var o=jd.getWin(n).dom,n=n.match({domRange:function(n){var e=D.fromDom(n.startContainer),t=D.fromDom(n.endContainer);return Gl(e,n.startOffset,t,n.endOffset)},relative:ql,exact:Gl});return Hd(o,n).match({ltr:e,rtl:e})}function ea(n){var e;return 0<n.rangeCount?(e=n.getRangeAt(0),n=n.getRangeAt(n.rangeCount-1),T.some(_d(D.fromDom(e.startContainer),e.startOffset,D.fromDom(n.endContainer),n.endOffset))):T.none()}function ta(n){var e,t;return null!==n.anchorNode&&null!==n.focusNode&&(e=D.fromDom(n.anchorNode),t=D.fromDom(n.focusNode),$l(e,n.anchorOffset,t,n.focusOffset))?T.some(_d(e,n.anchorOffset,t,n.focusOffset)):ea(n)}function ra(n,e,t){t=((t=void 0===t?!0:t)?El:Ml)(n,e),Xl(n,t)}function oa(n){return Kl(n).filter(function(n){return 0<n.rangeCount}).bind(ta).map(function(n){return jd.exact(n.start,n.soffset,n.finish,n.foffset)})}function ua(n,e){var n=_l(n,e);return 0<(n=0<(n=(e=n).getClientRects()).length?n[0]:e.getBoundingClientRect()).width||0<n.height?T.some(n).map(zl):T.none()}function ia(n,e,t){return n=D.fromDom(n.document),Kd(n,e,t).map(function(n){return _d(D.fromDom(n.startContainer),n.startOffset,D.fromDom(n.endContainer),n.endOffset)})}function ca(n,e,t){return la(n,e,(o=vs,Bl(r=t,u).fold(function(){return Ld.none()},function(n){return Il(n.all,r,n.index,-1,o)})));var r,o,u}function la(t,e,n){return n.fold(T.none,T.none,function(n,e){return ff(e).map(function(n){return Jd(t,n)})},function(n){return t.execCommand("mceTableInsertRowAfter"),Yd(t,e,n)})}function aa(n,e){return n=_l(n,e),_d(D.fromDom(n.startContainer),n.startOffset,D.fromDom(n.endContainer),n.endOffset)}function fa(t,n,r,e,o){return O(r,e)?T.none():yo(r,e,n).bind(function(n){var e=n.boxes.getOr([]);return 1<e.length?(o(t,e,n.start,n.finish),T.some(ng.create(T.some(tg(r,0,r,lf(r))),!0))):T.none()})}function sa(n,e,t,r){return void 0===r&&(r=ma),n.property().parent(e).map(function(n){return ug(n,r)})}function ma(n,e,t,r){return void 0===r&&(r=ig),t.sibling(n,e).map(function(n){return ug(n,r)})}function da(n,e){return e=e,dg(pg,n,mg(pg),e)}function ga(n,e){return e=e,gg(pg,n,mg(pg),e)}function pa(n){return s(n,"tr")}function ba(r){return Qe(r).bind(function(e){var t=f(e);return pn(t,y(O,r)).map(function(n){return{parent:e,children:t,element:r,index:n}})})}function ha(n){return"br"===I(n)}function va(n,e,t){return e(n,t).bind(function(n){return Ke(n)&&0===Nr(n).trim().length?va(n,e,t):T.some(n)})}function wa(e,n,t,r){return Kn(o=n,u=t).filter(ha).orThunk(function(){return Kn(o,u-1).filter(ha)}).bind(function(n){return r.traverse(n).fold(function(){return va(n,r.gather,e).map(r.relative)},function(n){return ba(n).map(function(n){return F.on(n.parent,n.index)})})});var o,u}function ya(n,e,t,r){var o,u,i;return(ha(e)?(o=n,u=e,(i=r).traverse(u).orThunk(function(){return va(u,i.gather,o)}).map(i.relative)):wa(n,e,t,r)).map(function(n){return{start:n,finish:n}})}function Ca(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}}function Sa(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}}function Ta(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}}function xa(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}}function Ra(n,e){return T.some(n.getRect(e))}function Da(e,n,t){return jt(n,Fm).fold(C,function(n){return wg(e,n).exists(function(n){return Cg(t,n)})})}function Oa(e,t,n){var r,o=e.move(n,5),u=xg(t,e,n,o,100).getOr(o);return n=u,o=t,((r=e).point(n)>o.getInnerHeight()?T.some(r.point(n)-o.getInnerHeight()):r.point(n)<0?T.some(-r.point(n)):T.none()).fold(function(){return t.situsFromPoint(u.left,e.point(u))},function(n){return t.scrollBy(0,n),t.situsFromPoint(u.left,e.point(u)-n)})}function Aa(t,r,o){return t.getSelection().bind(function(e){return ya(r,e.finish,e.foffset,o).fold(function(){return T.some(Ei(e.finish,e.foffset))},function(n){n=t.fromSitus(n),n=hg.verify(t,e.finish,e.foffset,n.finish,n.foffset,o.failure,r);return hg.cata(n,function(n){return T.none()},function(){return T.none()},function(n){return T.some(Ei(n,0))},function(n){return T.some(Ei(n,lf(n)))})})})}function ka(t,r,o,u,i,c){return 0===c?T.none():(l=i,vg(e=t,o,u).bind(function(n){return Dg(e,l,n)}).bind(function(n){var e=t.fromSitus(n),e=hg.verify(t,o,u,e.finish,e.foffset,i.failure,r);return hg.cata(e,function(){return T.none()},function(){return T.some(n)},function(n){return O(o,n)&&0===u?Ia(t,o,u,Sa,i):ka(t,r,n,0,i,c-1)},function(n){return O(o,n)&&u===lf(n)?Ia(t,o,u,Ca,i):ka(t,r,n,lf(n),i,c-1)})}));var e,l}function Ia(e,n,t,r,o){return vg(e,n,t).bind(function(n){return Dg(e,o,r(n,Rg.getJumpSize()))})}function Ba(n,e){return Wt(n,function(n){return Qe(n).exists(function(n){return O(n,e)})},t).isSome();var t}function Ma(u,i,c,n,l){return s(n,"td,th",i).bind(function(o){return s(o,"table",i).bind(function(n){return Ba(l,n)?Aa(e=u,t=i,r=c).bind(function(n){return ka(e,t,n.element,n.offset,r,20).map(e.fromSitus)}).bind(function(e){return s(e.finish,"td,th",i).map(function(n){return{start:o,finish:n,range:e}})}):T.none();var e,t,r})})}function Ea(n,e){return s(n,"td,th",e)}function Pa(e){return function(n){return n===e}}function Na(n,e,t,r){return n=Wg(n),{clearstate:(n=Bg(n,e,t,r)).clearstate,mousedown:n.mousedown,mouseover:n.mouseover,mouseup:n.mouseup}}function za(n,l,a,f){function s(){return f.clear(l),T.none()}var m=Wg(n);return{keydown:function(n,e,t,r,o,u){var n=n.raw,i=n.which,c=!0===n.shiftKey;return Co(l,f.selectedSelector).fold(function(){return zg(i)&&!c&&f.clearBeforeUpdate(l),Ng(i)&&c?y(Ig,m,l,a,Mg,r,e,f.selectRange):Pg(i)&&c?y(Ig,m,l,a,Eg,r,e,f.selectRange):Ng(i)?y(Og,m,a,Mg,r,e,kg):Pg(i)?y(Og,m,a,Eg,r,e,Ag):T.none},function(e){function n(n){return function(){return Cn(n,function(n){return og(n.rows,n.cols,l,e,f)}).fold(function(){return So(l,f.firstSelectedSelector,f.lastSelectedSelector).map(function(n){var e=Ng(i)||u.isForward(i)?F.after:F.before;return m.setRelativeSelection(F.on(n.first,0),e(n.table)),f.clear(l),ng.create(T.none(),!0)})},function(n){return T.some(ng.create(T.none(),!0))})}}return Ng(i)&&c?n([jg(1,0)]):Pg(i)&&c?n([jg(-1,0)]):u.isBackward(i)&&c?n([jg(0,-1),jg(-1,0)]):u.isForward(i)&&c?n([jg(0,1),jg(1,0)]):zg(i)&&!c?s:T.none})()},keyup:function(t,r,o,u,i){return Co(l,f.selectedSelector).fold(function(){var n=t.raw,e=n.which;return!0===n.shiftKey&&zg(e)?rg(l,a,r,o,u,i,f.selectRange):T.none()},T.none)}}}function La(n,r,e,o){var u=Wg(n);return function(n,t){o.clearBeforeUpdate(r),yo(n,t,e).each(function(n){var e=n.boxes.getOr([]);o.selectRange(r,e,n.start,n.finish),u.selectContents(t),u.collapseSelection()})}}function _a(n,e,t){var r=z.fromTable(n);return mm(r,e).map(function(n){var e=am(r,t,!1);return{upOrLeftCells:Vg(e,n),downOrRightCells:Ug(e,n)}})}function Wa(n){return!1===gs(D.fromDom(n.target),"ephox-snooker-resizer-bar")}var ja=/(\d+(\.\d+)?)%/,Fa=/(\d+(\.\d+)?)px|em/,Ha=Un("col"),Va=function(n,e,t){var r=T.from(n.dom.parentElement).map(D.fromDom).getOrThunk(function(){return Yn(qn(n))});return e(n)/t(r)*100},Ua=function(n,e){m(n,"height",e+"px")},qa=function(n,e){return nr(n,e).orThunk(function(){return qt(n,e).map(function(n){return n+"px"})})},Ga=function(n){return Va(n,Mo,Po)},$a=function(n){return(Ha(n)?Mo:No)(n)},Ka=d(ja),Xa=Un("col"),Ya=function(n,e,o,u){var i=zo(n),n=z.hasColumns(n)?b(z.justColumns(n),function(n){return T.from(n.element)}):i,c=[T.some($o.edge(e))].concat(b($o.positions(i,e),function(n){return n.map(function(n){return n.x})})),l=X(bt);return b(n,function(n,r){return lu(n,r,c,l,function(n){var e,t;return e=n,t=(t=ke().browser).isChrome()||t.isFirefox(),!Xa(e)||t?o(n):(e=i[r],t=w,n=null!=e?t(e):T.none(),lu(n,r,c,l,function(n){return u(T.some(Mo(n)))},u))},u)})},Ja=function(n,e){return Ya(n,e,iu,au)},Qa=function(n,e,t){return Ya(n,e,$a,function(n){return n.getOrThunk(t.minCellWidth)})},Za=function(n,e,t){return fu(n,e,t,ru,function(n){return n.getOrThunk(ir)})},nf=function(n,e,t){return fu(n,e,t,cu,au)},ef=function(n,e){return function(){return ut(n)?e(n):parseFloat(nr(n,"width").getOr("0"))}},tf=function(r){var t=ef(r,function(n){return parseFloat(uu(n))}),e=ef(r,Mo);return{width:t,pixelWidth:e,getWidths:function(n,e){return t=e,Ya(n,r,Ga,function(n){return n.fold(function(){return t.minCellWidth()},function(n){return n/t.pixelWidth()*100})});var t},getCellDelta:function(n){return n/e()*100},singleColumnWidth:function(n,e){return[100-n]},minCellWidth:function(){return ur()/e()*100},setElementWidth:Zo,adjustTableWidth:function(n){var e=t();Zo(r,e+n/100*e)},isRelative:!0,label:"percent"}},rf=function(t){var e=ef(t,Mo);return{width:e,pixelWidth:e,getWidths:function(n,e){return Qa(n,t,e)},getCellDelta:w,singleColumnWidth:function(n,e){return[Math.max(ur(),n+e)-n]},minCellWidth:ur,setElementWidth:Qo,adjustTableWidth:function(n){n=e()+n;Qo(t,n)},isRelative:!1,label:"pixel"}},of=function(t){return tu(t).fold(function(){return su(t)},function(n){return e=t,n=n,(null!==Ka().exec(n)?tf:rf)(e);var e})},uf=rf,cf=tf,lf=function(n){return"img"===I(n)?1:zr(n).fold(function(){return f(n).length},function(n){return n.length})},af=["img","br"],ff=function(n){return at(n,gu)},sf=function(n){return o=gu,(u=function(n){for(var e=f(n),t=e.length-1;0<=t;t--){var r=e[t];if(o(r))return T.some(r);r=u(r);if(r.isSome())return r}return T.none()})(n);var o,u},mf={scope:["row","col"]},df=function(e){return function(){var n=D.fromTag("td",e.dom);return L(n,D.fromTag("br",e.dom)),n}},gf=function(n){return function(){return D.fromTag("col",n.dom)}},pf=function(n){return function(){return D.fromTag("colgroup",n.dom)}},bf=function(n){return function(){return D.fromTag("tr",n.dom)}},hf=function(n,e,t){var r=function(n,e){e=Kr(n,e),n=f($r(n));return Ir(e,n),e}(n,e);return A(t,function(n,e){null===n?M(r,e):B(r,e,n)}),r},vf=function(t,r,o){return ff(t).map(function(n){var e=o.join(","),n=Jn(n,e,function(n){return O(n,t)});return sn(n,function(n,e){e=Gr(e);return M(e,"contenteditable"),L(n,e),e},r)}).getOr(r)},wf=function(n,r){A(mf,function(e,t){return qt(n,t).filter(function(n){return l(e,n)}).each(function(n){return B(r,t,n)})})},yf=function(n){return D.fromDom(n.getBody())},Cf=function(e){return function(n){return O(n,yf(e))}},Sf=function(n){return D.fromDom(n.selection.getStart())},e="data-mce-selected",Tf="data-mce-first-selected",xf="data-mce-last-selected",Rf={selected:e,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:Tf,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:xf,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Df=Du("th,td,caption"),Of=Du("th,td"),Af=Tu,kf=function(u,e,i){u.on("BeforeGetContent",function(t){function n(n){t.preventDefault(),E(n[0]).map(function(n){n=du(n,"[data-mce-selected]");return Su(n),[n]}).each(function(n){var e;t.content=("text"===t.format?b(n,function(n){return n.dom.innerText}):(e=u,b(n,function(n){return e.selection.serializer.serialize(n.dom,{})}))).join("")})}!0===t.selection&&Ur(e.get(),p,n,p)}),u.on("BeforeSetContent",function(o){var n;!0===o.selection&&!0===o.paste&&(n=Af(e),wn(n).each(function(r){E(r).each(function(n){var e=R(function(n,e){e=(e||document).createElement("div");return e.innerHTML=n,f(D.fromDom(e))}(o.content),function(n){return"meta"!==I(n)}),t=Un("table");1===e.length&&t(e[0])&&(o.preventDefault(),t=D.fromDom(u.getDoc()),t=hu(t),e={element:r,clipboard:e[0],generators:t},i.pasteCells(n,e).each(function(){u.focus()}))})}))})},e=ce([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),If=v({},e),Bf=function(n,e,r,o,u){var i=n.slice(0),n=(e=e,0===(n=n).length?If.none():1===n.length?If.only(0):0===e?If.left(0,1):e===n.length-1?If.right(e-1,e):0<e&&e<n.length-1?If.middle(e-1,e,e+1):If.none()),e=d(b(i,d(0)));return n.fold(e,function(n){return o.singleColumnWidth(i[n],r)},function(n,e){return u.calcLeftEdgeDeltas(i,n,e,r,o.minCellWidth(),o.isRelative)},function(n,e,t){return u.calcMiddleDeltas(i,n,e,t,r,o.minCellWidth(),o.isRelative)},function(n,e){return u.calcRightEdgeDeltas(i,n,e,r,o.minCellWidth(),o.isRelative)})},Mf=function(n,t){n=z.justCells(n);return b(n,function(n){var e=Ou(n.row,n.row+n.rowspan,t);return{element:n.element,height:e,rowspan:n.rowspan}})},Ef=function(n,t){return b(n.all,function(n,e){return{element:n.element,height:t[e]}})},Pf=function(n){return sn(n,function(n,e){return n+e},0)},Nf=function(n,e,t){n=Au(n,e);x(n,function(n){t.setElementWidth(n.element,n.width)})},zf=function(n){return b(n,d(0))},Lf=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},_f=Iu(function(n){return n<0}),Wf=Iu(S),jf=function(n,e){var t=T.from(n.dom.documentElement).map(D.fromDom).getOr(n);return{parent:d(t),view:d(n),origin:d(Fo(0,0)),isResizable:e}},Ff=function(n,e,t){return{parent:d(e),view:d(n),origin:d(Fo(0,0)),isResizable:t}},Hf=ce([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Vf=v(v({},Hf),{from:function(n){return Dn(n,"%")?Eu("%",Hf.percent,n):Dn(n,"px")?Eu("px",Hf.pixels,n):Hf.invalid(n)}}),Uf=function(n,e,t){t=Vf.from(t),t=hn(n,function(n){return"0px"===n})?function(n,e){n=n.fold(function(){return d("")},function(n){return d(n/e+"px")},function(){return d(100/e+"%")});return nn(e,n)}(t,n.length):Pu(t,n,e);if(0===t.length)return t;n=sn(t,function(n,e){var t=Vf.from(e).fold(function(){return{value:e,remainder:0}},function(n){return qf(n,"px")},function(n){return{value:n+"%",remainder:0}});return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}},{output:[],remainder:0}),e=n.output;return e.slice(0,e.length-1).concat([Gf(e[e.length-1],Math.round(n.remainder))])},qf=function(n,e){var t=Math.floor(n);return{value:t+e,remainder:n-t}},Gf=function(n,e){return Vf.from(n).fold(d(n),function(n){return n+e+"px"},function(n){return n+e+"%"})},$f=Vf.from,Kf=function(t,n,r){x(n,function(n){var e=t.slice(n.column,n.colspan+n.column),e=Nu(e,ur());m(n.element,"width",e+r)})},Xf=function(t,n,r){x(n,function(n,e){e=Nu([t[e]],ur());m(n.element,"width",e+r)})},Yf=function(t,n,e,r){x(e,function(n){var e=t.slice(n.row,n.rowspan+n.row),e=Nu(e,ir());m(n.element,"height",e+r)}),x(n,function(n,e){m(n.element,"height",t[e])})},Jf=function(n){return $f(n).fold(d("px"),d("px"),d("%"))},Qf=function(n){return tu(n).exists(function(n){return ja.test(n)})},Zf=function(n){return tu(n).exists(function(n){return Fa.test(n)})},ns=function(n){return tu(n).isNone()},es=function(e){var o=[];return{bind:function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");o.push(n)},unbind:function(e){o=R(o,function(n){return n!==e})},trigger:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={};x(e,function(n,e){r[n]=t[e]}),x(o,function(n){n(r)})}}},ts=function(n){return{registry:ze(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:ze(n,function(n){return n.trigger})}},rs=function(n){throw new Error("Unsupported keys for object: "+_u(n).join(", "))},os=function(o,u,i){if(0===u.length)throw new Error("You must specify at least one required field.");var t,e="required",n=u;if(a(n))return x(n,function(n){if(!H(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")}),t=_u(u),gn(t,function(n,e){return e<t.length-1&&n===t[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}),function(e){var t=Pe(e);if(!hn(u,function(n){return l(t,n)}))throw r=t,new Error("All required keys ("+_u(u).join(", ")+") were not specified. Specified keys were: "+_u(r).join(", ")+".");o(u,t);var n,r=R(u,function(n){return!i.validate(e[n],n)});if(0<r.length)throw n=i.label,new Error("All values need to be of type: "+n+". Keys ("+_u(r).join(", ")+") were not.");return e};throw new Error("The "+e+" fields must be an array. Was: "+n+".")},Tf=ju(["compare","extract","mutate","sink"]),us=ju(["element","start","stop","destroy"]),is=ju(["forceDrop","drop","move","delayDrop"]),cs=function(n,e,t,r){return qu(n,e,t,r,!1)},ls=S,as=function(n,e,t){return cs(n,e,ls,t)},fs=Uu,ss=function(n){return void 0!==n.dom.classList},ms=function(n,e){var t="class";return e=$u(n,t).concat([e]),B(n,t,e.join(" ")),!0},ds=function(n,e){ss(n)?n.dom.classList.add(e):ms(n,e)},gs=function(n,e){return ss(n)&&n.dom.classList.contains(e)},ps=Yu("ephox-dragster").resolve,bs=Tf({compare:function(n,e){return Fo(e.left-n.left,e.top-n.top)},extract:function(n){return T.some(Fo(n.x,n.y))},sink:function(n,e){var t=function(n){var n=v({layerClass:ps("blocker")},n),e=D.fromTag("div");B(e,"role","presentation"),Jt(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ds(e,ps("blocker")),ds(e,n.layerClass);return{element:d(e),destroy:function(){_(e)}}}(e),r=as(t.element(),"mousedown",n.forceDrop),o=as(t.element(),"mouseup",n.drop),u=as(t.element(),"mousemove",n.move),i=as(t.element(),"mouseout",n.delayDrop);return us({element:t.element,start:function(n){L(n,t.element())},stop:function(){_(t.element())},destroy:function(){t.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()}})},mutate:function(n,e){n.mutate(e.left,e.top)}}),hs=function(n,e){var t=void 0!==(e=void 0===e?{}:e).mode?e.mode:bs;return Vu(n,t,e)},vs=function(n,e){return void 0===e&&(e=!1),!ke().browser.isIE()&&ut(n)?n.dom.isContentEditable:Ju(n).fold(d(e),function(n){return"true"===Qu(n)})},xf=Yu("ephox-snooker").resolve,ws=function(){var t,r=ts({drag:es(["xDelta","yDelta","target"])}),o=T.none(),n={mutate:function(n,e){t.trigger.drag(n,e)},events:(t=ts({drag:es(["xDelta","yDelta"])})).registry};n.events.drag.bind(function(e){o.each(function(n){r.trigger.drag(e.xDelta,e.yDelta,n)})});return{assign:function(n){o=T.some(n)},get:function(){return o},mutate:n.mutate,events:r.registry}},ys=xf("resizer-bar"),Cs=xf("resizer-rows"),Ss=xf("resizer-cols"),Ts=function(n){n=Qn(n.parent(),"."+ys);x(n,_)},xs=function(n,e,t,r,o){var u,i,c,l,a=Vo(t),f=e.isResizable,r=0<r.length?qo.positions(r,t):[],s=0<r.length?(u=f,h(n.all,function(n,e){return u(n.element)?[e]:[]})):[],r=R(r,function(n,e){return g(s,function(n){return e===n})}),r=(ei(e,r,a,Eo(t)),0<o.length?$o.positions(o,t):[]),m=0<r.length?(c=f,l=[],nn((i=n).grid.columns,function(n){z.getColumnAt(i,n).map(function(n){return n.element}).forall(c)&&l.push(n)}),R(l,function(e){var n=z.filterItems(i,function(n){return n.column===e});return hn(n,function(n){return c(n.element)})})):[],o=R(r,function(n,e){return g(m,function(n){return e===n})});ni(e,o,a,ro(t))},Rs=function(n,e){var t,r,o;Ts(n),n.isResizable(e)&&(t=z.fromTable(e),r=Lo(t),o=zo(t),xs(t,n,e,r,o))},Ds=function(n){ti(n,function(n){m(n,"display","none")})},Os=function(n){ti(n,function(n){m(n,"display","block")})},As=function(n){return gs(n,Cs)},ks=function(n){return gs(n,Ss)},Is=xf("resizer-bar-dragging"),Bs=function(n,o,u){var c=qo,i=$o,n=ri(n),l=ts({beforeResize:es(["table","type"]),afterResize:es(["table","type"]),startDrag:es([])});return n.events.adjustHeight.bind(function(n){var e,t,r,o,u=n.table,i=(l.trigger.beforeResize(u,"row"),c.delta(n.delta,u));e=u,t=i,r=n.row,i=c,n=z.fromTable(e),i=Za(n,e,i),i=b(i,function(n,e){return r===e?Math.max(t+n,ir()):n}),o=Mf(n,i),n=Ef(n,i),x(n,function(n){Ua(n.element,n.height)}),x(o,function(n){Ua(n.element,n.height)}),n=Pf(i),Ua(e,n),l.trigger.afterResize(u,"row")}),n.events.startAdjust.bind(function(n){l.trigger.startDrag()}),n.events.adjustWidth.bind(function(n){var e=n.table,t=(l.trigger.beforeResize(e,"col"),i.delta(n.delta,e)),r=u(e);ku(e,t,n.column,o,r),l.trigger.afterResize(e,"col")}),{on:n.on,off:n.off,hideBars:n.hideBars,showBars:n.showBars,destroy:n.destroy,events:l.registry}},Ms={structure:!1,style:!0},j={structure:!0,style:!1},Es={structure:!0,style:!0},Ps={"border-collapse":"collapse",width:"100%"},Ns=nn(5,function(n){n=n+1+"px";return{title:n,value:n}}),zs=b(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(n){return{title:n,value:n.toLowerCase()}}),Ls={border:"1"},_s="preservetable",Ws=function(n){return n.getParam("table_sizing_mode","auto")},js=function(n){return n.getParam("table_responsive_width")},Fs=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Hs=function(n){var e=uu(n);zu(n,T.some(e),T.none()),Ii(n)},Vs=function(n){var e=Mo(n)+"px";zu(n,T.some(e),T.none()),Ii(n)},Us=function(n){er(n,"width");var e=wt(n),e=0<e.length?e:vt(n);x(e,function(n){er(n,"width"),Ii(n)}),Ii(n)},qs="bar-",Gs=function(u){function r(n){return"TABLE"===n.nodeName}function n(){return t}function i(n){return ki(u,n)}function c(){return(xi(u)?Mu:Bu)()}function o(n,e,t){var r,o,e=Dn(e,"e");""===a&&Hs(n),t!==l&&""!==a?(m(n,"width",a),r=c(),o=i(n),e=xi(u)||e?Lu(n).columns-1:0,ku(n,t-l,e,r,o)):/^(\d+(\.\d+)?)%$/.test(a)&&(e=parseFloat(a.replace("%","")),m(n,"width",t*e/l+"%")),/^(\d+(\.\d+)?)px$/.test(a)&&(r=n,o=z.fromTable(r),z.hasColumns(o)||x(vt(r),function(n){var e=Qt(n,"width");m(n,"width",e),M(n,"width")}))}var l,a,f=T.none(),t=T.none(),s=T.none();return u.on("init",function(){n=Mi;var n,e=(e=u).inline?Ff(yf(e),Bi(),n):jf(D.fromDom(e.getDoc()),n);s=T.some(e),function(n){n=n.getParam("object_resizing",!0);return H(n)?"table"===n:n}(u)&&u.getParam("table_resize_bars",!0,"boolean")&&(n=c(),(e=Bs(e,n,i)).on(),e.events.startDrag.bind(function(n){f=T.some(u.selection.getRng())}),e.events.beforeResize.bind(function(n){var e,t,r,o=n.table.dom;e=u,r=wu(t=o),o=yu(o),n=qs+n.type,e.fire("ObjectResizeStart",{target:t,width:r,height:o,origin:n})}),e.events.afterResize.bind(function(n){var e,t,r=n.table,o=r.dom;Su(r),f.each(function(n){u.selection.setRng(n),u.focus()}),r=u,t=wu(e=o),o=yu(o),n=qs+n.type,r.fire("ObjectResized",{target:e,width:t,height:o,origin:n}),u.undoManager.add()}),t=T.some(e))}),u.on("ObjectResizeStart",function(n){var e,t=n.target;r(t)&&(e=D.fromDom(t),x(u.dom.select(".mce-clonedresizable"),function(n){u.dom.addClass(n,"mce-"+Ti(u)+"-columns")}),!Zf(e)&&yi(u)?Vs(e):!Qf(e)&&wi(u)&&Hs(e),ns(e)&&Rn(n.origin,qs)&&Hs(e),l=n.width,a=Ci(u)?"":function(n,e){n=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return T.from(n).filter(On)}(u,t).getOr(""))}),u.on("ObjectResized",function(n){var e,t=n.target;r(t)&&(t=D.fromDom(t),e=n.origin,Rn(e,"corner-")&&o(t,e,n.width),Su(t),li(u,t.dom,Ms))}),u.on("SwitchMode",function(){t.each(function(n){u.mode.isReadOnly()?n.hideBars():n.showBars()})}),{lazyResize:n,lazyWire:function(){return s.getOr(jf(D.fromDom(u.getBody()),Mi))},destroy:function(){t.each(function(n){n.destroy()}),s.each(function(n){n=n,u.inline&&_(n.parent())})}}},$s=function(e,n,t){return e.property().isText(n)&&0===e.property().getText(n).trim().length||e.property().isComment(n)?t(n).bind(function(n){return $s(e,n,t).orThunk(function(){return T.some(n)})}):T.none()},Ks=Ni,Xs=_r(),Ys=Un("th"),Js=function(n){return hn(n,function(n){return Ys(n.element)})},Qs=function(n){var e="thead"===n.section,t=Gt(Li(n.cells),"th");return e||t?{type:"header",subType:(t=t,(e=e)&&t?"sectionCells":e?"section":"cells")}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},Zs=function(n,e,t){return k(t(n.element,e),!0,n.isLocked)},nm=function(n,e){return n.section!==e?Ue(n.element,n.cells,e,n.isNew):n},em=function(n,e){n=z.fromTable(n);switch(Cn(n.all,function(n){n=Qs(n);return"header"===n.type?T.from(n.subType):T.none()}).getOr(e)){case"section":return _i();case"sectionCells":return Wi();case"cells":return ji()}},tm=_i,rm=Wi,om=ji,um=function(){return{transformRow:w,transformCell:Zs}},im=function(n,e,t,r){t===r?M(n,e):B(n,e,t)},cm=function(e,t){var n=Ht(e,t).getOrThunk(function(){var n=D.fromTag(t,qn(e).dom);return"thead"===t?Fi(e,"caption,colgroup",n):"colgroup"===t?Fi(e,"caption",n):L(e,n),n});return Br(n),n},lm=function(f,s){var m=b(f,function(n){return b(n.cells,C)});return b(f,function(n,a){var e=h(n.cells,function(n,e){if(!1!==m[a][e])return[];for(var t=Ui(f,a,e,s),r=a,o=e,u=t.rowspan,i=t.colspan,c=r;c<r+u;c++)for(var l=o;l<o+i;l++)m[c][l]=!0;return[{element:n.element,rowspan:t.rowspan,colspan:t.colspan,isNew:n.isNew}]});return{element:n.element,cells:e,section:n.section,isNew:n.isNew}})},am=function(o,u,i){var c=[];x(o.colgroups,function(n){for(var e=[],t=0;t<o.grid.columns;t++){var r=z.getColumnAt(o,t).map(function(n){return k(n.element,i,!1)}).getOrThunk(function(){return k(u.colGap(),!0,!1)});e.push(r)}c.push(Ue(n.element,e,"colgroup",i))});for(var n=0;n<o.grid.rows;n++){for(var e=[],t=0;t<o.grid.columns;t++){var r=z.getAt(o,n,t).map(function(n){return k(n.element,i,n.isLocked)}).getOrThunk(function(){return k(u.gap(),!0,!1)});e.push(r)}var l=o.all[n],l=Ue(l.element,e,l.section,i);c.push(l)}return c},fm=function(n,e){return Cn(n.all,function(n){return gn(n.cells,function(n){return O(e,n.element)})})},sm=function(e,n,t){n=b(n.selection,function(n){return fr(n).bind(function(n){return fm(e,n)}).filter(t)}),n=$t(n);return Kt(0<n.length,n)},mm=function(n,e){return sm(n,e,S)},dm=function(n,e){return fm(n,e).exists(function(n){return!n.isLocked})},gm=function(n,r,o,u){return 0<r&&r<n[0].cells.length&&x(n,function(n){var e=n.cells[r-1],t=n.cells[r];o(t.element,e.element)&&vr(n,r,k(u(),!0,t.isLocked))}),n},pm=function(n,t,i,c){var e,r,l=N(n).rows;return 0<t&&t<l.length&&(e=l[t-1].cells,r=i,e=mn(e,function(n,e){return g(n,function(n){return r(n.element,e.element)})?n:n.concat([e])},[]),x(e,function(n){for(var o=T.none(),u=t;u<l.length;u++)for(var e=0;e<yr(l[0]);e++)!function(e){var t=l[u],r=wr(t,e);i(r.element,n.element)&&(o=o.isNone()?T.some(c()):o).each(function(n){vr(t,e,k(n,!0,r.isLocked))})}(e)})),n},bm=Qi,hm=Zi,vm=function(n,e,t){var r;return n.row>=e.length||n.column>yr(e[0])?hm("invalid start address out of table bounds, row: "+n.row+", column: "+n.column):(n=(e=e.slice(n.row))[0].cells.slice(n.column),r=yr(t[0]),t=t.length,bm({rowDelta:e.length-t,colDelta:n.length-r}))},wm=function(n,e){return{rowDelta:0,colDelta:yr(n[0])-yr(e[0])}},ym=function(n,e){return{rowDelta:n.length-e.length,colDelta:0}},Cm=function(n,o,e){return b(n,function(r){return mn(e,function(n,e){var t=nc(1,r,o,S)[0];return hr(n,e,t)},r)})},Sm=function(n,e,t){var r=e.colDelta<0?tc:w,o=e.rowDelta<0?ec:w,u=Tr(n),i=yr(n[0]),u=g(u,function(n){return n===i-1}),r=r(n,Math.abs(e.colDelta),t,u?i-1:i),n=Tr(r);return o(r,Math.abs(e.rowDelta),t,en(n,S))},Tm=function(n,e,t,r,o,u){for(var i,c,l=n.row,a=n.column,f=l+t.length,s=a+yr(t[0])+u.length,m=en(u,S),d=l;d<f;d++)for(var g,p,b,h=0,v=a;v<s;v++)m[v]?h++:(c=v,g=void 0,p=y(p=o,wr((b=e)[i=d],c).element),g=b[i],1<b.length&&1<yr(g)&&(0<c&&p(P(g,c-1))||c<g.cells.length-1&&p(P(g,c+1))||0<i&&p(P(b[i-1],c))||i<b.length-1&&p(P(b[i+1],c)))&&Ji(e,P(e[d],v),o,r.cell),p=(g=wr(t[d-l],v-a-h)).element,b=r.replace(p),vr(e[d],v,k(b,!0,g.isLocked)));return e},xm=function(e,n,t){var r=yr(n[0]),n=N(n).cols.length+e.row,o=nn(r-e.column,function(n){return n+e.column});return{row:n,column:gn(o,function(e){return hn(t,function(n){return n!==e})}).getOr(r-1)}},Rm=function(e,t,n){return R(n,function(n){return n>=e.column&&n<=yr(t[0])+e.column})},Dm=function(n,e,t,r){return St(n,function(n){return r(n,t)},e)},Om=function(n,e,t,r,o,u,i){return"colgroup"!==t&&r?wr(n,e):(t=wr(n,o),k(i(t.element,u),!0,!1))},Am=function(n,r){return hn(r,w)&&Js(n.cells)?S:function(n,e,t){return!("th"===I(n.element)&&r[t])}},km=function(n,r){return hn(r,w)&&Js(n)?S:function(n,e,t){return!("th"===I(n.element)&&r[e])}},Im=function(r,o){return function(n,e,t){return T.some(lc(r,n.element,"col",o[t]))}},Bm=function(t,r){return function(n,e){return T.some(lc(t,n.element,"row",r[e]))}},Mm=function(n,e,t){return k(t(n.element,e),!0,n.isLocked)},Em=function(n,u,i,c,l,a,f){return b(n,function(n,o){return e=function(n,e){var r,t;return t=n,g(u,function(n){return i(t.element,n.element)})?(r=f(n,o,e)?l(n,i,c):n,a(r,o,e).each(function(n){var t;t=r.element,n={scope:T.from(n)},A(n,function(n,e){n.fold(function(){M(t,e)},function(n){Vt(t.dom,e,n)})})}),r):n},t=(n=n).cells,t=b(t,e),Ue(n.element,t,n.section,n.isNew);var e,t})},Pm=function(t,r,o){return h(t,function(n,e){return cc(t,e,r,o)?[]:[wr(n,r)]})},Nm=function(t,r,o){var n=t[r];return h(n.cells,function(n,e){return cc(t,r,e,o)?[]:[n]})},zm=function(n){return mn(n,function(n,e){return g(n,function(n){return n.column===e.column})?n:n.concat([e])},[]).sort(function(n,e){return n.column-e.column})},Lm=Un("col"),_m=Un("colgroup"),e=function(e,t){void 0===t&&(t=mc);function r(n){var e;return sc(n)?u({element:n}):(e=o(t(n)),i=T.some({item:n,replacement:e}),e)}var o=function(n){return Lm(n.element)?e.col(n):e.cell(n)},u=function(n){return _m(n.element)?e.colgroup(n):e.row(n)},i=T.none();return{getOrInit:function(e,t){return i.fold(function(){return r(e)},function(n){return t(e,n.item)?n.replacement:r(e)})}}},Tf=function(u){return function(t){var r=[],n=function(e,t){return gn(r,function(n){return t(n.item,e)})},o=function(n){var e=t.replace(n,u,"td"===u?{scope:null}:{});return r.push({item:n,sub:e}),e};return{replaceOrInit:function(e,t){return sc(e)||Lm(e)?e:n(e,t).fold(function(){return o(e)},function(n){return t(e,n.item)?n.sub:o(e)})}}}},xf=function(r){return{unmerge:function(t){var n=dc(t);return n.each(function(n){return B(t,"scope",n)}),function(){var e=r.cell({element:t,colspan:1,rowspan:1});return er(e,"width"),er(t,"width"),n.each(function(n){return B(e,"scope",n)}),e}},merge:function(e){var t,r,n;return er(e[0],"width"),(0===(n=$t(b(e,dc))).length||(t=n[0],r=["row","col"],g(n,function(n){return n!==t&&l(r,n)}))?T.none():T.from(t)).fold(function(){return M(e[0],"scope")},function(n){return B(e[0],"scope",n+"group")}),d(e[0])}}},Wm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],jm=_r(),Fm=function(n){var e=jm;return e=jm.property().name(n),l(Wm,e)},Hm=function(n){var e=jm;return e=jm.property().name(n),l(["ol","ul"],e)},Vm=function(n){return n=n,l(["br","img","hr","input"],jm.property().name(n))},Um=function(n,e){return{grid:n,cursor:e}},qm=function(n,e,t){var r=N(n).rows;return T.from(null==(e=null==(n=r[e])?void 0:n.cells[t])?void 0:e.element).filter(pc).orThunk(function(){return Cn(r,function(n){return Cn(n.cells,function(n){n=n.element;return Kt(pc(n),n)})})})},Gm=vc("thead",!0),$m=vc("tbody",!1),Km=vc("tfoot",!1),Xm=Tf("th"),Tf=Tf("td"),Ym=n(function(n,e,t,r){var o=e[0].row,u=hc(e),u=sn(u,function(n,e){return{grid:uc(n.grid,o,e.row+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid;return W(u,o,e[0].column)},mm,p,p,e),Jm=n(function(n,e,t,r){var o=hc(e),u=o[o.length-1],i=u.row+u.rowspan,u=sn(o,function(n,e){return uc(n,i,e.row,t,r.getOrInit)},n);return W(u,i,e[0].column)},mm,p,p,e),Qm=n(function(n,e,t,r){var e=e.details,o=zm(e),u=o[0].column,o=sn(o,function(n,e){return{grid:ic(n.grid,u,e.column+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid;return W(o,e[0].row,u)},Rc(!0),Cc,p,e),Zm=n(function(n,e,t,r){var e=e.details,o=e[e.length-1],u=o.column+o.colspan,o=zm(e),o=sn(o,function(n,e){return ic(n,u,e.column,t,r.getOrInit)},n);return W(o,e[0].row,u)},Rc(!1),Cc,p,e),nd=n(function(n,e,t,r){var o,e=zm(e.details),n=(n=n,o=b(e,function(n){return n.column}),h(n,function(n){var e=n.cells,e=sn(o,function(n,e){return 0<=e&&e<n.length?n.slice(0,e).concat(n.slice(e+1)):n},e);return 0<e.length?[Ue(n.element,e,n.section,n.isNew)]:[]})),u=0<n.length?n[0].cells.length-1:0;return W(n,e[0].row,Math.min(e[0].column,u))},function(e,n){return $i(e,n).map(function(n){return{details:n,pixelDelta:-xc(e,n)}})},Cc,bc,e),ed=n(function(n,e,t,r){var o,u=hc(e),n=(n=n,i=u[0].row,u=u[u.length-1].row,n=N(n),o=n.rows,n.cols.concat(o.slice(0,i)).concat(o.slice(u+1))),i=0<n.length?n.length-1:0;return W(n,Math.min(e[0].row,i),e[0].column)},mm,p,bc,e),td=n(function(n,e,t,r){var o=zm(e),o=b(o,function(n){return n.column}),n=ac(n,o,!0,t,r.replaceOrInit);return W(n,e[0].row,e[0].column)},$i,p,p,Xm),rd=n(function(n,e,t,r){var o=zm(e),o=b(o,function(n){return n.column}),n=ac(n,o,!1,t,r.replaceOrInit);return W(n,e[0].row,e[0].column)},$i,p,p,Tf),od=n(Gm,$i,p,p,Xm),ud=n($m,$i,p,p,Tf),id=n(Km,$i,p,p,Tf),cd=n(function(n,e,t,r){n=fc(n,e,t,r.replaceOrInit);return W(n,e[0].row,e[0].column)},$i,p,p,Xm),ld=n(function(n,e,t,r){n=fc(n,e,t,r.replaceOrInit);return W(n,e[0].row,e[0].column)},$i,p,p,Tf),ad=n(function(n,e,t,r){var o=e.cells,n=(gc(o),function(n,e,t){var r=N(n).rows;if(0!==r.length)for(var o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++){var i=r[o],c=wr(i,u).isLocked;vr(i,u,k(t(),!1,c))}return n}(n,e.bounds,r.merge(o)));return Um(n,T.from(o[0]))},Xi,yc,p,xf),fd=n(function(n,e,t,r){n=sn(e,function(n,e){return Ji(n,e,t,r.unmerge(e))},n);return Um(n,T.from(e[0]))},Yi,yc,p,xf),sd=n(function(n,e,t,r){var o,u,i,c,l,a,f=function(n,e){n=z.fromTable(n);return am(n,e,!0)}(e.clipboard,e.generators),s={row:e.row,column:e.column};return s=s,o=n,f=f,u=e.generators,i=t,t=Tr(o),c=xm(s,o,t),l=N(f).rows,a=Rm(c,l,t),vm(c,o,l).map(function(n){var n=v(v({},n),{colDelta:n.colDelta-a.length}),n=Sm(o,n,u),e=Tr(n),e=Rm(c,l,e);return Tm(c,n,l,u,i,e)}).fold(function(){return Um(n,T.some(e.element))},function(n){return W(n,e.row,e.column)})},function(e,t){return fr(t.element).bind(function(n){return fm(e,n).map(function(n){return v(v({},n),{generators:t.generators,clipboard:t.clipboard})})})},yc,p,e),md=n(function(n,e,t,r){var o=N(n).rows,u=e.cells[0].column,o=o[e.cells[0].row],o=wc(e.clipboard,e.generators,o),u=rc(u,n,o,e.generators,t);return W(u,e.cells[0].row,e.cells[0].column)},Dc(!0),p,p,e),dd=n(function(n,e,t,r){var o=N(n).rows,u=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,o=o[e.cells[0].row],o=wc(e.clipboard,e.generators,o),u=rc(u,n,o,e.generators,t);return W(u,e.cells[0].row,e.cells[0].column)},Dc(!1),p,p,e),gd=n(function(n,e,t,r){var o=N(n).rows,u=e.cells[0].row,o=o[u],o=wc(e.clipboard,e.generators,o),u=oc(u,n,o,e.generators,t);return W(u,e.cells[0].row,e.cells[0].column)},Gi,p,p,e),pd=n(function(n,e,t,r){var o=N(n).rows,u=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,o=o[e.cells[0].row],o=wc(e.clipboard,e.generators,o),u=oc(u,n,o,e.generators,t);return W(u,e.cells[0].row,e.cells[0].column)},Gi,p,p,e),bd=function(n,e){var r=z.fromTable(n);return mm(r,e).bind(function(n){var e,t=n[n.length-1],n=n[0].row,t=t.row+t.rowspan,n=r.all.slice(n,t);return t=b(t=n,function(n){return Qs(n).type}),n=l(t,"header"),e=l(t,"footer"),n||e?(t=l(t,"body"),!n||t||e?n||t||!e?T.none():T.some("footer"):T.some("header")):T.some("body")}).getOr("")},hd=function(s,r,n){function e(n){return"table"===I(yf(n))}function m(t,n){return n.cursor.fold(function(){var n=vt(t);return wn(n).filter(ut).map(function(n){r.clear(t);var e=s.dom.createRng();return e.selectNode(n.dom),s.selection.setRng(e),B(n,"data-mce-selected","1"),e})},function(n){var n=Ks(Xs,n),e=s.dom.createRng();return e.setStart(n.element.dom,n.offset),e.setEnd(n.element.dom,n.offset),s.selection.setRng(e),r.clear(t),T.some(e)})}function t(i,c,l,a,f){return function(e,n,t){void 0===t&&(t=!1),Su(e);var r=a(),o=D.fromDom(s.getDoc()),o=bu(l,o,d),u={sizing:ki(s,e),resize:(Ri(s)?Bu:Mu)(),section:function(n){switch(Si(s)){case"section":return tm();case"sectionCells":return rm();case"cells":return om();default:return em(n,"section")}}(e)};return c(e)?i(r,e,n,o,u).bind(function(n){x(n.newRows,function(n){oi(s,n.dom)}),x(n.newCells,function(n){ui(s,n.dom)});n=m(e,n);return ut(e)&&(Su(e),t||li(s,e.dom,f)),n.map(function(n){return{rng:n,effect:f}})}):T.none()}}var d=Di(s),o=Ri(s)?p:zi;return{deleteRow:t(ed,function(n){return!1===e(s)||1<Lu(n).rows},p,n,j),deleteColumn:t(nd,function(n){return!1===e(s)||1<Lu(n).columns},p,n,j),insertRowsBefore:t(Ym,S,p,n,j),insertRowsAfter:t(Jm,S,p,n,j),insertColumnsBefore:t(Qm,S,o,n,j),insertColumnsAfter:t(Zm,S,o,n,j),mergeCells:t(ad,S,p,n,j),unmergeCells:t(fd,S,p,n,j),pasteColsBefore:t(md,S,p,n,j),pasteColsAfter:t(dd,S,p,n,j),pasteRowsBefore:t(gd,S,p,n,j),pasteRowsAfter:t(pd,S,p,n,j),pasteCells:t(sd,S,p,n,Es),makeCellsHeader:t(cd,S,p,n,j),unmakeCellsHeader:t(ld,S,p,n,j),makeColumnsHeader:t(td,S,p,n,j),unmakeColumnsHeader:t(rd,S,p,n,j),makeRowsHeader:t(od,S,p,n,j),makeRowsBody:t(ud,S,p,n,j),makeRowsFooter:t(id,S,p,n,j),getTableRowType:bd,getTableCellType:Ac,getTableColType:Oc}},vd={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},wd=function(n,e,t,r){return{insertTable:(o=n,function(n,e,t){e=Pc(o,e,n,t=void 0===t?{}:t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return o.undoManager.add(),e}),setClipboardRows:zc(e.setRows),getClipboardRows:Nc(e.getRows),setClipboardCols:zc(e.setColumns),getClipboardCols:Nc(e.getColumns),resizeHandler:t,selectionTargets:r};var o},yd=tinymce.util.Tools.resolve("tinymce.util.Tools"),Cd=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Sd=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Td=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xd=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Rd=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Dd=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Cd}],Od={normal:sl(!1),ifTruthy:sl(!0)},Ad=y(pl,["left","center","right"],"align"),kd=y(pl,["top","middle","bottom"],"valign"),Id=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Bd=function(i,e,n,c,t){function l(t){return Of(Sf(n=i),Cf(n)).bind(function(e){return d(e).map(function(n){return t(n,e)})});var n}function a(n){i.focus()}function r(t,r){return void 0===r&&(r=!1),l(function(n,e){e=Ru(c,n,e);t(n,e,r).each(a)})}function o(){return l(function(n,e){var e=Ru(c,n,e),t=bu(p,D.fromDom(i.getDoc()),T.none());return Wc(n,e,t)})}function u(){return l(function(n,e){e=Ru(c,n,e);return _c(n,e)})}function f(u,n){return n().each(function(n){var o=b(n,$r);l(function(n,e){var t=hu(D.fromDom(i.getDoc())),r=(r=o,t=t,{selection:Tu(c),clipboard:r,generators:t});u(n,r).each(a)})})}function s(t){return function(n,e){return Wn(e,"type").each(function(n){r(t(n),e.no_events)})}}var m=Cf(i),d=function(n){return E(n,m)};A({mceTableSplitCells:function(){return r(e.unmergeCells)},mceTableMergeCells:function(){return r(e.mergeCells)},mceTableInsertRowBefore:function(){return r(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return r(e.insertRowsAfter)},mceTableInsertColBefore:function(){return r(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return r(e.insertColumnsAfter)},mceTableDeleteCol:function(){return r(e.deleteColumn)},mceTableDeleteRow:function(){return r(e.deleteRow)},mceTableCutCol:function(){return u().each(function(n){t.setColumns(n),r(e.deleteColumn)})},mceTableCutRow:function(){return o().each(function(n){t.setRows(n),r(e.deleteRow)})},mceTableCopyCol:function(){return u().each(function(n){return t.setColumns(n)})},mceTableCopyRow:function(){return o().each(function(n){return t.setRows(n)})},mceTablePasteColBefore:function(){return f(e.pasteColsBefore,t.getColumns)},mceTablePasteColAfter:function(){return f(e.pasteColsAfter,t.getColumns)},mceTablePasteRowBefore:function(){return f(e.pasteRowsBefore,t.getRows)},mceTablePasteRowAfter:function(){return f(e.pasteRowsAfter,t.getRows)},mceTableDelete:function(){return kl(i).each(function(n){E(n,m).filter(X(m)).each(function(n){var e=D.fromText("");Ar(n,e),_(n),i.dom.isEmpty(i.getBody())?(i.setContent(""),i.selection.setCursorLocation()):((n=i.dom.createRng()).setStart(e.dom,0),n.setEnd(e.dom,0),i.selection.setRng(n),i.nodeChanged())})})},mceTableCellToggleClass:function(n,r){l(function(n){var e=Af(c),t=hn(e,function(n){return i.formatter.match("tablecellclass",{value:r},n.dom)})?i.formatter.remove:i.formatter.apply;x(e,function(n){return t("tablecellclass",{value:r},n.dom)}),li(i,n.dom,Ms)})},mceTableToggleClass:function(n,e){l(function(n){i.formatter.toggle("tableclass",{value:e},n.dom),li(i,n.dom,Ms)})},mceTableToggleCaption:function(){kl(i).each(function(e){E(e,m).each(function(r){Ht(r,"caption").fold(function(){var n,e,t=D.fromTag("caption");L(t,D.fromText("Caption")),e=t,Kn(n=r,0).fold(function(){L(n,e)},function(n){Or(n,e)}),i.selection.setCursorLocation(t.dom,0)},function(n){Un("caption")(e)&&Pn("td",r).each(function(n){return i.selection.setCursorLocation(n.dom,0)}),_(n)}),li(i,r.dom,j)})})},mceTableSizingMode:function(n,e){return t=e,kl(i).each(function(n){Ci(i)||yi(i)||wi(i)||E(n,m).each(function(n){"relative"!==t||Qf(n)?"fixed"!==t||Zf(n)?"responsive"!==t||ns(n)||Us(n):Vs(n):Hs(n),Su(n),li(i,n.dom,j)})});var t},mceTableCellType:s(function(n){return"th"===n?e.makeCellsHeader:e.unmakeCellsHeader}),mceTableColType:s(function(n){return"th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader}),mceTableRowType:s(function(n){switch(n){case"header":return e.makeRowsHeader;case"footer":return e.makeRowsFooter;default:return e.makeRowsBody}})},function(n,e){return i.addCommand(e,n)}),A({mceTableProps:y(Al,i,!1),mceTableRowProps:y(Rl,i),mceTableCellProps:y(Cl,i,c)},function(n,e){return i.addCommand(e,function(){return n()})}),i.addCommand("mceInsertTable",function(n,e){V(e)&&0<Pe(e).length?Pc(i,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Al(i,!0)}),i.addCommand("mceTableApplyCellStyle",function(n,e){function r(n){return"tablecell"+n.toLowerCase().replace("-","")}var o;!V(e)||0===(o=Af(c)).length||function(n){for(var e in n)if(Ne.call(n,e))return!1;return!0}(e=Ln(e,function(n,e){return i.formatter.has(r(e))&&H(n)}))||(A(e,function(e,t){x(o,function(n){Od.normal(i,n.dom).setFormat(r(t),e)})}),d(o[0]).each(function(n){return li(i,n.dom,Ms)}))})},Md=function(t,n,o){function e(r){return Of(Sf(t)).bind(function(t){return E(t,u).map(function(n){var e=Ru(o,n,t);return r(n,e)})}).getOr("")}var u=Cf(t);A({mceTableRowType:function(){return e(n.getTableRowType)},mceTableCellType:function(){return e(n.getTableCellType)},mceTableColType:function(){return e(n.getTableColType)}},function(n,e){return t.addQueryValueHandler(e,n)})},Ed=function(){var e=Qc(),t=Qc();return{getRows:e.get,setRows:function(n){n.fold(e.clear,e.set),t.clear()},clearRows:e.clear,getColumns:t.get,setColumns:function(n){n.fold(t.clear,t.set),e.clear()},clearColumns:t.clear}},Gm={remove_similar:!0,inherit:!1},$m=v({selector:"td,th"},Gm),Pd={tablecellbackgroundcolor:v({styles:{backgroundColor:"%value"}},$m),tablecellverticalalign:v({styles:{"vertical-align":"%value"}},$m),tablecellbordercolor:v({styles:{borderColor:"%value"}},$m),tablecellclass:v({classes:["%value"]},$m),tableclass:v({selector:"table",classes:["%value"]},Gm),tablecellborderstyle:v({styles:{borderStyle:"%value"}},$m),tablecellborderwidth:v({styles:{borderWidth:"%value"}},$m)},Nd=function(n){n.formatter.register(Pd)},zd=ce([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ld=v(v({},zd),{none:function(n){return zd.none(n=void 0===n?void 0:n)}}),_d=function(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}},Km=ce([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),F={before:Km.before,on:Km.on,after:Km.after,cata:function(n,e,t,r){return n.fold(e,t,r)},getStart:function(n){return n.fold(w,w,w)}},Wd=ce([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),jd={domRange:Wd.domRange,relative:Wd.relative,exact:Wd.exact,exactFromRange:function(n){return Wd.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){n=n.match({domRange:function(n){return D.fromDom(n.startContainer)},relative:function(n,e){return F.getStart(n)},exact:function(n,e,t,r){return n}});return D.fromDom(Je(n).dom.defaultView)},range:_d},Fd=ce([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Hd=function(n,e){o=n;var o,t,n=e.match({domRange:function(n){return{ltr:d(n),rtl:T.none}},relative:function(n,e){return{ltr:Tn(function(){return Pl(o,n,e)}),rtl:Tn(function(){return T.some(Pl(o,e,n))})}},exact:function(n,e,t,r){return{ltr:Tn(function(){return Nl(o,n,e,t,r)}),rtl:Tn(function(){return T.some(Nl(o,t,r,n,e))})}}});return(t=(e=n).ltr()).collapsed?e.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return Fd.rtl(D.fromDom(n.endContainer),n.endOffset,D.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return Ll(0,Fd.ltr,t)}):Ll(0,Fd.ltr,t)},Vd=(Fd.ltr,Fd.rtl,function(e,t,r,o){var n=e.dom.createRange(),n=(n.selectNode(t.dom),n.getClientRects());return Cn(n,function(n){return Wl(n,r,o)?T.some(n):T.none()}).map(function(n){return jl(e,t,r,o,n)})}),Ud=function(e,n,t,r){var o=e.dom.createRange(),n=f(n);return Cn(n,function(n){return o.selectNode(n.dom),Wl(o.getBoundingClientRect(),t,r)?Fl(e,n,t,r):T.none()})},qd=function(n,e,t,r){var o=n.dom.createRange(),o=(o.selectNode(e.dom),o.getBoundingClientRect()),t=Math.max(o.left,Math.min(o.right,t)),o=Math.max(o.top,Math.min(o.bottom,r));return Fl(n,e,t,o)},Gd=function(e,n,t){var r=e.dom.createRange(),r=(r.selectNode(n.dom),r.getBoundingClientRect()),o=Hl(r,t);return(!0===o?ff:sf)(n).map(function(n){return Vl(e,n,o)})},$d=function(n,e,t){var r=e.dom.getBoundingClientRect(),r=Hl(r,t);return T.some(Vl(n,e,r))},Kd=document.caretPositionFromPoint?function(t,n,e){var r,o;return T.from(null==(o=(r=t.dom).caretPositionFromPoint)?void 0:o.call(r,n,e)).bind(function(n){var e;return null===n.offsetNode?T.none():((e=t.dom.createRange()).setStart(n.offsetNode,n.offset),e.collapse(),T.some(e))})}:document.caretRangeFromPoint?function(n,e,t){var r;return T.from(null==(r=(n=n.dom).caretRangeFromPoint)?void 0:r.call(n,e,t))}:function(c,l,a){return D.fromPoint(c,l,a).bind(function(r){function n(){return n=c,t=l,(0===f(e=r).length?$d:Gd)(n,e,t);var n,e,t}var e,t,o,u,i;return 0===f(r).length?n():(t=r,o=l,u=a,(i=(e=c).dom.createRange()).selectNode(t.dom),i=i.getBoundingClientRect(),o=Math.max(i.left,Math.min(i.right,o)),i=Math.max(i.top,Math.min(i.bottom,u)),qd(e,t,o,i).orThunk(n))})},Xd=tinymce.util.Tools.resolve("tinymce.util.VK"),Yd=function(n,e,t){return la(n,e,(o=vs,Bl(r=t,u).fold(function(){return Ld.none(r)},function(n){return Il(n.all,r,n.index,1,o)})));var r,o,u},Jd=function(n,e){e=jd.exact(e,0,e,0);return na(e)},Qd=["table","li","dl"],Zd=function(e,t,r){var o,u,n;e.keyCode===Xd.TAB&&(o=yf(t),u=function(n){var e=I(n);return O(n,o)||l(Qd,e)},n=t.selection.getRng(),n=D.fromDom(e.shiftKey?n.startContainer:n.endContainer),fr(n,u).each(function(n){e.preventDefault(),E(n,u).each(r.clear),t.selection.collapse(e.shiftKey),(e.shiftKey?ca:Yd)(t,u,n).each(function(n){t.selection.setRng(n)})}))},ng={create:function(n,e){return{selection:n,kill:e}}},eg=function(n,e,t,r){return{start:F.on(n,e),finish:F.on(t,r)}},tg=eg,rg=function(t,r,n,e,o,u,i){return O(n,o)&&e===u?T.none():s(n,"td,th",r).bind(function(e){return s(o,"td,th",r).bind(function(n){return fa(t,r,e,n,i)})})},og=function(n,e,t,r,o){return Hr(r,n,e,o.firstSelectedSelector,o.lastSelectedSelector).map(function(n){return o.clearBeforeUpdate(t),o.selectRange(t,n.boxes,n.start,n.finish),n.boxes})},ug=function(n,e){return{item:n,mode:e}},ig=function(n,e,t,r){void 0===r&&(r=ig);n=n.property().children(e);return t.first(n).map(function(n){return ug(n,r)})},cg=[{current:sa,next:ma,fallback:T.none()},{current:ma,next:ig,fallback:T.some(sa)},{current:ig,next:ig,fallback:T.some(ma)}],lg=function(e,t,r,o,n){return gn(n=void 0===n?cg:n,function(n){return n.current===r}).bind(function(n){return n.current(e,t,o,n.next).orThunk(function(){return n.fallback.bind(function(n){return lg(e,t,n,o)})})})},ag=function(){return{sibling:function(n,e){return n.query().prevSibling(e)},first:function(n){return 0<n.length?T.some(n[n.length-1]):T.none()}}},fg=function(){return{sibling:function(n,e){return n.query().nextSibling(e)},first:function(n){return 0<n.length?T.some(n[0]):T.none()}}},sg=function(e,n,t,r,o,u){return lg(e,n,r,o).bind(function(n){return u(n.item)?T.none():t(n.item)?T.some(n.item):sg(e,n.item,t,n.mode,o,u)})},mg=function(e){return function(n){return 0===e.property().children(n).length}},dg=function(n,e,t,r){return sg(n,e,t,ma,ag(),r)},gg=function(n,e,t,r){return sg(n,e,t,ma,fg(),r)},pg=_r(),bg=ce([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),hg=v(v({},bg),{verify:function(t,e,n,r,o,u,i){return s(r,"td,th",i).bind(function(n){return s(e,"td,th",i).map(function(e){return O(n,e)?O(r,n)&&lf(n)===o?u(e):bg.none("in same cell"):jr(pa,[n,e]).fold(function(){return function(n,e,t){e=n.getRect(e),n=n.getRect(t);return n.right>e.left&&n.left<e.right}(t,e,n)?bg.success():u(e)},function(n){return u(e)})})}).getOr(bg.none("default"))},cata:function(n,e,t,r,o){return n.fold(e,t,r,o)}}),vg=function(n,e,t){return $e(e)?Ra(n,e).map(xa):Ke(e)?(n=n,e=e,(0<=(t=t)&&t<lf(e)?n.getRangedRect(e,t,e,t+1):0<t?n.getRangedRect(e,t-1,e,t):T.none()).map(xa)):T.none()},wg=function(n,e){return $e(e)?Ra(n,e).map(xa):Ke(e)?n.getRangedRect(e,0,e,lf(e)).map(xa):T.none()},yg=ce([{none:[]},{retry:["caret"]}]),Cg=function(n,e){return n.left<e.left||Math.abs(e.right-n.left)<1||n.left>e.right},Xm={point:function(n){return n.bottom},adjuster:function(n,e,t,r,o){var u=Ca(o,5);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?yg.retry(u):t.top===o.bottom?yg.retry(Ca(o,1)):Da(n,e,o)?yg.retry(Ta(u,5,0)):yg.none()},move:Ca,gather:ga},Sg=function(n,e,t){return n.elementFromPoint(e,t).filter(function(n){return"table"===I(n)}).isSome()},Tg=function(n,e,t,r,o){return xg(n,e,t,e.move(r,5),o)},xg=function(t,r,o,u,i){return 0===i?T.some(u):Sg(t,u.left,r.point(u))?Tg(t,r,o,u,i-1):t.situsFromPoint(u.left,r.point(u)).bind(function(n){return n.start.fold(T.none,function(e){return wg(t,e).bind(function(n){return r.adjuster(t,e,n,o,u).fold(T.none,function(n){return xg(t,r,o,n,i-1)})}).orThunk(function(){return T.some(u)})},T.none)})},Rg={tryUp:y(Oa,{point:function(n){return n.top},adjuster:function(n,e,t,r,o){var u=Sa(o,5);return Math.abs(t.top-r.top)<1||t.bottom<o.top?yg.retry(u):t.bottom===o.top?yg.retry(Sa(o,1)):Da(n,e,o)?yg.retry(Ta(u,5,0)):yg.none()},move:Sa,gather:da}),tryDown:y(Oa,Xm),ieTryUp:function(n,e){return n.situsFromPoint(e.left,e.top-5)},ieTryDown:function(n,e){return n.situsFromPoint(e.left,e.bottom+5)},getJumpSize:d(5)},Dg=function(n,e,t){var r=ke().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):T.none()},Og=function(n,e,t,r,o,u){return ke().browser.isIE()?T.none():u(r,e).orThunk(function(){return Ma(n,e,t,r,o).map(function(n){n=n.range;return ng.create(T.some(tg(n.start,n.soffset,n.finish,n.foffset)),!0)})})},Ag=function(n,r){return s(n,"tr",r).bind(function(t){return s(t,"table",r).bind(function(n){var e=Qn(n,"tr");return O(t,e[0])?dg(pg,n,function(n){return sf(n).isSome()},r).map(function(n){var e=lf(n);return ng.create(T.some(tg(n,e,n,e)),!0)}):T.none()})})},kg=function(n,r){return s(n,"tr",r).bind(function(t){return s(t,"table",r).bind(function(n){var e=Qn(n,"tr");return O(t,e[e.length-1])?gg(pg,n,function(n){return ff(n).isSome()},r).map(function(n){return ng.create(T.some(tg(n,0,n,0)),!0)}):T.none()})})},Ig=function(n,e,t,r,o,u,i){return Ma(n,t,r,o,u).bind(function(n){return fa(e,t,n.start,n.finish,i)})},Bg=function(c,l,e,a){function t(i){r.on(function(n){a.clearBeforeUpdate(l),Ea(i.target,e).each(function(u){yo(n,u,e).each(function(n){var e,t,r,o=n.boxes.getOr([]);1===o.length?(e=o[0],t="false"===Qu(e),r=Gt(Ju(i.target),e,O),t&&r&&(a.selectRange(l,o,e,e),c.selectContents(e))):1<o.length&&(a.selectRange(l,o,n.start,n.finish),c.selectContents(u))})})})}var r=Qc(),o=r.clear;return{clearstate:o,mousedown:function(n){a.clear(l),Ea(n.target,e).each(r.set)},mouseover:function(n){t(n)},mouseup:function(n){t(n),o()}}},Mg={traverse:Ze,gather:ga,relative:F.before,otherRetry:Rg.tryDown,ieRetry:Rg.ieTryDown,failure:hg.failedDown},Eg={traverse:$n,gather:da,relative:F.before,otherRetry:Rg.tryUp,ieRetry:Rg.ieTryUp,failure:hg.failedUp},Pg=Pa(38),Ng=Pa(40),zg=function(n){return 37<=n&&n<=40},Lg={isBackward:Pa(37),isForward:Pa(39)},_g={isBackward:Pa(39),isForward:Pa(37)},Wg=function(u){return{elementFromPoint:function(n,e){return D.fromPoint(D.fromDom(u.document),n,e)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(n,e,t,r){n=jd.exact(n,e,t,r);return ua(u,n)},getSelection:function(){return oa(u).map(function(n){return aa(u,n)})},fromSitus:function(n){n=jd.relative(n.start,n.finish);return aa(u,n)},situsFromPoint:function(n,e){return ia(u,n,e).map(function(n){return eg(n.start,n.soffset,n.finish,n.foffset)})},clearSelection:function(){Kl(u).each(function(n){return n.removeAllRanges()})},collapseSelection:function(o){void 0===o&&(o=!1),oa(u).each(function(n){return n.fold(function(n){return n.collapse(o)},function(n,e){n=o?n:e;Zl(u,n,n)},function(n,e,t,r){n=o?n:t,t=o?e:r;Ql(u,n,t,n,t)})})},setSelection:function(n){Ql(u,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,e){Zl(u,n,e)},selectNode:function(n){ra(u,n,!1)},selectContents:function(n){ra(u,n)},getInnerHeight:function(){return u.innerHeight},getScrollY:function(){var n,e;return n=void 0!==(n=D.fromDom(u.document))?n.dom:document,e=n.body.scrollLeft||n.documentElement.scrollLeft,n=n.body.scrollTop||n.documentElement.scrollTop,Fo(e,n).top},scrollBy:function(n,e){var t=D.fromDom(u.document);(t=(void 0!==t?t.dom:document).defaultView)&&t.scrollBy(n,e)}}},jg=function(n,e){return{rows:n,cols:e}},Fg=function(t,n){x(n,function(n){var e;n=n,ss(e=t)?e.dom.classList.remove(n):Ku(e,n),Xu(e)})},Hg={byClass:function(o){function u(n){ds(n,t)}function e(n){Fg(n,r)}function i(n){n=Qn(n,o.selectedSelector),x(n,e)}var t,r;t=o.selected,r=[o.selected,o.lastSelected,o.firstSelected];return{clearBeforeUpdate:i,clear:i,selectRange:function(n,e,t,r){i(n),x(e,u),ds(t,o.firstSelected),ds(r,o.lastSelected)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},byAttr:function(o,u,e){function t(n){M(n,o.selected),M(n,o.firstSelected),M(n,o.lastSelected)}function i(n){B(n,o.selected,"1")}function c(n){r(n),e()}function r(n){n=Qn(n,o.selectedSelector+","+o.firstSelectedSelector+","+o.lastSelectedSelector),x(n,t)}return{clearBeforeUpdate:r,clear:c,selectRange:function(n,e,t,r){c(n),x(e,i),B(t,o.firstSelected,"1"),B(r,o.lastSelected,"1"),u(e,t,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}}},Vg=function(n,e){n=n.slice(0,e[e.length-1].row+1),n=qi(n);return h(n,function(n){n=n.cells.slice(0,e[e.length-1].column+1);return b(n,function(n){return n.element})})},Ug=function(n,e){n=n.slice(e[0].row+e[0].rowspan-1,n.length),n=qi(n);return h(n,function(n){n=n.cells.slice(e[0].column+e[0].colspan-1,n.cells.length);return b(n,function(n){return n.element})})},qg=tinymce.util.Tools.resolve("tinymce.Env");function Gg(m,d,n){var g=Hg.byAttr(Rf,function(r,o,u){n.targets().each(function(t){E(o).each(function(n){var e=Di(m),e=bu(p,D.fromDom(m.getDoc()),e),n=_a(n,t,e);ii(m,r,o,u,n)})})},function(){return ci(m)});return m.on("init",function(n){var o,u,t=m.getWin(),r=yf(m),e=Cf(m),i=Na(t,r,e,g),c=za(t,r,e,g),l=La(t,r,e,g),a=(m.on("TableSelectorChange",function(n){return l(n.start,n.finish)}),function(n,e){!0===n.raw.shiftKey&&(e.kill&&n.kill(),e.selection.each(function(n){n=jd.relative(n.start,n.finish),n=_l(t,n);m.selection.setRng(n)}))}),f=function(n){return 0===n.button},s=function(n){return void 0===n.buttons||!(!qg.browser.isEdge()||0!==n.buttons)||0!=(1&n.buttons)},e=(o=Yc(D.fromDom(r)),u=Yc(0),{touchEnd:function(n){var e,t,r=D.fromDom(n.target);"td"!==I(r)&&"th"!==I(r)||(e=o.get(),t=u.get(),O(e,r)&&n.timeStamp-t<300&&(n.preventDefault(),l(r,r))),o.set(r),u.set(n.timeStamp)}});m.on("dragstart",function(n){i.clearstate()}),m.on("mousedown",function(n){f(n)&&Wa(n)&&i.mousedown(fs(n))}),m.on("mouseover",function(n){s(n)&&Wa(n)&&i.mouseover(fs(n))}),m.on("mouseup",function(n){f(n)&&Wa(n)&&i.mouseup(fs(n))}),m.on("touchend",e.touchEnd),m.on("keyup",function(n){var e,t,r=fs(n);r.raw.shiftKey&&zg(r.raw.which)&&(n=m.selection.getRng(),e=D.fromDom(n.startContainer),t=D.fromDom(n.endContainer),c.keyup(r,e,n.startOffset,t,n.endOffset).each(function(n){a(r,n)}))}),m.on("keydown",function(n){var e=fs(n),n=(d().each(function(n){return n.hideBars()}),m.selection.getRng()),t=D.fromDom(n.startContainer),r=D.fromDom(n.endContainer),o=to(Lg,_g)(D.fromDom(m.selection.getStart()));c.keydown(e,t,n.startOffset,r,n.endOffset,o).each(function(n){a(e,n)}),d().each(function(n){return n.showBars()})}),m.on("NodeChange",function(){var n=m.selection,e=D.fromDom(n.getStart()),n=D.fromDom(n.getEnd());jr(E,[e,n]).fold(function(){return g.clear(r)},p)})}),{clear:g.clear}}var $g=function(r,o){function e(e){return m.forall(function(n){return!n[e]})}function n(){return g().bind(function(t){return dt(E(t),p().bind(E),function(n,e){return O(n,e)?d(t)?T.some({element:e=t,mergable:T.none(),unmergable:T.none(),selection:[e]}):T.some(Ru(o,n,t)):T.none()}).bind(w)})}function t(e){return E(e.element).map(function(n){var t=z.fromTable(n),n=mm(t,e).getOr([]),n=mn(n,function(n,e){return e.isLocked&&(n.onAny=!0,0===e.column?n.onFirst=!0:e.column+e.colspan>=t.grid.columns&&(n.onLast=!0)),n},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Xi(t,e).isSome(),unmergeable:Yi(t,e).isSome(),locked:n}})}function u(){f.set(Tn(n)()),m=f.get().bind(t),x(s.get(),function(n){return n()})}function i(e,t){return b(function(){return f.get().fold(function(){e.setDisabled(!0)},function(n){e.setDisabled(t(n))})})}function c(e,t,r){return b(function(){return f.get().fold(function(){e.setDisabled(!0),e.setActive(!1)},function(n){e.setDisabled(t(n)),e.setActive(r(n))})})}function l(e){return m.exists(function(n){return n.locked[e]})}function a(e,t){return function(n){return c(n,function(n){return d(n.element)},function(){return r.queryCommandValue(e)===t})}}var f=Yc(T.none()),s=Yc([]),m=T.none(),d=Un("caption"),g=function(){return Df(Sf(r),Cf(r))},p=function(){return Df(D.fromDom(r.selection.getEnd()),Cf(r))},b=function(e){return e(),s.set(s.get().concat([e])),function(){s.set(R(s.get(),function(n){return n!==e}))}},h=a("mceTableRowType","header"),v=a("mceTableColType","th");return r.on("NodeChange ExecCommand TableSelectorChange",u),{onSetupTable:function(n){return i(n,function(n){return!1})},onSetupCellOrRow:function(n){return i(n,function(n){return d(n.element)})},onSetupColumn:function(e){return function(n){return i(n,function(n){return d(n.element)||l(e)})}},onSetupPasteable:function(e){return function(n){return i(n,function(n){return d(n.element)||e().isNone()})}},onSetupPasteableColumn:function(e,t){return function(n){return i(n,function(n){return d(n.element)||e().isNone()||l(t)})}},onSetupMergeable:function(n){return i(n,function(n){return e("mergeable")})},onSetupUnmergeable:function(n){return i(n,function(n){return e("unmergeable")})},resetTargets:u,onSetupTableWithCaption:function(n){return c(n,C,function(n){return E(n.element,Cf(r)).exists(function(n){return Ht(n,"caption").isSome()})})},onSetupTableRowHeaders:h,onSetupTableColumnHeaders:v,targets:f.get}},Kg=function(e,n,t,r){e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});function o(n){return function(){return e.execCommand(n)}}e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});r=ol(vi(e)),0!==r.length&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:ul(e,n,r,"tableclass",function(n){return e.execCommand("mceTableToggleClass",!1,n)}),onSetup:t.onSetupTable}),r=ol(hi(e));0!==r.length&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:ul(e,n,r,"tablecellclass",function(n){return e.execCommand("mceTableCellToggleClass",!1,n)}),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:ul(e,n,Cd,"tablecellverticalalign",rl(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:ul(e,n,ai(e),"tablecellborderwidth",rl(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:ul(e,n,fi(e),"tablecellborderstyle",rl(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:t.onSetupTableWithCaption}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(n){return n(il(e,Oi(e),"background-color"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(n){return n(il(e,Ai(e),"border-color"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:cl(e),onSetup:t.onSetupTableRowHeaders}),e.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:ll(e),onSetup:t.onSetupTableColumnHeaders})},Xg=function(e){var n=e.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol");0<n.length&&e.ui.registry.addContextToolbar("table",{predicate:function(n){return e.dom.is(n,"table")&&e.getBody().contains(n)},items:n,scope:"node",position:"node"})},Yg=function(e,n,t,r){function o(n){return function(){return e.execCommand(n)}}function u(n){e.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})}var i={text:"Table properties",onSetup:t.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:o("mceTableDelete")},l=(e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(r.getRows)}),e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(r.getRows)}),{type:"nestedmenuitem",text:"Row",getSubmenuItems:d("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),r=(e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:t.onSetupColumn("onFirst")}),e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:t.onSetupColumn("onLast")}),e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:t.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onFirst")}),e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:t.onSetupPasteableColumn(r.getColumns,"onLast")}),{type:"nestedmenuitem",text:"Column",getSubmenuItems:d("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),a=(e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:t.onSetupMergeable}),e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:t.onSetupUnmergeable}),{type:"nestedmenuitem",text:"Cell",getSubmenuItems:d("tablecellprops tablemergecells tablesplitcells")}),f=(!1===e.getParam("table_grid",!0,"boolean")?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",i),e.ui.registry.addMenuItem("deletetable",c),e.ui.registry.addNestedMenuItem("row",l),e.ui.registry.addNestedMenuItem("column",r),e.ui.registry.addNestedMenuItem("cell",a),e.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(d(""),function(n){return"caption"===I(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}}),ol(vi(e))),s=(0!==f.length&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return tl(e,n,f,"tableclass",function(n){return e.execCommand("mceTableToggleClass",!1,n)})},onSetup:t.onSetupTable}),ol(hi(e)));0!==s.length&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return tl(e,n,s,"tablecellclass",function(n){return e.execCommand("mceTableCellToggleClass",!1,n)})},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return tl(e,n,Cd,"tablecellverticalalign",rl(e,"vertical-align"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return tl(e,n,ai(e),"tablecellborderwidth",rl(e,"border-width"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return tl(e,n,fi(e),"tablecellborderstyle",rl(e,"border-style"))},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:t.onSetupTableWithCaption}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return il(e,Oi(e),"background-color")},onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return il(e,Ai(e),"border-color")},onSetup:t.onSetupCellOrRow}),e.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:cl(e),onSetup:t.onSetupTableRowHeaders}),e.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:ll(e),onSetup:t.onSetupTableColumnHeaders})};ie.add("table",function(e){var n=Oo(function(){return yf(e)},function(){return Of(Sf(e),Cf(e))},Rf.selectedSelector),t=$g(e,n),r=Gs(e),o=Gg(e,r.lazyResize,t),u=hd(e,o,r.lazyWire),i=Ed();return Bd(e,u,o,n,i),Md(e,u,n),kf(e,n,u),Yg(e,n,t,i),Kg(e,n,t,i),Xg(e),e.on("PreInit",function(){e.serializer.addTempAttr(Rf.firstSelected),e.serializer.addTempAttr(Rf.lastSelected),Nd(e)}),Fs(e)&&e.on("keydown",function(n){Zd(n,e,o)}),e.on("remove",function(){r.destroy()}),wd(e,i,r,t)})}();