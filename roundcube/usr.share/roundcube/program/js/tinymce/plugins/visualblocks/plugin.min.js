!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),m=function(t,o,e){t.dom.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),t=t,e=e.get(),t.fire("VisualBlocks",{state:e})},v=function(t){return t.getParam("visualblocks_default_state",!1,"boolean")},d=function(e,n){return function(o){o.setActive(n.get());function t(t){return o.setActive(t.state)}return e.on("VisualBlocks",t),function(){return e.off("VisualBlocks",t)}}};t.add("visualblocks",function(t,o){e=!1;var e,n,i,s,u,c,l,a,r,f={get:function(){return e},set:function(t){e=t}};function g(){return u.execCommand("mceVisualBlocks")}i=o,s=f,(n=t).addCommand("mceVisualBlocks",function(){m(n,i,s)}),c=f,(u=t).ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:g,onSetup:d(u,c)}),u.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:g,onSetup:d(u,c)}),a=o,r=f,(l=t).on("PreviewFormats AfterPreviewFormats",function(t){r.get()&&l.dom.toggleClass(l.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)}),l.on("init",function(){v(l)&&m(l,a,r)})})}();