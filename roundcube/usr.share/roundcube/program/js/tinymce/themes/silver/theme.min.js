!function(){"use strict";function e(e){return function(t){return n=typeof(t=t),(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===e;var n}}function o(n){return function(t){return typeof t===n}}function r(n){return function(t){return n===t}}var d=e("string"),p=e("object"),h=e("array"),b=r(null),k=o("boolean"),u=r(void 0),F=function(t){return null==t},I=function(t){return!F(t)},R=o("function"),N=o("number"),a=function(t,n){if(h(t)){for(var e=0,o=t.length;e<o;++e)if(!n(t[e]))return!1;return!0}return!1},Y=function(){},P=function(e,o){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(o.apply(null,t))}},q=function(t){return function(){return t}},v=function(t){return t},V=function(t,n){return t===n};function H(o){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=r.concat(t);return o.apply(null,e)}}function L(n){return function(t){return!n(t)}}function z(t){return function(){throw new Error(t)}}var U=q(!1),j=q(!0),W=tinymce.util.Tools.resolve("tinymce.ThemeManager"),D=function(){return(D=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};function G(t,n){var e={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(e[r[o]]=t[r[o]]);return e}function X(t,n,e){if(e||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||((o=o||Array.prototype.slice.call(n,0,r))[r]=n[r]);return t.concat(o||Array.prototype.slice.call(n))}function ut(){return at}var at={fold:function(t,n){return t()},isSome:U,isNone:j,getOr:uo=v,getOrThunk:ct,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:q(null),getOrUndefined:q(void 0),or:uo,orThunk:ct,map:ut,each:Y,bind:ut,exists:U,forall:j,filter:function(){return at},toArray:function(){return[]},toString:q("none()")};function ct(t){return t()}function st(e){function t(){return r}function n(t){return t(e)}var o=q(e),r={fold:function(t,n){return n(e)},isSome:j,isNone:U,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:t,orThunk:t,map:function(t){return st(t(e))},each:function(t){t(e)},bind:n,exists:n,forall:n,filter:function(t){return t(e)?r:at},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return r}function lt(t,n){for(var e=[],o=0;o<t;o++)e.push(n(o));return e}function ft(t,n){for(var e=[],o=0;o<t.length;o+=n){var r=ce.call(t,o,o+n);e.push(r)}return e}function dt(t,n){for(var e=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(n(u,r)?e:o).push(u)}return{pass:e,fail:o}}function mt(t){return[t]}function gt(t,n){return(t=ce.call(t,0)).sort(n),t}function pt(t){return Te(t,t.length-1)}function ht(t,n){for(var e=Be(t),o=0,r=e.length;o<r;o++){var i=e[o],u=t[i];if(n(u,i,t))return K.some(u)}return K.none()}function vt(t,n){return Ge(t,n,0)?(n=n.length,t.substring(n)):t}function bt(t,n){return-1!==t.indexOf(n)}function yt(t){return 0<t.length}function xt(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}}function wt(n){return function(t){return t.dom.nodeType===n}}function St(){return oo(0,0)}function kt(n){return function(t){return bt(t,n)}}function Ct(t){function n(t){return function(){return e===t}}var e=t.current,t=t.version;return{current:e,version:t,isEdge:n(so),isChrome:n(lo),isIE:n(fo),isOpera:n(mo),isFirefox:n(go),isSafari:n(po)}}function Ot(t){function n(t){return function(){return e===t}}var e=t.current,t=t.version;return{current:e,version:t,isWindows:n(bo),isiOS:n(yo),isAndroid:n(xo),isOSX:n(So),isLinux:n(wo),isSolaris:n(ko),isFreeBSD:n(Co),isChromeOS:n(Oo)}}function _t(t){return window.matchMedia(t).matches}function Tt(t){return t.nodeType!==Ke&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount}function Et(t){return w.fromDom(Ho(t).dom.defaultView)}function Dt(t){return K.from(t.dom.offsetParent).map(w.fromDom)}function At(t,n){return{element:t,offset:n}}function Bt(t,n){var e=Uo(t);return 0<e.length&&n<e.length?At(e[n],0):At(t,n)}function Mt(t){return t=Yo(t),Go(t)?K.some(t):K.none()}function Ft(t){return w.fromDom(t.dom.host)}function It(t,n){var e=t.dom;Fe(n,function(t,n){tr(e,n,t)})}function Rt(t,n){var e=t.dom;Fe(n,function(t,n){t.fold(function(){ur(e,n)},function(t){ir(e,n,t)})})}function Nt(e,o){function t(t){var n=o(t);return n<=0||null===n?(t=cr(t,e),parseFloat(t)||0):n}function r(e,t){return ve(t,function(t,n){n=cr(e,n),n=void 0===n?0:parseInt(n,10);return isNaN(n)?t:t+n},0)}return{set:function(t,n){if(!N(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);t=t.dom;qe(t)&&(t.style[e]=n+"px")},get:t,getOuter:t,aggregate:r,max:function(t,n,e){t=r(t,e);return t<n?n-t:0}}}function Pt(e,o){return{left:e,top:o,translate:function(t,n){return Pt(e+t,o+n)}}}function Vt(t,n){return void 0!==t?t:void 0!==n?n:0}function Ht(t){var n=t.dom,e=n.ownerDocument.body;return e===n?vr(e.offsetLeft,e.offsetTop):$o(t)?br(n):vr(0,0)}function Lt(t){function n(){return t.stopPropagation()}function e(){return t.preventDefault()}var o=w.fromDom(function(t){if(Xo()&&I(t.target)){var n=w.fromDom(t.target);if($e(n)&&Jo(n)&&t.composed&&t.composedPath){n=t.composedPath();if(n)return Ee(n)}}return K.from(t.target)}(t).getOr(t.target)),r=P(e,n);return{target:o,x:t.clientX,y:t.clientY,stop:n,prevent:e,kill:r,raw:t}}function zt(t,n,e,o,r){function i(t){u(t)&&a(Lt(t))}var u,a;return u=e,a=o,t.dom.addEventListener(n,i,r),{unbind:H(Ut,t,n,i,r)}}function Ut(t,n,e,o){t.dom.removeEventListener(n,e,o)}function jt(n,e){Wo(n).fold(function(){_r(n,e)},function(t){n.dom.insertBefore(e.dom,t.dom)})}function Wt(t){var n=Uo(t);0<n.length&&Tr(t,n),Ar(t)}function Gt(t){var e=void 0===t?window:t,t=e.document,o=Br(w.fromDom(t));return Fr(e).fold(function(){var t=e.document.documentElement,n=t.clientWidth,t=t.clientHeight;return Ir(o.left,o.top,n,t)},function(t){return Ir(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height)})}function Xt(e,t){return e.view(t).fold(q([]),function(t){var n=e.owner(t),n=Xt(e,n);return[t].concat(n)})}function Yt(e){return{isValue:j,isError:U,getOr:q(e),getOrThunk:q(e),getOrDie:q(e),or:function(t){return Yt(e)},orThunk:function(t){return Yt(e)},fold:function(t,n){return n(e)},map:function(t){return Yt(t(e))},mapError:function(t){return Yt(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return K.some(e)}}}function qt(e){return{isValue:U,isError:j,getOr:v,getOrThunk:function(t){return t()},getOrDie:function(){return z(String(e))()},or:v,orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(t){return qt(e)},mapError:function(t){return qt(t(e))},each:Y,bind:function(t){return qt(e)},exists:U,forall:j,toOptional:K.none}}function Kt(t,n,e){return t.stype===ue.Error?n(t.serror):e(t.svalue)}function Jt(t){return{stype:ue.Value,svalue:t}}function $t(t){return{stype:ue.Error,serror:t}}function Qt(u){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var e={},o=0;o<t.length;o++){var r,i=t[o];for(r in i)He(i,r)&&(e[r]=u(e[r],i[r]))}return e}}function Zt(t){return{tag:"mergeWithThunk",process:t}}function tn(t){return P(jr.serror,we)(t)}function nn(e,o,r,t){return O(o,r).fold(function(){return t=r,n=o,ni(e,function(){return'Could not find valid *required* value for "'+t+'" in '+Zr(n)});var t,n},t)}function en(t,n,e,o){return o(O(t,n).getOrThunk(function(){return e(t)}))}function on(e){return{extract:function(t,n){return e().extract(t,n)},toString:function(){return e().toString()}}}function rn(u){return{extract:function(t,n){for(var e=[],o=0,r=u;o<r.length;o++){var i=r[o].extract(t,n);if(i.stype===ue.Value)return i;e.push(i)}return Qr(e)},toString:function(){return"oneOf("+C(u,function(t){return t.toString()}).join(", ")+")"}}}function un(r,i){return{extract:function(n,e){var t=Be(e),o=(o=n,t=t,ui(oi(r)).extract(o,t));return jr.bind(o,function(t){t=C(t,function(t){return Wr(t,t,qr(),i)});return g(t).extract(n,e)})},toString:function(){return"setOf("+i.toString()+")"}}}function an(e,o){return oi(function(t){var n=typeof t;return e(t)?jr.svalue(t):jr.serror("Expected type: "+o+" but got: "+n)})}function cn(n){if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(function(t){return cn(n[t])});default:return!1}}function sn(t,o){return{extract:function(n,e){return O(e,t).fold(function(){return ei(n,t)},function(t){return mi(n,e,o,t)})},toString:function(){return"chooseOn("+t+"). Possible values: "+Be(o)}}}function ln(n,t){return un(function(t){return jr.fromResult(n(t))},t)}function fn(t,n){return sn(t,Ie(n,g))}function dn(n){return gi(function(t){return de(n,t)?B.value(t):B.error('Unsupported value: "'+t+'", choose one of "'+n.join(", ")+'".')})}function n(t){return Si(t,li)}function mn(t,n){return xi(t,t,qr(),dn(n))}function gn(t){return Si(t,di)}function pn(t,n){return xi(t,t,qr(),g(n))}function hn(t,n){return xi(t,t,qr(),ai(n))}function vn(t,n){return xi(t,t,qr(),ui(n))}function bn(t){return xi(t,t,$r(),ci())}function yn(t){return ki(t,si)}function xn(t){return ki(t,li)}function wn(t){return ki(t,di)}function Sn(t,n){return ki(t,ui(n))}function kn(t,n){return _i(t,n,si)}function Cn(t,n){return _i(t,n,li)}function On(t,n,e){return _i(t,n,dn(e))}function _n(t,n){return _i(t,n,fi)}function Tn(t,n){return _i(t,n,di)}function En(t,n,e){return _i(t,n,ui(e))}function Dn(t,n,e){return _i(t,n,g(e))}function An(t,n){return e=n,o={},Fe(t,function(t,n){de(e,n)||(o[n]=t)}),o;var e,o}function Bn(t){return R(t)?t:U}function Mn(t,n,e){for(var o=t.dom,r=Bn(e);o.parentNode;){var o=o.parentNode,i=w.fromDom(o),u=n(i);if(u.isSome())return u;if(r(i))break}return K.none()}function Fn(e){var n,o,r,i;return o=function(t){return t.can},r=n=e,i=function(t){return t.abort},{can:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ve(n,function(t,n){return t&&o(n).apply(void 0,e)},!0)},abort:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ve(r,function(t,n){return t||i(n).apply(void 0,e)},!1)},run:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];x(e,function(t){t.run.apply(void 0,n)})}}}function In(t){return q("alloy."+t)}function Rn(t,n){return{key:t,value:Ni({abort:n})}}function Nn(t){return{key:t,value:Ni({run:function(t,n){n.event.prevent()}})}}function Pn(t,e,o){return{key:t,value:Ni({run:function(t,n){e.apply(void 0,[t,n].concat(o))}})}}function Vn(t,n,e){var o,r,n=n.partUids[e];return r=n,Q(o=t,function(t,n){t.getSystem().getByUid(r).each(function(t){Bu(t,t.element,o,n)})})}function Hn(t,n){return Fu(t)(n)}function Ln(t,n){var e=Vo(t).dom,o=w.fromDom(e.createDocumentFragment()),n=Lu(n,e);Er(o,n),Dr(t),_r(t,o)}function zn(t,n){Object.defineProperty(t.dom,Ju,{value:n,writable:!0})}function Un(t){return t=$e(t)?t.dom[Ju]:null,K.from(t)}function jn(n){function e(t){return"The component must be in a context to execute: "+t+(n?"\n"+Wu(n().element)+" is not in context.":"")}function t(t){return function(){throw new Error(e(t))}}function o(t){return function(){console.warn(e(t))}}return{debugInfo:q("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),isConnected:U}}function Wn(t,n){var e=t.toString(),o=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:n,parameters:ta(i)}},t}function Gn(t){return Ai(ea,t)}function Xn(o){return na(function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return o.apply(void 0,X([t.getApis(),t],n,!1))},o)}function Yn(t,r){var i={};return Fe(t,function(t,o){Fe(t,function(t,n){var e=O(i,n).getOr([]);i[n]=e.concat([r(o,t)])})}),i}function qn(t){return{classes:u(t.classes)?[]:t.classes,attributes:u(t.attributes)?{}:t.attributes,styles:u(t.styles)?{}:t.styles}}function Kn(n,t,e,o){function r(t){return he(t,function(t,n){return D(D({},n.modification),t)},{})}var i=D({},t),t=(x(e,function(t){i[t.name()]=t.exhibit(n,o)}),Yn(i,function(t,n){return{name:t,modification:n}})),e=he(t.classes,function(t,n){return n.modification.concat(t)},[]),u=r(t.attributes),t=r(t.styles);return qn({classes:e,attributes:u,styles:t})}function Jn(t){return t.cHandler}function $n(t,n){return{name:t,handler:n}}function Qn(t,n,e){var o,r,e=D(D({},e),(o=t,r={},x(n,function(t){r[t.name()]=t.handlers(o)}),r));return Yn(e,$n)}function Zn(t,n,e,o){var r,t=Qn(t,e,o);return r=n,e=Pe(t,function(e,o){return(1===e.length?B.value(e[0].handler):ca(e,r,o)).map(function(t){var t=aa(t),n=1<e.length?pe(r[o],function(n){return me(e,function(t){return t.name===n})}).join(" > "):e[0].name;return Ai(o,ua(t,n))})}),Mi(e,{})}function te(t,n){return void 0===(t=nr(t,n))||""===t?[]:t.split(" ")}function ne(t,n){return e=t,n=C(t=n,function(t){return Ci(t.name(),[i("config"),s("state",ra)])}),n=hi("component.behaviours",g(n),e.behaviours).fold(function(t){throw new Error(yi(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},v),{list:t,data:Ie(n,function(t){t=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return q(t)})};var e}function ee(t){n=O(t,"behaviours").getOr({});var n,e=Se(Be(n),function(t){t=n[t];return I(t)?[t.me]:[]});return ne(t,e)}function oe(t,n,e){var o=D(D({},(o=t).dom),{uid:o.uid,domChildren:C(o.components,function(t){return t.element})}),t=t.domModification.fold(function(){return qn({})},qn),e=0<n.length?Kn(e,{"alloy.base.modification":t},n,o):t;return n=e,D(D({},t=o),{attributes:D(D({},t.attributes),n.attributes),styles:D(D({},t.styles),n.styles),classes:t.classes.concat(n.classes)})}function re(e){function t(){return f}var n,o=T(Zu),r=vi(hi("custom.definition",sa,e)),i=ee(e),u=i.list,a=i.data,c=(i=i=oe(r,u,a),n=w.fromTag(i.tag),It(n,i.attributes),va(n,i.classes),ar(n,i.styles),i.innerHtml.each(function(t){return Ln(n,t)}),s=i.domChildren,Er(n,s),i.value.each(function(t){xa(n,t)}),i.uid,zn(n,i.uid),n),s=(s=a,i={"alloy.base.behaviour":r.events},Zn(s,r.eventOrder,u,i).getOrDie()),l=T(r.components),f={uid:e.uid,getSystem:o.get,config:function(t){var n=a;return(R(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(t){return R(a[t.name()])},spec:e,readState:function(t){return a[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return r.apis},connect:function(t){o.set(t)},disconnect:function(){o.set(jn(t))},element:c,syncComponents:function(){var t=Uo(c),t=Se(t,function(t){return o.get().getByDom(t).fold(function(){return[]},mt)});l.set(t)},components:l.get,events:s};return f}var ie,ue,ae,K={some:st,none:ut,from:function(t){return null==t?at:st(t)}},ce=Array.prototype.slice,se=Array.prototype.indexOf,le=Array.prototype.push,fe=function(t,n){return se.call(t,n)},de=function(t,n){return-1<fe(t,n)},me=function(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return!0;return!1},C=function(t,n){for(var e=t.length,o=new Array(e),r=0;r<e;r++){var i=t[r];o[r]=n(i,r)}return o},x=function(t,n){for(var e=0,o=t.length;e<o;e++)n(t[e],e)},ge=function(t,n){for(var e=t.length-1;0<=e;e--)n(t[e],e)},pe=function(t,n){for(var e=[],o=0,r=t.length;o<r;o++){var i=t[o];n(i,o)&&e.push(i)}return e},he=function(t,e,o){return ge(t,function(t,n){o=e(o,t,n)}),o},ve=function(t,e,o){return x(t,function(t,n){o=e(o,t,n)}),o},be=function(t,n,e){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(n(i,o))return K.some(i);if(e(i,o))break}return K.none()},ye=function(t,n){return be(t,n,U)},xe=function(t,n){for(var e=0,o=t.length;e<o;e++)if(n(t[e],e))return K.some(e);return K.none()},we=function(t){for(var n=[],e=0,o=t.length;e<o;++e){if(!h(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);le.apply(n,t[e])}return n},Se=function(t,n){return we(C(t,n))},ke=function(t,n){for(var e=0,o=t.length;e<o;++e)if(!0!==n(t[e],e))return!1;return!0},Ce=function(t){t=ce.call(t,0);return t.reverse(),t},Oe=function(t,n){return pe(t,function(t){return!de(n,t)})},_e=function(t,n){for(var e={},o=0,r=t.length;o<r;o++){var i=t[o];e[String(i)]=n(i,o)}return e},Te=function(t,n){return 0<=n&&n<t.length?K.some(t[n]):K.none()},Ee=function(t){return Te(t,0)},De=R(Array.from)?Array.from:function(t){return ce.call(t)},Ae=function(t,n){for(var e=0;e<t.length;e++){var o=n(t[e],e);if(o.isSome())return o}return K.none()},Be=Object.keys,Me=Object.hasOwnProperty,Fe=function(t,n){for(var e=Be(t),o=0,r=e.length;o<r;o++){var i=e[o];n(t[i],i)}},Ie=function(t,e){return Re(t,function(t,n){return{k:n,v:e(t,n)}})},Re=function(t,e){var o={};return Fe(t,function(t,n){t=e(t,n);o[t.k]=t.v}),o},Ne=function(t,n){var e,o,r,i,u={};return e=n,i=u,o=function(t,n){i[n]=t},r=Y,Fe(t,function(t,n){(e(t,n)?o:r)(t,n)}),u},Pe=function(t,e){var o=[];return Fe(t,function(t,n){o.push(e(t,n))}),o},Ve=function(t){return Pe(t,v)},O=function(t,n){return He(t,n)?K.from(t[n]):K.none()},He=function(t,n){return Me.call(t,n)},Le=function(t,n){return He(t,n)&&void 0!==t[n]&&null!==t[n]},ze=function(t,n,e){return void 0===e&&(e=V),t.exists(function(t){return e(t,n)})},Ue=function(t){for(var n=[],e=function(t){n.push(t)},o=0;o<t.length;o++)t[o].each(e);return n},je=function(t,n,e){return t.isSome()&&n.isSome()?K.some(e(t.getOrDie(),n.getOrDie())):K.none()},We=function(t,n){return t?K.some(n):K.none()},Ge=function(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n},Xe=function(t,n){return Ge(t,n,t.length-n.length)},Ye=(ie=/^\s+|\s+$/g,function(t){return t.replace(ie,"")}),qe=function(t){return void 0!==t.style&&R(t.style.getPropertyValue)},w={fromHtml:function(t,n){n=(n||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return xt(n.childNodes[0])},fromTag:function(t,n){n=(n||document).createElement(t);return xt(n)},fromText:function(t,n){n=(n||document).createTextNode(t);return xt(n)},fromDom:xt,fromPoint:function(t,n,e){return K.from(t.dom.elementFromPoint(n,e)).map(xt)}},Ke=("undefined"==typeof window&&Function("return this;")(),1),Je=function(t){return t.dom.nodeName.toLowerCase()},$e=wt(Ke),Qe=wt(3),Ze=wt(9),to=wt(11),no=function(e){var o,r=!1;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r||(r=!0,o=e.apply(null,t)),o}},eo=function(t,n){for(var e=0;e<t.length;e++){var o=t[e];if(o.test(n))return o}},oo=function(t,n){return{major:t,minor:n}},ro={nu:oo,detect:function(t,n){var e,o,n=String(n).toLowerCase();return 0===t.length?St():(o=eo(t=t,e=n))?oo((t=function(t){return Number(e.replace(o,"$"+t))})(1),t(2)):{major:0,minor:0}},unknown:St},io=function(t,n){var e=String(n).toLowerCase();return ye(t,function(t){return t.search(e)})},uo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,uo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return bt(t,"edge/")&&bt(t,"chrome")&&bt(t,"safari")&&bt(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,uo],search:function(t){return bt(t,"chrome")&&!bt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return bt(t,"msie")||bt(t,"trident")}},{name:"Opera",versionRegexes:[uo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:kt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:kt("firefox")},{name:"Safari",versionRegexes:[uo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(bt(t,"safari")||bt(t,"mobile/"))&&bt(t,"applewebkit")}}],ao=[{name:"Windows",search:kt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return bt(t,"iphone")||bt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:kt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:kt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:kt("linux"),versionRegexes:[]},{name:"Solaris",search:kt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:kt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:kt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],co={browsers:q(uo),oses:q(ao)},so="Edge",lo="Chrome",fo="IE",mo="Opera",go="Firefox",po="Safari",ho=function(){return Ct({current:void 0,version:ro.unknown()})},vo=Ct,bo=(q(so),q(lo),q(fo),q(mo),q(go),q(po),"Windows"),yo="iOS",xo="Android",wo="Linux",So="OSX",ko="Solaris",Co="FreeBSD",Oo="ChromeOS",_o=function(){return Ot({current:void 0,version:ro.unknown()})},To=Ot,Eo=(q(bo),q(yo),q(xo),q(wo),q(So),q(ko),q(Co),q(Oo),function(t,n,e){var o,r,i,u,a,c,s,l=co.browsers(),f=co.oses(),n=n.bind(function(t){return o=l,Ae(t.brands,function(n){var e=n.brand.toLowerCase();return ye(o,function(t){return e===(null==(t=t.brand)?void 0:t.toLowerCase())}).map(function(t){return{current:t.name,version:ro.nu(parseInt(n.version,10),0)}})});var o}).orThunk(function(){return io(l,e=t).map(function(t){var n=ro.detect(t.versionRegexes,e);return{current:t.name,version:n}});var e}).fold(ho,vo),f=io(f,o=t).map(function(t){var n=ro.detect(t.versionRegexes,o);return{current:t.name,version:n}}).fold(_o,To),d=(i=n,u=t,e=e,d=(r=f).isiOS()&&!0===/ipad/i.test(u),a=r.isiOS()&&!d,c=r.isiOS()||r.isAndroid(),s=c||e("(pointer:coarse)"),e=d||!a&&c&&e("(min-device-width:768px)"),c=a||c&&!e,i=i.isSafari()&&r.isiOS()&&!1===/safari/i.test(u),u=!c&&!e&&!i,{isiPad:q(d),isiPhone:q(a),isTablet:q(e),isPhone:q(c),isTouch:q(s),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:q(i),isDesktop:q(u)});return{browser:n,os:f,deviceType:d}}),Do=no(function(){return Eo(navigator.userAgent,K.from(navigator.userAgentData),_t)}),Ao=function(){return Do()},Bo=function(t,n){t=t.dom;if(t.nodeType!==Ke)return!1;if(void 0!==t.matches)return t.matches(n);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(n);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(n);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},Mo=function(t,n){n=void 0===n?document:n.dom;return Tt(n)?[]:C(n.querySelectorAll(t),w.fromDom)},Fo=function(t,n){n=void 0===n?document:n.dom;return Tt(n)?K.none():K.from(n.querySelector(t)).map(w.fromDom)},Io=function(t,n){return t.dom===n.dom},Ro=function(t,n){t=t.dom,n=n.dom;return t!==n&&t.contains(n)},No=function(t,n){return t=t.dom,n=n.dom,e=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(t.compareDocumentPosition(n)&e);var e},Po=function(t,n){return(Ao().browser.isIE()?No:Ro)(t,n)},Vo=function(t){return w.fromDom(t.dom.ownerDocument)},Ho=function(t){return Ze(t)?t:Vo(t)},Lo=function(t){return w.fromDom(Ho(t).dom.documentElement)},zo=function(t){return K.from(t.dom.parentNode).map(w.fromDom)},Uo=function(t){return C(t.dom.childNodes,w.fromDom)},jo=function(t,n){t=t.dom.childNodes;return K.from(t[n]).map(w.fromDom)},Wo=function(t){return jo(t,0)},Go=function(t){return to(t)&&I(t.dom.host)},uo=R(Element.prototype.attachShadow)&&R(Node.prototype.getRootNode),Xo=q(uo),Yo=uo?function(t){return w.fromDom(t.dom.getRootNode())}:Ho,qo=function(t){return Go(t)?t:w.fromDom(Ho(t).dom.body)},Ko=function(t){return Mt(t).isSome()},Jo=function(t){return I(t.dom.shadowRoot)},$o=function(t){var n,e,o,r=Qe(t)?t.dom.parentNode:t.dom;return null!=r&&null!==r.ownerDocument&&(n=r.ownerDocument,Mt(w.fromDom(r)).fold(function(){return n.body.contains(r)},(e=$o,o=Ft,function(t){return e(o(t))})))},Qo=function(){return Zo(w.fromDom(document))},Zo=function(t){t=t.dom.body;if(null==t)throw new Error("Body is not available yet");return w.fromDom(t)},tr=function(t,n,e){if(!(d(e)||k(e)||N(e)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")},_=function(t,n,e){tr(t.dom,n,e)},nr=function(t,n){t=t.dom.getAttribute(n);return null===t?void 0:t},er=function(t,n){return K.from(nr(t,n))},or=function(t,n){t=t.dom;return!(!t||!t.hasAttribute)&&t.hasAttribute(n)},rr=function(t,n){t.dom.removeAttribute(n)},ir=function(t,n,e){if(!d(e))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e);qe(t)&&t.style.setProperty(n,e)},ur=function(t,n){qe(t)&&t.style.removeProperty(n)},A=function(t,n,e){t=t.dom;ir(t,n,e)},ar=function(t,n){var e=t.dom;Fe(n,function(t,n){ir(e,n,t)})},cr=function(t,n){var e=t.dom,o=window.getComputedStyle(e).getPropertyValue(n);return""!==o||$o(t)?o:sr(e,n)},sr=function(t,n){return qe(t)?t.style.getPropertyValue(n):""},lr=function(t,n){t=t.dom,t=sr(t,n);return K.from(t).filter(function(t){return 0<t.length})},fr=function(t,n,e){t=w.fromTag(t);return A(t,n,e),lr(t,n).isSome()},dr=function(t,n){var e=t.dom;ur(e,n),ze(er(t,"style").map(Ye),"")&&rr(t,"style")},mr=function(t){return t.dom.offsetWidth},gr=Nt("height",function(t){var n=t.dom;return $o(t)?n.getBoundingClientRect().height:n.offsetHeight}),pr=function(t){return gr.get(t)},hr=function(t){return gr.getOuter(t)},vr=Pt,br=function(t){t=t.getBoundingClientRect();return vr(t.left,t.top)},yr=function(t){var n,e,o=t.dom.ownerDocument,r=o.body,i=o.defaultView,o=o.documentElement;return r===t.dom?vr(r.offsetLeft,r.offsetTop):(n=Vt(null==i?void 0:i.pageYOffset,o.scrollTop),i=Vt(null==i?void 0:i.pageXOffset,o.scrollLeft),e=Vt(o.clientTop,r.clientTop),o=Vt(o.clientLeft,r.clientLeft),Ht(t).translate(i-o,n-e))},xr=Nt("width",function(t){return t.dom.offsetWidth}),wr=function(t){return xr.get(t)},Sr=function(t){return xr.getOuter(t)},kr=function(t,n,e,o){return zt(t,n,e,o,!1)},Cr=function(n,e){zo(n).each(function(t){t.dom.insertBefore(e.dom,n.dom)})},Or=function(t,n){K.from(t.dom.nextSibling).map(w.fromDom).fold(function(){zo(t).each(function(t){_r(t,n)})},function(t){Cr(t,n)})},_r=function(t,n){t.dom.appendChild(n.dom)},Tr=function(n,t){x(t,function(t){Cr(n,t)})},Er=function(n,t){x(t,function(t){_r(n,t)})},Dr=function(t){t.dom.textContent="",x(Uo(t),function(t){Ar(t)})},Ar=function(t){t=t.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Br=function(t){var t=void 0!==t?t.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,t=t.body.scrollTop||t.documentElement.scrollTop;return vr(n,t)},Mr=function(t,n,e){e=(void 0!==e?e.dom:document).defaultView;e&&e.scrollTo(t,n)},Fr=function(t){t=void 0===t?window:t;return Ao().browser.isFirefox()?K.none():K.from(t.visualViewport)},Ir=function(t,n,e,o){return{x:t,y:n,width:e,height:o,right:t+e,bottom:n+o}},Rr=Object.freeze({__proto__:null,view:function(t){return(t.dom===document?K.none():K.from(null==(t=t.dom.defaultView)?void 0:t.frameElement)).map(w.fromDom)},owner:function(t){return Vo(t)}}),Nr=function(e){var t=w.fromDom(document),o=Br(t);return function(t,n){t=n.owner(t),n=Xt(n,t);return K.some(n)}(e,Rr).fold(H(yr,e),function(t){var n=Ht(e),t=he(t,function(t,n){n=Ht(n);return{left:t.left+n.left,top:t.top+n.top}},{left:0,top:0});return vr(t.left+n.left+o.left,t.top+n.top+o.top)})},Pr=function(t,n,e){return{point:t,width:n,height:e}},Vr=function(t,n,e,o){return{x:t,y:n,width:e,height:o}},Hr=function(t,n,e,o){return{x:t,y:n,width:e,height:o,right:t+e,bottom:n+o}},Lr=function(t){var n=yr(t),e=Sr(t),t=hr(t);return Hr(n.left,n.top,e,t)},zr=function(t){var n=Nr(t),e=Sr(t),t=hr(t);return Hr(n.left,n.top,e,t)},Ur=function(){return Gt(window)},B={value:Yt,error:qt,fromOption:function(t,n){return t.fold(function(){return qt(n)},Yt)}},jr=((ao=ue=ue||{})[ao.Error=0]="Error",ao[ao.Value=1]="Value",{fromResult:function(t){return t.fold($t,Jt)},toResult:function(t){return Kt(t,B.error,B.value)},svalue:Jt,partition:function(t){var n=[],e=[];return x(t,function(t){Kt(t,function(t){return e.push(t)},function(t){return n.push(t)})}),{values:n,errors:e}},serror:$t,bind:function(t,n){return t.stype===ue.Value?n(t.svalue):t},bindError:function(t,n){return t.stype===ue.Error?n(t.serror):t},map:function(t,n){return t.stype===ue.Value?{stype:ue.Value,svalue:n(t.svalue)}:t},mapError:function(t,n){return t.stype===ue.Error?{stype:ue.Error,serror:n(t.serror)}:t},fold:Kt}),Wr=function(t,n,e,o){return{tag:"field",key:t,newKey:n,presence:e,prop:o}},Gr=function(t,n,e){switch(t.tag){case"field":return n(t.key,t.newKey,t.presence,t.prop);case"custom":return e(t.newKey,t.instantiator)}},Xr=Qt(function(t,n){return p(t)&&p(n)?Xr(t,n):n}),Yr=Qt(function(t,n){return n}),qr=function(){return{tag:"required",process:{}}},Kr=function(t){return{tag:"defaultedThunk",process:t}},Jr=function(t){return Kr(q(t))},$r=function(){return{tag:"option",process:{}}},Qr=function(t){t=jr.partition(t);return 0<t.errors.length?tn(t.errors):jr.svalue(t.values)},Zr=function(t){return p(t)&&100<Be(t).length?" removed due to size":JSON.stringify(t,null,2)},ti=function(t){t=10<t.length?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return C(t,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})},ni=function(t,n){return jr.serror([{path:t,getErrorInfo:n}])},ei=function(t,n){return ni(t,function(){return'Choice schema did not contain choice key: "'+n+'"'})},oi=function(e){return{extract:function(n,t){return jr.bindError(e(t),function(t){return ni(n,q(t))})},toString:q("val")}},uo=oi(jr.svalue),ri=function(n,e,o,r,i){function u(t){return i.extract(e.concat([r]),t)}function t(t){return t.fold(function(){return jr.svalue(K.none())},function(t){t=i.extract(e.concat([r]),t);return jr.map(t,K.some)})}var a,c;switch(n.tag){case"required":return nn(e,o,r,u);case"defaultedThunk":return en(o,r,n.process,u);case"option":return t(O(o,r));case"defaultedOptionThunk":return a=o,c=n.process,t(O(a,r).map(function(t){return!0===t?c(a):t}));case"mergeWithThunk":return en(o,r,q({}),function(t){t=Xr(n.process(o),t);return u(t)})}},ii=function(t){var r=g(t),i=he(t,function(e,t){return Gr(t,function(t){var n;return Xr(e,((n={})[t]=!0,n))},q(e))},{});return{extract:function(t,n){var e,o=k(n)?[]:Be(Ne(n,I)),o=pe(o,function(t){return!Le(i,t)});return 0===o.length?r.extract(t,n):(e=o,ni(t,function(){return"There are unsupported fields: ["+e.join(", ")+"] specified"}))},toString:r.toString}},g=function(s){return{extract:function(t,n){for(var r=t,i=n,u={},a=[],e=0,o=s;e<o.length;e++){var c=o[e];Gr(c,function(t,n,e,o){e=ri(e,r,i,t,o);jr.fold(e,function(t){a.push.apply(a,t)},function(t){u[n]=t})},function(t,n){u[t]=n(i)})}return 0<a.length?jr.serror(a):jr.svalue(u)},toString:function(){return"obj{\n"+C(s,function(t){return Gr(t,function(t,n,e,o){return t+" -> "+o.toString()},function(t,n){return"state("+t+")"})}).join("\n")+"}"}}},ui=function(o){return{extract:function(e,t){t=C(t,function(t,n){return o.extract(e.concat(["["+n+"]"]),t)});return Qr(t)},toString:function(){return"array("+o.toString()+")"}}},ai=P(ui,g),ci=q(uo),si=an(N,"number"),li=an(d,"string"),fi=an(k,"boolean"),di=an(R,"function"),ao=oi(function(t){return cn(t)?jr.svalue(t):jr.serror("Expected value to be acceptable for sending via postMessage")}),mi=function(e,n,o,r){return O(o,r).fold(function(){return t=o,n=r,ni(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+Zr(t)});var t,n},function(t){return t.extract(e.concat(["branch: "+r]),n)})},gi=function(n){return oi(function(t){return n(t).fold(jr.serror,jr.svalue)})},pi=function(t,n,e){n=n.extract([t],e);return jr.mapError(n,function(t){return{input:e,errors:t}})},hi=function(t,n,e){return jr.toResult(pi(t,n,e))},vi=function(t){return t.fold(function(t){throw new Error(yi(t))},v)},bi=function(t,n,e){return vi(hi(t,n,e))},yi=function(t){return"Errors: \n"+ti(t.errors).join("\n")+"\n\nInput object: "+Zr(t.input)},xi=Wr,wi=function(t,n){return{tag:"custom",newKey:t,instantiator:n}},i=function(t){return xi(t,t,qr(),ci())},Si=function(t,n){return xi(t,t,qr(),n)},ki=function(t,n){return xi(t,t,$r(),n)},Ci=function(t,n){return ki(t,g(n))},Oi=function(t,n){return ki(t,ii(n))},s=function(t,n){return xi(t,t,Jr(n),ci())},_i=function(t,n,e){return xi(t,t,Jr(n),e)},T=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},Ti=function(u){if(!h(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var a=[],e={};return x(u,function(t,o){var n=Be(t);if(1!==n.length)throw new Error("one and only one name per case");var r=n[0],i=t[r];if(void 0!==e[r])throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!h(i))throw new Error("case arguments must be an array");a.push(r),e[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(n!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+n);return{fold:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+t.length);return t[o].apply(null,e)},match:function(t){var n=Be(t);if(a.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+n.join(","));if(ke(a,function(t){return de(n,t)}))return t[r].apply(null,e);throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+a.join(", "))},log:function(t){console.log(t,{constructors:a,constructor:r,params:e})}}}}),e},Ei=(Ti([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t,n){var e={};return e[t]=n,e}),Di=function(t){var n={};return x(t,function(t){n[t.key]=t.value}),n},Ai=function(t,n){return Ei(t,n)},Bi=function(t){return Di(t)},Mi=function(t,n){e=[],o=[],x(t,function(t){t.fold(function(t){e.push(t)},function(t){o.push(t)})});var e,o,r,t={errors:e,values:o};return 0<t.errors.length?(r=t.errors,B.error(we(r))):(r=n,0===(n=t.values).length?B.value(r):B.value(Xr(r,Yr.apply(void 0,n))))},Fi=function(t,n,e){var o=n(t),r=Bn(e);return o.orThunk(function(){return r(t)?K.none():Mn(t,n,r)})},Ii=function(t,n){return Io(t.element,n.event.target)},Ri={can:j,abort:U,run:Y},Ni=function(t){if(Le(t,"can")||Le(t,"abort")||Le(t,"run"))return D(D({},Ri),t);throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!")},Pi=q,Vi=Pi("touchstart"),Hi=Pi("touchmove"),Li=Pi("touchend"),zi=Pi("touchcancel"),Ui=Pi("mousedown"),ji=Pi("mousemove"),Wi=Pi("mouseout"),Gi=Pi("mouseup"),Xi=Pi("mouseover"),Yi=Pi("focusin"),qi=Pi("focusout"),Ki=Pi("keydown"),Ji=Pi("keyup"),$i=Pi("input"),Qi=Pi("change"),Zi=Pi("click"),tu=Pi("transitioncancel"),nu=Pi("transitionend"),eu=Pi("transitionstart"),ou=Pi("selectstart"),Pi={tap:In("tap")},ru=In("focus"),iu=In("blur.post"),uu=In("paste.post"),au=In("receive"),cu=In("execute"),su=In("focus.item"),lu=Pi.tap,fu=In("longpress"),du=In("sandbox.close"),mu=In("typeahead.cancel"),gu=In("system.init"),pu=In("system.touchmove"),hu=In("system.touchend"),vu=In("system.scroll"),bu=In("system.resize"),yu=In("system.attached"),xu=In("system.detached"),wu=In("system.dismissRequested"),Pi=In("system.repositionRequested"),Su=In("focusmanager.shifted"),ku=In("slotcontainer.visibility"),Cu=In("change.tab"),Ou=In("dismiss.tab"),_u=In("highlight"),Tu=In("dehighlight"),J=function(t,n){Au(t,t.element,n,{})},$=function(t,n,e){Au(t,t.element,n,e)},Eu=function(t){J(t,cu())},Du=function(t,n,e){Au(t,n,e,{})},Au=function(t,n,e,o){o=D({target:n},o);t.getSystem().triggerEvent(e,n,o)},Bu=function(t,n,e,o){t.getSystem().triggerEvent(e,n,o.event)},Mu=function(t){return Bi(t)},Q=function(t,n){return{key:t,value:Ni({run:n})}},Fu=function(t){return function(e){return{key:t,value:Ni({run:function(t,n){Ii(t,n)&&e(t,n)}})}}},Iu=function(t,r){return Q(t,function(n,t){var e=t.event,o=n.getSystem().getByDom(e.target).getOrThunk(function(){return Fi(e.target,function(t){return n.getSystem().getByDom(t).toOptional()},U).getOr(n)});r(n,o,t)})},Ru=function(t){return Q(t,function(t,n){n.cut()})},Nu=Fu(yu()),Pu=Fu(xu()),Vu=Fu(gu()),Hu=(ae=cu(),function(t){return Q(ae,t)}),Lu=function(t,n){n=(n||document).createElement("div");return n.innerHTML=t,Uo(w.fromDom(n))},zu=function(t){return t.dom.innerHTML},Uu=function(t){var n=w.fromTag("div"),t=w.fromDom(t.dom.cloneNode(!0));return _r(n,t),zu(n)},ju=function(t){return n=!1,w.fromDom(t.dom.cloneNode(n));var n},Wu=function(t){return Go(t=t)?"#shadow-root":(t=ju(t),Uu(t))},Gu=Mu([{key:ru(),value:Ni({can:function(t,n){var e,o,n=n.event,r=n.originator,n=n.target;return o=n,!(Io(e=r,t.element)&&!Io(e,o)&&(console.warn(ru()+" did not get interpreted by the desired target. \nOriginator: "+Wu(r)+"\nTarget: "+Wu(n)+"\nCheck the "+ru()+" event handlers"),1))}})}]),Xu=Object.freeze({__proto__:null,events:Gu}),Yu=0,E=function(t){var n=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++Yu+String(n)},Gu=q("alloy-id-"),qu=q("data-alloy-id"),Ku=Gu(),Ju=qu(),$u=function(t){return E(t)},Qu=v,Zu=jn(),ta=function(t){return C(t,function(t){return Xe(t,"/*")?t.substring(0,t.length-"/*".length):t})},na=function(t,n){var n=n.toString(),e=n.indexOf(")")+1,o=n.indexOf("("),r=n.substring(o+1,e-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ta(r.slice(1))}},t},ea=E("alloy-premade"),oa=function(t){return O(t,ea)},ra={init:function(){return ia({readState:q("No State required")})}},ia=function(t){return t},ua=function(t,n){return{handler:t,purpose:n}},aa=function(t){var r=R(t=t)?{can:j,abort:U,run:t}:t;return function(t,n){for(var e=[],o=2;o<arguments.length;o++)e[o-2]=arguments[o];t=[t,n].concat(e);r.abort.apply(void 0,t)?n.stop():r.can.apply(void 0,t)&&r.run.apply(void 0,t)}},ca=function(t,n,e){n=n[e];return n?function(r,i,t,u){try{var n=gt(t,function(t,n){var t=t[i],n=n[i],e=u.indexOf(t),o=u.indexOf(n);if(-1===e)throw new Error("The ordering for "+r+" does not have an entry for "+t+".\nOrder specified: "+JSON.stringify(u,null,2));if(-1===o)throw new Error("The ordering for "+r+" does not have an entry for "+n+".\nOrder specified: "+JSON.stringify(u,null,2));return e<o?-1:o<e?1:0});return B.value(n)}catch(t){return B.error([t])}}("Event: "+e,"name",t,n).map(function(t){t=C(t,function(t){return t.handler});return Fn(t)}):B.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(C(t,function(t){return t.name}),null,2)])},Gu="alloy.base.behaviour",sa=g([xi("dom","dom",qr(),g([i("tag"),s("styles",{}),s("classes",[]),s("attributes",{}),bn("value"),bn("innerHtml")])),i("components"),i("uid"),s("events",{}),s("apis",{}),xi("eventOrder","eventOrder",((qu={})[cu()]=["disabling",Gu,"toggling","typeaheadevents"],qu[ru()]=[Gu,"focusing","keying"],qu[gu()]=[Gu,"disabling","toggling","representing"],qu[$i()]=[Gu,"representing","streaming","invalidating"],qu[xu()]=[Gu,"representing","item-events","tooltipping"],qu[Ui()]=["focusing",Gu,"item-type-events"],qu[Vi()]=["focusing",Gu,"item-type-events"],qu[Xi()]=["item-type-events","tooltipping"],qu[au()]=["receiving","reflecting","tooltipping"],qu,Zt(q(qu))),ci()),bn("domModification")]),la=function(t){return void 0!==t.dom.classList},fa=function(t,n){var e="class";return n=te(t,e).concat([n]),_(t,e,n.join(" ")),!0},da=function(t,n){return e=n,0<(o=pe(te(n=t,t="class"),function(t){return t!==e})).length?_(n,t,o.join(" ")):rr(n,t),!1;var e,o},ma=function(t,n){la(t)?t.dom.classList.add(n):fa(t,n)},ga=function(t){0===(la(t)?t.dom.classList:te(t,"class")).length&&rr(t,"class")},pa=function(t,n){la(t)?t.dom.classList.remove(n):da(t,n),ga(t)},ha=function(t,n){return la(t)&&t.dom.classList.contains(n)},va=function(n,t){x(t,function(t){ma(n,t)})},ba=function(n,t){x(t,function(t){pa(n,t)})},ya=function(t){return t.dom.value},xa=function(t,n){if(void 0===n)throw new Error("Value.set was undefined");t.dom.value=n},wa=function(t){var t=Qu(t),n=t.events,t=G(t,["events"]),e=function(t){t=O(t,"components").getOr([]);return C(t,_a)}(t),t=D(D({},t),{events:D(D({},Xu),n),components:e});return B.value(re(t))},Sa=function(t){t=w.fromText(t);return ka({element:t})},ka=function(t){var n=bi("external.component",ii([i("element"),bn("uid")]),t),e=T(jn()),o=n.uid.getOrThunk(function(){return $u("external")}),r=(zn(n.element,o),{uid:o,getSystem:e.get,config:K.none,hasConfigured:U,connect:function(t){e.set(t)},disconnect:function(){e.set(jn(function(){return r}))},getApis:function(){return{}},element:n.element,spec:t,readState:q("No state"),syncComponents:Y,components:q([]),events:{}});return Gn(r)},Ca=$u,Oa=function(t){return He(t,"uid")},_a=function(n){return oa(n).getOrThunk(function(){var t=Oa(n)?n:D({uid:Ca("")},n);return wa(t).getOrDie()})},Ta=Gn;function Ea(t,n,e,o,r){return t(e,o)?K.some(e):R(r)&&r(e)?K.none():n(e,o,r)}function Da(t,n,e){for(var o=t.dom,r=R(e)?e:U;o.parentNode;){var o=o.parentNode,i=w.fromDom(o);if(n(i))return K.some(i);if(r(i))break}return K.none()}function Aa(t,n,e){return Ea(function(t,n){return n(t)},Da,t,n,e)}function Ba(n,t,e){var o,r,i,u;switch(O(Gc.get(),n).orThunk(function(){var t=Be(Gc.get());return Ae(t,function(t){return-1<n.indexOf(t)?K.some(Gc.get()[t]):K.none()})}).getOr(Bc.NORMAL)){case Bc.NORMAL:return e(qc());case Bc.LOGGING:o=n,r=t,i=[],u=(new Date).getTime();var a={logEventCut:function(t,n,e){i.push({outcome:"cut",target:n,purpose:e})},logEventStopped:function(t,n,e){i.push({outcome:"stopped",target:n,purpose:e})},logNoParent:function(t,n,e){i.push({outcome:"no-parent",target:n,purpose:e})},logEventNoHandlers:function(t,n){i.push({outcome:"no-handlers-left",target:n})},logEventResponse:function(t,n,e){i.push({outcome:"response",purpose:e,target:n})},write:function(){var t=(new Date).getTime();de(["mousemove","mouseover","mouseout",gu()],o)||console.log(o,{event:o,time:t-u,target:r.dom,sequence:C(i,function(t){return de(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Wu(t.target)+")":t.outcome})})}},c=e(a);return a.write(),c;case Bc.STOP:return!0}}function Ma(){return pn("markers",[i("backgroundMenu")].concat(Kc()).concat(Jc()))}function Fa(t){return pn("markers",C(t,i))}function Ia(t,n,e){return Yc(),xi(n,n,e,gi(function(e){return B.value(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)})}))}function t(t){return Ia(0,t,Jr(Y))}function Ra(t){return Ia(0,t,Jr(K.none))}function Na(t){return Ia(0,t,qr())}function Pa(t){return Ia(0,t,qr())}function Va(t){return wi(t,v)}function Ha(t,n,e,o,r,i,u,a){return{x:t,y:n,bubble:e,direction:o,placement:r,restriction:i,label:u+"-"+r,alwaysFit:a=void 0===a?!1:a}}function La(n,e){return _e(["left","right","top","bottom"],function(t){return O(e,t).map(function(t){return ss(n,t)})})}function za(i,t,u){function n(o,r){return t[o].map(function(t){var n="top"===o||"bottom"===o,e=n?u.top:u.left,t=("left"===o||"top"===o?Math.max:Math.min)(t,r)+e;return n?cs(t,i.y,i.bottom):cs(t,i.x,i.right)}).getOr(r)}var e=n("left",i.x),o=n("top",i.y),r=n("right",i.right),a=n("bottom",i.bottom);return Hr(e,o,r-e,a-o)}function Ua(t,n){return t.x+t.width/2-n.width/2}function ja(t,n){return t.x+t.width-n.width}function Wa(t,n){return t.y-n.height}function Ga(t){return t.y+t.height}function Xa(t,n){return t.y+t.height/2-n.height/2}function Ya(){return[fs,ds,ms,gs,hs,ps,vs,bs]}function qa(){return[ds,fs,gs,ms,hs,ps,vs,bs]}function Ka(e,o,r){return Vu(function(t,n){r(t,e,o)})}function Ja(r,i,u){var t,n,e,o,a,c;return t=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=[e].concat(t);return e.config({name:q(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+u)},function(t){var n=Array.prototype.slice.call(o,1);return i.apply(void 0,[e,t.config,t.state].concat(n))})},n=u,e=(e=i).toString(),o=e.indexOf(")")+1,a=e.indexOf("("),c=e.substring(a+1,o-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:n,parameters:ta(c.slice(0,1).concat(c.slice(3)))}},t}function $a(t){return{key:t,value:void 0}}function Qa(t){var n,e,o,r,i,u,t=bi("Creating behaviour: "+t.name,Os,t);return n=t.fields,e=t.name,o=t.active,r=t.apis,i=t.extra,t=t.state,u=ii(n),n=Ci(e,[Oi("config",n)]),Cs(u,n,e,o,r,i,t)}function Za(t){var n,e,o,r,i,u,t=bi("Creating behaviour: "+t.name,_s,t);return n=fn(t.branchKey,t.branches),e=t.name,o=t.active,r=t.apis,i=t.extra,t=t.state,n=Ci(e,[ki("config",u=n)]),Cs(u,n,e,o,r,i,t)}function tc(t){var n=Yo(t).dom;return t.dom===n.activeElement}function nc(t,e){var o=Yo(e),n=Bs(o).bind(function(n){function t(t){return Io(n,t)}return t(e)?K.some(e):Rc(e,t)}),t=t(e);n.each(function(n){Bs(o).filter(function(t){return Io(t,n)}).fold(function(){As(n)},Y)})}function ec(t,n,e,o,r){function i(t){return t+"px"}return{position:t,left:n.map(i),top:e.map(i),right:o.map(i),bottom:r.map(i)}}function oc(t,n){Rt(t,D(D({},t=n),{position:K.some(t.position)}))}function rc(t,n,e,o,r,i){var u,a,c,s=n.rect,e=s.x-e,o=s.y-o,r=r-(e+s.width),i=i-(o+s.height),l=K.some(e),f=K.some(o),d=K.some(r),m=K.some(i),g=K.none();return s=n.direction,e=function(){return ec(t,l,f,g,g)},o=function(){return ec(t,g,f,d,g)},r=function(){return ec(t,l,g,g,m)},i=function(){return ec(t,g,g,d,m)},n=function(){return ec(t,l,f,g,g)},u=function(){return ec(t,l,g,g,m)},a=function(){return ec(t,l,f,g,g)},c=function(){return ec(t,g,f,d,g)},s.fold(e,o,r,i,n,u,a,c)}function ic(t,r){return t.fold(function(){var t=r.rect;return ec("absolute",K.some(t.x),K.some(t.y),K.none(),K.none())},function(t,n,e,o){return rc("absolute",r,t,n,e,o)},function(t,n,e,o){return rc("fixed",r,t,n,e,o)})}function uc(t,n){var e=H(Nr,n),t=t.fold(e,e,function(){var t=Br();return Nr(n).translate(-t.left,-t.top)}),e=Sr(n),o=hr(n);return Hr(t.left,t.top,e,o)}function ac(t,n,e){var o=vr(n,e);return t.fold(q(o),q(o),function(){var t=Br();return o.translate(-t.left,-t.top)})}function cc(t){return er(t,Ps)}function sc(t,n,e,o){var r,i,u,a=t.bubble,c=a.offset,s=za(o,t.restriction,c),l=t.x+c.left,c=t.y+c.top,l=Hr(l,c,n,e),f=(n=l,r=(e=s).x,u=e.y,d=e.right,e=e.bottom,m=l.x,p=l.y,g=l.right,i=l.bottom,f=l.width,n=l.height,{originInBounds:r<=m&&m<=d&&(u<=p&&p<=e),sizeInBounds:g<=d&&r<=g&&(i<=e&&u<=i),visibleW:Math.min(f,r<=m?d-m:g-r),visibleH:Math.min(n,u<=p?e-p:i-u)}),d=f.visibleW,m=f.visibleH,g=f.originInBounds&&f.sizeInBounds,p=g?l:(r=l,e=(n=s).x,p=n.y,i=n.right,n=n.bottom,u=r.x,f=r.y,l=r.width,r=r.height,s=Math.max(e,i-l),h=Math.max(p,n-r),u=cs(u,e,s),e=cs(f,p,h),s=Math.min(u+l,i)-u,f=Math.min(e+r,n)-e,Hr(u,e,s,f)),h=0<p.width&&0<p.height,e=(l=t.direction,i=o,n=q((r=p).bottom-i.y),u=q(i.bottom-r.y),n=l.fold(u,u,n,n,u,n,u,u),u=q(r.right-i.x),i=q(i.right-r.x),{maxWidth:l.fold(i,u,i,u,i,i,i,u),maxHeight:n}),s={rect:p,maxHeight:e.maxHeight,maxWidth:e.maxWidth,direction:t.direction,placement:t.placement,classes:{on:a.classesOn,off:a.classesOff},layout:t.label,testY:c};return g||t.alwaysFit?Vs.fit(s):Vs.nofit(s,d,m,h)}function lc(n,t,e,o,s,l){function r(t,r,i,u,a){var t=t(e,o,s,n,l),c=sc(t,f,d,l);return c.fold(q(c),function(t,n,e,o){return(a===o?u<e||i<n:!a&&o)?c:Vs.nofit(r,i,u,a)})}var f=o.width,d=o.height;return ve(t,function(t,n){n=H(r,n);return t.fold(q(t),n)},Vs.nofit({rect:e,maxHeight:o.height,maxWidth:o.width,direction:Zc(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:e.y},-1,-1,!1)).fold(v,v)}function fc(){return Hs(function(t){return t.destroy()})}function dc(t,n){return e=t,t=n.classes,ke(t,function(t){return ha(e,t)});var e}function mc(o,t){function r(t){return parseFloat(t).toFixed(3)}return ht(t,function(t,n){var e,n=o[n].map(r),t=t.map(r);return!je(n=n,t=t,e=void 0===e?V:e).getOr(n.isNone()&&t.isNone())}).isSome()}function gc(n){function t(t){return t=cr(n,t),t=d(t)?t.split(/\s*,\s*/):[],pe(t,yt)}function o(t){var n;return d(t)&&/^[\d.]+/.test(t)?(n=parseFloat(t),Xe(t,"ms")?n:1e3*n):0}var r=t("transition-delay"),e=t("transition-duration");return ve(e,function(t,n,e){e=o(r[e])+o(n);return Math.max(t,e)},0)}function pc(e,n){function t(t){(F(t)||c(t))&&(u.clear(),a.clear(),t=null==t?void 0:t.raw.type,!F(t)&&t!==nu()||(clearTimeout(r),rr(e,qs),ba(e,n.classes)))}function o(){u.set(Ws(e,nu(),t)),a.set(Ws(e,tu(),t))}var r,i,u=Ls(),a=Ls(),c=function(t){var n=null!=(n=t.raw.pseudoElement)?n:"";return Io(t.target,e)&&!yt(n)&&de(Ys,t.raw.propertyName)},s=("ontransitionstart"in e.dom?i=Ws(e,eu(),function(t){c(t)&&(i.unbind(),o())}):o(),gc(e));requestAnimationFrame(function(){r=setTimeout(t,s+17),_(e,qs,r)})}function hc(t,n,e,o,r,i){var u,a,c,s,l;u=o,a=r,(i=i.exists(function(t){var n=u.mode;return"all"===n||t[n]!==a[n]}))||dc(t,o)?(A(t,"position",e.position),c=uc(n,t),s=ic(n,D(D({},r),{rect:c})),n=_e(Ys,function(t){return s[t]}),mc(e,n)&&(Rt(t,n),i&&(va(l=t,(r=o).classes),er(l,qs).each(function(t){clearTimeout(parseInt(t,10)),rr(l,qs)}),pc(l,r)),mr(t))):ba(t,o.classes)}function vc(t,n){n=Math.floor(n),n=gr.max(t,n,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),A(t,"max-height",n+"px")}function bc(t,n,e){return void 0===t[n]?e:t[n]}function yc(){return Ci("layouts",[i("onLtr"),i("onRtl"),bn("onBottomLtr"),bn("onBottomRtl")])}function xc(t){return t.fold(v,function(t,n,e){return t.translate(-n,-e)})}function wc(t){return t.fold(v,v)}function Sc(t){return ve(t,function(t,n){return t.translate(n.left,n.top)},vr(0,0))}function kc(t,n,e){var o=Vo(t.element),o=Br(o),t=yl(t,n,e).getOr(o);return bl(t,o.left,o.top)}function Cc(t,n,e,o){return t=vl(vr(t,n)),K.some(Pr(t,e,o))}function Oc(t,r,i,u,a){return t.map(function(t){var n=[r,t.point],e=Fs(u,function(){return hl(n)},function(){return hl(n)},function(){return pl(n)}),e=Vr(e.left,e.top,t.width,t.height),t=(i.showAbove?ys:ws)(),o=(i.showAbove?xs:Ss)(),t=dl(a,i,t,o,t,o,K.none());return al({anchorBox:e,bubble:i.bubble.getOr(ul()),overrides:i.overrides,layouts:t,placer:K.none()})})}function _c(t,n,e){var o,r,t=t.document.createRange();return o=t,n.fold(function(t){o.setStartBefore(t.dom)},function(t,n){o.setStart(t.dom,n)},function(t){o.setStartAfter(t.dom)}),r=t,e.fold(function(t){r.setEndBefore(t.dom)},function(t,n){r.setEnd(t.dom,n)},function(t){r.setEndAfter(t.dom)}),t}function Tc(t,n,e,o,r){return(t=t.document.createRange()).setStart(n.dom,e),t.setEnd(o.dom,r),t}function Ec(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}function Dc(t,n,e){return n(w.fromDom(e.startContainer),e.startOffset,w.fromDom(e.endContainer),e.endOffset)}function Ac(t,n){r=t;var r,e,t=n.match({domRange:function(t){return{ltr:q(t),rtl:K.none}},relative:function(t,n){return{ltr:no(function(){return _c(r,t,n)}),rtl:no(function(){return K.some(_c(r,n,t))})}},exact:function(t,n,e,o){return{ltr:no(function(){return Tc(r,t,n,e,o)}),rtl:no(function(){return K.some(Tc(r,e,o,t,n))})}}});return(e=(n=t).ltr()).collapsed?n.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return Tl.rtl(w.fromDom(t.endContainer),t.endOffset,w.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return Dc(0,Tl.ltr,e)}):Dc(0,Tl.ltr,e)}var Bc,Mc,Fc,Ic,Rc=function(t,o){function r(t){for(var n=0;n<t.childNodes.length;n++){var e=w.fromDom(t.childNodes[n]);if(o(e))return K.some(e);e=r(t.childNodes[n]);if(e.isSome())return e}return K.none()}return r(t.dom)},Nc=function(t,n,e){return Aa(t,n,e).isSome()},Pc=function(t,n,e){return Da(t,function(t){return Bo(t,n)},e)},Vc=function(t,n){return e=function(t){return Bo(t,n)},ye(t.dom.childNodes,function(t){return e(w.fromDom(t))}).map(w.fromDom);var e},Hc=function(t,n){return Fo(n,t)},Lc=function(t,n,e){return Ea(function(t,n){return Bo(t,n)},Pc,t,n,e)},zc=function(){var n=E("aria-owns");return{id:n,link:function(t){_(t,"aria-owns",n)},unlink:function(t){rr(t,"aria-owns")}}},Uc=function(n,t){return Aa(t,function(t){return!!$e(t)&&void 0!==(t=nr(t,"id"))&&-1<t.indexOf("aria-owns")}).bind(function(t){var n=nr(t,"id"),t=Yo(t);return Hc(t,'[aria-owns="'+n+'"]')}).exists(function(t){return jc(n,t)})},jc=function(n,t){return Nc(t,function(t){return Io(t,n.element)},U)||Uc(n,t)},Wc="unknown",Gc=((Gu=Bc=Bc||{})[Gu.STOP=0]="STOP",Gu[Gu.NORMAL=1]="NORMAL",Gu[Gu.LOGGING=2]="LOGGING",T({})),Xc=["alloy/data/Fields","alloy/debugging/Debugging"],Yc=function(){var t=new Error;return void 0!==t.stack?(t=t.stack.split("\n"),ye(t,function(n){return 0<n.indexOf("alloy")&&!me(Xc,function(t){return-1<n.indexOf(t)})}).getOr(Wc)):Wc},qc=q({logEventCut:Y,logEventStopped:Y,logNoParent:Y,logEventNoHandlers:Y,logEventResponse:Y,write:Y}),Kc=q([i("menu"),i("selectedMenu")]),Jc=q([i("item"),i("selectedItem")]),qu=(q(g(Jc().concat(Kc()))),q(g(Jc()))),Gu=pn("initSize",[i("numColumns"),i("numRows")]),$c=function(t,n){return wi(t,q(n))},Gu=q(Gu),Qc=Ti([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Zc=Qc.southeast,ts=Qc.southwest,ns=Qc.northeast,es=Qc.northwest,os=Qc.south,rs=Qc.north,is=Qc.east,us=Qc.west,as=function(t,n,e,o){t+=n;return o<t?e:t<e?o:t},cs=function(t,n,e){return Math.min(Math.max(t,n),e)},ss=function(t,n){switch(n){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ls="layout",fs=function(t,n,e){return Ha(t.x,Ga(t),e.southeast(),Zc(),"southeast",La(t,{left:1,top:3}),ls)},ds=function(t,n,e){return Ha(ja(t,n),Ga(t),e.southwest(),ts(),"southwest",La(t,{right:0,top:3}),ls)},ms=function(t,n,e){return Ha(t.x,Wa(t,n),e.northeast(),ns(),"northeast",La(t,{left:1,bottom:2}),ls)},gs=function(t,n,e){return Ha(ja(t,n),Wa(t,n),e.northwest(),es(),"northwest",La(t,{right:0,bottom:2}),ls)},ps=function(t,n,e){return Ha(Ua(t,n),Wa(t,n),e.north(),rs(),"north",La(t,{bottom:2}),ls)},hs=function(t,n,e){return Ha(Ua(t,n),Ga(t),e.south(),os(),"south",La(t,{top:3}),ls)},vs=function(t,n,e){return Ha(t.x+t.width,Xa(t,n),e.east(),is(),"east",La(t,{left:0}),ls)},bs=function(t,n,e){return Ha(t.x-n.width,Xa(t,n),e.west(),us(),"west",La(t,{right:1}),ls)},ys=function(){return[ms,gs,fs,ds,ps,hs]},xs=function(){return[gs,ms,ds,fs,ps,hs]},ws=function(){return[fs,ds,ms,gs,hs,ps]},Ss=function(){return[ds,fs,gs,ms,hs,ps]},Qc=Object.freeze({__proto__:null,events:function(u){return Mu([Q(au(),function(o,t){var n,r=u.channels,e=Be(r),i=t,e=(t=e,(n=i).universal?t:pe(t,function(t){return de(n.channels,t)}));x(e,function(t){var n=r[t],e=n.schema,t=bi("channel["+t+"] data\nReceiver: "+Wu(o.element),e,i.data);n.onReceive(o,t)})})])}}),ks=[Si("channels",ln(B.value,ii([Na("onReceive"),s("schema",ci())])))],Cs=function(e,t,o,n,r,i,u){function a(t){return Le(t,o)?t[o]():K.none()}var r=Ie(r,function(t,n){return Ja(o,t,n)}),i=Ie(i,Wn),c=D(D(D({},i),r),{revoke:H($a,o),config:function(t){var n=bi(o+"-config",e,t);return{key:o,value:{config:n,me:c,configAsRaw:no(function(){return bi(o+"-config",e,t)}),initialConfig:t,state:u}}},schema:q(t),exhibit:function(t,e){return je(a(t),O(n,"exhibit"),function(t,n){return n(e,t.config,t.state)}).getOrThunk(function(){return qn({})})},name:q(o),handlers:function(t){return a(t).map(function(t){return O(n,"events").getOr(function(){return{}})(t.config,t.state)}).getOr({})}});return c},Z=function(t){return Bi(t)},Os=ii([i("fields"),i("name"),s("active",{}),s("apis",{}),s("state",ra),s("extra",{})]),_s=ii([i("branchKey"),i("branches"),i("name"),s("active",{}),s("apis",{}),s("state",ra),s("extra",{})]),Ts=q(void 0),Es=Qa({fields:ks,name:"receiving",active:Qc}),ks=Object.freeze({__proto__:null,exhibit:function(t,n){return qn({classes:[],styles:n.useFixed()?{}:{position:"relative"}})}}),Ds=function(){return w.fromDom(document)},As=function(t){return t.dom.focus()},Bs=function(t){return void 0===t&&(t=Ds()),K.from(t.dom.activeElement).map(w.fromDom)},Ms=function(n){return Bs(Yo(n)).filter(function(t){return n.dom.contains(t.dom)})},Qc=Ti([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Fs=function(t,n,e,o){return t.fold(n,e,o)},Is=(Qc.none,Qc.relative),Rs=Qc.fixed,Ns=function(t,n){return{anchorBox:t,origin:n}},Ps="data-alloy-placement",Vs=Ti([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Hs=function(t){function n(){e.get().each(t)}var e=T(K.none());return{clear:function(){n(),e.set(K.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(t){n(),e.set(K.some(t))}}},Ls=function(){return Hs(function(t){return t.unbind()})},zs=function(){var n=fc();return D(D({},n),{run:function(t){return n.get().each(t)}})},Us=function(){var n=Hs(Y);return D(D({},n),{on:function(t){return n.get().each(t)}})},js=j,Ws=function(t,n,e){return kr(t,n,js,e)},Gs=function(t,n,e){return zt(t,n,js,e,!0)},Xs=Lt,Ys=["top","bottom","right","left"],qs="data-alloy-transition-timer",Ks=function(t,n,e,o){dr(n,"max-height"),dr(n,"max-width");var r={width:Sr(r=n),height:hr(r)};return lc(n,o.preference,t,r,e,o.bounds)},Js=function(t,n){n=n.classes;ba(t,n.off),va(t,n.on)},$s=function(t,n,e){(0,e.maxHeightFunction)(t,n.maxHeight)},Qs=function(t,n,e){(0,e.maxWidthFunction)(t,n.maxWidth)},Zs=function(n,e,o){var r=ic(o.origin,e);o.transition.each(function(t){hc(n,o.origin,r,t,e,o.lastPlacement)}),oc(n,r)},tl=function(t,n){n=n.placement,_(t,Ps,n)},nl=q(function(t,n){vc(t,n),ar(t,{"overflow-x":"hidden","overflow-y":"auto"})}),el=q(function(t,n){vc(t,n)}),ol=function(t,n,e,o,r,i,u,a){var c,s=bc(u,"maxHeightFunction",nl()),u=bc(u,"maxWidthFunction",Y),l=t.anchorBox,t=t.origin,i={bounds:(c=t,i.fold(function(){return c.fold(Ur,Ur,Hr)},function(e){return c.fold(e,e,function(){var t=e(),n=ac(c,t.x,t.y);return Hr(n.left,n.top,t.width,t.height)})})),origin:t,preference:o,maxHeightFunction:s,maxWidthFunction:u,lastPlacement:r,transition:a};return s=Ks(l,t=n,e,o=i),Zs(t,s,o),tl(t,s),Js(t,s),$s(t,s,o),Qs(t,s,o),{layout:s.layout,placement:s.placement}},rl=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],il=function(t,n,e,o){function r(t){return O(e,t).getOr([])}function i(t,n,e){var o=Oe(rl,e);return{offset:vr(t,n),classesOn:Se(e,r),classesOff:Se(o,r)}}var u=t*(o=void 0===o?1:o),a=n*o;return{southeast:function(){return i(-t,n,["top","alignLeft"])},southwest:function(){return i(t,n,["top","alignRight"])},south:function(){return i(-t/2,n,["top","alignCentre"])},northeast:function(){return i(-t,-n,["bottom","alignLeft"])},northwest:function(){return i(t,-n,["bottom","alignRight"])},north:function(){return i(-t/2,-n,["bottom","alignCentre"])},east:function(){return i(t,-n/2,["valignCentre","left"])},west:function(){return i(-t,-n/2,["valignCentre","right"])},insetNortheast:function(){return i(u,a,["top","alignLeft","inset"])},insetNorthwest:function(){return i(-u,a,["top","alignRight","inset"])},insetNorth:function(){return i(-u/2,a,["top","alignCentre","inset"])},insetSoutheast:function(){return i(u,-a,["bottom","alignLeft","inset"])},insetSouthwest:function(){return i(-u,-a,["bottom","alignRight","inset"])},insetSouth:function(){return i(-u/2,-a,["bottom","alignCentre","inset"])},insetEast:function(){return i(-u,-a/2,["valignCentre","right","inset"])},insetWest:function(){return i(u,-a/2,["valignCentre","left","inset"])}}},ul=function(){return il(0,0,{})},al=v,cl=function(n,e){return function(t){return"rtl"===sl(t)?e:n}},sl=function(t){return"rtl"===cr(t,"direction")?"rtl":"ltr"},ll=((Qc=Mc=Mc||{}).TopToBottom="toptobottom",Qc.BottomToTop="bottomtotop","data-alloy-vertical-dir"),fl=function(t){return Nc(t,function(t){return $e(t)&&nr(t,"data-alloy-vertical-dir")===Mc.BottomToTop})},dl=function(n,t,e,o,r,i,u){var u=u.map(fl).getOr(!1),a=t.layouts.map(function(t){return t.onLtr(n)}),c=t.layouts.map(function(t){return t.onRtl(n)}),r=u?t.layouts.bind(function(t){return t.onBottomLtr.map(function(t){return t(n)})}).or(a).getOr(r):a.getOr(e),a=u?t.layouts.bind(function(t){return t.onBottomRtl.map(function(t){return t(n)})}).or(c).getOr(i):c.getOr(o);return cl(r,a)(n)},Qc=[i("hotspot"),bn("bubble"),s("overrides",{}),yc(),$c("placement",function(t,n,e){var o=n.hotspot,e=uc(e,o.element),o=dl(t.element,n,ws(),Ss(),ys(),xs(),K.some(n.hotspot.element));return K.some(al({anchorBox:e,bubble:n.bubble.getOr(ul()),overrides:n.overrides,layouts:o,placer:K.none()}))})],ml=[i("x"),i("y"),s("height",0),s("width",0),s("bubble",ul()),s("overrides",{}),yc(),$c("placement",function(t,n,e){e=ac(e,n.x,n.y),e=Hr(e.left,e.top,n.width,n.height),t=dl(t.element,n,Ya(),qa(),Ya(),qa(),K.none());return K.some(al({anchorBox:e,bubble:n.bubble,overrides:n.overrides,layouts:t,placer:K.none()}))})],gl=Ti([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),pl=function(t){t=C(t,xc);return Sc(t)},hl=function(t){t=C(t,wc);return Sc(t)},vl=gl.screen,bl=gl.absolute,yl=function(e,t,n){n=Et(n.root).dom;return K.from(n.frameElement).map(w.fromDom).filter(function(t){var t=Vo(t),n=Vo(e.element);return Io(t,n)}).map(yr)},gl=[i("node"),i("root"),bn("bubble"),yc(),s("overrides",{}),s("showAbove",!1),$c("placement",function(e,o,r){var i=kc(e,r,o);return o.node.filter($o).bind(function(t){var t=t.dom.getBoundingClientRect(),t=Cc(t.left,t.top,t.width,t.height),n=o.node.getOr(e.element);return Oc(t,i,o,r,n)})})],xl=function(t,n,e,o){return{start:t,soffset:n,finish:e,foffset:o}},wl=Ti([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Sl={before:wl.before,on:wl.on,after:wl.after,cata:function(t,n,e,o){return t.fold(n,e,o)},getStart:function(t){return t.fold(v,v,v)}},kl=Ti([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Cl={domRange:kl.domRange,relative:kl.relative,exact:kl.exact,exactFromRange:function(t){return kl.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){t=t.match({domRange:function(t){return w.fromDom(t.startContainer)},relative:function(t,n){return Sl.getStart(t)},exact:function(t,n,e,o){return t}});return Et(t)},range:xl},Ol=function(t){var n=t.getClientRects(),n=0<n.length?n[0]:t.getBoundingClientRect();return 0<n.width||0<n.height?K.some(n).map(Ec):K.none()},_l=function(t){t=t.getBoundingClientRect();return 0<t.width||0<t.height?K.some(t).map(Ec):K.none()},Tl=Ti([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),El=function(i,t){return Ac(i,t).match({ltr:function(t,n,e,o){var r=i.document.createRange();return r.setStart(t.dom,n),r.setEnd(e.dom,o),r},rtl:function(t,n,e,o){var r=i.document.createRange();return r.setStart(e.dom,o),r.setEnd(t.dom,n),r}})},Dl=(Tl.ltr,Tl.rtl,Fc=Qe,Ic="text",{get:function(t){if(Fc(t))return Al(t).getOr("");throw new Error("Can only get "+Ic+" value of a "+Ic+" node")},getOption:Al,set:function(t,n){if(!Fc(t))throw new Error("Can only set raw "+Ic+" value of a "+Ic+" node");t.dom.nodeValue=n}});function Al(t){return Fc(t)?K.from(t.dom.nodeValue):K.none()}function Bl(t){return Dl.getOption(t)}function Ml(t){return Bl(t).filter(function(t){return 0!==t.trim().length||-1<t.indexOf("")}).isSome()||de(um,Je(t))}function Fl(t,n,e,o){c=n,r=e,i=o,(u=Vo(a=t).dom.createRange()).setStart(a.dom,c),u.setEnd(r.dom,i);var r,i,u,a=u,c=Io(t,e)&&n===o;return a.collapsed&&!c}function Il(t){var n;return 0<t.rangeCount?(n=t.getRangeAt(0),t=t.getRangeAt(t.rangeCount-1),K.some(xl(w.fromDom(n.startContainer),n.startOffset,w.fromDom(t.endContainer),t.endOffset))):K.none()}function Rl(t){var n,e;return null!==t.anchorNode&&null!==t.focusNode&&(n=w.fromDom(t.anchorNode),e=w.fromDom(t.focusNode),Fl(n,t.anchorOffset,e,t.focusOffset))?K.some(xl(n,t.anchorOffset,e,t.focusOffset)):Il(t)}function Nl(t,n){return t=El(t,n),Ol(t)}function Pl(t,n){return{element:t,offset:n}}function Vl(t,n){var e=Uo(t);return 0===e.length?Pl(t,n):n<e.length?Pl(e[n],0):(t=e[e.length-1],n=(Qe(t)?Dl.get(t):Uo(t)).length,Pl(t,n))}function Hl(t,n){return n.getSelection.getOrThunk(function(){return function(){return sm(t)}})().map(function(t){var n=lm(t.start,t.soffset),t=lm(t.finish,t.foffset);return Cl.range(n.element,n.offset,t.element,t.offset)})}function Ll(t){return t.x+t.width}function zl(t,n){return t.x-n.width}function Ul(t,n){return t.y-n.height+t.height}function jl(){return[dm,mm,gm,pm]}function Wl(){return[mm,dm,pm,gm]}function Gl(t,n,e,o,r,i,u){return n=Ns(e.anchorBox,n),ol(n,r.element,e.bubble,e.layouts,i,o,e.overrides,u)}function Xl(t,n,e,o,r,i){return i=i.map(Lr),bm(t,n,e,o,r,i)}function Yl(n,t){var e=n.components(),e=(km(n),Oe(e,t));x(e,function(t){xm(t),n.getSystem().removeFromWorld(t)}),x(t,function(t){t.getSystem().isConnected()?Sm(n,t):(n.getSystem().addToWorld(t),Sm(n,t),$o(n.element)&&wm(t)),n.syncComponents()})}function ql(n){var t=zo(n.element).bind(function(t){return n.getSystem().getByDom(t).toOptional()});_m(n),t.each(function(t){t.syncComponents()})}function Kl(t,n){Em(t,n,_r)}function Jl(n){var t=Uo(n.element);x(t,function(t){n.getByDom(t).each(xm)}),Ar(n.element)}function $l(n,t,e,o){return e.get().each(function(t){Tm(n)}),t=t.getAttachPoint(n),Cm(t,n),t=n.getSystem().build(o),Cm(n,t),e.set(t),t}function Ql(t,n,e,o){return e=$l(t,n,e,o),n.onOpen(t,e),e}function Zl(n,e,o){o.get().each(function(t){Tm(n),ql(n),e.onClose(n,t),o.clear()})}function tf(t,n,e){return e.isOpen()}function nf(t,n,e){var o,r,i=n.getAttachPoint(t);A(t.element,"position",ym.getMode(i)),o=t,i="visibility",r=n.cloakVisibilityAttr,t="hidden",lr(o.element,i).fold(function(){rr(o.element,r)},function(t){_(o.element,r,t)}),A(o.element,i,t)}function ef(t,n,e){var o,r,i;o=t.element,me(["top","left","right","bottom"],function(t){return lr(o,t).isSome()})||dr(t.element,"position"),r=t,i="visibility",t=n.cloakVisibilityAttr,er(r.element,t).fold(function(){return dr(r.element,i)},function(t){return A(r.element,i,t)})}function of(t,n,e){n.store.manager.onLoad(t,n,e)}function rf(t,n,e){n.store.manager.onUnload(t,n,e)}function uf(){var t=T(null);return ia({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function af(){var i=T({}),u=T({});return ia({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:u.get()}},lookup:function(t){return O(i.get(),t).orThunk(function(){return O(u.get(),t)})},update:function(t){var n=i.get(),e=u.get(),o={},r={};x(t,function(n){o[n.value]=n,O(n,"meta").each(function(t){O(t,"text").each(function(t){r[t]=n})})}),i.set(D(D({},n),o)),u.set(D(D({},e),r))},clear:function(){i.set({}),u.set({})}})}function cf(t,n,e,o){var r=n.store;e.update([o]),r.setValue(t,o),n.onSetValue(t,o)}function sf(o,t){return Dn(o,{},C(t,function(t){return n=t.name(),e="Cannot configure "+t.name()+" for "+o,xi(n,n,$r(),oi(function(t){return jr.serror("The field: "+n+" is forbidden. "+e)}));var n,e}).concat([wi("dump",v)]))}function lf(t){return He(t,"uiType")}function ff(t,n,e,o){return lf(e)&&e.uiType===Hm?(i=e,u=o,(r=t).exists(function(t){return t!==i.owner})?Lm.single(!0,q(i)):O(u,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+Be(u)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+JSON.stringify(i,null,2))},function(t){return t.replace()})):Lm.single(!1,q(e));var r,i,u}function df(o,r,i,u){return ff(o,0,i,u).fold(function(t,n){var n=lf(i)?n(r,i.config,i.validated):n(r),e=O(n,"components").getOr([]),e=Se(e,function(t){return df(o,r,t,u)});return[D(D({},n),{components:e})]},function(t,n){var e;return lf(i)?(e=n(r,i.config,i.validated),i.validated.preprocess.getOr(v)(e)):n(r)})}function mf(t){return t.fold(K.some,K.none,K.some,K.some)}function gf(t){function n(t){return t.name}return t.fold(n,n,n,n)}function pf(n,e){return function(t){t=bi("Converting part type",e,t);return n(t)}}function hf(r,t){var i={};return x(t,function(t){mf(t).each(function(e){t=r,n=e.pname;var t,n,o={uiType:Gm(),owner:t,name:n};i[e.name]=function(t){var n=bi("Part: "+e.name+" in "+r,g(e.schema),t);return D(D({},o),{config:t,validated:n})}})}),i}function vf(t,n,e){return{uiType:Gm(),owner:t,name:n,config:e,validated:{}}}function bf(t){return C(t,gf)}function yf(t,n,e){return og(t,n,e).getOrDie("Could not find part: "+e)}function xf(t,n,e){var o={},r=n.partUids,i=t.getSystem();return x(e,function(t){o[t]=q(i.getByUid(r[t]))}),o}function wf(t,n,e){var o={},r=n.partUids,i=t.getSystem();return x(e,function(t){o[t]=q(i.getByUid(r[t]).getOrDie())}),o}function Sf(n,t){return t=bf(t),Bi(C(t,function(t){return{key:t,value:n+"-"+t}}))}function kf(t,n,e,o,r){var r=cg(r),i=tg(e),u=ug(e),n=ag(t,n,r,i,[u]),i=ng(t,n,e);return o(n,eg(t,n,i.internals()),r,i.externals())}function Cf(t){var n=bi("Sketcher for "+t.name,fg,t),t=hf(n.name,n.partFields),e=Ie(n.apis,Xn),o=Ie(n.extraApis,Wn);return D(D({name:n.name,partFields:n.partFields,configFields:n.configFields,sketch:function(t){return kf(n.name,n.configFields,n.partFields,n.factory,t)},parts:t},e),o)}function Of(t){return"input"===Je(t)&&"radio"!==nr(t,"type")||"textarea"===Je(t)}function _f(t,n,e){(n.disabled()?Mf:Ff)(t,n)}function Tf(t,n){return!0===n.useNative&&de(mg,Je(t.element))}function Ef(t){_(t.element,"disabled","disabled")}function Df(t){rr(t.element,"disabled")}function Af(t){_(t.element,"aria-disabled","true")}function Bf(t){_(t.element,"aria-disabled","false")}function Mf(n,t,e){t.disableClass.each(function(t){ma(n.element,t)}),(Tf(n,t)?Ef:Af)(n),t.onDisabled(n)}function Ff(n,t,e){t.disableClass.each(function(t){pa(n.element,t)}),(Tf(n,t)?Df:Bf)(n),t.onEnabled(n)}function If(t,n){return Tf(t,n)?or(t.element,"disabled"):"true"===nr(t.element,"aria-disabled")}function Rf(e,o,t,r){var n=cm(e.element,"."+o.highlightClass);x(n,function(n){me(r,function(t){return t.element===n})||(pa(n,o.highlightClass),e.getSystem().getByDom(n).each(function(t){o.onDehighlight(e,t),J(t,Tu())}))})}function Nf(t,n,e,o){Rf(t,n,0,[o]),Pf(0,n,0,o)||(ma(o.element,n.highlightClass),n.onHighlight(t,o),J(o,_u()))}function Pf(t,n,e,o){return ha(o.element,n.highlightClass)}function Vf(n,t,e){return Hc(n.element,"."+t.itemClass).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}function Hf(n,t,e){return(0<(t=cm(n.element,"."+t.itemClass)).length?K.some(t[t.length-1]):K.none()).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}function Lf(n,e,t,o){var r=cm(n.element,"."+e.itemClass);return xe(r,function(t){return ha(t,e.highlightClass)}).bind(function(t){t=as(t,o,0,r.length-1);return n.getSystem().getByDom(r[t]).toOptional()})}function zf(n,t,e){return t=cm(n.element,"."+t.itemClass),Ue(C(t,function(t){return n.getSystem().getByDom(t).toOptional()}))}function Uf(t,n,e){var o=Ce(t.slice(0,n)),t=Ce(t.slice(n+1));return ye(o.concat(t),e)}function jf(t,n,e){return t=Ce(t.slice(0,n)),ye(t,e)}function Wf(t,n,e){var o=t.slice(0,n),t=t.slice(n+1);return ye(t.concat(o),e)}function Gf(t,n,e){return t=t.slice(n+1),ye(t,e)}function Xf(t){return function(n){return ke(t,function(t){return t(n)})}}function Yf(t){return!0===t.raw.shiftKey}function qf(t){return!0===t.raw.ctrlKey}function c(t,n){return{matches:t,classification:n}}function Kf(t,n,e,o,a){function c(n,e,t,o,r){return t=t(n,e,o,r),Og(t,e.event).bind(function(t){return t(n,e,o,r)})}var r={schema:function(){return t.concat([s("focusManager",Tg()),_i("focusInside","onFocus",gi(function(t){return de(["onFocus","onEnterOrSpace","onApi"],t)?B.value(t):B.error("Invalid value for focusInside")})),$c("handler",r),$c("state",n),$c("sendFocusIn",a)])},processKey:c,toEvents:function(i,u){var t=i.focusInside!==om.OnFocusMode?K.none():a(i).map(function(e){return Q(ru(),function(t,n){e(t,i,u),n.stop()})}),n=[Q(Ki(),function(o,r){c(o,r,e,i,u).fold(function(){var n,e,t;n=o,e=r,t=f(yg.concat(vg))(e.event),i.focusInside===om.OnEnterOrSpaceMode&&t&&Ii(n,e)&&a(i).each(function(t){t(n,i,u),e.stop()})},function(t){r.stop()})}),Q(Ji(),function(t,n){c(t,n,o,i,u).each(function(t){n.stop()})})];return Mu(t.toArray().concat(n))}};return r}function Jf(t){function n(n,e,t){!function(t,n){t=cm(t.element,n.selector),t=pe(t,function(t){return i(n,t)});return K.from(t[n.firstTabstop])}(n,e).each(function(t){e.focusManager.set(n,t)})}function r(n,t,e,o){var r=cm(n.element,e.selector);return u(n,e).bind(function(t){return xe(r,H(Io,t)).bind(function(t){return a(n,r,t,e,o)})})}var t=[bn("onEscape"),bn("onEnter"),s("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),s("firstTabstop",0),s("useTabstopAt",j),bn("visibilitySelector")].concat([t]),i=function(t,n){t=t.visibilitySelector.bind(function(t){return Lc(n,t)}).getOr(n);return 0<pr(t)},u=function(t,n){return n.focusManager.get(t).bind(function(t){return Lc(t,n.selector)})},a=function(n,t,e,o,r){return r(t,e,function(t){return i(n=o,t=t)&&n.useTabstopAt(t);var n}).fold(function(){return o.cyclic?K.some(!0):K.none()},function(t){return o.focusManager.set(n,t),K.some(!0)})},e=q([c(Xf([Yf,f(hg)]),function(t,n,e){var o=e.cyclic?Uf:jf;return r(t,0,e,o)}),c(f(hg),function(t,n,e){var o=e.cyclic?Wf:Gf;return r(t,0,e,o)}),c(f(bg),function(n,e,t){return t.onEscape.bind(function(t){return t(n,e)})}),c(Xf([Cg,f(vg)]),function(n,e,t){return t.onEnter.bind(function(t){return t(n,e)})})]),o=q([]);return Kf(t,ra.init,e,o,function(){return K.some(n)})}function $f(t,n,e){return Of(e)&&f(yg)(n.event)?K.none():(Du(t,e,cu()),K.some(!0))}function Qf(t,n){return K.some(!0)}function Zf(t,n,e){return e.execute(t,n,t.element)}function td(){var e=Us();return ia({readState:function(){return e.get().map(function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,n){e.set({numRows:t,numColumns:n})},getNumRows:function(){return e.get().map(function(t){return t.numRows})},getNumColumns:function(){return e.get().map(function(t){return t.numColumns})}})}function nd(i){return function(t,n,e,o){var r=i(t.element);return Dg(r,t,n,e,o)}}function ed(t,n){return t=cl(t,n),nd(t)}function od(t,n){return n=cl(n,t),nd(n)}function rd(r){return function(t,n,e,o){return Dg(r,t,n,e,o)}}function id(t,n){return xe(t,function(t){return Io(n,t)})}function ud(o,t,r,i,u){return Rg(o,t,i,function(t,n){var e=t===r-1?o.length-t*i:i,n=as(n,u,0,e-1);return K.some({row:t,column:n})})}function ad(o,t,r,i,u){return Rg(o,t,i,function(t,n){var t=as(t,u,0,r-1),e=t===r-1?o.length-t*i:i,n=cs(n,0,e-1);return K.some({row:t,column:n})})}function cd(n,e,t){Hc(n.element,e.selector).each(function(t){e.focusManager.set(n,t)})}function sd(r){return function(t,n,e,o){return Ig(t,n,e.selector).bind(function(t){return r(t.candidates,t.index,o.getNumRows().getOr(e.initSize.numRows),o.getNumColumns().getOr(e.initSize.numColumns))})}}function ld(t,n,e){return e.captureTab?K.some(!0):K.none()}function fd(n,e,t){e.getInitial(n).orThunk(function(){return Hc(n.element,e.selector)}).each(function(t){e.focusManager.set(n,t)})}function dd(t,n,e){return zg(t,e.selector,n,-1)}function md(t,n,e){return zg(t,e.selector,n,1)}function gd(r){return function(t,n,e,o){return r(t,n,e,o).bind(function(){return e.executeOnMove?jg(t,n,e):K.some(!0)})}}function pd(t,n,e){return e.onEscape(t,n)}function hd(t,n,e,o){var r=t[n].length,e=as(e,o,0,r-1);return Wg(t,n,e)}function vd(t,n,e,o){return e=as(e,o,0,t.length-1),o=t[e].length,n=cs(n,0,o-1),Wg(t,e,n)}function bd(t,n,e,o){var r=t[n].length,e=cs(e+o,0,r-1);return Wg(t,n,e)}function yd(t,n,e,o){return e=cs(e+o,0,t.length-1),o=t[e].length,n=cs(n,0,o-1),Wg(t,e,n)}function xd(n,e,t){e.previousSelector(n).orThunk(function(){var t=e.selectors;return Hc(n.element,t.cell)}).each(function(t){e.focusManager.set(n,t)})}function wd(t,n){return function(e,o,i){var u=i.cycles?t:n;return Lc(o,i.selectors.row).bind(function(t){var n=cm(t,i.selectors.cell);return id(n,o).bind(function(o){var r=cm(e,i.selectors.row);return id(r,t).bind(function(t){n=i;var n,e=C(r,function(t){return cm(t,n.selectors.cell)});return u(e,t,o).map(function(t){return t.cell})})})})}}function Sd(n,e,o){return o.focusManager.get(n).bind(function(t){return o.execute(n,e,t)})}function kd(n,e,t){Hc(n.element,e.selector).each(function(t){e.focusManager.set(n,t)})}function Cd(t,n,e){return zg(t,e.selector,n,-1)}function Od(t,n,e){return zg(t,e.selector,n,1)}function _d(t,n,e,o){o=t.getSystem().build(o),Om(t,o,e)}function Td(t,n,e,o){t=Ed(t),ye(t,function(t){return Io(o.element,t.element)}).each(ql)}function Ed(t,n){return t.components()}function Dd(n,t,e,r,o){var i=Ed(n);return K.from(i[r]).map(function(t){return Td(n,0,0,t),o.each(function(t){_d(n,0,function(t,n){var e,o;o=n,jo(e=t,r).fold(function(){_r(e,o)},function(t){Cr(t,o)})},t)}),t})}function Ad(t,n){n.ignore||(As(t.element),n.onFocus(t))}function Bd(t,n,e){(n=n.aria).update(t,n,e.get())}function Md(n,t,e){t.toggleClass.each(function(t){(e.get()?ma:pa)(n.element,t)})}function Fd(t,n,e){Id(t,n,e,!e.get())}function Id(t,n,e,o){(o?qg:Kg)(t,n,e)}function Rd(t,n,e){Id(t,n,e,n.selected)}function Nd(t,n,e){_(t.element,"aria-expanded",e)}function Pd(t){return Mu(we([t.map(function(e){return Hu(function(t,n){e(t),n.stop()})}).toArray(),Jg()]))}function Vd(t){(Ms(t.element).isNone()||rt.isFocused(t))&&(rt.isFocused(t)||rt.focus(t),$(t,$g,{item:t}))}function Hd(t){$(t,Qg,{item:t})}function Ld(t){return"prepared"===t.type?K.some(t.menu):K.none()}function zd(t,n,r,e,i){function u(){return t.lazySink(n)}function a(t){return 2===t.length?o:{}}var o="horizontal"===e.type?{layouts:{onLtr:function(){return ws()},onRtl:function(){return Ss()}}}:{};return fp.sketch({dom:{tag:"div"},data:e.data,markers:e.menu.markers,highlightImmediately:e.menu.highlightImmediately,onEscape:function(){return l.close(n),t.onEscape.map(function(t){return t(n)}),K.some(!0)},onExecute:function(){return K.some(!0)},onOpenMenu:function(t,n){ym.positionWithinBounds(u().getOrDie(),n,r,i())},onOpenSubmenu:function(t,n,e,o){var r=u().getOrDie();ym.position(r,e,{anchor:D({type:"submenu",item:n},a(o))})},onRepositionMenu:function(t,n,e){var o=u().getOrDie();ym.positionWithinBounds(o,n,r,i()),x(e,function(t){var n=a(t.triggeringPath);ym.position(o,t.triggeredMenu,{anchor:D({type:"submenu",item:t.triggeringItem},n)})})}})}function Ud(t,n){return t.x+t.width/2-n.width/2}function jd(t,n){return t.x+t.width-n.width}function Wd(t,n){return t.y+t.height-n.height}function Gd(t,n){return t.y+t.height/2-n.height/2}function Xd(t,n,e){return Ha(jd(t,n),Wd(t,n),e.insetSouthwest(),es(),"southwest",La(t,{right:0,bottom:3}),mp)}function Yd(t,n,e){return Ha(t.x,Wd(t,n),e.insetSoutheast(),ns(),"southeast",La(t,{left:1,bottom:3}),mp)}function qd(t,n,e){return Ha(jd(t,n),t.y,e.insetNorthwest(),ts(),"northwest",La(t,{right:0,top:2}),mp)}function Kd(t,n,e){return Ha(t.x,t.y,e.insetNortheast(),Zc(),"northeast",La(t,{left:1,top:2}),mp)}function Jd(t,n,e){return Ha(jd(t,n),Gd(t,n),e.insetEast(),us(),"east",La(t,{right:0}),mp)}function $d(t,n,e){return Ha(t.x,Gd(t,n),e.insetWest(),is(),"west",La(t,{left:1}),mp)}function Qd(t){switch(t){case"north":return gp;case"northeast":return Kd;case"northwest":return qd;case"south":return pp;case"southeast":return Yd;case"southwest":return Xd;case"east":return Jd;case"west":return $d}}function Zd(t,n,e,o,r){return cc(o).map(Qd).getOr(gp)(t,n,e,o,r)}function tm(t){switch(t){case"north":return pp;case"northeast":return Yd;case"northwest":return Xd;case"south":return gp;case"southeast":return Kd;case"southwest":return qd;case"east":return $d;case"west":return Jd}}function nm(t,n,e,o,r){return cc(o).map(tm).getOr(gp)(t,n,e,o,r)}function em(t){var t=w.fromHtml(t),n=Uo(t),e=bp(t),o=yp(t),n=0===n.length?{}:{innerHtml:zu(t)};return D({tag:Je(t),classes:o,attributes:e},n)}var om,rm,im=function(t){return"img"===Je(t)?1:Bl(t).fold(function(){return Uo(t).length},function(t){return t.length})},um=["img","br"],am=function(t){return r=Ml,(i=function(t){for(var n=Uo(t),e=n.length-1;0<=e;e--){var o=n[e];if(r(o))return K.some(o);o=i(o);if(o.isSome())return o}return K.none()})(t);var r,i},cm=function(t,n){return Mo(n,t)},sm=function(t){return K.from(t.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(Rl)},lm=function(t,n){return(Qe(t)?Pl:Vl)(t,n)},wl=[bn("getSelection"),i("root"),bn("bubble"),yc(),s("overrides",{}),s("showAbove",!1),$c("placement",function(t,n,e){var o=Et(n.root).dom,r=kc(t,e,n),i=Hl(o,n).bind(function(e){return function(t,n){t=El(t,n);return _l(t)}(o,Cl.exactFromRange(e)).orThunk(function(){var t=w.fromText("\ufeff"),n=(Cr(e.start,t),Nl(o,Cl.exact(t,0,t,1)));return Ar(t),n}).bind(function(t){return Cc(t.left,t.top,t.width,t.height)})}),t=Hl(o,n).bind(function(t){return $e(t.start)?K.some(t.start):(t=t.start,zo(t))}).getOr(t.element);return Oc(i,r,n,e,t)})],fm="link-layout",dm=function(t,n,e){return Ha(Ll(t),t.y,e.southeast(),Zc(),"southeast",La(t,{left:0,top:2}),fm)},mm=function(t,n,e){return Ha(zl(t,n),t.y,e.southwest(),ts(),"southwest",La(t,{right:1,top:2}),fm)},gm=function(t,n,e){return Ha(Ll(t),Ul(t,n),e.northeast(),ns(),"northeast",La(t,{left:0,bottom:3}),fm)},pm=function(t,n,e){return Ha(zl(t,n),Ul(t,n),e.northwest(),es(),"northwest",La(t,{right:1,bottom:3}),fm)},hm=[i("item"),yc(),s("overrides",{}),$c("placement",function(t,n,e){e=uc(e,n.item.element),t=dl(t.element,n,jl(),Wl(),jl(),Wl(),K.none());return K.some(al({anchorBox:e,bubble:ul(),overrides:n.overrides,layouts:t,placer:K.none()}))})],wl=fn("type",{selection:wl,node:gl,hotspot:Qc,submenu:hm,makeshift:ml}),gl=[vn("classes",li),On("mode","all",["all","layout","placement"])],Qc=[s("useFixed",U),bn("getBounds")],vm=[Si("anchor",wl),Ci("transition",gl)],bm=function(i,u,a,c,t,s){var l=bi("placement.info",g(vm),t),f=l.anchor,d=c.element,m=a.get(c.uid);nc(function(){A(d,"position","fixed");var t,n=lr(d,"visibility"),e=(A(d,"visibility","hidden"),u.useFixed()?(t=document.documentElement,Rs(0,0,t.clientWidth,t.clientHeight)):(o=yr((t=i).element),t=t.element.dom.getBoundingClientRect(),Is(o.left,o.top,t.width,t.height))),o=f.placement,r=s.map(q).or(u.getBounds);o(i,f,e).each(function(t){t=t.placer.getOr(Gl)(i,e,t,r,c,m,l.transition);a.set(c.uid,t)}),n.fold(function(){dr(d,"visibility")},function(t){A(d,"visibility",t)}),lr(d,"left").isNone()&&lr(d,"top").isNone()&&lr(d,"right").isNone()&&lr(d,"bottom").isNone()&&ze(lr(d,"position"),"fixed")&&dr(d,"position")},d)},ym=Qa({fields:Qc,name:"positioning",active:ks,apis:Object.freeze({__proto__:null,position:function(t,n,e,o,r){Xl(t,n,e,o,r,K.none())},positionWithin:Xl,positionWithinBounds:bm,getMode:function(t,n,e){return n.useFixed()?"fixed":"absolute"},reset:function(t,n,e,o){var r=o.element;x(["position","left","right","top","bottom"],function(t){return dr(r,t)}),rr(r,Ps),e.clear(o.uid)}}),state:Object.freeze({__proto__:null,init:function(){var e={};return ia({readState:function(){return e},clear:function(t){I(t)?delete e[t]:e={}},set:function(t,n){e[t]=n},get:function(t){return O(e,t)}})}})}),xm=function(t){J(t,xu());t=t.components();x(t,xm)},wm=function(t){var n=t.components();x(n,wm),J(t,yu())},Sm=function(t,n){_r(t.element,n.element)},km=function(t){x(t.components(),function(t){return Ar(t.element)}),Dr(t.element),t.syncComponents()},Cm=function(t,n){Om(t,n,_r)},Om=function(t,n,e){t.getSystem().addToWorld(n),e(t.element,n.element),$o(t.element)&&wm(n),t.syncComponents()},_m=function(t){xm(t),Ar(t.element),t.getSystem().removeFromWorld(t)},Tm=function(t){var n=t.components();x(n,_m),Dr(t.element),t.syncComponents()},Em=function(t,n,e){e(t,n.element);e=Uo(n.element);x(e,function(t){n.getByDom(t).each(wm)})},hm=Object.freeze({__proto__:null,cloak:nf,decloak:ef,open:Ql,openWhileCloaked:function(t,n,e,o,r){nf(t,n),Ql(t,n,e,o),r(),ef(t,n)},close:Zl,isOpen:tf,isPartOf:function(n,e,t,o){return tf(0,0,t)&&t.get().exists(function(t){return e.isPartOf(n,t,o)})},getState:function(t,n,e){return e.get()},setContent:function(t,n,e,o){return e.get().map(function(){return $l(t,n,e,o)})}}),ml=Object.freeze({__proto__:null,events:function(e,o){return Mu([Q(du(),function(t,n){Zl(t,e,o)})])}}),wl=[t("onOpen"),t("onClose"),i("isPartOf"),i("getAttachPoint"),s("cloakVisibilityAttr","data-precloak-visibility")],l=Qa({fields:wl,name:"sandboxing",active:ml,apis:hm,state:Object.freeze({__proto__:null,init:function(){var t=Us(),n=q("not-implemented");return ia({readState:n,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}})}),Dm=q("dismiss.popups"),Am=q("reposition.popups"),Bm=q("mouse.released"),Mm=ii([s("isExtraPart",U),Ci("fireEventInstead",[s("event",wu())])]),Fm=function(t){var e=bi("Dismissal",Mm,t),t={};return t[Dm()]={schema:ii([i("target")]),onReceive:function(n,t){!l.isOpen(n)||l.isPartOf(n,t.target)||e.isExtraPart(n,t.target)||e.fireEventInstead.fold(function(){return l.close(n)},function(t){return J(n,t.event)})}},t},Im=ii([Ci("fireEventInstead",[s("event",Pi())]),gn("doReposition")]),Rm=function(t){var e=bi("Reposition",Im,t),t={};return t[Am()]={onReceive:function(n){l.isOpen(n)&&e.fireEventInstead.fold(function(){return e.doReposition(n)},function(t){return J(n,t.event)})}},t},gl=Object.freeze({__proto__:null,onLoad:of,onUnload:rf,setValue:function(t,n,e,o){n.store.manager.setValue(t,n,e,o)},getValue:function(t,n,e){return n.store.manager.getValue(t,n,e)},getState:function(t,n,e){return e}}),Qc=Object.freeze({__proto__:null,events:function(e,o){var t=e.resetOnDom?[Nu(function(t,n){of(t,e,o)}),Pu(function(t,n){rf(t,e,o)})]:[Ka(e,o,of)];return Mu(t)}}),ks=Object.freeze({__proto__:null,memory:uf,dataset:af,manual:function(){return ia({readState:Y})},init:function(t){return t.store.manager.state(t)}}),wl=[bn("initialValue"),i("getFallbackEntry"),i("getDataKey"),i("setValue"),$c("manager",{setValue:cf,getValue:function(t,n,e){var o=n.store,r=o.getDataKey(t);return e.lookup(r).getOrThunk(function(){return o.getFallbackEntry(r)})},onLoad:function(n,e,o){e.store.initialValue.each(function(t){cf(n,e,o,t)})},onUnload:function(t,n,e){e.clear()},state:af})],ml=[i("getValue"),s("setValue",Y),bn("initialValue"),$c("manager",{setValue:function(t,n,e,o){n.store.setValue(t,o),n.onSetValue(t,o)},getValue:function(t,n,e){return n.store.getValue(t)},onLoad:function(n,e,t){e.store.initialValue.each(function(t){e.store.setValue(n,t)})},onUnload:Y,state:ra.init})],hm=[bn("initialValue"),$c("manager",{setValue:function(t,n,e,o){e.set(o),n.onSetValue(t,o)},getValue:function(t,n,e){return e.get()},onLoad:function(t,n,e){n.store.initialValue.each(function(t){e.isNotSet()&&e.set(t)})},onUnload:function(t,n,e){e.clear()},state:uf})],hm=[_i("store",{mode:"memory"},fn("mode",{memory:hm,manual:ml,dataset:wl})),t("onSetValue"),s("resetOnDom",!1)],tt=Qa({fields:hm,name:"representing",active:Qc,apis:gl,extra:{setValueFrom:function(t,n){n=tt.getValue(n);tt.setValue(t,n)}},state:ks}),Nm=function(t){return t.dump},Pm=function(t,n){return D(D({},Z(n)),t.dump)},Vm={field:sf,augment:Pm,get:Nm},Hm="placeholder",Lm=Ti([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),zm=function(n,e,t,o){return Se(t,function(t){return df(n,e,t,o)})},Um=function(t,n){var e=!1;return{name:q(t),required:function(){return n.fold(function(t,n){return t},function(t,n){return t})},used:function(){return e},replace:function(){if(e)throw new Error("Trying to use the same placeholder more than once: "+t);return e=!0,n}}},jm=Lm.single,Wm=Lm.multiple,Gm=q(Hm),ml=Ti([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),wl=s("factory",{sketch:v}),hm=s("schema",[]),Qc=i("name"),gl=xi("pname","pname",Kr(function(t){return"<alloy."+E(t.name)+">"}),ci()),ks=wi("schema",function(){return[bn("preprocess")]}),Xm=s("defaults",q({})),Ym=s("overrides",q({})),qm=g([wl,hm,Qc,gl,Xm,Ym]),Km=g([wl,hm,Qc,Xm,Ym]),hm=g([wl,hm,Qc,gl,Xm,Ym]),wl=g([wl,ks,Qc,i("unit"),gl,Xm,Ym]),Jm=pf(ml.required,qm),ks=pf(ml.external,Km),$m=pf(ml.optional,hm),Qc=pf(ml.group,wl),Qm=q("entirety"),gl=Object.freeze({__proto__:null,required:Jm,external:ks,optional:$m,group:Qc,asNamedPart:mf,name:gf,asCommon:function(t){return t.fold(v,v,v,v)},original:Qm}),Zm=function(t,n,e,o){return Xr(n.defaults(t,e,o),e,{uid:t.partUids[n.name]},n.overrides(t,e,o))},tg=function(t){return Se(t,function(t){return t.fold(K.none,K.some,K.none,K.none).map(function(t){return pn(t.name,t.schema.concat([Va(Qm())]))}).toArray()})},ng=function(t,n,e){return o=n,i={},r={},x(e,function(t){t.fold(function(o){i[o.pname]=jm(!0,function(t,n,e){return o.factory.sketch(Zm(t,o,n,e))})},function(t){var n=o.parts[t.name];r[t.name]=q(t.factory.sketch(Zm(o,t,n[Qm()]),n))},function(o){i[o.pname]=jm(!1,function(t,n,e){return o.factory.sketch(Zm(t,o,n,e))})},function(r){i[r.pname]=Wm(!0,function(n,t,e){var o=n[r.name];return C(o,function(t){return r.factory.sketch(Xr(r.defaults(n,t,e),t,r.overrides(n,t)))})})})}),{internals:q(i),externals:q(r)};var o,i,r},eg=function(t,n,e){var o=K.some(t),r=n,t=n.components,n=e;return n=Ie(n,function(t,n){return Um(n,t)}),t=zm(o,r,t,n),Fe(n,function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+o.getOr("none")+"\nComponents: "+JSON.stringify(r.components,null,2))}),t},og=function(t,n,e){n=n.partUids[e];return t.getSystem().getByUid(n).toOptional()},rg=function(t,n){var e=t.getSystem();return Ie(n.partUids,function(t,n){return q(e.getByUid(t))})},ig=function(t){return Be(t.partUids)},ug=function(n){return xi("partUids","partUids",Zt(function(t){return Sf(t.uid,n)}),ci())},Xm=Object.freeze({__proto__:null,generate:hf,generateOne:vf,schemas:tg,names:bf,substitutes:ng,components:eg,defaultUids:Sf,defaultUidsSchema:ug,getAllParts:rg,getAllPartNames:ig,getPart:og,getPartOrDie:yf,getParts:xf,getPartsOrDie:wf}),ag=function(t,n,e,o,r){r=r;o=(0<(o=o).length?[pn("parts",o)]:[]).concat([i("uid"),s("dom",{}),s("components",[]),Va("originalSpec"),s("debug.sketcher",{})]).concat(r);return bi(t+" [SpecSchema]",ii(o.concat(n)),e)},cg=function(t){return He(t,"uid")?t:D(D({},t),{uid:$u("uid")})},sg=function(t){return void 0!==t.uid},lg=ii([i("name"),i("factory"),i("configFields"),s("apis",{}),s("extraApis",{})]),fg=ii([i("name"),i("factory"),i("configFields"),i("partFields"),s("apis",{}),s("extraApis",{})]),dg=function(t){var r=bi("Sketcher for "+t.name,lg,t),t=Ie(r.apis,Xn),n=Ie(r.extraApis,Wn);return D(D({name:r.name,configFields:r.configFields,sketch:function(t){var n=r.name,e=r.configFields,o=r.factory;return t=cg(t),o(ag(n,e,t,[],[]),t)}},t),n)},Ym=Object.freeze({__proto__:null,getCurrent:function(t,n,e){return n.find(t)}}),qm=[i("find")],y=Qa({fields:qm,name:"composing",apis:Ym}),mg=["input","button","textarea","select"],Km=Object.freeze({__proto__:null,enable:Ff,disable:Mf,isDisabled:If,onLoad:_f,set:function(t,n,e,o){(o?Mf:Ff)(t,n)}}),hm=Object.freeze({__proto__:null,exhibit:function(t,n){return qn({classes:n.disabled()?n.disableClass.toArray():[]})},events:function(e,t){return Mu([Rn(cu(),function(t,n){return If(t,e)}),Ka(e,t,_f)])}}),ml=[Tn("disabled",U),s("useNative",!0),bn("disableClass"),t("onDisabled"),t("onEnabled")],nt=Qa({fields:ml,name:"disabling",active:hm,apis:Km}),wl=Object.freeze({__proto__:null,dehighlightAll:function(t,n,e){return Rf(t,n,0,[])},dehighlight:function(t,n,e,o){Pf(0,n,0,o)&&(pa(o.element,n.highlightClass),n.onDehighlight(t,o),J(o,Tu()))},highlight:Nf,highlightFirst:function(n,e,o){Vf(n,e).each(function(t){Nf(n,e,o,t)})},highlightLast:function(n,e,o){Hf(n,e).each(function(t){Nf(n,e,o,t)})},highlightAt:function(n,e,o,t){var r,i;r=t,i=cm((t=n).element,"."+e.itemClass),K.from(i[r]).fold(function(){return B.error(new Error("No element found with index "+r))},t.getSystem().getByDom).fold(function(t){throw t},function(t){Nf(n,e,o,t)})},highlightBy:function(n,e,o,t){var r=zf(n,e);ye(r,t).each(function(t){Nf(n,e,o,t)})},isHighlighted:Pf,getHighlighted:function(n,t,e){return Hc(n.element,"."+t.highlightClass).bind(function(t){return n.getSystem().getByDom(t).toOptional()})},getFirst:Vf,getLast:Hf,getPrevious:function(t,n,e){return Lf(t,n,0,-1)},getNext:function(t,n,e){return Lf(t,n,0,1)},getCandidates:zf}),qm=[i("highlightClass"),i("itemClass"),t("onHighlight"),t("onDehighlight")],gg=Qa({fields:qm,name:"highlighting",apis:wl}),pg=[8],hg=[9],vg=[13],bg=[27],yg=[32],xg=[37],wg=[38],Sg=[39],kg=[40],f=function(n){return function(t){t=t.raw;return de(n,t.which)}},Cg=L(Yf),Og=function(t,n){return ye(t,function(t){return t.matches(n)}).map(function(t){return t.classification})},_g=function(t,n,e){n.exists(function(n){return e.exists(function(t){return Io(t,n)})})||$(t,Su(),{prevFocus:n,newFocus:e})},Tg=function(){function o(t){return Ms(t.element)}return{get:o,set:function(t,n){var e=o(t),n=(t.getSystem().triggerFocus(n,t.element),o(t));_g(t,e,n)}}},Eg=function(){function o(t){return gg.getHighlighted(t).map(function(t){return t.element})}return{get:o,set:function(n,t){var e=o(n),t=(n.getSystem().getByDom(t).fold(Y,function(t){gg.highlight(n,t)}),o(n));_g(n,e,t)}}},ml=((Ym=om=om||{}).OnFocusMode="onFocus",Ym.OnEnterOrSpaceMode="onEnterOrSpace",Ym.OnApiMode="onApi",Jf(wi("cyclic",U))),hm=Jf(wi("cyclic",j)),Km=[s("execute",$f),s("useSpace",!1),s("useEnter",!0),s("useControlEnter",!1),s("useDown",!1)],qm=Kf(Km,ra.init,function(t,n,e,o){var t=e.useSpace&&!Of(t.element)?yg:[],r=e.useEnter?vg:[],i=e.useDown?kg:[],t=t.concat(r).concat(i);return[c(f(t),Zf)].concat(e.useControlEnter?[c(Xf([qf,f(vg)]),Zf)]:[])},function(t,n,e,o){return e.useSpace&&!Of(t.element)?[c(f(yg),Qf)]:[]},function(){return K.none()}),wl=Object.freeze({__proto__:null,flatgrid:td,init:function(t){return t.state(t)}}),Dg=function(n,e,t,o,r){return o.focusManager.get(e).bind(function(t){return n(e.element,t,o,r)}).map(function(t){return o.focusManager.set(e,t),!0})},Ym=rd,Km=rd,Ag=rd,Bg=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Mg=function(t){return!Bg(t.dom)},Fg=function(n,t){return xe(n,t).map(function(t){return{index:t,candidates:n}})},Ig=function(t,n,e){t=cm(t,e),e=pe(t,Mg);return Fg(e,function(t){return Io(t,n)})},Rg=function(n,t,e,o){return o(Math.floor(t/e),t%e).bind(function(t){t=t.row*e+t.column;return 0<=t&&t<n.length?K.some(n[t]):K.none()})},Ng=[i("selector"),s("execute",$f),Ra("onEscape"),s("captureTab",!1),Gu()],Pg=sd(function(t,n,e,o){return ud(t,n,e,o,-1)}),Vg=sd(function(t,n,e,o){return ud(t,n,e,o,1)}),Hg=sd(function(t,n,e,o){return ad(t,n,e,o,-1)}),Lg=sd(function(t,n,e,o){return ad(t,n,e,o,1)}),Pg=q([c(f(xg),ed(Pg,Vg)),c(f(Sg),od(Pg,Vg)),c(f(wg),Ym(Hg)),c(f(kg),Km(Lg)),c(Xf([Yf,f(hg)]),ld),c(Xf([Cg,f(hg)]),ld),c(f(bg),function(t,n,e){return e.onEscape(t,n)}),c(f(yg.concat(vg)),function(n,e,o,t){return(r=o).focusManager.get(n).bind(function(t){return Lc(t,r.selector)}).bind(function(t){return o.execute(n,e,t)});var r})]),Vg=q([c(f(yg),Qf)]),Hg=Kf(Ng,td,Pg,Vg,function(){return K.some(cd)}),zg=function(t,n,e,r){function i(t,n,e){var o;return(n=as(n,r,0,e.length-1))===t?K.none():(o=e[n],"button"===Je(o)&&"disabled"===nr(o,"disabled")?i(t,n,e):K.from(e[n]))}return Ig(t,e,n).bind(function(t){var n=t.index,t=t.candidates;return i(n,n,t)})},Lg=[i("selector"),s("getInitial",K.none),s("execute",$f),Ra("onEscape"),s("executeOnMove",!1),s("allowVertical",!0)],Ug=function(t,n){return n.focusManager.get(t).bind(function(t){return Lc(t,n.selector)})},jg=function(n,e,o){return Ug(n,o).bind(function(t){return o.execute(n,e,t)})},Ng=q([c(f(yg),Qf)]),Pg=Kf(Lg,ra.init,function(t,n,e,o){var r=xg.concat(e.allowVertical?wg:[]),e=Sg.concat(e.allowVertical?kg:[]);return[c(f(r),gd(ed(dd,md))),c(f(e),gd(od(dd,md))),c(f(vg),jg),c(f(yg),jg),c(f(bg),pd)]},Ng,function(){return K.some(fd)}),Wg=function(t,n,e){return K.from(t[n]).bind(function(t){return K.from(t[e]).map(function(t){return{rowIndex:n,columnIndex:e,cell:t}})})},Vg=[pn("selectors",[i("row"),i("cell")]),s("cycles",!0),s("previousSelector",K.none),s("execute",$f)],Lg=wd(function(t,n,e){return hd(t,n,e,-1)},function(t,n,e){return bd(t,n,e,-1)}),Ng=wd(function(t,n,e){return hd(t,n,e,1)},function(t,n,e){return bd(t,n,e,1)}),Gg=wd(function(t,n,e){return vd(t,e,n,-1)},function(t,n,e){return yd(t,e,n,-1)}),Xg=wd(function(t,n,e){return vd(t,e,n,1)},function(t,n,e){return yd(t,e,n,1)}),Lg=q([c(f(xg),ed(Lg,Ng)),c(f(Sg),od(Lg,Ng)),c(f(wg),Ym(Gg)),c(f(kg),Km(Xg)),c(f(yg.concat(vg)),function(n,e,o){return Ms(n.element).bind(function(t){return o.execute(n,e,t)})})]),Ng=q([c(f(yg),Qf)]),Ym=Kf(Vg,ra.init,Lg,Ng,function(){return K.some(xd)}),Gg=[i("selector"),s("execute",$f),s("moveOnTab",!1)],Km=q([c(f(wg),Ag(Cd)),c(f(kg),Ag(Od)),c(Xf([Yf,f(hg)]),function(t,n,e,o){return e.moveOnTab?Ag(Cd)(t,n,e,o):K.none()}),c(Xf([Cg,f(hg)]),function(t,n,e,o){return e.moveOnTab?Ag(Od)(t,n,e,o):K.none()}),c(f(vg),Sd),c(f(yg),Sd)]),Xg=q([c(f(yg),Qf)]),Vg=Kf(Gg,ra.init,Km,Xg,function(){return K.some(kd)}),Lg=[Ra("onSpace"),Ra("onEnter"),Ra("onShiftEnter"),Ra("onLeft"),Ra("onRight"),Ra("onTab"),Ra("onShiftTab"),Ra("onUp"),Ra("onDown"),Ra("onEscape"),s("stopSpaceKeyup",!1),bn("focusIn")],Ng=Kf(Lg,ra.init,function(t,n,e){return[c(f(yg),e.onSpace),c(Xf([Cg,f(vg)]),e.onEnter),c(Xf([Yf,f(vg)]),e.onShiftEnter),c(Xf([Yf,f(hg)]),e.onShiftTab),c(Xf([Cg,f(hg)]),e.onTab),c(f(wg),e.onUp),c(f(kg),e.onDown),c(f(xg),e.onLeft),c(f(Sg),e.onRight),c(f(yg),e.onSpace),c(f(bg),e.onEscape)]},function(t,n,e){return e.stopSpaceKeyup?[c(f(yg),Qf)]:[]},function(t){return t.focusIn}),Gg=ml.schema(),Km=hm.schema(),Xg=Pg.schema(),Lg=Hg.schema(),ml=Ym.schema(),hm=qm.schema(),Pg=Vg.schema(),Hg=Ng.schema(),M=Za({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Gg,cyclic:Km,flow:Xg,flatgrid:Lg,matrix:ml,execution:hm,menu:Pg,special:Hg}),name:"keying",active:{events:function(t,n){return t.handler.toEvents(t,n)}},apis:{focusIn:function(n,e,o){e.sendFocusIn(e).fold(function(){n.getSystem().triggerFocus(n.element,n.element)},function(t){t(n,e,o)})},setGridSize:function(t,n,e,o,r){Le(e,"setGridSize")?e.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:wl}),et=Qa({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,n,e,o){_d(t,0,_r,o)},prepend:function(t,n,e,o){_d(t,0,jt,o)},remove:Td,replaceAt:Dd,replaceBy:function(n,t,e,o,r){var i=Ed(n);return xe(i,o).bind(function(t){return Dd(n,0,0,t,r)})},set:function(n,t,e,o){nc(function(){var t=C(o,n.getSystem().build);Yl(n,t)},n.element)},contents:Ed})}),Yg=function(t,n){n=Mu(n);return Qa({fields:[i("enabled")],name:t,active:{events:q(n)}})},ot=function(t,n){return{key:t,value:{config:{},me:Yg(t,n),configAsRaw:q({}),initialConfig:{},state:ra}}},Ym=Object.freeze({__proto__:null,focus:Ad,blur:function(t,n){n.ignore||t.element.dom.blur()},isFocused:function(t){return tc(t.element)}}),qm=Object.freeze({__proto__:null,exhibit:function(t,n){n=n.ignore?{}:{attributes:{tabindex:"-1"}};return qn(n)},events:function(e){return Mu([Q(ru(),function(t,n){Ad(t,e),n.stop()})].concat(e.stopMousedown?[Q(Ui(),function(t,n){n.event.prevent()})]:[]))}}),Vg=[t("onFocus"),s("stopMousedown",!1),s("ignore",!1)],rt=Qa({fields:Vg,name:"focusing",active:qm,apis:Ym}),qg=function(t,n,e){e.set(!0),Md(t,n,e),Bd(t,n,e)},Kg=function(t,n,e){e.set(!1),Md(t,n,e),Bd(t,n,e)},Ng=Object.freeze({__proto__:null,onLoad:Rd,toggle:Fd,isOn:function(t,n,e){return e.get()},on:qg,off:Kg,set:Id}),Gg=Object.freeze({__proto__:null,exhibit:function(){return qn({})},events:function(t,n){e=t,o=n,r=Fd;var e,o,r,i=Hu(function(t){r(t,e,o)}),n=Ka(t,n,Rd);return Mu(we([t.toggleOnExecute?[i]:[],[n]]))}}),Km=[s("selected",!1),bn("toggleClass"),s("toggleOnExecute",!0),_i("aria",{mode:"none"},fn("mode",{pressed:[s("syncWithExpanded",!1),$c("update",function(t,n,e){_(t.element,"aria-pressed",e),n.syncWithExpanded&&Nd(t,0,e)})],checked:[$c("update",function(t,n,e){_(t.element,"aria-checked",e)})],expanded:[$c("update",Nd)],selected:[$c("update",function(t,n,e){_(t.element,"aria-selected",e)})],none:[$c("update",Y)]}))],m=Qa({fields:Km,name:"toggling",active:Gg,apis:Ng,state:(rm=!1,{init:function(){var n=T(rm);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(rm)},readState:function(){return n.get()}}}})}),Jg=function(){function t(t,n){n.stop(),Eu(t)}return[Q(Zi(),t),Q(lu(),t),Ru(Vi()),Ru(Ui())]},$g="alloy.item-hover",Qg="alloy.item-focus",Zg=q($g),tp=q(Qg),Xg=[i("data"),i("components"),i("dom"),s("hasSubmenu",!1),bn("toggling"),Vm.field("itemBehaviours",[m,rt,M,tt]),s("ignoreFocus",!1),s("domModification",{}),$c("builder",function(t){return{dom:t.dom,domModification:D(D({},t.domModification),{attributes:D(D(D({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Vm.augment(t.itemBehaviours,[t.toggling.fold(m.revoke,function(t){return m.config(D({aria:{mode:"checked"}},t))}),rt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Hd(t)}}),M.config({mode:"execution"}),tt.config({store:{mode:"memory",initialValue:t.data}}),ot("item-type-events",X(X([],Jg(),!0),[Q(Xi(),Vd),Q(su(),rt.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}}),s("eventOrder",{})],Lg=[i("dom"),i("components"),$c("builder",function(t){return{dom:t.dom,components:t.components,events:Mu([(t=su(),Q(t,function(t,n){n.stop()}))])}})],np=q("item-widget"),ep=q([Jm({name:"widget",overrides:function(n){return{behaviours:Z([tt.config({store:{mode:"manual",getValue:function(t){return n.data},setValue:Y}})])}}})]),ml=[i("uid"),i("data"),i("components"),i("dom"),s("autofocus",!1),s("ignoreFocus",!1),Vm.field("widgetBehaviours",[tt,rt,M]),s("domModification",{}),ug(ep()),$c("builder",function(e){function o(t){return og(t,e,"widget").map(function(t){return M.focusIn(t),t})}function t(t,n){return Of(n.event.target)||e.autofocus&&n.setSource(t.element),K.none()}var n=ng(np(),e,ep()),n=eg(np(),e,n.internals());return{dom:e.dom,components:n,domModification:e.domModification,events:Mu([Hu(function(t,n){o(t).each(function(t){n.stop()})}),Q(Xi(),Vd),Q(su(),function(t,n){e.autofocus?o(t):rt.focus(t)})]),behaviours:Vm.augment(e.widgetBehaviours,[tt.config({store:{mode:"memory",initialValue:e.data}}),rt.config({ignore:e.ignoreFocus,onFocus:function(t){Hd(t)}}),M.config({mode:"special",focusIn:e.autofocus?function(t){o(t)}:Ts(),onLeft:t,onRight:t,onEscape:function(t,n){return rt.isFocused(t)||e.autofocus?(e.autofocus&&n.setSource(t.element),K.none()):(rt.focus(t),K.some(!0))}})])}})],op=fn("type",{widget:ml,item:Xg,separator:Lg}),hm=q([Qc({factory:{sketch:function(t){t=bi("menu.spec item",op,t);return t.builder(t)}},name:"items",unit:"item",defaults:function(t,n){return He(n,"uid")?n:D(D({},n),{uid:$u("item")})},overrides:function(t,n){return{type:n.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Pg=q([i("value"),i("items"),i("dom"),i("components"),s("eventOrder",{}),sf("menuBehaviours",[gg,tt,y,M]),_i("movement",{mode:"menu",moveOnTab:!0},fn("mode",{grid:[Gu(),$c("config",function(t,n){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:n.initSize.numColumns,numRows:n.initSize.numRows},focusManager:t.focusManager}})],matrix:[$c("config",function(t,n){return{mode:"matrix",selectors:{row:n.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),i("rowSelector")],menu:[s("moveOnTab",!0),$c("config",function(t,n){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:n.moveOnTab,focusManager:t.focusManager}})]})),Si("markers",qu()),s("fakeFocus",!1),s("focusManager",Tg()),t("onHighlight")]),rp=q("alloy.menu-focus"),ip=Cf({name:"Menu",configFields:Pg(),partFields:hm(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Pm(t.menuBehaviours,[gg.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),tt.config({store:{mode:"memory",initialValue:t.value}}),y.config({find:K.some}),M.config(t.movement.config(t,t.movement))]),events:Mu([Q(tp(),function(n,e){var t=e.event;n.getSystem().getByDom(t.target).each(function(t){gg.highlight(n,t),e.stop(),$(n,rp(),{menu:n,item:t})})}),Q(Zg(),function(t,n){n=n.event.item;gg.highlight(t,n)})]),components:n,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),up=function(t){return Re(t,function(t,n){return{k:t,v:n}})},ap=function(e,o,r,t){return O(r,t).bind(function(t){return O(e,t).bind(function(t){var n=ap(e,o,r,t);return K.some([t].concat(n))})}).getOr([])},cp=function(){function n(t){return O(c.get(),t)}var c=T({}),s=T({}),l=T({}),f=Us(),d=T({}),m=function(e){return ht(c.get(),function(t,n){return t===e})},g=function(t){return e(t).bind(Ld)},e=function(t){return O(s.get(),t)};return{setMenuBuilt:function(t,n){var e;s.set(D(D({},s.get()),((e={})[t]={type:"prepared",menu:n},e)))},setContents:function(t,n,e,o){f.set(t),c.set(e),s.set(n),d.set(o);t=e,r={},Fe(o,function(t,n){x(t,function(t){r[t]=n})}),u=up(i=t),a=Ie(u,function(t,n){return[n].concat(ap(r,i,u,n))});var r,i,u,a,n=Ie(r,function(t){return O(a,t).getOr([t])});l.set(n)},expand:function(e){return O(c.get(),e).map(function(t){var n=O(l.get(),e).getOr([]);return[t].concat(n)})},refresh:function(t){return O(l.get(),t)},collapse:function(t){return O(l.get(),t).bind(function(t){return 1<t.length?K.some(t.slice(1)):K.none()})},lookupMenu:e,lookupItem:n,otherMenus:function(t){var n=d.get();return Oe(Be(n),t)},getPrimary:function(){return f.get().bind(g)},getMenus:function(){return s.get()},clear:function(){c.set({}),s.set({}),l.set({}),f.clear()},isClear:function(){return f.get().isNone()},getTriggeringPath:function(t,u){var a=pe(n(t).toArray(),function(t){return g(t).isSome()});return O(l.get(),t).bind(function(t){for(var i=Ce(a.concat(t)),n=Se(i,function(t,n){return e=t,o=u,r=i.slice(0,n+1),g(e).bind(function(n){return m(e).bind(function(t){return o(t).map(function(t){return{triggeredMenu:n,triggeringItem:t,triggeringPath:r}})})}).fold(function(){return ze(f.get(),t)?[]:[K.none()]},function(t){return[K.some(t)]});var e,o,r}),e=[],o=0;o<n.length;o++){var r=n[o];if(!r.isSome())return K.none();e.push(r.getOrDie())}return K.some(e)})}}},sp=Ld,lp=q("collapse-item"),fp=dg({name:"TieredMenu",configFields:[Pa("onExecute"),Pa("onEscape"),Na("onOpenMenu"),Na("onOpenSubmenu"),t("onRepositionMenu"),t("onCollapseMenu"),s("highlightImmediately",!0),pn("data",[i("primary"),i("menus"),i("expansions")]),s("fakeFocus",!1),t("onHighlight"),t("onHover"),Ma(),i("dom"),s("navigateOnHover",!0),s("stayInDom",!1),sf("tmenuBehaviours",[M,gg,y,et]),s("eventOrder",{})],apis:{collapseMenu:function(t,n){t.collapseMenu(n)},highlightPrimary:function(t,n){t.highlightPrimary(n)},repositionMenus:function(t,n){t.repositionMenus(n)}},factory:function(c,t){function e(t){o=t,r=c.data.primary,t=c.data.menus;var o,r,t=Ie(t,function(t,n){function e(){return ip.sketch(D(D({},t),{value:n,markers:c.markers,fakeFocus:c.fakeFocus,onHighlight:c.onHighlight,focusManager:(c.fakeFocus?Eg:Tg)()}))}return n===r?{type:"prepared",menu:o.getSystem().build(e())}:{type:"notbuilt",nbMenu:e}}),n=Ie(c.data.menus,function(t,n){return Se(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})});return d.setContents(c.data.primary,t,c.data.expansions,n),d.getPrimary()}function s(t,e){t=h(t),Fe(t,function(t,n){n=de(e,n);_(t.element,"aria-expanded",n)})}function l(e,o,r){return K.from(r[0]).bind(function(t){return o.lookupMenu(t).bind(function(t){var n;return"notbuilt"===t.type?K.none():(t=t.menu,n=g(o,r.slice(1)),x(n,function(t){ma(t.element,c.markers.backgroundMenu)}),$o(t.element)||et.append(e,Ta(t)),ba(t.element,[c.markers.backgroundMenu]),a(e,t),p(e,o,r),K.some(t))})})}function r(i,u,a){var t;return void 0===a&&(a=f.HighlightSubmenu),u.hasConfigured(nt)&&nt.isDisabled(u)?K.some(u):(t=m(u),d.expand(t).bind(function(r){return s(i,r),K.from(r[0]).bind(function(o){return d.lookupMenu(o).bind(function(t){n=i,e=o;var n,e="notbuilt"===(t=t).type?(n=n.getSystem().build(t.nbMenu()),d.setMenuBuilt(e,n),n):t.menu;return $o(e.element)||et.append(i,Ta(e)),c.onOpenSubmenu(i,u,e,Ce(r)),a===f.HighlightSubmenu?(gg.highlightFirst(e),l(i,d,r)):(gg.dehighlightAll(e),K.some(u))})})}))}function o(n,e){var t=m(e);return d.collapse(t).bind(function(t){return s(n,t),l(n,d,t).map(function(t){return c.onCollapseMenu(n,e,t),t})})}function n(e){return function(n,t){return Lc(t.getSource(),"."+c.markers.item).bind(function(t){return n.getSystem().getByDom(t).toOptional().bind(function(t){return e(n,t).map(j)})})}}function i(t){return gg.getHighlighted(t).bind(gg.getHighlighted)}var f,u=Us(),d=cp(),m=function(t){return tt.getValue(t).value},a=function(n,t){gg.highlight(n,t),gg.getHighlighted(t).orThunk(function(){return gg.getFirst(t)}).each(function(t){Du(n,t.element,su())})},g=function(n,t){return Ue(C(t,function(t){return n.lookupMenu(t).bind(function(t){return"prepared"===t.type?K.some(t.menu):K.none()})}))},p=function(n,t,e){t=g(t,t.otherMenus(e));x(t,function(t){ba(t.element,[c.markers.backgroundMenu]),c.stayInDom||et.remove(n,t)})},h=function(n){return u.get().getOrThunk(function(){var e={},t=cm(n.element,"."+c.markers.item),t=pe(t,function(t){return"true"===nr(t,"aria-haspopup")});return x(t,function(t){n.getSystem().getByDom(t).each(function(t){var n=m(t);e[n]=t})}),u.set(e),e})},v=((v=f=f||{})[v.HighlightSubmenu=0]="HighlightSubmenu",v[v.HighlightParent=1]="HighlightParent",Mu([Q(rp(),function(n,e){var t=e.event.item;d.lookupItem(m(t)).each(function(){var t=e.event.menu,t=(gg.highlight(n,t),m(e.event.item));d.refresh(t).each(function(t){return p(n,d,t)})})}),Hu(function(n,t){t=t.event.target;n.getSystem().getByDom(t).each(function(t){0===m(t).indexOf("collapse-item")&&o(n,t),r(n,t,f.HighlightSubmenu).fold(function(){c.onExecute(n,t)},Y)})}),Nu(function(n,t){e(n).each(function(t){et.append(n,Ta(t)),c.onOpenMenu(n,t),c.highlightImmediately&&a(n,t)})})].concat(c.navigateOnHover?[Q(Zg(),function(t,n){var n=n.event.item,e=t,o=n;o=m(n),d.refresh(o).bind(function(t){return s(e,t),l(e,d,t)}),r(t,n,f.HighlightParent),c.onHover(t,n)})]:[]))),b={collapseMenu:function(n){i(n).each(function(t){o(n,t)})},highlightPrimary:function(n){d.getPrimary().each(function(t){a(n,t)})},repositionMenus:function(e){d.getPrimary().bind(function(n){return i(e).bind(function(t){var t=m(t),n=Ve(d.getMenus()),e=Ue(C(n,sp));return d.getTriggeringPath(t,function(t){return n=t,Ae(e,function(t){return t.getSystem().isConnected()?(t=gg.getCandidates(t),ye(t,function(t){return m(t)===n})):K.none()});var n})}).map(function(t){return{primary:n,triggeringPath:t}})}).fold(function(){K.from(e.components()[0]).filter(function(t){return"menu"===nr(t.element,"role")}).each(function(t){c.onRepositionMenu(e,t,[])})},function(t){var n=t.primary,t=t.triggeringPath;c.onRepositionMenu(e,n,t)})}};return{uid:c.uid,dom:c.dom,markers:c.markers,behaviours:Pm(c.tmenuBehaviours,[M.config({mode:"special",onRight:n(function(t,n){return Of(n.element)?K.none():r(t,n,f.HighlightSubmenu)}),onLeft:n(function(t,n){return Of(n.element)?K.none():o(t,n)}),onEscape:n(function(t,n){return o(t,n).orThunk(function(){return c.onEscape(t,n).map(function(){return t})})}),focusIn:function(n,t){d.getPrimary().each(function(t){Du(n,t.element,su())})}}),gg.config({highlightClass:c.markers.selectedMenu,itemClass:c.markers.menu}),y.config({find:function(t){return gg.getHighlighted(t)}}),et.config({})]),eventOrder:c.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(t,n,e){return{primary:t,menus:n,expansions:e}},singleData:function(t,n){return{primary:t,menus:Ai(t,n),expansions:{}}},collapseItem:function(t){return{value:E(lp()),meta:{text:t}}}}}),dp=dg({name:"InlineView",configFields:[i("lazySink"),t("onShow"),t("onHide"),wn("onEscape"),sf("inlineBehaviours",[l,tt,Es]),Ci("fireDismissalEventInstead",[s("event",wu())]),Ci("fireRepositionEventInstead",[s("event",Pi())]),s("getRelated",K.none),s("isExtraPart",U),s("eventOrder",K.none)],factory:function(i,t){function o(t,n,e,o){u(t,n,e,function(){return o.map(function(t){return Lr(t)})})}function r(t,n,e,o){n=zd(i,t,n,e,o),l.open(t,n),tt.setValue(t,K.some({mode:"menu",menu:n}))}function n(e){l.isOpen(e)&&tt.getValue(e).each(function(t){switch(t.mode){case"menu":l.getState(e).each(fp.repositionMenus);break;case"position":var n=i.lazySink(e).getOrDie();ym.positionWithinBounds(n,e,t.config,t.getBounds())}})}var u=function(t,n,e,o){var r=i.lazySink(t).getOrDie();l.openWhileCloaked(t,n,function(){return ym.positionWithinBounds(r,t,e,o())}),tt.setValue(t,K.some({mode:"position",config:e,getBounds:o}))},e={setContent:function(t,n){l.setContent(t,n)},showAt:function(t,n,e){o(t,n,e,K.none())},showWithin:o,showWithinBounds:u,showMenuAt:function(t,n,e){r(t,n,e,K.none)},showMenuWithinBounds:r,hide:function(t){l.isOpen(t)&&(tt.setValue(t,K.none()),l.close(t))},getContent:function(t){return l.getState(t)},reposition:n,isOpen:l.isOpen};return{uid:i.uid,dom:i.dom,behaviours:Pm(i.inlineBehaviours,[l.config({isPartOf:function(t,n,e){return jc(n,e)||(o=e,i.getRelated(t).exists(function(t){return jc(t,o)}));var o},getAttachPoint:function(t){return i.lazySink(t).getOrDie()},onOpen:function(t){i.onShow(t)},onClose:function(t){i.onHide(t)}}),tt.config({store:{mode:"memory",initialValue:K.none()}}),Es.config({channels:D(D({},Fm(D({isExtraPart:t.isExtraPart},i.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),Rm(D(D({},i.fireRepositionEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})),{doReposition:n})))})]),eventOrder:i.eventOrder,apis:e}},apis:{showAt:function(t,n,e,o){t.showAt(n,e,o)},showWithin:function(t,n,e,o,r){t.showWithin(n,e,o,r)},showWithinBounds:function(t,n,e,o,r){t.showWithinBounds(n,e,o,r)},showMenuAt:function(t,n,e,o){t.showMenuAt(n,e,o)},showMenuWithinBounds:function(t,n,e,o,r){t.showMenuWithinBounds(n,e,o,r)},hide:function(t,n){t.hide(n)},isOpen:function(t,n){return t.isOpen(n)},getContent:function(t,n){return t.getContent(n)},setContent:function(t,n,e){t.setContent(n,e)},reposition:function(t,n){t.reposition(n)}}}),mp="layout-inset",gp=function(t,n,e){return Ha(Ud(t,n),t.y,e.insetNorth(),os(),"north",La(t,{top:2}),mp)},pp=function(t,n,e){return Ha(Ud(t,n),Wd(t,n),e.insetSouth(),rs(),"south",La(t,{bottom:3}),mp)},hp=tinymce.util.Tools.resolve("tinymce.util.Delay"),vp=dg({name:"Button",factory:function(t){function n(n){return O(t.dom,"attributes").bind(function(t){return O(t,n)})}var e=Pd(t.action),o=t.dom.tag;return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Vm.augment(t.buttonBehaviours,[rt.config({}),M.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===o?(e=n("type").getOr("button"),o=n("role").map(function(t){return{role:t}}).getOr({}),D({type:e},o)):{role:n("role").getOr("button")}},eventOrder:t.eventOrder}},configFields:[s("uid",void 0),i("dom"),s("components",[]),Vm.field("buttonBehaviours",[rt,M]),bn("action"),bn("role"),s("eventOrder",{})]}),bp=function(t){t=void 0!==t.dom.attributes?t.dom.attributes:[];return ve(t,function(t,n){return"class"===n.name?t:D(D({},t),((t={})[n.name]=n.value,t))},{})},yp=function(t){return Array.prototype.slice.call(t.dom.classList,0)},it=function(t){var n=sg(t)&&Le(t,"uid")?t.uid:$u("memento");return{get:function(t){return t.getSystem().getByUid(n).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(n).toOptional()},asSpec:function(){return D(D({},t),{uid:n})}}};function xp(t){return(xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wp(t,n){return(wp=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Sp(t,n,e){return(Sp=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(t){}}}()?Reflect.construct:function(t,n,e){var o=[null];o.push.apply(o,n);n=new(Function.bind.apply(t,o));return e&&wp(n,e.prototype),n}).apply(null,arguments)}function kp(t){return function(t){if(Array.isArray(t))return Cp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){var e;if(t)return"string"==typeof t?Cp(t,n):"Map"===(e="Object"===(e=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Cp(t,n):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cp(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}var Op,_p=Object.hasOwnProperty,Tp=Object.setPrototypeOf,Ep=Object.isFrozen,Dp=Object.getPrototypeOf,Ap=Object.getOwnPropertyDescriptor,Bp=Object.freeze,Hg=Object.seal,Mp=Object.create,wl="undefined"!=typeof Reflect&&Reflect,Fp=(Fp=wl.apply)||function(t,n,e){return t.apply(n,e)},Bp=Bp||function(t){return t},Hg=Hg||function(t){return t},Ip=(Ip=wl.construct)||function(t,n){return Sp(t,kp(n))},Rp=Gp(Array.prototype.forEach),Np=Gp(Array.prototype.pop),Pp=Gp(Array.prototype.push),Vp=Gp(String.prototype.toLowerCase),Hp=Gp(String.prototype.match),Lp=Gp(String.prototype.replace),zp=Gp(String.prototype.indexOf),Up=Gp(String.prototype.trim),jp=Gp(RegExp.prototype.test),Wp=(Op=TypeError,function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Ip(Op,n)});function Gp(r){return function(t){for(var n=arguments.length,e=new Array(1<n?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return Fp(r,t,e)}}function Xp(t,n){Tp&&Tp(t,null);for(var e=n.length;e--;){var o,r=n[e];"string"==typeof r&&(o=Vp(r))!==r&&(Ep(n)||(n[e]=o),r=o),t[r]=!0}return t}function Yp(t){var n,e=Mp(null);for(n in t)Fp(_p,t,[n])&&(e[n]=t[n]);return e}function qp(t,n){for(;null!==t;){var e=Ap(t,n);if(e){if(e.get)return Gp(e.get);if("function"==typeof e.value)return Gp(e.value)}t=Dp(t)}return function(t){return console.warn("fallback value for",t),null}}var Kp=Bp(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jp=Bp(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),$p=Bp(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Qp=Bp(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zp=Bp(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),th=Bp(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nh=Bp(["#text"]),eh=Bp(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),oh=Bp(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rh=Bp(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ih=Bp(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),uh=Hg(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ah=Hg(/<%[\w\W]*|[\w\W]*%>/gm),ch=Hg(/^data-[\-\w.\u00B7-\uFFFF]/),sh=Hg(/^aria-[\-\w]+$/),lh=Hg(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fh=Hg(/^(?:\w+script|data):/i),dh=Hg(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mh=Hg(/^html$/i);function gh(t){return vh().sanitize(t)}function ph(t,n){return n=n(),kh(t,n).getOrThunk(wh(n))}function hh(){return ot("add-focusable",[Nu(function(t){Vc(t.element,"svg").each(function(t){return _(t,"focusable","false")})})])}var vh=function N(t){var a=0<arguments.length&&void 0!==t?t:"undefined"==typeof window?null:window,s=function(t){return N(t)};if(s.version="2.3.8",s.removed=[],a&&a.document&&9===a.document.nodeType){var c=a.document,r=a.document,P=a.DocumentFragment,t=a.HTMLTemplateElement,l=a.Node,V=a.Element,n=a.NodeFilter,H=void 0===(e=a.NamedNodeMap)?a.NamedNodeMap||a.MozNamedAttrMap:e,L=a.HTMLFormElement,z=a.DOMParser,e=a.trustedTypes,U=qp(o=V.prototype,"cloneNode"),j=qp(o,"nextSibling"),W=qp(o,"childNodes"),f=qp(o,"parentNode"),d=("function"==typeof t&&(o=r.createElement("template")).content&&o.content.ownerDocument&&(r=o.content.ownerDocument),function(t,n){if("object"!==xp(t)||"function"!=typeof t.createPolicy)return null;var e=null,o="data-tt-policy-suffix",n="dompurify"+((e=n.currentScript&&n.currentScript.hasAttribute(o)?n.currentScript.getAttribute(o):e)?"#"+e:"");try{return t.createPolicy(n,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}}(e,c)),G=d?d.createHTML(""):"",t=r,i=t.implementation,X=t.createNodeIterator,Y=t.createDocumentFragment,q=t.getElementsByTagName,K=c.importNode,o={};try{o=Yp(r).documentMode?r.documentMode:{}}catch(t){}var J,u,m,g={},p=(s.isSupported="function"==typeof f&&i&&void 0!==i.createHTMLDocument&&9!==o,uh),h=ah,$=ch,Q=sh,Z=fh,tt=dh,nt=lh,v=null,et=Xp({},[].concat(kp(Kp),kp(Jp),kp($p),kp(Zp),kp(nh))),b=null,ot=Xp({},[].concat(kp(eh),kp(oh),kp(rh),kp(ih))),y=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),x=null,rt=null,it=!0,ut=!0,at=!1,w=!1,S=!1,ct=!1,st=!1,k=!1,C=!1,O=!1,lt=!0,ft=!0,_=!1,T={},E=null,dt=Xp({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),mt=null,gt=Xp({},["audio","video","img","source","image","track"]),pt=null,ht=Xp({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",bt="http://www.w3.org/2000/svg",D="http://www.w3.org/1999/xhtml",A=D,yt=["application/xhtml+xml","text/html"],B=null,xt=r.createElement("form"),wt=function(t){return t instanceof RegExp||t instanceof Function},St=function(t){B&&B===t||(t=Yp(t=t&&"object"===xp(t)?t:{}),v="ALLOWED_TAGS"in t?Xp({},t.ALLOWED_TAGS):et,b="ALLOWED_ATTR"in t?Xp({},t.ALLOWED_ATTR):ot,pt="ADD_URI_SAFE_ATTR"in t?Xp(Yp(ht),t.ADD_URI_SAFE_ATTR):ht,mt="ADD_DATA_URI_TAGS"in t?Xp(Yp(gt),t.ADD_DATA_URI_TAGS):gt,E="FORBID_CONTENTS"in t?Xp({},t.FORBID_CONTENTS):dt,x="FORBID_TAGS"in t?Xp({},t.FORBID_TAGS):{},rt="FORBID_ATTR"in t?Xp({},t.FORBID_ATTR):{},T="USE_PROFILES"in t&&t.USE_PROFILES,it=!1!==t.ALLOW_ARIA_ATTR,ut=!1!==t.ALLOW_DATA_ATTR,at=t.ALLOW_UNKNOWN_PROTOCOLS||!1,w=t.SAFE_FOR_TEMPLATES||!1,S=t.WHOLE_DOCUMENT||!1,k=t.RETURN_DOM||!1,C=t.RETURN_DOM_FRAGMENT||!1,O=t.RETURN_TRUSTED_TYPE||!1,st=t.FORCE_BODY||!1,lt=!1!==t.SANITIZE_DOM,ft=!1!==t.KEEP_CONTENT,_=t.IN_PLACE||!1,nt=t.ALLOWED_URI_REGEXP||nt,A=t.NAMESPACE||D,t.CUSTOM_ELEMENT_HANDLING&&wt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(y.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&wt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(y.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(y.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),u=u=-1===yt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,m="application/xhtml+xml"===u?function(t){return t}:Vp,w&&(ut=!1),C&&(k=!0),T&&(v=Xp({},kp(nh)),b=[],!0===T.html&&(Xp(v,Kp),Xp(b,eh)),!0===T.svg&&(Xp(v,Jp),Xp(b,oh),Xp(b,ih)),!0===T.svgFilters&&(Xp(v,$p),Xp(b,oh),Xp(b,ih)),!0===T.mathMl)&&(Xp(v,Zp),Xp(b,rh),Xp(b,ih)),t.ADD_TAGS&&Xp(v=v===et?Yp(v):v,t.ADD_TAGS),t.ADD_ATTR&&Xp(b=b===ot?Yp(b):b,t.ADD_ATTR),t.ADD_URI_SAFE_ATTR&&Xp(pt,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&Xp(E=E===dt?Yp(E):E,t.FORBID_CONTENTS),ft&&(v["#text"]=!0),S&&Xp(v,["html","head","body"]),v.table&&(Xp(v,["tbody"]),delete x.tbody),Bp&&Bp(t),B=t)},kt=Xp({},["mi","mo","mn","ms","mtext"]),Ct=Xp({},["foreignobject","desc","title","annotation-xml"]),Ot=Xp({},["title","style","font","a","script"]),M=Xp({},Jp),_t=(Xp(M,$p),Xp(M,Qp),Xp({},Zp)),F=(Xp(_t,th),function(n){Pp(s.removed,{element:n});try{n.parentNode.removeChild(n)}catch(t){try{n.outerHTML=G}catch(t){n.remove()}}}),Tt=function(t,n){try{Pp(s.removed,{attribute:n.getAttributeNode(t),from:n})}catch(t){Pp(s.removed,{attribute:null,from:n})}if(n.removeAttribute(t),"is"===t&&!b[t])if(k||C)try{F(n)}catch(t){}else try{n.setAttribute(t,"")}catch(t){}},Et=function(t){st?t="<remove></remove>"+t:e=(e=Hp(t,/^[\r\n\t ]+/))&&e[0],"application/xhtml+xml"===u&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var n,e,o=d?d.createHTML(t):t;if(A===D)try{n=(new z).parseFromString(o,u)}catch(t){}if(!n||!n.documentElement){n=i.createDocument(A,"template",null);try{n.documentElement.innerHTML=J?"":o}catch(t){}}return o=n.body||n.documentElement,t&&e&&o.insertBefore(r.createTextNode(e),o.childNodes[0]||null),A===D?q.call(n,S?"html":"body")[0]:S?n.documentElement:o},Dt=function(t){return X.call(t.ownerDocument||t,t,n.SHOW_ELEMENT|n.SHOW_COMMENT|n.SHOW_TEXT,null,!1)},I=function(t){return"object"===xp(l)?t instanceof l:t&&"object"===xp(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},R=function(t,n,e){g[t]&&Rp(g[t],function(t){t.call(s,n,e,B)})},At=function(t){if(R("beforeSanitizeElements",t,null),(!((i=t)instanceof L)||"string"==typeof i.nodeName&&"string"==typeof i.textContent&&"function"==typeof i.removeChild&&i.attributes instanceof H&&"function"==typeof i.removeAttribute&&"function"==typeof i.setAttribute&&"string"==typeof i.namespaceURI&&"function"==typeof i.insertBefore)&&!jp(/[\u0080-\uFFFF]/,t.nodeName)){var n,e,o,r,i=m(t.nodeName);if(R("uponSanitizeElement",t,{tagName:i,allowedTags:v}),(!t.hasChildNodes()||I(t.firstElementChild)||I(t.content)&&I(t.content.firstElementChild)||!jp(/<[/\w]/g,t.innerHTML)||!jp(/<[/\w]/g,t.textContent))&&("select"!==i||!jp(/<template/i,t.innerHTML))){if(v[i]&&!x[i])return t instanceof V&&((e=f(n=t))&&e.tagName||(e={namespaceURI:D,tagName:"template"}),o=Vp(n.tagName),r=Vp(e.tagName),n.namespaceURI===bt?e.namespaceURI===D?"svg"!==o:e.namespaceURI===vt?"svg"!==o||"annotation-xml"!==r&&!kt[r]:!Boolean(M[o]):n.namespaceURI===vt?e.namespaceURI===D?"math"!==o:e.namespaceURI===bt?"math"!==o||!Ct[r]:!Boolean(_t[o]):n.namespaceURI!==D||e.namespaceURI===bt&&!Ct[r]||e.namespaceURI===vt&&!kt[r]||_t[o]||!Ot[o]&&M[o])||("noscript"===i||"noembed"===i)&&jp(/<\/no(script|embed)/i,t.innerHTML)?(F(t),!0):(w&&3===t.nodeType&&(n=t.textContent,n=Lp(n,p," "),n=Lp(n,h," "),t.textContent!==n)&&(Pp(s.removed,{element:t.cloneNode()}),t.textContent=n),R("afterSanitizeElements",t,null),!1);if(!x[i]&&Mt(i)){if(y.tagNameCheck instanceof RegExp&&jp(y.tagNameCheck,i))return!1;if(y.tagNameCheck instanceof Function&&y.tagNameCheck(i))return!1}if(ft&&!E[i]){var u=f(t)||t.parentNode,a=W(t)||t.childNodes;if(a&&u)for(var c=a.length-1;0<=c;--c)u.insertBefore(U(a[c],!0),j(t))}}}return F(t),!0},Bt=function(t,n,e){if(lt&&("id"===n||"name"===n)&&(e in r||e in xt))return!1;if((!ut||rt[n]||!jp($,n))&&(!it||!jp(Q,n)))if(!b[n]||rt[n]){if(!(Mt(t)&&(y.tagNameCheck instanceof RegExp&&jp(y.tagNameCheck,t)||y.tagNameCheck instanceof Function&&y.tagNameCheck(t))&&(y.attributeNameCheck instanceof RegExp&&jp(y.attributeNameCheck,n)||y.attributeNameCheck instanceof Function&&y.attributeNameCheck(n))||"is"===n&&y.allowCustomizedBuiltInElements&&(y.tagNameCheck instanceof RegExp&&jp(y.tagNameCheck,e)||y.tagNameCheck instanceof Function&&y.tagNameCheck(e))))return!1}else if(!pt[n]&&!jp(nt,Lp(e,tt,""))&&("src"!==n&&"xlink:href"!==n&&"href"!==n||"script"===t||0!==zp(e,"data:")||!mt[t])&&(!at||jp(Z,Lp(e,tt,"")))&&e)return!1;return!0},Mt=function(t){return 0<t.indexOf("-")},Ft=function(t){R("beforeSanitizeAttributes",t,null);var n=t.attributes;if(n){for(var e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:b},o=n.length;o--;){var r=(u=n[o]).name,i=u.namespaceURI,u="value"===r?u.value:Up(u.value),a=m(r);if(e.attrName=a,e.attrValue=u,e.keepAttr=!0,e.forceKeepAttr=void 0,R("uponSanitizeAttribute",t,e),u=e.attrValue,!e.forceKeepAttr&&(Tt(r,t),e.keepAttr))if(jp(/\/>/i,u))Tt(r,t);else{w&&(u=Lp(u,p," "),u=Lp(u,h," "));var c=m(t.nodeName);if(Bt(c,a,u))try{i?t.setAttributeNS(i,r,u):t.setAttribute(r,u),Np(s.removed)}catch(t){}}}R("afterSanitizeAttributes",t,null)}},It=function t(n){var e,o=Dt(n);for(R("beforeSanitizeShadowDOM",n,null);e=o.nextNode();)R("uponSanitizeShadowNode",e,null),At(e)||(e.content instanceof P&&t(e.content),Ft(e));R("afterSanitizeShadowDOM",n,null)};s.sanitize=function(t,n){var e,o,r,i;if("string"!=typeof(t=(J=!t)?"\x3c!--\x3e":t)&&!I(t)){if("function"!=typeof t.toString)throw Wp("toString is not a function");if("string"!=typeof(t=t.toString()))throw Wp("dirty is not a string, aborting")}if(!s.isSupported){if("object"===xp(a.toStaticHTML)||"function"==typeof a.toStaticHTML){if("string"==typeof t)return a.toStaticHTML(t);if(I(t))return a.toStaticHTML(t.outerHTML)}return t}if(ct||St(n),s.removed=[],_="string"!=typeof t&&_){if(t.nodeName){n=m(t.nodeName);if(!v[n]||x[n])throw Wp("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)1===(n=(e=Et("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===n.nodeName||"HTML"===n.nodeName?e=n:e.appendChild(n);else{if(!k&&!w&&!S&&-1===t.indexOf("<"))return d&&O?d.createHTML(t):t;if(!(e=Et(t)))return k?null:O?G:""}e&&st&&F(e.firstChild);for(var u=Dt(_?t:e);o=u.nextNode();)3===o.nodeType&&o===r||At(o)||(o.content instanceof P&&It(o.content),Ft(o),r=o);if(r=null,_)return t;if(k){if(C)for(i=Y.call(e.ownerDocument);e.firstChild;)i.appendChild(e.firstChild);else i=e;return i=b.shadowroot?K.call(c,i,!0):i}return n=S?e.outerHTML:e.innerHTML,S&&v["!doctype"]&&e.ownerDocument&&e.ownerDocument.doctype&&e.ownerDocument.doctype.name&&jp(mh,e.ownerDocument.doctype.name)&&(n="<!DOCTYPE "+e.ownerDocument.doctype.name+">\n"+n),w&&(n=Lp(n,p," "),n=Lp(n,h," ")),d&&O?d.createHTML(n):n},s.setConfig=function(t){St(t),ct=!0},s.clearConfig=function(){B=null,ct=!1},s.isValidAttribute=function(t,n,e){return B||St({}),t=m(t),n=m(n),Bt(t,n,e)},s.addHook=function(t,n){"function"==typeof n&&(g[t]=g[t]||[],Pp(g[t],n))},s.removeHook=function(t){if(g[t])return Np(g[t])},s.removeHooks=function(t){g[t]&&(g[t]=[])},s.removeAllHooks=function(){g={}}}else s.isSupported=!1;return s}(),bh=tinymce.util.Tools.resolve("tinymce.util.I18n"),yh={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},xh="temporary-placeholder",wh=function(t){return function(){return O(t,xh).getOr("!not found!")}},Sh=function(t,n){var e,o,t=t.toLowerCase();return bh.isRtl()&&(e=Xe(e=t,o="-rtl")?e:e+o,He(n,e))?e:t},kh=function(t,n){return O(n,Sh(t,n))},Ch=function(t,n,e,o){r=n;var r=!!bh.isRtl()&&He(yh,r)?["tox-icon--flip"]:[],n=O(e,Sh(n,e)).or(o).getOrThunk(wh(e));return{dom:{tag:t.tag,attributes:null!=(o=t.attributes)?o:{},classes:t.classes.concat(r),innerHtml:n},behaviours:Z(X(X([],null!=(e=t.behaviours)?e:[],!0),[hh()],!1))}},Oh=function(t,n,e,o){return void 0===o&&(o=K.none()),Ch(n,t,e(),o)},_h={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Th=dg({name:"Notification",factory:function(n){function e(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}}function o(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}}var r=it({dom:em("<p>"+gh(n.translationProvider(n.text))+"</p>"),behaviours:Z([et.config({})])}),i=it({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},o(0)],behaviours:Z([et.config({})])}),t={updateProgress:function(t,n){t.getSystem().isConnected()&&i.getOpt(t).each(function(t){et.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(n)]},o(n)])})},updateText:function(t,n){t.getSystem().isConnected()&&(t=r.get(t),et.set(t,[Sa(n)]))}},u=we([n.icon.toArray(),n.level.toArray(),n.level.bind(function(t){return K.from(_h[t])}).toArray()]),a=it(vp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Oh("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":n.translationProvider("Close")}},n.iconProvider)],action:function(t){n.onAction(t)}}));u=u,c={tag:"div",classes:["tox-notification__icon"]},s=n.iconProvider,l=s(),s=ye(u,function(t){return He(l,Sh(t,l))});var c,s,l,u=[Ch(c,s.getOr(xh),l,K.none()),{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Z([et.config({})])}];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert"},classes:n.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Z([rt.config({}),ot("notification-events",[Q(Yi(),function(t){a.getOpt(t).each(rt.focus)})])]),components:u.concat(n.progress?[i.asSpec()]:[]).concat(n.closeButton?[a.asSpec()]:[]),apis:t}},configFields:[bn("level"),i("progress"),i("icon"),i("onAction"),i("text"),i("iconProvider"),i("translationProvider"),_n("closeButton",!0)],apis:{updateProgress:function(t,n,e){t.updateProgress(n,e)},updateText:function(t,n,e){t.updateText(n,e)}}});function Eh(c,t,r){var s=t.backstage.shared;return{open:function(t,n){function e(){n(),dp.hide(a)}function i(){var t=Lr(w.fromDom(c.getContentAreaContainer())),n=Ur(),e=cs(n.x,t.x,t.right),o=cs(n.y,t.y,t.bottom),r=Math.max(t.right,n.right),t=Math.max(t.bottom,n.bottom);return K.some(Hr(e,o,r-e,t-o))}var o=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),u=_a(Th.sketch({text:t.text,level:de(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:K.from(t.icon),closeButton:!o,onAction:e,iconProvider:s.providers.icons,translationProvider:s.providers.translate})),a=_a(dp.sketch(D({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:s.getSink,fireDismissalEventInstead:{}},s.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));r.add(a),0<t.timeout&&hp.setTimeout(function(){e()},t.timeout);return{close:e,moveTo:function(t,n){dp.showAt(a,Ta(u),{anchor:{type:"makeshift",x:t,y:n}})},moveRel:function(t,n){var e,o=Ta(u),r={maxHeightFunction:el()};"banner"!==n&&I(t)?(e=function(t){switch(t){case"bc-bc":return pp;case"tc-tc":return gp;case"tc-bc":return ps;default:return hs}}(n),n={type:"node",root:Qo(),node:K.some(w.fromDom(t)),overrides:r,layouts:{onRtl:function(){return[e]},onLtr:function(){return[e]}}},dp.showWithinBounds(a,o,{anchor:n},i)):(t=D(D({},s.anchors.banner()),{overrides:r}),dp.showWithinBounds(a,o,{anchor:t},i))},text:function(t){Th.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){Th.updateProgress(u,t)}}}},close:function(t){t.close()},reposition:function(e){0<e.length&&x(e,function(t,n){0===n?t.moveRel(null,"banner"):t.moveRel(e[n-1].getEl(),"bc-tc")})},getArgs:function(t){return t.settings}}}function Dh(e,o){function r(){b(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:r,throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r(),i=setTimeout(function(){i=null,e.apply(null,t)},o)}}}function Ah(e,t,n,o,r){var i=vv(e,function(t){return t=t,(n=e).isBlock(t)||de(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===n.getContentEditable(t);var n});return K.from(i.backwards(t,n,o,r))}function Bh(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)}function Mh(e,t,o,n){return void 0===n&&(n=0),yv(w.fromDom(t.startContainer)).fold(function(){return Sv(e,t,o,n)},function(t){var n=e.createRng(),t=(n.selectNode(t.dom),xv(n));return K.some({range:n,text:wv(t,o),triggerChar:o})})}function Fh(t,n){return{container:t,offset:n}}function Ih(t){var n;return 3===t.nodeType?Fh(t,t.data.length):0<(n=t.childNodes).length?Ih(n[n.length-1]):Fh(t,n.length)}function Rh(t,n){var e=t.childNodes;return 0<e.length&&n<e.length?Rh(e[n],0):0<e.length&&t.nodeType===Ke&&e.length===n?Ih(e[e.length-1]):Fh(t,n)}function Nh(t){return hi("toolbarbutton",Iv,t)}function Ph(t){return hi("ToggleButton",Rv,t)}function Vh(n,e){return function(t){t=ft(t,e);return C(t,function(t){return{dom:n,components:t}})}}function Hh(t,e){var o=[],r=[];return x(t,function(t,n){(!e(t,n)||(0<r.length&&o.push(r),r=[],He(t.dom,"innerHtml")))&&r.push(t)}),0<r.length&&o.push(r),C(o,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}})}function Lh(t,n,e,o,r){i=e;var i,u={dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ip.parts.items({preprocess:function(t){return Hh(t,function(t,n){return"separator"===i[n].type})}})]};return{value:t,dom:u.dom,components:u.components,items:e}}function zh(t,n){return Z([ot(t,n)])}function Uh(t,n,e){t.getSystem().broadcastOn([Sb],{})}function jh(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function Wh(t){return t.getParam("width",Tb.DOM.getStyle(t.getElement(),"width"))}function Gh(t){return K.from(t.getParam("min_width")).filter(N)}function Xh(t){return K.from(t.getParam("min_height")).filter(N)}function Yh(t){return K.from(t.getParam("max_height")).filter(N)}function qh(t,n){t.on("init",function(){t.mode.isReadOnly()&&Kb(n,!0)}),t.on("SwitchMode",function(){return Kb(n,t.mode.isReadOnly())}),Db(t)&&t.setMode("readonly")}function Kh(t,n,e,o){var r=T(Y);return{type:"item",dom:n.dom,components:oy(n.optComponents),data:t.data,eventOrder:ey,hasSubmenu:t.triggersSubmenu,itemBehaviours:Z([ot("item-events",[ny(t,e),Zb(t,r),ty(t,r)]),$b.item(function(){return t.disabled||o.isDisabled()}),Jb(),et.config({})].concat(t.itemBehaviours))}}function Jh(t){return{value:t.value,meta:D({text:t.text.getOr("")},t.meta)}}function $h(t){return{dom:{tag:"div",classes:[Xv]},components:[Sa(bh.translate(t))]}}function Qh(t,n){return{dom:{tag:"div",classes:[Xv]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Sa(bh.translate(n))]}]}}function Zh(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(t=t,e=ry.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},t=t.split("+"),t=C(t,function(t){var n=t.toLowerCase().trim();return He(e,n)?e[n]:t}),ry.mac?t.join(""):t.join("+"))}};var e}function tv(t){return iy("checkmark",t,[qv])}function nv(t){return t=t.map(function(t){return{attributes:{title:bh.translate(t)}}}).getOr({}),D({tag:"div",classes:[Lv,zv]},t)}function ev(t,n,e,o){return void 0===o&&(o=K.none()),"color"===t.presets?sy(t,n,o):ly(t,n,e,o)}function ov(t){return{value:t}}function rv(t){return hy.test(t)||vy.test(t)}function iv(t){return rv(t)?K.some({value:vt(t,"#").toUpperCase()}):K.none()}function uv(t){return t={value:t.value.replace(hy,function(t,n,e,o){return n+n+e+e+o+o})},null===(t=vy.exec(t.value))?["FFFFFF","FF","FF","FF"]:t}function av(t){return(1===(t=t.toString(16)).length?"0"+t:t).toUpperCase()}function cv(t){return t=av(t.red)+av(t.green)+av(t.blue),ov(t)}function sv(t,n,e,o){return{red:t,green:n,blue:e,alpha:o}}function lv(t){var n=parseInt(t,10);return n.toString()===t&&0<=n&&n<=255}function fv(t){var n,e,o,r=(t.hue||0)%360,i=t.saturation/100,t=t.value/100,i=yy(0,by(i,1)),t=yy(0,by(t,1));if(0===i)n=e=o=xy(255*t);else{var r=r/60,u=t*i,a=u*(1-Math.abs(r%2-1)),i=t-u;switch(Math.floor(r)){case 0:n=u,e=a,o=0;break;case 1:n=a,e=u,o=0;break;case 2:n=0,e=u,o=a;break;case 3:n=0,e=a,o=u;break;case 4:n=a,e=0,o=u;break;case 5:n=u,e=0,o=a;break;default:n=e=o=0}n=xy(255*(n+i)),e=xy(255*(e+i)),o=xy(255*(o+i))}return sv(n,e,o,1)}function dv(t,n,e,o){return t=parseInt(t,10),n=parseInt(n,10),e=parseInt(e,10),o=parseFloat(o),sv(t,n,e,o)}function mv(t){var n;return"transparent"===t?K.some(sv(0,0,0,0)):null!==(n=wy.exec(t))?K.some(dv(n[1],n[2],n[3],"1")):null!==(n=Sy.exec(t))?K.some(dv(n[1],n[2],n[3],n[4])):K.none()}function gv(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"}var pv,hv,vv=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),bv="[data-mce-autocompleter]",yv=function(t){return Lc(t,bv)},xv=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},wv=function(t,n){return t.substring(n.length)},Sv=function(t,e,o,r){var n;return void 0===r&&(r=0),(n=e).collapsed&&3===n.startContainer.nodeType?(n=t.getParent(e.startContainer,t.isBlock)||t.getRoot(),Ah(t,e.startContainer,e.startOffset,function(t,n,e){return function(t,n,e){for(var o=n-1;0<=o;o--){var r=t.charAt(o);if(Bh(r))return K.none();if(r===e)break}return K.some(o)}(e,n,o).getOr(n)},n).bind(function(t){var n=e.cloneRange();return n.setStart(t.container,t.offset),n.setEnd(e.endContainer,e.endOffset),n.collapsed||0!==(t=xv(n)).lastIndexOf(o)||wv(t,o).length<r?K.none():K.some({text:wv(t,o),range:n,triggerChar:o})})):K.none()},kv=function(e,t){t.on("keypress compositionend",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel);function o(t,n){$(t,Ki(),{raw:n})}t.on("keydown",function(n){function t(){return e.getView().bind(gg.getHighlighted)}8===n.which&&e.onKeypress.throttle(n),e.isActive()&&(27===n.which&&e.cancelIfNecessary(),e.isMenuOpen()?13===n.which?(t().each(Eu),n.preventDefault()):40===n.which?(t().fold(function(){e.getView().each(gg.highlightFirst)},function(t){o(t,n)}),n.preventDefault(),n.stopImmediatePropagation()):37!==n.which&&38!==n.which&&39!==n.which||t().each(function(t){o(t,n),n.preventDefault(),n.stopImmediatePropagation()}):13!==n.which&&38!==n.which&&40!==n.which||e.cancelIfNecessary())}),t.on("NodeChange",function(t){e.isActive()&&!e.isProcessingAction()&&yv(w.fromDom(t.element)).isNone()&&e.cancelIfNecessary()})},Cv=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ov=function(n){return function(t){t=Rh(t.startContainer,t.startOffset);return!Ah(n,t.container,t.offset,function(t,n){return 0===n?-1:n},n.getRoot()).filter(function(t){t=t.container.data.charAt(t.offset-1);return!Bh(t)}).isSome()}},_v=function(n,e,t){return Ae(t.triggerChars,function(t){return Mh(n,e,t)})},Tv=function(n,t,e,o){void 0===o&&(o={});var t=t(),r=n.selection.getRng().startContainer.nodeValue,t=pe(t.lookupByChar(e.triggerChar),function(t){return e.text.length>=t.minChars&&t.matches.getOrThunk(function(){return Ov(n.dom)})(e.range,r,e.text)});return 0===t.length?K.none():(t=Cv.all(C(t,function(n){return n.fetch(e.text,n.maxResults,o).then(function(t){return{matchText:e.text,items:t,columns:n.columns,onAction:n.onAction,highlightOn:n.highlightOn}})})),K.some({lookupData:t,context:e}))},Ev=g([n("type"),xn("text")]),Dv=g([s("type","autocompleteitem"),s("active",!1),s("disabled",!1),s("meta",{}),n("value"),xn("text"),xn("icon")]),Av=g([n("type"),n("ch"),kn("minChars",1),s("columns",1),kn("maxResults",10),wn("matches"),gn("fetch"),gn("onAction"),En("highlightOn",[],li)]),Bv=function(t){return hi("Autocompleter.Separator",Ev,t)},Mv=function(t){return hi("Autocompleter.Item",Dv,t)},Fv=function(t){return hi("Autocompleter",Av,t)},Vg=[_n("disabled",!1),xn("tooltip"),xn("icon"),xn("text"),Tn("onSetup",function(){return Y})],Iv=g([n("type"),gn("onAction")].concat(Vg)),qm=[_n("active",!1)].concat(Vg),Rv=g(qm.concat([n("type"),gn("onAction")])),Ym=[Tn("predicate",U),On("scope","node",["node","editor"]),On("position","selection",["node","selection","line"])],Km=Vg.concat([s("type","contextformbutton"),s("primary",!1),gn("onAction"),wi("original",v)]),Gg=qm.concat([s("type","contextformbutton"),s("primary",!1),gn("onAction"),wi("original",v)]),Ng=Vg.concat([s("type","contextformbutton")]),ml=qm.concat([s("type","contextformtogglebutton")]),Xg=fn("type",{contextformbutton:Km,contextformtogglebutton:Gg}),Nv=g([s("type","contextform"),Tn("initValue",q("")),xn("label"),vn("commands",Xg),ki("launch",fn("type",{contextformbutton:Ng,contextformtogglebutton:ml}))].concat(Ym)),Pv=g([s("type","contexttoolbar"),n("items")].concat(Ym)),Vv=function(t){var n={};return x(t,function(t){n[t]={}}),Be(n)},Hv=((Lg=$0=$0||{})[Lg.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Lg[Lg.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX",$0),Lv="tox-menu-nav__js",zv="tox-collection__item",Uv="tox-swatch",jv={normal:Lv,color:Uv},Wv="tox-collection__item--enabled",Gv="tox-collection__item-icon",Xv="tox-collection__item-label",Yv="tox-collection__item-caret",qv="tox-collection__item-checkmark",Kv="tox-collection__item--active",Jv="tox-collection__item-container",$v="tox-collection__item-container--row",Qv=function(t){return O(jv,t).getOr(Lv)},Zv=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}},tb=function(t){var n=Zv(t);return{backgroundMenu:n.backgroundMenu,selectedMenu:n.selectedMenu,menu:n.menu,selectedItem:n.selectedItem,item:Qv(t)}},nb=function(t,n,e){e=Zv(e);return{tag:"div",classes:we([[e.menu,"tox-menu-"+n+"-column"],t?[e.hasIcons]:[]])}},eb=[ip.parts.items({})],ob=function(t,n,e){var o=Zv(e);return{dom:{tag:"div",classes:we([[o.tieredMenu]])},markers:tb(e)}},rb=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ip.parts.items({preprocess:"auto"!==t?Vh({tag:"div",classes:["tox-swatches__row"]},t):v})]}]}},ib=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ip.parts.items({preprocess:Vh({tag:"div",classes:["tox-collection__group"]},t)})]}},ub=function(n,e,t){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===n?["tox-collection--list"]:["tox-collection--grid"])},components:[ip.parts.items({preprocess:function(t){return"auto"!==n&&1<n?Vh({tag:"div",classes:["tox-collection__group"]},n)(t):Hh(t,function(t,n){return"separator"===e[n].type})}})]}},ab=function(t){return me(t,function(t){return"icon"in t&&void 0!==t.icon})},cb=function(t){return console.error(yi(t)),console.log(t),K.none()},sb=function(t,n,e,o,r){var i;return"color"===r?{value:t,dom:(i=rb(o)).dom,components:i.components,items:e}:"normal"===r&&"auto"===o?{value:t,dom:(i=ub(o,e)).dom,components:i.components,items:e}:"normal"===r&&1===o?{value:t,dom:(i=ub(1,e)).dom,components:i.components,items:e}:"normal"===r?{value:t,dom:(i=ub(o,e)).dom,components:i.components,items:e}:"listpreview"===r&&"auto"!==o?{value:t,dom:(i=ib(o)).dom,components:i.components,items:e}:{value:t,dom:nb(n,o,r),components:eb,items:e}},Gu=[n("type"),n("src"),xn("alt"),En("classes",[],li)],lb=g(Gu),qu=[n("type"),n("text"),xn("name"),En("classes",["tox-collection__item-label"],li)],fb=g(qu),Pg=on(function(){return sn("type",{cardimage:lb,cardtext:fb,cardcontainer:db})}),db=g([n("type"),Cn("direction","horizontal"),Cn("align","left"),Cn("valign","middle"),vn("items",Pg)]),hm=[_n("disabled",!1),xn("text"),xn("shortcut"),xi("value","value",Kr(function(){return E("menuitem-value")}),ci()),s("meta",{})],mb=g([n("type"),xn("label"),vn("items",Pg),Tn("onSetup",function(){return Y}),Tn("onAction",Y)].concat(hm)),gb=function(t){return hi("cardmenuitem",mb,t)},pb=g([n("type"),_n("active",!1),xn("icon")].concat(hm)),Pi=[n("type"),n("fancytype"),Tn("onAction",Y)],wl=[s("initData",{})].concat(Pi),Hg=[Dn("initData",{},[_n("allowCustomColors",!0),Sn("colors",ci())])].concat(Pi),hb=fn("fancytype",{inserttable:wl,colorswatch:Hg}),vb=g([n("type"),Tn("onSetup",function(){return Y}),Tn("onAction",Y),xn("icon")].concat(hm)),bb=g([n("type"),gn("getSubmenuItems"),Tn("onSetup",function(){return Y}),xn("icon")].concat(hm)),yb=g([n("type"),xn("icon"),_n("active",!1),Tn("onSetup",function(){return Y}),gn("onAction")].concat(hm)),xb=function(t,e,n){var o=cm(t.element,"."+n);return 0<o.length?(t=xe(o,function(t){var t=t.dom.getBoundingClientRect().top,n=o[0].dom.getBoundingClientRect().top;return Math.abs(t-n)>e}).getOr(o.length),K.some({numColumns:t,numRows:Math.ceil(o.length/t)})):K.none()},wb={namedEvents:zh,unnamedEvents:function(t){return zh(E("unnamed-events"),t)}},Sb=E("tooltip.exclusive"),kb=E("tooltip.show"),Cb=E("tooltip.hide"),qm=Object.freeze({__proto__:null,hideAllExclusive:Uh,setComponents:function(t,n,e,o){e.getTooltip().each(function(t){t.getSystem().isConnected()&&et.set(t,o)})}}),Km=Object.freeze({__proto__:null,events:function(r,i){function e(n){i.getTooltip().each(function(t){ql(t),r.onHide(n,t),i.clearTooltip()}),i.clearTimer()}return Mu(we([[Q(kb,function(o){i.resetTimer(function(){var n,t,e;n=o,i.isShowing()||(Uh(n),t=r.lazySink(n).getOrDie(),e=n.getSystem().build({dom:r.tooltipDom,components:r.tooltipComponents,events:Mu("normal"===r.mode?[Q(Xi(),function(t){J(n,kb)}),Q(Wi(),function(t){J(n,Cb)})]:[]),behaviours:Z([et.config({})])}),i.setTooltip(e),Cm(t,e),r.onShow(n,e),ym.position(t,e,{anchor:r.anchor(n)}))},r.delay)}),Q(Cb,function(t){i.resetTimer(function(){e(t)},r.delay)}),Q(au(),function(t,n){n.universal||de(n.channels,Sb)&&e(t)}),Pu(function(t){e(t)})],"normal"===r.mode?[Q(Yi(),function(t){J(t,kb)}),Q(iu(),function(t){J(t,Cb)}),Q(Xi(),function(t){J(t,kb)}),Q(Wi(),function(t){J(t,Cb)})]:[Q(_u(),function(t,n){J(t,kb)}),Q(Tu(),function(t){J(t,Cb)})]]))}}),Gg=[i("lazySink"),i("tooltipDom"),s("exclusive",!0),s("tooltipComponents",[]),s("delay",300),On("mode","normal",["normal","follow-highlight"]),s("anchor",function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:q([hs,ps,fs,ms,ds,gs]),onRtl:q([hs,ps,fs,ms,ds,gs])}}}),t("onHide"),t("onShow")],Ob=Qa({fields:Gg,name:"tooltipping",active:Km,state:Object.freeze({__proto__:null,init:function(){function e(){o.on(clearTimeout)}var o=Us(),t=Us(),n=q("not-implemented");return ia({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:e,resetTimer:function(t,n){e(),o.set(setTimeout(t,n))},readState:n})}}),apis:qm}),_b=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Tb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Eb=tinymce.util.Tools.resolve("tinymce.EditorManager"),Db=function(t){return t.getParam("readonly",!1,"boolean")},Ab=function(t){return K.from(t.getParam("max_width")).filter(N)},Bb=function(t){return!1!==t.getParam("menubar",!0,"boolean")},Mb=function(t){var n=t.getParam("toolbar",!0),e=!0===n,o=d(n),n=h(n)&&0<n.length;return!Ib(t)&&(n||o||e)},Fb=function(n){var t=lt(9,function(t){return n.getParam("toolbar"+(t+1),!1,"string")}),t=pe(t,function(t){return"string"==typeof t});return 0<t.length?K.some(t):K.none()},Ib=function(t){return Fb(t).fold(function(){return 0<t.getParam("toolbar",[],"string[]").length},j)},Rb=((Xg=pv=pv||{}).default="wrap",Xg.floating="floating",Xg.sliding="sliding",Xg.scrolling="scrolling",function(t){return t.getParam("toolbar_mode","","string")}),Nb=((Ng=hv=hv||{}).auto="auto",Ng.top="top",Ng.bottom="bottom",function(t){return t.getParam("toolbar_groups",{},"object")}),Pb=function(t){return t.getParam("toolbar_location",hv.auto,"string")},Vb=function(t){return Pb(t)===hv.bottom},Hb=function(t){var n;return t.inline?0<(n=t.getParam("fixed_toolbar_container","","string")).length?Hc(Qo(),n):(n=t.getParam("fixed_toolbar_container_target"),I(n)?K.some(w.fromDom(n)):K.none()):K.none()},Lb=function(t){return t.inline&&Hb(t).isSome()},zb=function(t){return Hb(t).getOrThunk(function(){return qo(Yo(w.fromDom(t.getElement())))})},Ub=function(t){return t.inline&&!Bb(t)&&!Mb(t)&&!Ib(t)},jb=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Lb(t)&&!Ub(t)},Wb=function(t){t=t.getParam("menu");return t?Ie(t,function(t){return D(D({},t),{items:t.items})}):{}},Gb=function(t){return t.getParam("menubar")},Xb=function(t){return t.getParam("toolbar",!0)},Yb="silver.readonly",qb=g([Si("readonly",fi)]),Kb=function(t,n){var e=t.outerContainer.element;n&&(t.mothership.broadcastOn([Dm()],{target:e}),t.uiMothership.broadcastOn([Dm()],{target:e})),t.mothership.broadcastOn([Yb],{readonly:n}),t.uiMothership.broadcastOn([Yb],{readonly:n})},Jb=function(){var t;return Es.config({channels:((t={})[Yb]={schema:qb,onReceive:function(t,n){nt.set(t,n.readonly)}},t)})},$b={item:function(t){return nt.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},button:function(t){return nt.config({disabled:t})},splitButton:function(t){return nt.config({disabled:t,disableClass:"tox-tbtn--disabled"})},toolbarButton:function(t){return nt.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})}},Qb=function(t,n){var e=t.getApi(n);return function(t){t(e)}},Zb=function(n,e){return Nu(function(t){Qb(n,t)(function(t){t=n.onSetup(t);R(t)&&e.set(t)})})},ty=function(n,e){return Pu(function(t){return Qb(n,t)(e.get())})},ny=function(e,o){return Hu(function(t,n){Qb(e,t)(e.onAction),e.triggersSubmenu||o!==Hv.CLOSE_ON_EXECUTE||(J(t,du()),n.stop())})},ey=((ml={})[cu()]=["disabling","alloy.base.behaviour","toggling","item-events"],ml),oy=Ue,ry=tinymce.util.Tools.resolve("tinymce.Env"),iy=function(t,n,e){return Oh(t,{tag:"div",classes:e=void 0===e?[Gv]:e},n)},uy=function(t,n){return{dom:{tag:"div",classes:n,innerHtml:t}}},ay=function(t,n){var e="vertical"===t.direction?"tox-collection__item-container--column":$v,o="left"===t.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[Jv,e,o,function(){switch(t.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:n}},cy=function(t,n,e){return{dom:{tag:"img",classes:n,attributes:{src:t,alt:e.getOr("")}}}},sy=function(t,o,r){var n,e=t.ariaLabel,i=t.value,t=t.iconContent.map(function(t){var n=o.icons,e=r;return n=n(),kh(t,n).or(e).getOrThunk(wh(n))});return{dom:(n=Uv,t=t.getOr(""),n={tag:"div",attributes:e.map(function(t){return{title:o.translate(t)}}).getOr({}),classes:[n]},D(D({},n),"custom"===i?{tag:"button",classes:X(X([],n.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:t}:"remove"===i?{classes:X(X([],n.classes,!0),["tox-swatch--remove"],!1),innerHtml:t}:{attributes:D(D({},n.attributes),{"data-mce-color":i}),styles:{"background-color":i}})),optComponents:[]}},ly=function(t,n,e,o){var r={tag:"div",classes:[Gv]},e=e?t.iconContent.map(function(t){return Oh(t,r,n.icons,o)}).orThunk(function(){return K.some({dom:r})}):K.none(),i=t.checkMark,u=K.from(t.meta).fold(function(){return $h},function(t){return He(t,"style")?H(Qh,t.style):$h}),a=t.htmlContent.fold(function(){return t.textContent.map(u)},function(t){return K.some(uy(t,[Xv]))});return{dom:nv(t.ariaLabel),optComponents:[e,a,t.shortcutContent.map(Zh),i,t.caret]}},fy=function(t,n){return O(t,"tooltipWorker").map(function(e){return[Ob.config({lazySink:n.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{type:"submenu",item:t,overrides:{maxHeightFunction:el}}},mode:"follow-highlight",onShow:function(n,t){e(function(t){Ob.setComponents(n,[ka({element:w.fromDom(t)})])})}})]}).getOr([])},dy=function(t){return Tb.DOM.encode(t)},my=function(t,n){t=bh.translate(t),t=dy(t);return 0<n.length?(n=new RegExp(_b(n),"gi"),t.replace(n,function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"})):t},gy=function(t,e){return C(t,function(t){switch(t.type){case"cardcontainer":return ay(t,gy(t.items,e));case"cardimage":return cy(t.src,t.classes,t.alt);case"cardtext":var n=t.name.exists(function(t){return de(e.cardText.highlightOn,t)})?K.from(e.cardText.matchText).getOr(""):"";return uy(my(t.text,n),t.classes)}})},py=hf(np(),ep()),hy=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,vy=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,by=Math.min,yy=Math.max,xy=Math.round,wy=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Sy=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,ky=function(t){var t=uv(t),n=parseInt(t[1],16),e=parseInt(t[2],16),t=parseInt(t[3],16);return sv(n,e,t,1)},Cy=sv(255,0,0,1),Oy=function(t){return t.fire("SkinLoaded")},_y=function(t,n){return t.fire("SkinLoadError",n)},Ty=function(t,n){return t.fire("ResizeContent",n)},Ey=function(t,n){return t.fire("ScrollContent",n)},Dy=function(t,n,e){return{hue:t,saturation:n,value:e}},Ay=function(t){var n=0,e=0,o=0,r=t.red/255,i=t.green/255,t=t.blue/255,u=Math.min(r,Math.min(i,t)),a=Math.max(r,Math.max(i,t));return u===a?Dy(0,0,100*(o=u)):(n=r===u?3:t===u?1:5,e=(a-u)/a,o=a,Dy(Math.round(n=60*(n-(r===u?i-t:t===u?r-i:t-r)/(a-u))),Math.round(100*e),Math.round(100*o)))},By=function(t){return Ay(ky(t))},My=function(t){return cv(fv(t))},Fy=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Iy="tinymce-custom-colors";var Ry,Ny,Py="choiceitem",Vy=[{type:Py,text:"Light Green",value:"#BFEDD2"},{type:Py,text:"Light Yellow",value:"#FBEEB8"},{type:Py,text:"Light Red",value:"#F8CAC6"},{type:Py,text:"Light Purple",value:"#ECCAFA"},{type:Py,text:"Light Blue",value:"#C2E0F4"},{type:Py,text:"Green",value:"#2DC26B"},{type:Py,text:"Yellow",value:"#F1C40F"},{type:Py,text:"Red",value:"#E03E2D"},{type:Py,text:"Purple",value:"#B96AD9"},{type:Py,text:"Blue",value:"#3598DB"},{type:Py,text:"Dark Turquoise",value:"#169179"},{type:Py,text:"Orange",value:"#E67E23"},{type:Py,text:"Dark Red",value:"#BA372A"},{type:Py,text:"Dark Purple",value:"#843FA1"},{type:Py,text:"Dark Blue",value:"#236FA1"},{type:Py,text:"Light Gray",value:"#ECF0F1"},{type:Py,text:"Medium Gray",value:"#CED4D9"},{type:Py,text:"Gray",value:"#95A5A6"},{type:Py,text:"Dark Gray",value:"#7E8C8D"},{type:Py,text:"Navy Blue",value:"#34495E"},{type:Py,text:"Black",value:"#000000"},{type:Py,text:"White",value:"#ffffff"}],Hy=(void 0===(Ry=10)&&(Ry=10),Ym=Fy.getItem(Iy),Ym=d(Ym)?JSON.parse(Ym):[],Ny=Ry-(Ym=Ym).length<0?Ym.slice(0,Ry):Ym,{add:function(t){!function(t,n){t=fe(t,n);return-1===t?K.none():K.some(t)}(Ny,t).each(Ly),Ny.unshift(t),Ny.length>Ry&&Ny.pop(),Fy.setItem(Iy,JSON.stringify(Ny))},state:function(){return Ny.slice(0)}});function Ly(t){Ny.splice(t,1)}function zy(t){for(var n=[],e=0;e<t.length;e+=2)n.push({text:t[e+1],value:"#"+function(r){return iv(r).orThunk(function(){return mv(r).map(cv)}).getOrThunk(function(){var t=document.createElement("canvas"),n=(t.height=1,t.width=1,t.getContext("2d")),t=(n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=r,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data),n=t[0],e=t[1],o=t[2],t=t[3];return cv(sv(n,e,o,t))})}(t[e]).value,type:"choiceitem"});return n}function Uy(t){return!1!==t.getParam("custom_colors")}function jy(t){return void 0!==(t=t.getParam("color_map"))?zy(t):Vy}function Wy(t){Hy.add(t)}function Gy(i){i.addCommand("mceApplyTextcolor",function(t,n){var e,o,r;o=t,r=n,(e=i).undoManager.transact(function(){e.focus(),e.formatter.apply(o,{value:r}),e.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(t){var n,e;e=t,(n=i).undoManager.transact(function(){n.focus(),n.formatter.remove(e,{value:null},null,!0),n.nodeChanged()})})}function Xy(t){n=(n=jy(t)).length;var n=Math.max(5,Math.ceil(Math.sqrt(n)));return t.getParam("color_cols",n,"number")}function Yy(n,e,t,o){"custom"===t?Qy(n)(function(t){t.each(function(t){Wy(t),n.execCommand("mceApplyTextcolor",e,t),o(t)})},_0):"remove"===t?(o(""),n.execCommand("mceRemoveTextcolor",e)):(o(t),n.execCommand("mceApplyTextcolor",e,t))}function qy(n,e){return function(t){t(E0(n,e))}}function Ky(t,n,e){t.setIconFill("forecolor"===n?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",e)}function Jy(r,e,i,t,o){r.ui.registry.addSplitButton(e,{tooltip:t,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(n){var e,o;return e=i,r.dom.getParents(r.selection.getStart(),function(t){(t=t.style["forecolor"===e?"color":"background-color"])&&(o=o||t)}),K.from(o).bind(function(t){return mv(t).map(function(t){t=cv(t).value;return bt(n.toLowerCase(),t)})}).getOr(!1)},columns:Xy(r),fetch:qy(jy(r),Uy(r)),onAction:function(t){Yy(r,i,o.get(),Y)},onItemAction:function(t,n){Yy(r,i,n,function(t){o.set(t),t={name:e,color:t},r.fire("TextColorChange",t)})},onSetup:function(n){Ky(n,e,o.get());function t(t){t.name===e&&Ky(n,t.name,t.color)}return r.on("TextColorChange",t),function(){r.off("TextColorChange",t)}}})}function $y(n,t,e,o){n.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(t){Yy(n,e,t.value,Y)}}]}})}function Qy(r){return function(e,t){var o=!1;r.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:t},onAction:function(t,n){"hex-valid"===n.name&&(o=n.value)},onSubmit:function(t){var n=t.getData().colorpicker;o?(e(K.from(n)),t.close()):r.windowManager.alert(r.translate(["Invalid hex color code: {0}",n]))},onClose:Y,onCancel:function(){e(K.none())}})}}function Zy(t,n){return Sa(n+"x"+t)}function tx(t,n,e,o,r){function i(t){return r?D(D({},t),{shortcut:K.none(),icon:t.text.isSome()?K.none():t.icon}):t}var u=e.shared.providers;switch(t.type){case"menuitem":return hi("menuitem",vb,t).fold(cb,function(t){return K.some(V0(i(t),n,u,o))});case"nestedmenuitem":return hi("nestedmenuitem",bb,t).fold(cb,function(t){return K.some(H0(i(t),n,u,o,r))});case"togglemenuitem":return hi("togglemenuitem",yb,t).fold(cb,function(t){return K.some(L0(i(t),n,u,o))});case"separator":return hi("separatormenuitem",Ev,t).fold(cb,function(t){return K.some(P0(t))});case"fancymenuitem":return hi("fancymenuitem",hb,t).fold(cb,function(t){return z0(i(t),e)});default:return console.error("Unknown item in general menu",t),K.none()}}function nx(t,n,e){return Lc(t,n,e).isSome()}function ex(e,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r=setTimeout(function(){e.apply(null,t),r=null},o)}}}function ox(t){return void 0===(t=t.raw).touches||1!==t.touches.length?K.none():K.some(t.touches[0])}function rx(e){var r=Us(),o=T(!1),i=ex(function(t){e.triggerEvent(fu(),t),o.set(!0)},400),u=Bi([{key:Vi(),value:function(n){return ox(n).each(function(t){i.cancel();t={x:t.clientX,y:t.clientY,target:n.target};i.schedule(n),o.set(!1),r.set(t)}),K.none()}},{key:Hi(),value:function(t){return i.cancel(),ox(t).each(function(o){r.on(function(t){var n,e;n=o,t=t,e=Math.abs(n.clientX-t.x),n=Math.abs(n.clientY-t.y),(5<e||5<n)&&r.clear()})}),K.none()}},{key:Li(),value:function(n){i.cancel();return r.get().filter(function(t){return Io(t.target,n.target)}).map(function(t){return o.get()?(n.prevent(),!1):e.triggerEvent(lu(),n)})}}]);return{fireIfReady:function(n,t){return O(u,t).bind(function(t){return t(n)})}}}function ix(){return Ao().browser.isFirefox()}function ux(n,t){var e,o=D({stopBackspace:!0},t),r=rx(o),i=C(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return Ws(n,t,function(n){r.fireIfReady(n,t).each(function(t){t&&n.kill()}),o.triggerEvent(t,n)&&n.kill()})}),u=Us(),a=Ws(n,"paste",function(n){r.fireIfReady(n,"paste").each(function(t){t&&n.kill()}),o.triggerEvent("paste",n)&&n.kill(),u.set(setTimeout(function(){o.triggerEvent(uu(),n)},0))}),c=Ws(n,"keydown",function(t){var n;o.triggerEvent("keydown",t)?t.kill():!o.stopBackspace||(n=t).raw.which!==pg[0]||de(["input","textarea"],Je(n.target))||nx(n.target,'[contenteditable="true"]')||t.prevent()}),s=(t=n,e=function(t){o.triggerEvent("focusin",t)&&t.kill()},ix()?Gs(t,"focus",e):Ws(t,"focusin",e)),l=Us(),f=(t=n,e=function(t){o.triggerEvent("focusout",t)&&t.kill(),l.set(setTimeout(function(){o.triggerEvent(iu(),t)},0))},ix()?Gs(t,"blur",e):Ws(t,"focusout",e));return{unbind:function(){x(i,function(t){t.unbind()}),c.unbind(),s.unbind(),f.unbind(),a.unbind(),u.on(clearTimeout),l.on(clearTimeout)}}}function ax(t,o,n,e,r,i){var u,a,t=t(o,e),c=(n=n,r=r,u=T(!1),a=T(!1),{stop:function(){u.set(!0)},cut:function(){a.set(!0)},isStopped:u.get,isCut:a.get,event:n,setSource:r.set,getSource:r.get});return t.fold(function(){return i.logEventNoHandlers(o,e),Y0.complete()},function(n){var e=n.descHandler;return Jn(e)(c),c.isStopped()?(i.logEventStopped(o,n.element,e.purpose),Y0.stopped()):c.isCut()?(i.logEventCut(o,n.element,e.purpose),Y0.complete()):zo(n.element).fold(function(){return i.logNoParent(o,n.element,e.purpose),Y0.complete()},function(t){return i.logEventResponse(o,n.element,e.purpose),Y0.resume(t)})})}function cx(t,n,e){n=n,o=T(!1);var o,r={stop:function(){o.set(!0)},cut:Y,isStopped:o.get,isCut:U,event:n,setSource:z("Cannot set source of a broadcasted event"),getSource:z("Cannot get source of a broadcasted event")};return x(t,function(t){t=t.descHandler;Jn(t)(r)}),r.isStopped()}function sx(t,n,e,o,r){var i=X0(e,o);return q0(t,n,e,o,i,r)}function lx(){var i={};return{registerId:function(o,r,t){Fe(t,function(t,n){var e=void 0!==i[n]?i[n]:{};e[r]={cHandler:H.apply(void 0,[(t=t).handler].concat(o)),purpose:t.purpose},i[n]=e})},unregisterId:function(e){Fe(i,function(t,n){He(t,e)&&delete t[e]})},filterByType:function(t){return O(i,t).map(function(t){return Pe(t,function(t,n){return{id:n,descHandler:t}})}).getOr([])},find:function(t,n,e){return O(i,n).bind(function(o){return Fi(e,function(t){return n=o,Un(e=t).bind(function(t){return O(n,t)}).map(function(t){return{element:e,descHandler:t}});var n,e},t)})}}}function fx(){function i(e){var t=e.element;return Un(t).getOrThunk(function(){var t="uid-",n=e.element;return t=E(Ku+t),zn(n,t),t})}var u=lx(),a={},c=function(t){Un(t.element).each(function(t){delete a[t],u.unregisterId(t)})};return{find:function(t,n,e){return u.find(t,n,e)},filter:function(t){return u.filterByType(t)},register:function(t){var n=i(t);if(Le(a,n)){var e=t,o=n,r=a[o];if(r!==e)throw new Error('The tagId "'+o+'" is already used by: '+Wu(r.element)+"\nCannot use it for: "+Wu(e.element)+"\nThe conflicting element is"+($o(r.element)?" ":" not ")+"already in the DOM");c(e)}u.registerId([t],n,t.events),a[n]=t},unregister:c,getById:function(t){return O(a,t)}}}function dx(i,u){function t(o){return function(n,e){Lc(e.event.target,"[data-collection-item-value]").each(function(t){o(n,e,t,nr(t,"data-collection-item-value"))})}}function n(t,n){C(cm(t.element,".tox-collection__item"),n)}var e,o=i.label.map(function(t){return ow(t,u)}),r=t(function(t,n,e,o){n.stop(),u.isDisabled()||$(t,aw,{name:i.name,value:o})}),r=[Q(Xi(),t(function(t,n,e){As(e)})),Q(Zi(),r),Q(lu(),r),Q(Yi(),t(function(t,n,e){Hc(t.element,"."+Kv).each(function(t){pa(t,Kv)}),ma(e,Kv)})),Q(qi(),t(function(t){Hc(t.element,"."+Kv).each(function(t){pa(t,Kv)})})),Hu(t(function(t,n,e,o){$(t,aw,{name:i.name,value:o})}))],a=S.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==i.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:v},behaviours:Z([nt.config({disabled:u.isDisabled,onDisabled:function(t){n(t,function(t){ma(t,"tox-collection__item--state-disabled"),_(t,"aria-disabled",!0)})},onEnabled:function(t){n(t,function(t){pa(t,"tox-collection__item--state-disabled"),rr(t,"aria-disabled")})}}),Jb(),et.config({}),tt.config({store:{mode:"memory",initialValue:[]},onSetValue:function(e,t){var n=e;t=C(t,function(t){var n=bh.translate(t.text),e=1===i.columns?'<div class="tox-collection__item-label">'+n+"</div>":"",o='<div class="tox-collection__item-icon">'+t.icon+"</div>",r={_:" "," - ":" ","-":" "},n=n.replace(/\_| \- |\-/g,function(t){return r[t]});return'<div class="tox-collection__item'+(u.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Z0.encodeAllRaw(t.value)+'" title="'+n+'" aria-label="'+n+'">'+o+e+"</div>"}),t="auto"!==i.columns&&1<i.columns?ft(t,i.columns):[t],t=C(t,function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}),Ln(n.element,t.join("")),"auto"===i.columns&&xb(e,5,"tox-collection__item").each(function(t){var n=t.numRows,t=t.numColumns;M.setGridSize(e,n,t)}),J(e,dw)}}),Q0.config({}),M.config((e=i.columns,a="normal",1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===a?".tox-swatches__row":".tox-collection__group",cell:"color"===a?"."+Uv:"."+zv}})),ot("collection-events",r)]),eventOrder:((e={})[cu()]=["disabling","alloy.base.behaviour","collection-events"],e)});return tw(o,a,["tox-form__group--collection"],[])}function mx(t){return{tag:t.tag,attributes:D({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}function gx(t){function o(t){n()?i(t):r.push(t)}function n(){return e.isSome()}var e=K.none(),r=[],i=function(n){e.each(function(t){setTimeout(function(){n(t)},0)})};return t(function(t){n()||(e=K.some(t),x(r,i),r=[])}),{get:o,map:function(e){return gx(function(n){o(function(t){n(e(t))})})},isReady:n}}function px(t){return t=Je(t),de(Sw,t)}function hx(t,n){var e=n.getRoot(t).getOr(t.element);pa(e,n.invalidClass),n.notify.each(function(n){px(t.element)&&_(t.element,"aria-invalid",!1),n.getContainer(t).each(function(t){Ln(t,n.validHtml)}),n.onValid(t)})}function vx(n,t,e,o){var r=t.getRoot(n).getOr(n.element);ma(r,t.invalidClass),t.notify.each(function(t){px(n.element)&&_(n.element,"aria-invalid",!0),t.getContainer(n).each(function(t){Ln(t,o)}),t.onInvalid(n,o)})}function bx(n,t,e){return t.validator.fold(function(){return ww.pure(B.value(!0))},function(t){return t.validate(n)})}function yx(n,e,t){return e.notify.each(function(t){t.onValidate(n)}),bx(n,e).map(function(t){return n.getSystem().isConnected()?t.fold(function(t){return vx(n,e,0,t),B.error(t)},function(t){return hx(n,e),B.value(t)}):B.error("No longer in system")})}function xx(t,n,e,o,r,i){var u=Cw.getCoupled(e,"sandbox");return(l.isOpen(u)?Dw:Ew)(t,n,e,u,o,r,i)}function wx(o,r,i){var u=zc(),t=Bw(r,o);return{dom:{tag:"div",classes:o.sandboxClasses,attributes:{id:u.id,role:"listbox"}},behaviours:Vm.augment(o.sandboxBehaviours,[tt.config({store:{mode:"memory",initialValue:r}}),l.config({onOpen:function(t,n){var e=_w(o,r);u.link(r.element),o.matchWidth&&Aw(e.hotspot,n,o.useMinWidth),o.onOpen(e,t,n),void 0!==i&&void 0!==i.onOpen&&i.onOpen(t,n)},onClose:function(t,n){u.unlink(r.element),void 0!==i&&void 0!==i.onClose&&i.onClose(t,n)},isPartOf:function(t,n,e){return jc(n,e)||jc(r,e)},getAttachPoint:function(){return t().getOrDie()}}),y.config({find:function(t){return l.getState(t).bind(function(t){return y.getCurrent(t)})}}),Es.config({channels:D(D({},Fm({isExtraPart:U})),Rm({doReposition:Mw}))})])}}function Sx(t){t=Cw.getCoupled(t,"sandbox"),Mw(t)}function kx(){return[s("sandboxClasses",[]),Vm.field("sandboxBehaviours",[y,Es,l,tt])]}function Cx(e,n,o){function r(t,n){$(t,Nw,{value:n})}var i,u,t=S.parts.field({factory:gw,inputClasses:["tox-textfield"],onSetValue:function(t){return kw.run(t).get(Y)},inputBehaviours:Z([nt.config({disabled:n.providers.isDisabled}),Jb(),Q0.config({}),kw.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return zo(t.element)},notify:{onValid:function(t){var n=tt.getValue(t);$(t,Rw,{color:n})}},validator:{validateOnLoad:!1,validate:function(t){var n=tt.getValue(t);return 0===n.length?ww.pure(B.value(!0)):(t=w.fromTag("span"),A(t,"background-color",n),t=lr(t,"background-color").fold(function(){return B.error("blah")},function(t){return B.value(n)}),ww.pure(t))}}})]),selectOnFocus:!1}),a=e.label.map(function(t){return ow(t,n.providers)}),c=it((i={dom:{tag:"span",attributes:{"aria-label":n.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ds,fs,hs]},onLtr:function(){return[fs,ds,hs]}},components:[],fetch:qy(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:function(t,e){c.getOpt(t).each(function(n){"custom"===e?o.colorPicker(function(t){t.fold(function(){return J(n,Pw)},function(t){r(n,t),Wy(t)})},"#ffffff"):r(n,"remove"===e?"":e)})}},u=n,Fw.sketch({dom:i.dom,components:i.components,toggleClass:"mce-active",dropdownBehaviours:Z([$b.button(u.providers.isDisabled),Jb(),Iw.config({}),Q0.config({})]),layouts:i.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:u.getSink,fetch:function(n){return ww.nu(function(t){return i.fetch(t)}).map(function(t){return K.from(W0(Xr(D0(E("menu-value"),t,function(t){i.onItemAction(n,t)},i.columns,i.presets,Hv.CLOSE_ON_EXECUTE,U,u.providers),{movement:B0(i.columns,i.presets)})))})},parts:{menu:ob(!1,1,i.presets)}})));return S.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[t,c.asSpec()]}]),fieldBehaviours:Z([ot("form-field-events",[Q(Rw,function(t,n){c.getOpt(t).each(function(t){A(t.element,"background-color",n.event.color)}),$(t,rw,{name:e.name})}),Q(Nw,function(n,e){S.getField(n).each(function(t){tt.setValue(t,e.event.value),y.getCurrent(n).each(rt.focus)})}),Q(Pw,function(n,t){S.getField(n).each(function(t){y.getCurrent(n).each(rt.focus)})})])])})}function Ox(n){return $m({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold(function(){return{}},function(o){return{events:Mu([Pn(Vi(),function(t,n,e){return o(t,e)},[t]),Pn(Ui(),function(t,n,e){return o(t,e)},[t]),Pn(ji(),function(t,n,e){e.mouseIsDown.get()&&o(t,e)},[t])])}})}})}function _x(t){return t=t.event.raw,Hw(t)?void 0!==t.touches&&1===t.touches.length?K.some(t.touches[0]).map(function(t){return vr(t.clientX,t.clientY)}):K.none():void 0!==t.clientX?K.some(t).map(function(t){return vr(t.clientX,t.clientY)}):K.none()}function Tx(t){return t.model.minX-1}function Ex(t){return t.model.minY-1}function Dx(t){return t.model.maxX+1}function Ax(t){return t.model.maxY+1}function Bx(t,n,e){return n(t)-e(t)}function Mx(t){return Ww(t)/2}function Fx(t){return Gw(t)/2}function Ix(t,n){return void 0!==t[n+"-edge"]}function Rx(t,n){return{x:t,y:n}}function Nx(t,n){$(t,Vw(),{value:n})}function Px(t,n,e){return Math.max(n,Math.min(e,t))}function Vx(t,n,e){return e={min:Lw(n),max:Uw(n),range:Ww(n),value:e,step:Xw(n),snap:Yw(n),snapStart:qw(n),rounded:Kw(n),hasMinEdge:Jw(n),hasMaxEdge:$w(n),minBound:sS(t),maxBound:lS(t),screenRange:mS(t)},oS(e)}function Hx(e){return function(t,n){return function(t,n,e){t=(0<t?eS:nS)(tS(e).x,Lw(e),Uw(e),Xw(e));return vS(n,bS(t)),K.some(t)}(e,t,n).map(j)}}function Lx(t,n,e,o,r,i){i=i,e=e,o=o,r=r,a=mS(u=n),o=o.bind(function(t){return K.some(pS(t,u))}).getOr(0),r=r.bind(function(t){return K.some(pS(t,u))}).getOr(a),e={min:Lw(i),max:Uw(i),range:Ww(i),value:e,hasMinEdge:Jw(i),hasMaxEdge:$w(i),minBound:sS(u),minOffset:0,maxBound:lS(u),maxOffset:a,centerMinEdge:o,centerMaxEdge:r};var u,a,i=rS(e);return sS(n)-sS(t)+i}function zx(t,n,e){return e={min:zw(n),max:jw(n),range:Gw(n),value:e,step:Xw(n),snap:Yw(n),snapStart:qw(n),rounded:Kw(n),hasMinEdge:Qw(n),hasMaxEdge:Zw(n),minBound:fS(t),maxBound:dS(t),screenRange:gS(t)},oS(e)}function Ux(e){return function(t,n){return function(t,n,e){t=(0<t?eS:nS)(tS(e).y,zw(e),jw(e),Xw(e));return yS(n,xS(t)),K.some(t)}(e,t,n).map(j)}}function jx(t,n,e,o,r,i){i=i,e=e,o=o,r=r,a=gS(u=n),o=o.bind(function(t){return K.some(hS(t,u))}).getOr(0),r=r.bind(function(t){return K.some(hS(t,u))}).getOr(a),e={min:zw(i),max:jw(i),range:Gw(i),value:e,hasMinEdge:Qw(i),hasMaxEdge:Zw(i),minBound:fS(u),minOffset:0,maxBound:dS(u),maxOffset:a,centerMinEdge:o,centerMaxEdge:r};var u,a,i=rS(e);return fS(n)-fS(t)+i}function Wx(i,u){return function(t,n){return t=t,n=n,e=0<(e=i)?eS:nS,r=(o=u)?tS(n).x:e(tS(n).x,Lw(n),Uw(n),Xw(n)),o=o?e(tS(n).y,zw(n),jw(n),Xw(n)):tS(n).y,wS(t,SS(r,o)),K.some(r).map(j);var e,o,r}}function Gx(t){return"<alloy.field."+t+">"}function Xx(o,t){return{uid:o.uid,dom:o.dom,components:t,behaviours:Pm(o.formBehaviours,[tt.config({store:{mode:"manual",getValue:function(t){t=rg(t,o);return Ie(t,function(t,e){return t().bind(function(t){var n=y.getCurrent(t);return DS(n,new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+Wu(t.element)))}).map(tt.getValue)})},setValue:function(e,t){Fe(t,function(n,t){og(e,o,t).each(function(t){y.getCurrent(t).each(function(t){tt.setValue(t,n)})})})}}})]),apis:{getField:function(t,n){return og(t,o,n).bind(y.getCurrent)}}}}function Yx(v,b){return dg({name:"ColourPicker",configFields:[i("dom"),s("onValidHex",Y),s("onInvalidHex",Y)],factory:function(t){function n(t,n,e){g.getOpt(t).each(function(t){l.setHue(t,e)})}function e(t,n){p.getOpt(t).each(function(t){s.updateHex(t,n)})}function o(t,n,e){m.getOpt(t).each(function(t){kS.setValue(t,{y:f(e)})})}function r(t,n){g.getOpt(t).each(function(t){l.setThumb(t,n)})}function i(n,e,o,t){h(e,o),x(t,function(t){t(n,e,o)})}var u,a,c,s=RS(v,b,t.onValidHex,t.onInvalidHex),l=NS(v,b),f=function(t){return 100-t/360*100},d={paletteRgba:T(Cy),paletteHue:T(0)},m=it(TS(v,b)),g=it(l.sketch({})),p=it(s.sketch({})),h=function(t,n){t=ky(t);d.paletteRgba.set(t),d.paletteHue.set(n)};return{uid:t.uid,dom:t.dom,components:[g.asSpec(),m.asSpec(),p.asSpec()],behaviours:Z([ot("colour-picker-events",[Q(CS,(c=[n,o,r],function(t,n){var n=n.event.hex,e=By(n);i(t,n,e.hue,c)})),Q(_S,(a=[e],function(t,n){var n=n.event.value,e=d.paletteHue.get(),n=Dy(e,n.x,100-n.y),n=My(n);i(t,n,e,a)})),Q(OS,(u=[n,e],function(t,n){var n=(100-n.event.value.y)/100*360,e=d.paletteRgba.get(),e=Ay(e),e=Dy(n,e.saturation,e.value),e=My(e);i(t,e,n,u)}))]),y.config({find:function(t){return p.getOpt(t)}}),M.config({mode:"acyclic"})])}}})}function qx(t){return HS(t)}function Kx(t,n,e){return tt.config(Xr({store:{mode:"manual",getValue:n,setValue:e}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))}function Jx(t,n,e){return Kx(t,function(t){return n(t.element)},function(t,n){return e(t.element,n)})}function $x(o,r){function n(t,n){n.stop()}function e(t){return function(n,e){x(t,function(t){t(n,e)})}}function i(t,n){nt.isDisabled(t)||(n=n.event.raw,a(t,n.dataTransfer.files))}function u(t,n){n=n.event.raw.target,a(t,n.files)}var a=function(t,n){var e;tt.setValue(t,(n=n,e=zS.explode(r.getSetting("images_file_types",YS,"string")),pe(De(n),function(n){return me(e,function(t){return Xe(n.name.toLowerCase(),"."+t.toLowerCase())})}))),$(t,rw,{name:o.name})},c=it({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Z([ot("input-file-events",[Ru(Zi()),Ru(lu())])])}),t=o.label.map(function(t){return ow(t,r)}),s=S.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Z([XS([]),PS.self(),nt.config({}),m.config({toggleClass:"dragenter",toggleOnExecute:!1}),ot("dropzone-events",[Q("dragenter",e([n,m.toggle])),Q("dragleave",e([n,m.toggle])),Q("dragover",n),Q("drop",e([n,i])),Q(Qi(),u)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:r.translate("Drop an image here")}},vp.sketch({dom:{tag:"button",innerHtml:r.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(t){c.get(t).element.dom.click()},buttonBehaviours:Z([Q0.config({}),$b.button(r.isDisabled),Jb()])})]}]}}}});return tw(t,s,["tox-form__group--stretched"],[])}function Qx(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[JS([qS]),t,JS([KS])],behaviours:Z([PS.childAt(1)])}}function Zx(t,n){$(t,Ki(),{raw:{which:9,shiftKey:n}})}function t0(t){return nx(t,["."+qS,"."+KS].join(","),U)}function n0(t,n){var e,o,r=QS&&t.sandboxed,i=D(D({},t.label.map(function(t){return{title:t}}).getOr({})),r?{sandbox:"allow-scripts allow-same-origin"}:{}),u=(e=r,o=T(""),{getValue:function(t){return o.get()},setValue:function(t,n){e?_(t.element,"srcdoc",n):(_(t.element,"src","javascript:''"),(t=t.element.dom.contentWindow.document).open(),t.write(n),t.close()),o.set(n)}}),r=t.label.map(function(t){return ow(t,n)}),t=S.parts.field({factory:{sketch:function(t){return Qx({uid:t.uid,dom:{tag:"iframe",attributes:i},behaviours:Z([Q0.config({}),rt.config({}),WS(K.none(),u.getValue,u.setValue)])})}}});return tw(r,t,["tox-form__group--stretched"],[])}function e0(t){var n=ZS(t.width,t.height);return tk(n).drawImage(t,0,0),n}function o0(e){return new vw(function(t,n){!function(t){var t=t.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return K.none();for(var n=n[1],t=t[1],e=atob(t),o=e.length,r=Math.ceil(o/1024),i=new Array(r),u=0;u<r;++u){for(var a=1024*u,c=Math.min(1024+a,o),s=new Array(c-a),l=a,f=0;l<c;++f,++l)s[f]=e[l].charCodeAt(0);i[u]=new Uint8Array(s)}return K.some(new Blob(i,{type:n}))}(e).fold(function(){n("uri is not base64: "+e)},t)})}function r0(t){return a=t,new vw(function(t,n){function e(){u(),t(i)}function o(){u(),n("Unable to load data of type "+a.type+": "+r)}var r=URL.createObjectURL(a),i=new Image,u=function(){i.removeEventListener("load",e),i.removeEventListener("error",o)};i.addEventListener("load",e),i.addEventListener("error",o),i.src=r,i.complete&&setTimeout(e,0)}).then(function(t){URL.revokeObjectURL(t.src);var n=ZS(nk(t),ek(t));return tk(n).drawImage(t,0,0),n});var a}function i0(t,n,e){return t="string"==typeof t?parseFloat(t):t,e<t?t=e:t<n&&(t=n),t}function u0(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function a0(t,n){for(var e=[],o=new Array(25),r=0;r<5;r++){for(var i=0;i<5;i++)e[i]=n[i+5*r];for(i=0;i<5;i++){for(var u=0,a=0;a<5;a++)u+=t[i+5*a]*e[a];o[i+5*r]=u}}return o}function c0(n,e){return n.toCanvas().then(function(t){return ck(t,n.getType(),e)})}function s0(e){return function(t,n){return c0(t,e(u0(),n))}}function l0(t,n,e){var u,a,c,o=nk(t),r=ek(t),i=!1,t=(((o=n/o)<.5||2<o)&&(o=o<.5?.5:2,i=!0),((r=e/r)<.5||2<r)&&(r=r<.5?.5:2,i=!0),u=t,a=o,c=r,new vw(function(t){var n=nk(u),e=ek(u),o=Math.floor(n*a),r=Math.floor(e*c),i=ZS(o,r);tk(i).drawImage(u,0,0,n,e,0,0,o,r),t(i)}));return i?t.then(function(t){return l0(t,n,e)}):t}function f0(t,n,e){return Oh(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:e},n)}function d0(t){return"separator"===t.type}function m0(e,t,o,n){return Fk({text:e.text,icon:e.icon,tooltip:e.tooltip,role:n,fetch:function(t,n){e.fetch(function(t){n(Hk(t,Hv.CLOSE_ON_EXECUTE,o,!1))})},onSetup:e.onSetup,getApi:Lk,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Q0.config({})]},t,o.shared)}function g0(n,r,i){return function(t){t(C(n,function(t){var n,e,o=t.text.fold(function(){return{}},function(t){return{text:t}});return D(D({type:t.type,active:!1},o),{onAction:function(t){var n=!t.isActive();t.setActive(n),e.storage.set(n),i.shared.getSink().each(function(t){r().getOpt(t).each(function(t){As(t.element),$(t,aw,{name:e.name,value:e.storage.get()})})})},onSetup:(n=e=t,function(t){t.setActive(n.storage.get())})})}))}}function p0(t,n,e,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":e.translate(t),title:e.translate(t)}}).getOr({})},i=t.icon.map(function(t){return _k(t,e.icons)}),i=oy([i]);return zk(t,n,o,r,i,e)}function h0(n,e){return function(t){"custom"===e?$(t,aw,{name:n,value:{}}):"submit"===e?J(t,cw):"cancel"===e?J(t,uw):console.error("Unknown button type: ",e)}}function v0(n,t,e){var o,r,i,u;return"menu"===t?(u=D(D({},u=n),{onSetup:function(t){return t.setDisabled(n.disabled),Y},fetch:g0(u.items,function(){return o},e)}),(o=it(m0(u,"tox-tbtn",e,K.none()))).asSpec()):"custom"===(u=t)||"cancel"===u||"submit"===u?(r=h0(n.name,t),i=D(D({},n),{borderless:!1}),Wk(i,r,e.shared.providers,[])):void console.error("Unknown footer button type: ",t)}function b0(t,n){var e,o=h0(t.name,"custom");return e=K.none(),t=S.parts.field(D({factory:vp},jk(t,K.some(o),n,[XS(""),PS.self()]))),tw(e,t,[],[])}function y0(t,n){return Jm({factory:S,name:t,overrides:function(o){return{fieldBehaviours:Z([ot("coupled-input-behaviour",[Q($i(),function(e){og(e,o,n).bind(y.getCurrent).each(function(n){og(e,o,"lock").each(function(t){m.isOn(t)&&o.onLockedChange(e,n,t)})})})])])}}})}function x0(o,a){function t(t,n,e,o){return it(Wk({name:t,text:t,disabled:e,primary:o,icon:K.none(),borderless:!1},n,a))}function n(t,n,e,o){return it(Uk({name:t,icon:K.some(t),tooltip:K.some(n),disabled:o,primary:!1,borderless:!1},e,a))}function u(t,n){t.map(function(t){t=t.get(n);t.hasConfigured(nt)&&nt.disable(t)})}function c(t,n){t.map(function(t){t=t.get(n);t.hasConfigured(nt)&&nt.enable(t)})}function s(t,n){y(t),b(t,$k.transform(),{transform:n}),x(t)}function e(t){return function(){R.getOpt(t).each(function(t){et.set(t,[I])})}}function i(t,n){y(t),b(t,$k.transformApply(),{transform:n,swap:e(t)}),x(t)}function r(){return it({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Z([nt.config({})])})}function l(n,e){return function(t){return n(t,e)}}function f(t,n){n=n,y(t=t),b(t,$k.tempTransform(),{transform:n}),x(t)}function d(t,n,e,o,r){var t=kS.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:a.translate(t)}}),i=kS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),u=kS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return it(kS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e,maxX:r,getInitialValue:q({x:o})},components:[t,i,u],sliderBehaviours:Z([rt.config({})]),onChoose:n}))}function m(t,n,e,o,r){t=t,n=n,e=e,o=o,r=r;var i=[w(),z(t,n,e,o,r),S()];return K0.sketch({dom:h,components:i.map(function(t){return t.asSpec()}),containerBehaviours:Z([ot("image-tools-filter-panel-buttons-events",[Q(Qk.disable(),function(t,n){u(i,t)}),Q(Qk.enable(),function(t,n){c(i,t)})])])})}function g(t){return d(t,function(c,t,n){var e=A.getOpt(c),o=M.getOpt(c),r=B.getOpt(c);e.each(function(a){o.each(function(u){r.each(function(t){var n,e,o,r=tt.getValue(a).x/100,t=tt.getValue(t).x/100,i=tt.getValue(u).x/100;n=r,e=t,o=i,s(c,function(t){return yk(t,n,e,o)})})})})},0,100,200)}function p(n,e,o){return function(t){b(t,$k.swap(),{transform:e,swap:function(){R.getOpt(t).each(function(t){et.set(t,[n]),o(t)})}})}}var h={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},v=Y,b=function(t,n,e){$(t,n,e)},y=function(t){return J(t,Qk.disable())},x=function(t){return J(t,Qk.enable())},w=function(){return t("Back",function(t){return b(t,$k.back(),{swap:e(t)})},!1,!1)},S=function(){return t("Apply",function(t){return b(t,$k.apply(),{swap:e(t)})},!0,!0)},k=[w(),r(),t("Apply",function(t){i(t,function(t){var n=o.getRect();return kk(t,n.x,n.y,n.w,n.h)}),o.hideCrop()},!1,!0)],C=K0.sketch({dom:h,components:k.map(function(t){return t.asSpec()}),containerBehaviours:Z([ot("image-tools-crop-buttons-events",[Q(Qk.disable(),function(t,n){u(k,t)}),Q(Qk.enable(),function(t,n){c(k,t)})])])}),O=it(Jk({name:"size",label:K.none(),constrain:!0,disabled:!1},a)),_=[w(),r(),O,r(),t("Apply",function(r){O.getOpt(r).each(function(t){var n,e,t=tt.getValue(t),o=parseInt(t.width,10),t=parseInt(t.height,10);n=o,e=t,i(r,function(t){return Ck(t,n,e)})})},!1,!0)],T=K0.sketch({dom:h,components:_.map(function(t){return t.asSpec()}),containerBehaviours:Z([ot("image-tools-resize-buttons-events",[Q(Qk.disable(),function(t,n){u(_,t)}),Q(Qk.enable(),function(t,n){c(_,t)})])])}),N=l(Sk,"h"),P=l(Sk,"v"),V=l(Ok,-90),H=l(Ok,90),E=[w(),r(),n("flip-horizontally","Flip horizontally",function(t){f(t,N)},!1),n("flip-vertically","Flip vertically",function(t){f(t,P)},!1),n("rotate-left","Rotate counterclockwise",function(t){f(t,V)},!1),n("rotate-right","Rotate clockwise",function(t){f(t,H)},!1),r(),S()],L=K0.sketch({dom:h,components:E.map(function(t){return t.asSpec()}),containerBehaviours:Z([ot("image-tools-fliprotate-buttons-events",[Q(Qk.disable(),function(t,n){u(E,t)}),Q(Qk.enable(),function(t,n){c(E,t)})])])}),z=function(t,o,n,e,r){return d(t,function(t,n,e){e=l(o,e.x/100);s(t,e)},n,e,r)},D=[w(),r(),S()],D=K0.sketch({dom:h,components:D.map(function(t){return t.asSpec()})}),U=m("Brightness",xk,-100,0,100),j=m("Contrast",wk,-100,0,100),W=m("Gamma",bk,-100,0,100),A=g("R"),B=g("G"),M=g("B"),F=[w(),A,B,M,S()],F=K0.sketch({dom:h,components:F.map(function(t){return t.asSpec()})}),G=K.some(vk),X=K.some(hk),C=[n("crop","Crop",p(C,K.none(),function(t){o.showCrop()}),!1),n("resize","Resize",p(T,K.none(),function(t){O.getOpt(t).each(function(t){var n=o.getMeasurements(),e=n.width,n=n.height;tt.setValue(t,{width:e,height:n})})}),!1),n("orientation","Orientation",p(L,K.none(),v),!1),n("brightness","Brightness",p(U,K.none(),v),!1),n("sharpen","Sharpen",p(D,G,v),!1),n("contrast","Contrast",p(j,K.none(),v),!1),n("color-levels","Color levels",p(F,K.none(),v),!1),n("gamma","Gamma",p(W,K.none(),v),!1),n("invert","Invert",p(D,X,v),!1)],I=K0.sketch({dom:h,components:C.map(function(t){return t.asSpec()})}),T=K0.sketch({dom:{tag:"div"},components:[I],containerBehaviours:Z([et.config({})])}),R=it(T);return{memContainer:R,getApplyButton:function(t){return R.getOpt(t).map(function(t){t=t.components()[0];return t.components()[t.components().length-1]})}}}var w0,S0,k0,C0,O0,_0="#000000",T0=function(t){var n="choiceitem",e={type:n,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[e,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[e]},E0=function(t,n){return t.concat(C(Hy.state(),function(t){return{type:Py,text:t,value:t}}).concat(T0(n)))},D0=function(t,n,e,o,r,i,u,a){var c=ab(n),n=A0(n,e,o,"color"!==r?"normal":"color",i,u,a);return sb(t,c,n,o,r)},A0=function(e,o,r,i,u,a,c){return Ue(C(e,function(n){return"choiceitem"===n.type?hi("choicemenuitem",pb,n).fold(cb,function(t){return K.some(function(n,t,e,o,r,i,u,a){void 0===a&&(a=!0);e=ev({presets:e,textContent:t?n.text:K.none(),htmlContent:K.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:t?n.shortcut:K.none(),checkMark:t?K.some(tv(u.icons)):K.none(),caret:K.none(),value:n.value},u,a);return Xr(Kh({data:Jh(n),disabled:n.disabled,getApi:function(n){return{setActive:function(t){m.set(n,t)},isActive:function(){return m.isOn(n)},isDisabled:function(){return nt.isDisabled(n)},setDisabled:function(t){return nt.set(n,t)}}},onAction:function(t){return o(n.value)},onSetup:function(t){return t.setActive(r),Y},triggersSubmenu:!1,itemBehaviours:[]},e,i,u),{toggling:{toggleClass:Wv,toggleOnExecute:!1,selected:n.active}})}(t,1===r,i,o,a(n.value),u,c,ab(e)))}):K.none()}))},B0=function(t,n){var e=tb(n);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===n?"tox-swatches__row":"tox-collection__group")}},M0=E("cell-over"),F0=E("cell-execute"),I0=function(n,e,t){function o(t){return $(t,F0,{row:n,col:e})}function r(t,n){n.stop(),o(t)}var i;return _a({dom:{tag:"div",attributes:((i={role:"button"})["aria-labelledby"]=t,i)},behaviours:Z([ot("insert-table-picker-cell",[Q(Xi(),rt.focus),Q(cu(),o),Q(Zi(),r),Q(lu(),r)]),m.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),rt.config({onFocus:function(t){return $(t,M0,{row:n,col:e})}})])})},R0={inserttable:function(r){var t=E("size-label"),f=function(t,n,e){for(var o=[],r=0;r<n;r++){for(var i=[],u=0;u<e;u++)i.push(I0(r,u,t));o.push(i)}return o}(t,10,10),n=Zy(0,0),d=it({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[n],behaviours:Z([et.config({})])});return{type:"widget",data:{value:E("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[py.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Se(f,function(t){return C(t,Ta)}).concat(d.asSpec()),behaviours:Z([ot("insert-table-picker",[Nu(function(t){et.set(d.get(t),[n])}),Iu(M0,function(t,n,e){for(var e=e.event,o=e.row,e=e.col,r=f,i=o,u=e,a=10,c=10,s=0;s<a;s++)for(var l=0;l<c;l++)m.set(r[s][l],s<=i&&l<=u);et.set(d.get(t),[Zy(o+1,e+1)])}),Iu(F0,function(t,n,e){var e=e.event,o=e.row,e=e.col;r.onAction({numRows:o+1,numColumns:e+1}),J(t,du())})]),M.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(n,t){e=t,o=(r=n).initData.allowCustomColors&&e.colorinput.hasCustomColors();var e,o,r=r.initData.colors.fold(function(){return E0(e.colorinput.getColors(),o)},function(t){return t.concat(T0(o))}),i=t.colorinput.getColorCols(),r=D0(E("menu-value"),r,function(t){n.onAction({value:t})},i,"color",Hv.CLOSE_ON_EXECUTE,U,t.shared.providers),t=D(D({},r),{markers:tb("color"),movement:B0(i,"color")});return{type:"widget",data:{value:E("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[py.widget(ip.sketch(t))]}}},N0=function(n,e,t,o,r,i,u,a){void 0===a&&(a=!0);o=ev({presets:o,textContent:K.none(),htmlContent:t?n.text.map(function(t){return my(t,e)}):K.none(),ariaLabel:n.text,iconContent:n.icon,shortcutContent:K.none(),checkMark:K.none(),caret:K.none(),value:n.value},u.providers,a,n.icon);return Kh({data:Jh(n),disabled:n.disabled,getApi:q({}),onAction:function(t){return r(n.value,n.meta)},onSetup:q(Y),triggersSubmenu:!1,itemBehaviours:fy(n.meta,u)},o,i,u.providers)},P0=function(t){t=t.text.fold(function(){return{}},function(t){return{innerHtml:t}});return{type:"separator",dom:D({tag:"div",classes:[zv,"tox-collection__group-heading"]},t),components:[]}},V0=function(t,n,e,o){void 0===o&&(o=!0);o=ev({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:K.none(),ariaLabel:t.text,caret:K.none(),checkMark:K.none(),shortcutContent:t.shortcut},e,o);return Kh({data:Jh(t),getApi:function(n){return{isDisabled:function(){return nt.isDisabled(n)},setDisabled:function(t){return nt.set(n,t)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,n,e)},H0=function(t,n,e,o,r){void 0===o&&(o=!0);r=(r=void 0===r?!1:r)?(r=e.icons,iy("chevron-down",r,[Yv])):(r=e.icons,iy("chevron-right",r,[Yv])),r=ev({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:K.none(),ariaLabel:t.text,caret:K.some(r),checkMark:K.none(),shortcutContent:t.shortcut},e,o);return Kh({data:Jh(t),getApi:function(n){return{isDisabled:function(){return nt.isDisabled(n)},setDisabled:function(t){return nt.set(n,t)}}},disabled:t.disabled,onAction:Y,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},r,n,e)},L0=function(t,n,e,o){void 0===o&&(o=!0);o=ev({iconContent:t.icon,textContent:t.text,htmlContent:K.none(),ariaLabel:t.text,checkMark:K.some(tv(e.icons)),caret:K.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},e,o);return Xr(Kh({data:Jh(t),disabled:t.disabled,getApi:function(n){return{setActive:function(t){m.set(n,t)},isActive:function(){return m.isOn(n)},isDisabled:function(){return nt.isDisabled(n)},setDisabled:function(t){return nt.set(n,t)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,n,e),{toggling:{toggleClass:Wv,toggleOnExecute:!1,selected:t.active}})},z0=function(n,e){return O(R0,n.fancytype).map(function(t){return t(n,e)})},U0=function(t,n,e,o){var r={dom:nv(t.label),optComponents:[K.some({dom:{tag:"div",classes:[Jv,$v]},components:gy(t.items,o)})]};return Kh({data:Jh(D({text:K.none()},t)),disabled:t.disabled,getApi:function(e){return{isDisabled:function(){return nt.isDisabled(e)},setDisabled:function(n){nt.set(e,n),x(cm(e.element,"*"),function(t){e.getSystem().getByDom(t).each(function(t){t.hasConfigured(nt)&&nt.set(t,n)})})}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:K.from(o.itemBehaviours).getOr([])},r,n,e.providers)},j0=((Lg=w0=w0||{})[Lg.ContentFocus=0]="ContentFocus",Lg[Lg.UiFocus=1]="UiFocus",function(t,n,o,r,i){var u=ab(n),n=Ue(C(n,function(t){function n(t){return tx(t,o,r,e(t),i)}var e=function(t){return i?!He(t,"text"):u};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?n(D(D({},t),{disabled:!0})):n(t)}));return(i?Lh:sb)(t,u,n,1,"normal")}),W0=function(t){return fp.singleData(t.value,t)},G0=function(f,d){function i(s,t){var l=Ae(t,function(t){return K.from(t.columns)}).getOr(1);return Se(t,function(r){var e,o,i,u,a,n,c,t=r.items;return t=t,e=r.matchText,o=function(e,o){var t=f.selection.getRng();Mh(f.dom,t,s).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var t=t.range,n={hide:function(){p()},reload:function(t){g(),h(t)}};m.set(!0),r.onAction(n,t,e,o),m.set(!1)})},i=Hv.BUBBLE_TO_SANDBOX,u=d,a=r.highlightOn,c=!(n=1===l)||ab(t),Ue(C(t,function(t){switch(t.type){case"separator":return Bv(t).fold(cb,function(t){return K.some(P0(t))});case"cardmenuitem":return gb(t).fold(cb,function(n){return K.some(U0(D(D({},n),{onAction:function(t){n.onAction(t),o(n.value,n.meta)}}),i,u,{itemBehaviours:fy(n.meta,u),cardText:{matchText:e,highlightOn:a}}))});default:return Mv(t).fold(cb,function(t){return K.some(N0(t,e,n,"normal",o,i,u,c))})}}))})}function n(t){var n,e,o;r()||(e=f,o=t.range,n=yv(w.fromDom(e.selection.getNode())).getOrThunk(function(){var t=w.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());return _r(t,w.fromDom(o.extractContents())),o.insertNode(t.dom),zo(t).each(function(t){return t.dom.normalize()}),am(t).map(function(t){e.selection.setCursorLocation(t.dom,im(t))}),t}),a.set({triggerChar:t.triggerChar,element:n,matchLength:t.text.length}),m.set(!1))}function u(t,n,e,o){t.matchLength=n.text.length;var r,i,u,a,n=Ae(e,function(t){return K.from(t.columns)}).getOr(1);dp.showAt(c,ip.sketch((e=sb("autocompleter-value",!0,o,n,"normal"),o=n,n=w0.ContentFocus,r="normal",i=(n===w0.ContentFocus?Eg:Tg)(),u=B0(o,r),a=tb(r),{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:u,fakeFocus:n===w0.ContentFocus,focusManager:i,menuBehaviours:wb.unnamedEvents("auto"!==o?[]:[Nu(function(e,t){xb(e,4,a.item).each(function(t){var n=t.numColumns,t=t.numRows;M.setGridSize(e,t,n)})})])})),{anchor:{type:"node",root:w.fromDom(f.getBody()),node:K.from(t.element)}}),dp.getContent(c).each(gg.highlightFirst)}function e(n){return a.get().map(function(t){return Mh(f.dom,f.selection.getRng(),t.triggerChar).bind(function(t){return Tv(f,s,t,n)})}).getOrThunk(function(){return n=f,t=(e=s)(),o=n.selection.getRng(),_v(n.dom,o,t).bind(function(t){return Tv(n,e,t)});var n,e,t,o})}var a=Us(),m=T(!1),c=_a(dp.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Z([ot("dismissAutocompleter",[Q(wu(),function(){return p()})])]),lazySink:d.getSink})),r=function(){return a.get().isSome()},g=function(){r()&&dp.hide(c)},p=function(){var t;r()&&(t=a.get().map(function(t){return t.element}),yv(t.getOr(w.fromDom(f.selection.getNode()))).each(Wt),g(),a.clear(),m.set(!1))},s=no(function(){return t=(t=f).ui.registry.getAll().popups,t=Ie(t,function(t){return Fv(t).fold(function(t){throw new Error(yi(t))},v)}),n=Vv(Pe(t,function(t){return t.ch})),e=Ve(t),{dataset:t,triggerChars:n,lookupByChar:function(n){return pe(e,function(t){return t.ch===n})}};var t,n,e}),h=function(t){e(t).fold(p,function(r){n(r.context),r.lookupData.then(function(o){a.get().map(function(t){var n,e=r.context;t.triggerChar===e.triggerChar&&(0<(n=i(e.triggerChar,o)).length?u(t,e,o,n):(10<=e.text.length-t.matchLength?p:g)())})})})},t={onKeypress:Dh(function(t){27!==t.which&&h()},50),cancelIfNecessary:p,isMenuOpen:function(){return dp.isOpen(c)},isActive:r,isProcessingAction:m.get,getView:function(){return dp.getContent(c)}};!1===f.hasPlugin("rtc")&&kv(t,f)},X0=function(t,n){t=O(t,"target").getOr(n);return T(t)},Y0=Ti([{stopped:[]},{resume:["element"]},{complete:[]}]),q0=function(n,e,o,t,r,i){return ax(n,e,o,t,r,i).fold(j,function(t){return q0(n,e,o,t,r,i)},U)},K0=dg({name:"Container",factory:function(t){var n=t.dom,e=n.attributes,n=G(n,["attributes"]);return{uid:t.uid,dom:D({tag:"div",attributes:D({role:"presentation"},e)},n),components:t.components,behaviours:Nm(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[s("components",[]),sf("containerBehaviours",[]),s("events",{}),s("domModification",{}),s("eventOrder",{})]}),J0=function(e){function o(n){return zo(e.element).fold(j,function(t){return Io(n,t)})}function c(t,n){return i.find(o,t,n)}function r(n){var t=i.filter(au());x(t,function(t){t=t.descHandler;Jn(t)(n)})}var i=fx(),t=ux(e.element,{triggerEvent:function(n,e){return Ba(n,e.target,function(t){return sx(c,n,e,e.target,t)})}}),u={debugInfo:q("real"),triggerEvent:function(n,e,o){Ba(n,e,function(t){return sx(c,n,o,e,t)})},triggerFocus:function(u,a){Un(u).fold(function(){As(u)},function(t){Ba(ru(),u,function(t){var n,e,o,r,i;return n=c,e=ru(),t=t,i=X0(o={originator:a,kill:Y,prevent:Y,target:u},r=u),ax(n,e,o,r,i,t),!1})})},triggerEscape:function(t,n){u.triggerEvent("keydown",t.element,n.event)},getByUid:function(t){return g(t)},getByDom:function(t){return p(t)},build:_a,addToGui:function(t){s(t)},removeFromGui:function(t){l(t)},addToWorld:function(t){n(t)},removeFromWorld:function(t){a(t)},broadcast:function(t){f(t)},broadcastOn:function(t,n){d(t,n)},broadcastEvent:function(t,n){m(t,n)},isConnected:j},n=function(t){t.connect(u),Qe(t.element)||(i.register(t),x(t.components(),n),u.triggerEvent(gu(),t.element,{target:t.element}))},a=function(t){Qe(t.element)||(x(t.components(),a),i.unregister(t)),t.disconnect()},s=function(t){Cm(e,t)},l=function(t){ql(t)},f=function(t){r({universal:!0,data:t})},d=function(t,n){r({universal:!1,channels:t,data:n})},m=function(t,n){t=i.filter(t);return cx(t,n)},g=function(t){return i.getById(t).fold(function(){return B.error(new Error('Could not find component with uid: "'+t+'" in system.'))},B.value)},p=function(t){t=Un(t).getOr("not found");return g(t)};return n(e),{root:e,element:e.element,destroy:function(){t.unbind(),Ar(e.element)},add:s,remove:l,getByUid:g,getByDom:p,addToWorld:n,removeFromWorld:a,broadcast:f,broadcastOn:d,broadcastEvent:m}},$0=q([s("prefix","form-field"),sf("fieldBehaviours",[y,tt])]),Gu=q([$m({schema:[i("dom")],name:"label"}),$m({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[i("text")],name:"aria-descriptor"}),Jm({factory:{sketch:function(t){var n=An(t,["factory"]);return t.factory.sketch(n)}},schema:[i("factory")],name:"field"})]),S=Cf({name:"FormField",configFields:$0(),partFields:Gu(),factory:function(r,t,n,e){var o=Pm(r.fieldBehaviours,[y.config({find:function(t){return og(t,r,"field")}}),tt.config({store:{mode:"manual",getValue:function(t){return y.getCurrent(t).bind(tt.getValue)},setValue:function(t,n){y.getCurrent(t).each(function(t){tt.setValue(t,n)})}}})]),i=Mu([Nu(function(t,n){var o=xf(t,r,["label","field","aria-descriptor"]);o.field().each(function(e){var n=E(r.prefix);o.label().each(function(t){_(t.element,"for",n),_(e.element,"id",n)}),o["aria-descriptor"]().each(function(t){var n=E(r.prefix);_(t.element,"id",n),_(e.element,"aria-describedby",n)})})})]);return{uid:r.uid,dom:r.dom,components:t,behaviours:o,events:i,apis:{getField:function(t){return og(t,r,"field")},getLabel:function(t){return og(t,r,"label")}}}},apis:{getField:function(t,n){return t.getField(n)},getLabel:function(t,n){return t.getLabel(n)}}}),qu=Object.freeze({__proto__:null,exhibit:function(t,n){return qn({attributes:Bi([{key:n.tabAttr,value:"true"}])})}}),Pg=[s("tabAttr","data-alloy-tabstop")],Q0=Qa({fields:Pg,name:"tabstopping",active:qu}),Z0=tinymce.util.Tools.resolve("tinymce.html.Entities"),tw=function(t,n,e,o){t=nw(t,n,e,o);return S.sketch(t)},nw=function(t,n,e,o){return{dom:ew(e),components:t.toArray().concat([n]),fieldBehaviours:Z(o)}},ew=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},ow=function(t,n){return S.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}})},rw=E("form-component-change"),iw=E("form-close"),uw=E("form-cancel"),aw=E("form-action"),cw=E("form-submit"),sw=E("form-block"),lw=E("form-unblock"),fw=E("form-tabchange"),dw=E("form-resize"),Pi=q([bn("data"),s("inputAttributes",{}),s("inputStyles",{}),s("tag","input"),s("inputClasses",[]),t("onSetValue"),s("styles",{}),s("eventOrder",{}),sf("inputBehaviours",[tt,rt]),s("selectOnFocus",!0)]),mw=function(t){return Z([rt.config({onFocus:t.selectOnFocus?function(t){var t=t.element,n=ya(t);t.dom.setSelectionRange(0,n.length)}:Y})])},gw=dg({name:"Input",configFields:Pi(),factory:function(t,n){return{uid:t.uid,dom:mx(t),components:[],behaviours:D(D({},mw(e=t)),Pm(e.inputBehaviours,[tt.config({store:D(D({mode:"manual"},e.data.map(function(t){return{initialValue:t}}).getOr({})),{getValue:function(t){return ya(t.element)},setValue:function(t,n){ya(t.element)!==n&&xa(t.element,n)}}),onSetValue:e.onSetValue})])),eventOrder:t.eventOrder};var e}}),pw={},hw={exports:pw},vw=(!function(t){var n,e;n=this,e=function(){var n,t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};function o(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function r(e,o){for(;3===e._state;)e=e._value;0===e._state?e._deferreds.push(o):(e._handled=!0,i._immediateFn(function(){var t,n=1===e._state?o.onFulfilled:o.onRejected;if(null===n)(1===e._state?u:a)(o.promise,e._value);else{try{t=n(e._value)}catch(t){return void a(o.promise,t)}u(o.promise,t)}}))}function u(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if(t instanceof i)return n._state=3,n._value=t,void c(n);if("function"==typeof e)return void l((o=e,r=t,function(){o.apply(r,arguments)}),n)}n._state=1,n._value=t,c(n)}catch(t){a(n,t)}var o,r}function a(t,n){t._state=2,t._value=n,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)r(t,t._deferreds[n]);t._deferreds=null}function s(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function l(t,n){var e=!1;try{t(function(t){e||(e=!0,u(n,t))},function(t){e||(e=!0,a(n,t))})}catch(t){e||(e=!0,a(n,t))}}f=e,t=t,n=setTimeout,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(o);return r(this,new s(t,n,e)),e},i.all=function(t){var a=Array.prototype.slice.call(t);return new i(function(r,i){if(0===a.length)return r([]);var u=a.length;for(var t=0;t<a.length;t++)!function n(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if("function"==typeof o)return void o.call(t,function(t){n(e,t)},i)}a[e]=t,0==--u&&r(a)}catch(t){i(t)}}(t,a[t])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(t){t(n)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(r){return new i(function(t,n){for(var e=0,o=r.length;e<o;e++)r[e].then(t,n)})},i._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){n(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},f.exports?f.exports=i:t.Promise||(t.Promise=i);var f=e.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||f}},"object"==typeof pw&&void 0!==hw?hw.exports=e():"function"==typeof t&&t.amd?t(e):(n="undefined"!=typeof globalThis?globalThis:n||self).EphoxContactWrapper=e()}(void 0),hw.exports.boltExport),bw={nu:gx,pure:function(n){return gx(function(t){t(n)})}},yw=function(t){setTimeout(function(){throw t},0)},xw=function(e){function t(t){e().then(t,yw)}return{map:function(t){return xw(function(){return e().then(t)})},bind:function(n){return xw(function(){return e().then(function(t){return n(t).toPromise()})})},anonBind:function(t){return xw(function(){return e().then(function(){return t.toPromise()})})},toLazy:function(){return bw.nu(t)},toCached:function(){var t=null;return xw(function(){return t=null===t?e():t})},toPromise:e,get:t}},ww={nu:function(t){return xw(function(){return new vw(t)})},pure:function(t){return xw(function(){return vw.resolve(t)})}},Sw=["input","textarea"],wl=Object.freeze({__proto__:null,markValid:hx,markInvalid:vx,query:bx,run:yx,isInvalid:function(t,n){t=n.getRoot(t).getOr(t.element);return ha(t,n.invalidClass)}}),Hg=Object.freeze({__proto__:null,events:function(n,t){return n.validator.map(function(t){return Mu([Q(t.onEvent,function(t){yx(t,n).get(v)})].concat(t.validateOnLoad?[Nu(function(t){yx(t,n).get(Y)})]:[]))}).getOr({})}}),Gg=[i("invalidClass"),s("getRoot",K.none),Ci("notify",[s("aria","alert"),s("getContainer",K.none),s("validHtml",""),t("onValid"),t("onInvalid"),t("onValidate")]),Ci("validator",[i("validate"),s("onEvent","input"),s("validateOnLoad",!0)])],kw=Qa({fields:Gg,name:"invalidating",active:Hg,apis:wl,extra:{validation:function(n){return function(t){t=tt.getValue(t);return ww.pure(n(t))}}}}),Km=Object.freeze({__proto__:null,getCoupled:function(t,n,e,o){return e.getOrCreate(t,n,o)}}),qm=[Si("others",ln(B.value,ci()))],Cw=Qa({fields:qm,name:"coupling",apis:Km,state:Object.freeze({__proto__:null,init:function(){var r={},t=q({});return ia({readState:t,getOrCreate:function(n,e,o){var t=Be(e.others);if(t)return O(r,o).getOrThunk(function(){var t=O(e.others,o).getOrDie("No information found for coupled component: "+o)(n),t=n.getSystem().build(t);return r[o]=t});throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(t,null,2))}})}})}),Ow=q("sink"),Xg=q($m({name:Ow(),overrides:q({dom:{tag:"div"},behaviours:Z([ym.config({useFixed:j})]),events:Mu([Ru(Ki()),Ru(Ui()),Ru(Zi())])})})),_w=((Ng=S0=S0||{})[Ng.HighlightFirst=0]="HighlightFirst",Ng[Ng.HighlightNone=1]="HighlightNone",function(t,n){var e=t.getHotspot(n).getOr(n),o=t.getAnchorOverrides();return t.layouts.fold(function(){return{type:"hotspot",hotspot:e,overrides:o}},function(t){return{type:"hotspot",hotspot:e,overrides:o,layouts:t}})}),Tw=function(t,n,r,e,i,o,u){n=n;var n=(0,t.fetch)(e).map(n),a=Bw(e,t);return n.map(function(t){return t.bind(function(t){return K.from(fp.sketch(D(D({},o.menu()),{uid:$u(""),data:t,highlightImmediately:u===S0.HighlightFirst,onOpenMenu:function(t,n){var e=a().getOrDie();ym.position(e,n,{anchor:r}),l.decloak(i)},onOpenSubmenu:function(t,n,e){var o=a().getOrDie();ym.position(o,e,{anchor:{type:"submenu",item:n}}),l.decloak(i)},onRepositionMenu:function(t,n,e){var o=a().getOrDie();ym.position(o,n,{anchor:r}),x(e,function(t){ym.position(o,t.triggeredMenu,{anchor:{type:"submenu",item:t.triggeringItem}})})},onEscape:function(){return rt.focus(e),l.close(i),K.some(!0)}})))})})},Ew=function(t,n,e,o,r,i,u){var a=_w(t,e);return Tw(t,n,a,e,o,r,u).map(function(t){return t.fold(function(){l.isOpen(o)&&l.close(o)},function(t){l.cloak(o),l.open(o,t),i(o)}),o})},Dw=function(t,n,e,o,r,i,u){return l.close(o),ww.pure(o)},Aw=function(t,n,e){n=y.getCurrent(n).getOr(n),t=wr(t.element);e?A(n.element,"min-width",t+"px"):(e=n.element,xr.set(e,t))},Bw=function(n,t){return n.getSystem().getByUid(t.uid+"-"+Ow()).map(function(t){return function(){return B.value(t)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return B.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(n)}})})},Mw=function(t){l.getState(t).each(function(t){fp.repositionMenus(t)})},ml=q([i("dom"),i("fetch"),t("onOpen"),Ra("onExecute"),s("getHotspot",K.some),s("getAnchorOverrides",q({})),yc(),sf("dropdownBehaviours",[m,Cw,M,rt]),i("toggleClass"),s("eventOrder",{}),bn("lazySink"),s("matchWidth",!1),s("useMinWidth",!1),bn("role")].concat(kx())),Ym=q([ks({schema:[Ma()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Xg()]),Fw=Cf({name:"Dropdown",configFields:ml(),partFields:Ym(),factory:function(n,t,e,o){function r(t){l.getState(t).each(function(t){fp.highlightPrimary(t)})}function i(t,n){return Eu(t),K.some(!0)}var u,a={expand:function(t){m.isOn(t)||xx(n,v,t,o,Y,S0.HighlightNone).get(Y)},open:function(t){m.isOn(t)||xx(n,v,t,o,Y,S0.HighlightFirst).get(Y)},isOpen:m.isOn,close:function(t){m.isOn(t)&&xx(n,v,t,o,Y,S0.HighlightFirst).get(Y)},repositionMenus:function(t){m.isOn(t)&&Sx(t)}};return{uid:n.uid,dom:n.dom,components:t,behaviours:Pm(n.dropdownBehaviours,[m.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Cw.config({others:{sandbox:function(t){return wx(n,t,{onOpen:function(){return m.on(t)},onClose:function(){return m.off(t)}})}}}),M.config({mode:"special",onSpace:i,onEnter:i,onDown:function(t,n){var e;return Fw.isOpen(t)?(e=Cw.getCoupled(t,"sandbox"),r(e)):Fw.open(t),K.some(!0)},onEscape:function(t,n){return Fw.isOpen(t)?(Fw.close(t),K.some(!0)):K.none()}}),rt.config({})]),events:Pd(K.some(function(t){xx(n,v,t,o,r,S0.HighlightFirst).get(Y)})),eventOrder:D(D({},n.eventOrder),((t={})[cu()]=["disabling","toggling","alloy.base.behaviour"],t)),apis:a,domModification:{attributes:D(D({"aria-haspopup":"true"},n.role.fold(function(){return{}},function(t){return{role:t}})),"button"===n.dom.tag?{type:(u="type",O(n.dom,"attributes").bind(function(t){return O(t,u)}).getOr("button"))}:{})}}},apis:{open:function(t,n){return t.open(n)},expand:function(t,n){return t.expand(n)},close:function(t,n){return t.close(n)},isOpen:function(t,n){return t.isOpen(n)},repositionMenus:function(t,n){return t.repositionMenus(n)}}}),Iw=Qa({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return Mu([Rn(ou(),j)])},exhibit:function(){return qn({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Rw=E("color-input-change"),Nw=E("color-swatch-change"),Pw=E("color-picker-cancel"),Lg=$m({schema:[i("dom")],name:"label"}),$0=Ox("top-left"),Gu=Ox("top"),Pg=Ox("top-right"),qu=Ox("right"),Gg=Ox("bottom-right"),Hg=Ox("bottom"),wl=Ox("bottom-left"),qm=[Lg,Ox("left"),qu,Gu,Hg,$0,Pg,wl,Gg,Jm({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:Mu([Vn(Vi(),t,"spectrum"),Vn(Hi(),t,"spectrum"),Vn(Li(),t,"spectrum"),Vn(Ui(),t,"spectrum"),Vn(ji(),t,"spectrum"),Vn(Gi(),t,"spectrum")])}}}),Jm({schema:[wi("mouseIsDown",function(){return T(!1)})],name:"spectrum",overrides:function(e){function o(n,t){return r.getValueFromEvent(t).map(function(t){return r.setValueFrom(n,e,t)})}var r=e.model.manager;return{behaviours:Z([M.config({mode:"special",onLeft:function(t){return r.onLeft(t,e)},onRight:function(t){return r.onRight(t,e)},onUp:function(t){return r.onUp(t,e)},onDown:function(t){return r.onDown(t,e)}}),rt.config({})]),events:Mu([Q(Vi(),o),Q(Hi(),o),Q(Ui(),o),Q(ji(),function(t,n){e.mouseIsDown.get()&&o(t,n)})])}}})],Vw=q("slider.change.value"),Hw=function(t){return-1!==t.type.indexOf("touch")},Lw=function(t){return t.model.minX},zw=function(t){return t.model.minY},Uw=function(t){return t.model.maxX},jw=function(t){return t.model.maxY},Ww=function(t){return Bx(t,Uw,Lw)},Gw=function(t){return Bx(t,jw,zw)},Xw=function(t){return t.stepSize},Yw=function(t){return t.snapToGrid},qw=function(t){return t.snapStart},Kw=function(t){return t.rounded},Jw=function(t){return Ix(t,"left")},$w=function(t){return Ix(t,"right")},Qw=function(t){return Ix(t,"top")},Zw=function(t){return Ix(t,"bottom")},tS=function(t){return t.model.value.get()},nS=function(t,n,e,o){return t<n?t:e<t?e:t===n?n-1:Math.max(n,t-o)},eS=function(t,n,e,o){return e<t?t:t<n?n:t===e?e+1:Math.min(e,t+o)},oS=function(t){var r,n,i,u,e=t.min,o=t.max,a=t.range,c=t.value,s=t.step,l=t.snap,f=t.snapStart,d=t.rounded,m=t.hasMinEdge,g=t.hasMaxEdge,p=t.minBound,h=t.maxBound,t=t.screenRange,m=m?e-1:e,g=g?o+1:o;return c<p?m:h<c?g:(p=p,h=Math.min(h,Math.max(c,p))-p,c=Px(h/t*a+e,m,g),l&&e<=c&&c<=o?(r=c,n=e,i=o,u=s,f.fold(function(){var t=Math.round((r-n)/u)*u;return Px(n+t,n-1,i+1)},function(t){var n=Math.round((r-t)%u/u),e=Math.floor((r-t)/u),o=Math.floor((i-t)/u),o=Math.min(o,e+n);return Math.max(t,t+o*u)})):d?Math.round(c):c)},rS=function(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,t=t.centerMaxEdge;return r<n?i?0:s:e<r?u?a:t:(r-n)/o*c},iS="top",uS="left",aS=function(t){return t.element.dom.getBoundingClientRect()},cS=function(t,n){return t[n]},sS=function(t){t=aS(t);return cS(t,uS)},lS=function(t){t=aS(t);return cS(t,"right")},fS=function(t){t=aS(t);return cS(t,iS)},dS=function(t){t=aS(t);return cS(t,"bottom")},mS=function(t){t=aS(t);return cS(t,"width")},gS=function(t){t=aS(t);return cS(t,"height")},pS=function(t,n){t=aS(t),n=aS(n);return(cS(t,uS)+cS(t,"right"))/2-cS(n,uS)},hS=function(t,n){t=aS(t),n=aS(n);return(cS(t,iS)+cS(t,"bottom"))/2-cS(n,iS)},vS=function(t,n){$(t,Vw(),{value:n})},bS=function(t){return{x:t}},Km=Hx(-1),Ng=Hx(1),ml=K.none,Ym=K.none,Lg={"top-left":K.none(),top:K.none(),"top-right":K.none(),right:K.some(function(t,n){Nx(t,{x:Dx(n)})}),"bottom-right":K.none(),bottom:K.none(),"bottom-left":K.none(),left:K.some(function(t,n){Nx(t,{x:Tx(n)})})},qu=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){n=Vx(t,n,e),e=bS(n);return vS(t,e),n},setToMin:function(t,n){n=Lw(n);vS(t,bS(n))},setToMax:function(t,n){n=Uw(n);vS(t,bS(n))},findValueOfOffset:Vx,getValueFromEvent:function(t){return _x(t).map(function(t){return t.left})},findPositionOfValue:Lx,setPositionFromValue:function(t,n,e,o){var r=tS(e),r=Lx(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),e),o=wr(n.element)/2;A(n.element,"left",r-o+"px")},onLeft:Km,onRight:Ng,onUp:ml,onDown:Ym,edgeActions:Lg}),yS=function(t,n){$(t,Vw(),{value:n})},xS=function(t){return{y:t}},Gu=K.none,Hg=K.none,$0=Ux(-1),Pg=Ux(1),wl={"top-left":K.none(),top:K.some(function(t,n){Nx(t,{y:Ex(n)})}),"top-right":K.none(),right:K.none(),"bottom-right":K.none(),bottom:K.some(function(t,n){Nx(t,{y:Ax(n)})}),"bottom-left":K.none(),left:K.none()},Gg=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){n=zx(t,n,e),e=xS(n);return yS(t,e),n},setToMin:function(t,n){n=zw(n);yS(t,xS(n))},setToMax:function(t,n){n=jw(n);yS(t,xS(n))},findValueOfOffset:zx,getValueFromEvent:function(t){return _x(t).map(function(t){return t.top})},findPositionOfValue:jx,setPositionFromValue:function(t,n,e,o){var r=tS(e),r=jx(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),e),o=pr(n.element)/2;A(n.element,"top",r-o+"px")},onLeft:Gu,onRight:Hg,onUp:$0,onDown:Pg,edgeActions:wl}),wS=function(t,n){$(t,Vw(),{value:n})},SS=function(t,n){return{x:t,y:n}},Km=_x,Ng=Wx(-1,!1),ml=Wx(1,!1),Ym=Wx(-1,!0),Lg=Wx(1,!0),Gu={"top-left":K.some(function(t,n){Nx(t,Rx(Tx(n),Ex(n)))}),top:K.some(function(t,n){Nx(t,Rx(Mx(n),Ex(n)))}),"top-right":K.some(function(t,n){Nx(t,Rx(Dx(n),Ex(n)))}),right:K.some(function(t,n){Nx(t,Rx(Dx(n),Fx(n)))}),"bottom-right":K.some(function(t,n){Nx(t,Rx(Dx(n),Ax(n)))}),bottom:K.some(function(t,n){Nx(t,Rx(Mx(n),Ax(n)))}),"bottom-left":K.some(function(t,n){Nx(t,Rx(Tx(n),Ax(n)))}),left:K.some(function(t,n){Nx(t,Rx(Tx(n),Fx(n)))})},Hg=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Vx(t,n,e.left),n=zx(t,n,e.top),e=SS(o,n);return wS(t,e),e},setToMin:function(t,n){var e=Lw(n),n=zw(n);wS(t,SS(e,n))},setToMax:function(t,n){var e=Uw(n),n=jw(n);wS(t,SS(e,n))},getValueFromEvent:Km,setPositionFromValue:function(t,n,e,o){var r=tS(e),i=Lx(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),e),r=jx(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),e),o=wr(n.element)/2,t=pr(n.element)/2;A(n.element,"left",i-o+"px"),A(n.element,"top",r-t+"px")},onLeft:Ng,onRight:ml,onUp:Ym,onDown:Lg,edgeActions:Gu}),kS=Cf({name:"Slider",configFields:[s("stepSize",1),s("onChange",Y),s("onChoose",Y),s("onInit",Y),s("onDragStart",Y),s("onDragEnd",Y),s("snapToGrid",!1),s("rounded",!0),bn("snapStart"),Si("model",fn("mode",{x:[s("minX",0),s("maxX",100),wi("value",function(t){return T(t.mode.minX)}),i("getInitialValue"),$c("manager",qu)],y:[s("minY",0),s("maxY",100),wi("value",function(t){return T(t.mode.minY)}),i("getInitialValue"),$c("manager",Gg)],xy:[s("minX",0),s("maxX",100),s("minY",0),s("maxY",100),wi("value",function(t){return T({x:t.mode.minX,y:t.mode.minY})}),i("getInitialValue"),$c("manager",Hg)]})),sf("sliderBehaviours",[M,tt]),wi("mouseIsDown",function(){return T(!1)})],partFields:qm,factory:function(r,t,n,e){function i(t){return yf(t,r,"spectrum")}function o(t){return og(t,r,"left-edge")}function u(t){return og(t,r,"right-edge")}function a(t){return og(t,r,"top-edge")}function c(t){return og(t,r,"bottom-edge")}function s(t,n){g.value.set(n),n=m(t),h(t,n)}function l(e){var t=r.mouseIsDown.get();r.mouseIsDown.set(!1),t&&og(e,r,"thumb").each(function(t){var n=g.value.get();r.onChoose(e,t,n)})}function f(t,n){n.stop(),r.mouseIsDown.set(!0),r.onDragStart(t,m(t))}function d(t,n){n.stop(),r.onDragEnd(t,m(t)),l(t)}var m=function(t){return yf(t,r,"thumb")},g=r.model,p=g.manager,h=function(t,n){p.setPositionFromValue(t,n,r,{getLeftEdge:o,getRightEdge:u,getTopEdge:a,getBottomEdge:c,getSpectrum:i})};return{uid:r.uid,dom:r.dom,components:t,behaviours:Pm(r.sliderBehaviours,[M.config({mode:"special",focusIn:function(t){return og(t,r,"spectrum").map(M.focusIn).map(j)}}),tt.config({store:{mode:"manual",getValue:function(t){return g.value.get()}}}),Es.config({channels:((t={})[Bm()]={onReceive:l},t)})]),events:Mu([Q(Vw(),function(t,n){var e;t=t,n=n.event.value,s(t,n),e=m(t),r.onChange(t,e,n),K.some(!0)}),Nu(function(t,n){var e=g.getInitialValue(),e=(g.value.set(e),m(t)),o=(h(t,e),i(t));r.onInit(t,e,o,g.value.get())}),Q(Vi(),f),Q(Li(),d),Q(Ui(),f),Q(Gi(),d)]),apis:{resetToMin:function(t){p.setToMin(t,r)},resetToMax:function(t){p.setToMax(t,r)},setValue:s,refresh:h},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(t,n,e){t.setValue(n,e)},resetToMin:function(t,n){t.resetToMin(n)},resetToMax:function(t,n){t.resetToMax(n)},refresh:function(t,n){t.refresh(n)}}}),CS=E("rgb-hex-update"),OS=E("slider-update"),_S=E("palette-update"),TS=function(t,n){var e=kS.parts.spectrum({dom:{tag:"div",classes:[n("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=kS.parts.thumb({dom:{tag:"div",classes:[n("hue-slider-thumb")],attributes:{role:"presentation"}}});return kS.sketch({dom:{tag:"div",classes:[n("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:q({y:0})},components:[e,o],sliderBehaviours:Z([rt.config({})]),onChange:function(t,n,e){$(t,OS,{value:e})}})},ES=[sf("formBehaviours",[tt])],DS=function(t,n){return t.fold(function(){return B.error(n)},B.value)},AS={getField:Xn(function(t,n,e){return t.getField(n,e)}),sketch:function(t){var e,n={field:function(t,n){return e.push(t),vf("form",Gx(t),n)},record:q(e=[])},t=t(n),n=n.record(),n=C(n,function(t){return Jm({name:t,pname:Gx(t)})});return kf("form",ES,n,Xx,t)}},BS=E("valid-input"),MS=E("invalid-input"),FS=E("validating-input"),IS="colorcustom.rgb.",RS=function(m,g,p,h){function v(t,n,e,o,r){var i=m(IS+"range"),e=[S.parts.label({dom:{tag:"label",innerHtml:e,attributes:{"aria-label":o}}}),S.parts.field({data:r,factory:gw,inputAttributes:D({type:"text"},"hex"===n?{"aria-live":"polite"}:{}),inputClasses:[g("textfield")],inputBehaviours:Z([u(n,t),Q0.config({})]),onSetValue:function(t){kw.isInvalid(t)&&kw.run(t).get(Y)}})],o="hex"!==n?[S.parts["aria-descriptor"]({text:i})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:e.concat(o)}}function b(t,n){var e=n.red,o=n.green,n=n.blue;tt.setValue(t,{red:e,green:o,blue:n})}function y(t,n){x.getOpt(t).each(function(t){A(t.element,"background-color","#"+n.value)})}var u=function(n,e){return kw.config({invalidClass:g("invalid"),notify:{onValidate:function(t){$(t,FS,{type:n})},onValid:function(t){$(t,BS,{type:n,value:tt.getValue(t)})},onInvalid:function(t){$(t,MS,{type:n,value:tt.getValue(t)})}},validator:{validate:function(t){t=tt.getValue(t),t=e(t)?B.value(!0):B.error(m("aria.input.invalid"));return ww.pure(t)},validateOnLoad:!1}})},x=it({dom:{tag:"div",classes:[g("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return dg({factory:function(){function t(t){return r[t].get()}function n(t,n){"hex"!==(n=n.event).type?u(n.type,K.none()):h(t)}function i(o,t,n){n=parseInt(n,10),u(t,K.some(n)),a().each(function(t){n=o,e=cv(t),AS.getField(n,"hex").each(function(t){rt.isFocused(t)||tt.setValue(n,{hex:e.value})});var n,e,t=e;$(o,CS,{hex:t}),y(o,t)})}function e(t,n){var e,o,r;"hex"===(n=n.event).type?(e=t,o=n.value,p(e),r=ov(o),u("hex",K.some(o)),o=ky(r),b(e,o),c(o),$(e,CS,{hex:r}),y(e,r)):i(t,n.type,n.value)}function o(t){return{label:m(IS+t+".label"),description:m(IS+t+".description")}}var r={red:T(K.some(255)),green:T(K.some(255)),blue:T(K.some(255)),hex:T(K.some("ffffff"))},u=function(t,n){r[t].set(n)},a=function(){return t("red").bind(function(e){return t("green").bind(function(n){return t("blue").map(function(t){return sv(e,n,t,1)})})})},c=function(t){var n=t.red,e=t.green,t=t.blue;u("red",K.some(n)),u("green",K.some(e)),u("blue",K.some(t))},s=o("red"),l=o("green"),f=o("blue"),d=o("hex");return Xr(AS.sketch(function(t){return{dom:{tag:"form",classes:[g("rgb-form")],attributes:{"aria-label":m("aria.color.picker")}},components:[t.field("red",S.sketch(v(lv,"red",s.label,s.description,255))),t.field("green",S.sketch(v(lv,"green",l.label,l.description,255))),t.field("blue",S.sketch(v(lv,"blue",f.label,f.description,255))),t.field("hex",S.sketch(v(rv,"hex",d.label,d.description,"ffffff"))),x.asSpec()],formBehaviours:Z([kw.config({invalidClass:g("form-invalid")}),ot("rgb-form-events",[Q(BS,e),Q(MS,n),Q(FS,n)])])}}),{apis:{updateHex:function(t,n){tt.setValue(t,{hex:n.value});var e=t,o=n;o=ky(o),b(e,o),c(o),y(t,n)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,n,e){t.updateHex(n,e)}},extraApis:{}})},NS=function(t,o){function r(t,n){var e=t.width,o=t.height;null!==(t=t.getContext("2d"))&&(t.fillStyle=n,t.fillRect(0,0,e,o),(n=t.createLinearGradient(0,0,e,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(0,0,e,o),(n=t.createLinearGradient(0,0,0,o)).addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=n,t.fillRect(0,0,e,o))}var i=kS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[o("sv-palette-spectrum")]}}),u=kS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette-thumb")],innerHtml:"<div class="+o("sv-palette-inner-thumb")+' role="presentation"></div>'}});return dg({factory:function(t){var n=q({x:0,y:0}),e=Z([y.config({find:K.some}),rt.config({})]);return kS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette")]},model:{mode:"xy",getInitialValue:n},rounded:!1,components:[i,u],onChange:function(t,n,e){$(t,_S,{value:e})},onInit:function(t,n,e,o){r(e.element.dom,gv(Cy))},sliderBehaviours:e})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,n,e){var o=n;o=n.components()[0].element.dom,e=Dy(e,100,100),e=fv(e),r(o,gv(e))},setThumb:function(t,n,e){e=Ay(ky(e)),kS.setValue(n,{x:e.saturation,y:100-e.value})}},extraApis:{}})},PS={self:function(){return y.config({find:K.some})},memento:function(t){return y.config({find:t.getOpt})},childAt:function(t){return y.config({find:function(n){return jo(n.element,t).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}})}},VS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},HS=function(t){return VS[t]},LS=tinymce.util.Tools.resolve("tinymce.Resource"),zS=tinymce.util.Tools.resolve("tinymce.util.Tools"),US=g([s("preprocess",v),s("postprocess",v)]),jS=function(e,t){var o=bi("RepresentingConfigs.memento processors",US,t);return tt.config({store:{mode:"manual",getValue:function(t){t=e.get(t),t=tt.getValue(t);return o.postprocess(t)},setValue:function(t,n){n=o.preprocess(n),t=e.get(t);tt.setValue(t,n)}}})},WS=Kx,GS=function(t){return Jx(t,zu,Ln)},XS=function(t){return tt.config({store:{mode:"memory",initialValue:t}})},YS="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",qS=E("alloy-fake-before-tabstop"),KS=E("alloy-fake-after-tabstop"),JS=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Z([rt.config({ignore:!0}),Q0.config({})])}},$S=function(t,n){n=n.element;ha(n,qS)?Zx(t,!0):ha(n,KS)&&Zx(t,!1)},QS=!(Ao().browser.isIE()||Ao().browser.isEdge()),ZS=function(t,n){return e=document.createElement("canvas"),n=n,e.width=t,e.height=n,e;var e},tk=function(t){return t.getContext("2d")},nk=function(t){return t.naturalWidth||t.width},ek=function(t){return t.naturalHeight||t.height},ok=function(t,o,r){return o=o||"image/png",R(HTMLCanvasElement.prototype.toBlob)?new vw(function(n,e){t.toBlob(function(t){t?n(t):e()},o,r)}):o0(t.toDataURL(o,r))},rk=function(t,n,e){function o(n,e){return t.then(function(t){return t.toDataURL(n||"image/png",e)})}var r=n.type,r=q(r),i=q(e);return{getType:r,toBlob:function(){return vw.resolve(n)},toDataURL:i,toBase64:function(){return e.split(",")[1]},toAdjustedBlob:function(n,e){return t.then(function(t){return ok(t,n,e)})},toAdjustedDataURL:o,toAdjustedBase64:function(t,n){return o(t,n).then(function(t){return t.split(",")[1]})},toCanvas:function(){return t.then(e0)}}},ik=function(n){return e=n,new vw(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)}).then(function(t){return rk(r0(n),n,t)});var e},uk=function(n,t){return ok(n,t).then(function(t){return rk(vw.resolve(n),t,n.toDataURL())})},ak=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],ck=function(t,n,e){var o=tk(t),e=function(t,n){for(var e,o,r,i,u=t.data,a=n[0],c=n[1],s=n[2],l=n[3],f=n[4],d=n[5],m=n[6],g=n[7],p=n[8],h=n[9],v=n[10],b=n[11],y=n[12],x=n[13],w=n[14],S=n[15],k=n[16],C=n[17],O=n[18],_=n[19],T=0;T<u.length;T+=4)e=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=e*a+o*c+r*s+i*l+f,u[T+1]=e*d+o*m+r*g+i*p+h,u[T+2]=e*v+o*b+r*y+i*x+w,u[T+3]=e*S+o*k+r*C+i*O+_;return t}(o.getImageData(0,0,t.width,t.height),e);return o.putImageData(e,0,0),uk(t,n)},sk=function(t,n,e){var o=tk(t),e=function(t,n,e){for(var o=function(t,n,e){return e<t?t=e:t<n&&(t=n),t},r=Math.round(Math.sqrt(e.length)),i=Math.floor(r/2),u=t.data,a=n.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),v=4*(o(l+p-i,0,s-1)*c+v),b=e[p*r+h];d+=u[v]*b,m+=u[1+v]*b,g+=u[2+v]*b}var y=4*(l*c+f);a[y]=o(d,0,255),a[1+y]=o(m,0,255),a[2+y]=o(g,0,255)}return n}(o.getImageData(0,0,t.width,t.height),o.getImageData(0,0,t.width,t.height),e);return o.putImageData(e,0,0),uk(t,n)},lk=(k0=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return c0(t,k0)}),fk=s0(function(t,n){return n=i0(255*n,-255,255),a0(t,[1,0,0,0,n,0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1])}),dk=s0(function(t,n){var e;return n=i0(n,-1,1),e=(n*=100)<0?127+n/100*127:127*(e=0===(e=n%1)?ak[n]:ak[Math.floor(n)]*(1-e)+ak[Math.floor(n)+1]*e)+127,a0(t,[e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])}),mk=(C0=[0,-1,0,-1,5,-1,0,-1,0],function(t){return e=C0,(n=t).toCanvas().then(function(t){return sk(t,n.getType(),e)});var n,e}),gk=(O0=function(t,n){return 255*Math.pow(t/255,1-n)},function(a,c){return a.toCanvas().then(function(t){for(var n=a.getType(),e=c,o=tk(t),r=new Array(256),i=0;i<r.length;i++)r[i]=O0(i,e);var u=function(t,n){for(var e=t.data,o=0;o<e.length;o+=4)e[o]=n[e[o]],e[o+1]=n[e[o+1]],e[o+2]=n[e[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(u,0,0),uk(t,n)})}),pk=function(t,n){void 0===n&&(n=2);n=Math.pow(10,n),t=Math.round(t*n);return Math.ceil(t/n)},hk=function(t){return lk(t)},vk=function(t){return mk(t)},bk=function(t,n){return gk(t,n)},yk=function(t,n,e,o){return c0(t,(t=u0(),e=e,o=o,n=i0(n=n,0,2),e=i0(e,0,2),o=i0(o,0,2),a0(t,[n,0,0,0,0,0,e,0,0,0,0,0,o,0,0,0,0,0,1,0,0,0,0,0,1])))},xk=function(t,n){return fk(t,n)},wk=function(t,n){return dk(t,n)},Sk=function(i,u){return i.toCanvas().then(function(t){var n=i.getType(),e=u,o=ZS(t.width,t.height),r=tk(o);"v"===e?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0));return uk(o,n)})},kk=function(i,u,a,c,s){return i.toCanvas().then(function(t){return t=t,n=i.getType(),e=u,o=a,r=ZS(c,s),tk(r).drawImage(t,-e,-o),uk(r,n);var n,e,o,r})},Ck=function(t,n,e){return r=n,i=e,(o=t).toCanvas().then(function(t){return l0(t,r,i).then(function(t){return uk(t,o.getType())})});var o,r,i},Ok=function(s,l){return s.toCanvas().then(function(t){return t=t,n=s.getType(),e=((e=l)<0?360+e:e)*Math.PI/180,o=t.width,r=t.height,u=Math.sin(e),a=Math.cos(e),i=pk(Math.abs(o*a)+Math.abs(r*u)),u=pk(Math.abs(o*u)+Math.abs(r*a)),a=ZS(i,u),(c=tk(a)).translate(i/2,u/2),c.rotate(e),c.drawImage(t,-o/2,-r/2),uk(a,n);var n,e,o,r,i,u,a,c})},_k=function(t,n){return f0(t,n,[])},Tk=function(t,n){return f0(t,n,[et.config({})])},Ek=function(t,n,e){return{dom:{tag:"span",innerHtml:e.translate(t),classes:[n+"__select-label"]},behaviours:Z([et.config({})])}},Dk=E("toolbar.button.execute"),Ak=(($0={})[cu()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],$0),Bk=E("update-menu-text"),Mk=E("update-menu-icon"),Fk=function(n,e,o){function t(t,n){return t=tt.getValue(t),rt.focus(t),$(t,"keydown",{raw:n.event.raw}),Fw.close(t),K.some(!0)}var r=T(Y),i=n.text.map(function(t){return it(Ek(t,e,o.providers))}),u=n.icon.map(function(t){return it(Tk(t,o.providers.icons))}),a=n.role.fold(function(){return{}},function(t){return{role:t}}),c=n.tooltip.fold(function(){return{}},function(t){t=o.providers.translate(t);return{title:t,"aria-label":t}}),s=Oh("chevron-down",{tag:"div",classes:[e+"__select-chevron"]},o.providers.icons);return it(Fw.sketch(D(D(D({},n.uid?{uid:n.uid}:{}),a),{dom:{tag:"button",classes:[e,e+"--select"].concat(C(n.classes,function(t){return e+"--"+t})),attributes:D({},c)},components:oy([u.map(function(t){return t.asSpec()}),i.map(function(t){return t.asSpec()}),K.some(s)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Z(X(X([],n.dropdownBehaviours,!0),[$b.button(function(){return n.disabled||o.providers.isDisabled()}),Jb(),Iw.config({}),et.config({}),ot("dropdown-events",[Zb(n,r),ty(n,r)]),ot("menubutton-update-display-text",[Q(Bk,function(n,e){i.bind(function(t){return t.getOpt(n)}).each(function(t){et.set(t,[Sa(o.providers.translate(e.event.text))])})}),Q(Mk,function(n,e){u.bind(function(t){return t.getOpt(n)}).each(function(t){et.set(t,[Tk(e.event.icon,o.providers.icons)])})})])],!1)),eventOrder:Xr(Ak,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Z([M.config({mode:"special",onLeft:t,onRight:t})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:ob(!1,n.columns,n.presets)},fetch:function(t){return ww.nu(H(n.fetch,t))}}))).asSpec()},Ik={type:"separator"},Rk=function(t,e){t=ve(t,function(t,n){return d(n)?""===n?t:"|"===n?0<t.length&&!d0(t[t.length-1])?t.concat([Ik]):t:He(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])},[]);return 0<t.length&&d0(t[t.length-1])&&t.pop(),t},Nk=function(t,n){return He(t,"getSubmenuItems")?(n=n,o=(e=t).getSubmenuItems(),o=Vk(o,n),{item:e,menus:Xr(o.menus,Ai(e.value,o.items)),expansions:Xr(o.expansions,Ai(e.value,e.value))}):{item:t,menus:{},expansions:{}};var e,o},Pk=function(t){var n;return d0(t)?t:(n=O(t,"value").getOrThunk(function(){return E("generated-menu-item")}),Xr({value:n},t))},Vk=function(t,e){t=Rk(d(t)?t.split(" "):t,e);return he(t,function(t,n){n=Pk(n),n=Nk(n,e);return{menus:Xr(t.menus,n.menus),items:[n.item].concat(t.items),expansions:Xr(t.expansions,n.expansions)}},{menus:{},expansions:{},items:[]})},Hk=function(t,e,o,n){var r,i=E("primary-menu"),t=Vk(t,o.shared.providers.menuItems());return 0===t.items.length?K.none():(n=j0(i,t.items,e,o,n),r=Ie(t.menus,function(t,n){return j0(n,t,e,o,!1)}),r=Xr(r,Ai(i,n)),K.from(fp.tieredData(i,r,t.expansions)))},Lk=function(e){return{isDisabled:function(){return nt.isDisabled(e)},setDisabled:function(t){return nt.set(e,t)},setActive:function(t){var n=e.element;t?(ma(n,"tox-tbtn--enabled"),_(n,"aria-pressed",!0)):(pa(n,"tox-tbtn--enabled"),rr(n,"aria-pressed"))},isActive:function(){return ha(e.element,"tox-tbtn--enabled")}}},zk=function(t,n,e,o,r,i){void 0===e&&(e=[]);n=n.fold(function(){return{}},function(t){return{action:t}}),e=D({buttonBehaviours:Z([$b.button(function(){return t.disabled||i.isDisabled()}),Jb(),Q0.config({}),ot("button press",[Nn("click"),Nn("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},n),n=Xr(e,{dom:o});return Xr(n,{components:r})},Uk=function(t,n,e,o){void 0===o&&(o=[]);t=p0(t,K.some(n),e,o);return vp.sketch(t)},jk=function(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=e.translate(t.text),u=t.icon?t.icon.map(function(t){return _k(t,e.icons)}):K.none(),a=u.isSome()?oy([u]):[],c=u.isSome()?{}:{innerHtml:i},u=X(X(X(X([],t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),u.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),r,!0),r=D(D({tag:"button",classes:u},c),{attributes:{title:i}});return zk(t,n,o,r,a,e)},Wk=function(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);t=jk(t,K.some(n),e,o,r);return vp.sketch(t)},Pg=q([s("field1Name","field1"),s("field2Name","field2"),Na("onLockedChange"),Fa(["lockClass"]),s("locked",!1),Vm.field("coupledFieldBehaviours",[y,tt])]),wl=q([y0("field1","field2"),y0("field2","field1"),Jm({factory:vp,schema:[i("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Z([m.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),Gk=Cf({name:"FormCoupledInputs",configFields:Pg(),partFields:wl(),factory:function(e,t,n,o){return{uid:e.uid,dom:e.dom,components:t,behaviours:Vm.augment(e.coupledFieldBehaviours,[y.config({find:K.some}),tt.config({store:{mode:"manual",getValue:function(t){var t=wf(t,e,["field1","field2"]),n={};return n[e.field1Name]=tt.getValue(t.field1()),n[e.field2Name]=tt.getValue(t.field2()),n},setValue:function(t,n){t=wf(t,e,["field1","field2"]);Le(n,e.field1Name)&&tt.setValue(t.field1(),n[e.field1Name]),Le(n,e.field2Name)&&tt.setValue(t.field2(),n[e.field2Name])}}})]),apis:{getField1:function(t){return og(t,e,"field1")},getField2:function(t){return og(t,e,"field2")},getLock:function(t){return og(t,e,"lock")}}}},apis:{getField1:function(t,n){return t.getField1(n)},getField2:function(t,n){return t.getField2(n)},getLock:function(t,n){return t.getLock(n)}}}),Xk=function(t){var n,e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);return null!==e?(n=parseFloat(e[1]),e=e[2],B.value({value:n,unit:e})):B.error(t)},Yk=function(t,n){function e(t){return He(o,t)}var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return t.unit===n?K.some(t.value):e(t.unit)&&e(n)?o[t.unit]===o[n]?K.some(t.value):K.some(t.value/o[t.unit]*o[n]):K.none()},qk=function(t){return K.none()},Kk=function(n,e){return function(t){return Yk(t,e).map(function(t){return{value:t*n,unit:e}})}},Jk=function(o,n){function t(t){return Oh(t,{tag:"span",classes:["tox-icon","tox-lock-icon__"+t]},n.icons)}function e(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}}function r(e){return S.parts.field({factory:gw,inputClasses:["tox-textfield"],inputBehaviours:Z([nt.config({disabled:function(){return o.disabled||n.isDisabled()}}),Jb(),Q0.config({}),ot("size-input-events",[Q(Yi(),function(t,n){$(t,a,{isField1:e})}),Q(Qi(),function(t,n){$(t,rw,{name:o.name})})])]),selectOnFocus:!1})}function i(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}}var u=qk,a=E("ratio-event"),c=Gk.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:n.translate(o.label.getOr("Constrain proportions"))}},components:[t("lock"),t("unlock")],buttonBehaviours:Z([nt.config({disabled:function(){return o.disabled||n.isDisabled()}}),Jb(),Q0.config({})])}),s=Gk.parts.field1(e([S.parts.label(i("Width")),r(!0)])),l=Gk.parts.field2(e([S.parts.label(i("Height")),r(!1)]));return Gk.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,l,e([i("&nbsp;"),c])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,o,n){Xk(tt.getValue(t)).each(function(t){u(t).each(function(t){var n,e;tt.setValue(o,(e={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},(e=-1!==(e=(t=t).value.toFixed((n=t.unit)in e?e[n]:1)).indexOf(".")?e.replace(/\.?0*$/,""):e)+t.unit))})})},coupledFieldBehaviours:Z([nt.config({disabled:function(){return o.disabled||n.isDisabled()},onDisabled:function(t){Gk.getField1(t).bind(S.getField).each(nt.disable),Gk.getField2(t).bind(S.getField).each(nt.disable),Gk.getLock(t).each(nt.disable)},onEnabled:function(t){Gk.getField1(t).bind(S.getField).each(nt.enable),Gk.getField2(t).bind(S.getField).each(nt.enable),Gk.getLock(t).each(nt.enable)}}),Jb(),ot("size-input-events2",[Q(a,function(t,n){var n=n.event.isField1,e=n?Gk.getField1(t):Gk.getField2(t),n=n?Gk.getField2(t):Gk.getField1(t),t=e.map(tt.getValue).getOr(""),e=n.map(tt.getValue).getOr("");u=function(t,n){t=Xk(t).toOptional(),n=Xk(n).toOptional();return je(t,n,function(t,n){return Yk(t,n.unit).map(function(t){return n.value/t}).map(function(t){return Kk(t,n.unit)}).getOr(qk)}).getOr(qk)}(t,e)})])])})},$k={undo:q(E("undo")),redo:q(E("redo")),zoom:q(E("zoom")),back:q(E("back")),apply:q(E("apply")),swap:q(E("swap")),transform:q(E("transform")),tempTransform:q(E("temp-transform")),transformApply:q(E("transform-apply"))},Km=q("save-state"),Ng=q("disable"),ml=q("enable"),Qk={formActionEvent:aw,saveState:Km,disable:Ng,enable:ml},Zk=tinymce.util.Tools.resolve("tinymce.geom.Rect"),tC=tinymce.util.Tools.resolve("tinymce.util.Observable"),nC=tinymce.util.Tools.resolve("tinymce.util.VK"),eC=function(t){var n=Math.max,e=t.documentElement,t=t.body,o=n(e.scrollWidth,t.scrollWidth),r=n(e.clientWidth,t.clientWidth),i=n(e.offsetWidth,t.offsetWidth),u=n(e.scrollHeight,t.scrollHeight),a=n(e.clientHeight,t.clientHeight);return{width:o<i?r:o,height:u<n(e.offsetHeight,t.offsetHeight)?a:u}},oC=function(t){if(I(t.changedTouches))for(var n="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<n.length;e++)t[n[e]]=t.changedTouches[0][n[e]]};function rC(t,o){function n(t){var n=t.raw,e=eC(l),t=(oC(n),t.prevent(),u=n.button,a=n.screenX,c=n.screenY,cr(m,"cursor"));i=w.fromTag("div",l),ar(i,{position:"absolute",top:"0",left:"0",width:e.width+"px",height:e.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:t}),_r(Zo(d),i),s.push(Ws(d,"mousemove",r),Ws(d,"touchmove",r),Ws(d,"mouseup",g),Ws(d,"touchend",g)),o.start(n)}function r(t){var n=t.raw;if(oC(n),n.button!==u)return g(t);n.deltaX=n.screenX-a,n.deltaY=n.screenY-c,t.prevent(),o.drag(n)}var i,u,a,c,e=[],s=[],l=null!=(f=o.document)?f:document,f=null!=(f=o.root)?f:l,d=w.fromDom(l),m=w.fromDom(f.getElementById(null!=(f=o.handle)?f:t)),g=function(t){oC(t.raw),x(s,function(t){return t.unbind()}),s=[],Ar(i),o.stop&&o.stop(t.raw)};return e.push(Ws(m,"mousedown",n),Ws(m,"touchstart",n)),{destroy:function(){x(s.concat(e),function(t){return t.unbind()}),s=[],e=[],I(i)&&Ar(i)}}}function iC(n){function u(t,s){c.getOpt(t).each(function(t){var e=f.get(),o=wr(t.element),r=pr(t.element),i=s.dom.naturalWidth*e,u=s.dom.naturalHeight*e,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),n={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};ar(s,n),l.getOpt(t).each(function(t){ar(t.element,n)}),d.run(function(t){var n=m.get();t.setRect({x:n.x*e+a,y:n.y*e+c,w:n.w*e,h:n.h*e}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})}function e(t,n){var i=w.fromTag("img");return _(i,"src",n),cC(i.dom).then(function(){t.getSystem().isConnected()&&c.getOpt(t).map(function(t){var r,n=ka({element:i}),n=(et.replaceAt(t,1,K.some(n)),a.get()),e={x:0,y:0,w:i.dom.naturalWidth,h:i.dom.naturalHeight},o=(a.set(e),Zk.inflate(e,-20,-20));m.set(o),n.w===e.w&&n.h===e.h||(r=i,c.getOpt(t).each(function(t){var n=wr(t.element),t=pr(t.element),e=r.dom.naturalWidth,o=r.dom.naturalHeight,n=Math.min(n/e,t/o);1<=n?f.set(1):f.set(n)})),u(t,i)})})}var l=it({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=T(1),d=zs(),m=T({x:0,y:0,w:1,h:1}),a=T({x:0,y:0,w:1,h:1}),t=K0.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:n}}},{dom:{tag:"div"},behaviours:Z([ot("image-panel-crop-events",[Nu(function(t){c.getOpt(t).each(function(t){t=t.element.dom,t=aC.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},t,Y);t.toggleVisibility(!1),t.on("updateRect",function(t){var t=t.rect,n=f.get(),t={x:Math.round(t.x/n),y:Math.round(t.y/n),w:Math.round(t.w/n),h:Math.round(t.h/n)};m.set(t)}),d.set(t)})}),Pu(function(){d.clear()})])])}],containerBehaviours:Z([et.config({}),ot("image-panel-events",[Nu(function(t){e(t,n)})])])}),c=it(t);return{memContainer:c,updateSrc:e,zoom:function(t,n){var e=f.get(),n=0<n?Math.min(2,e+.1):Math.max(.1,e-.1);f.set(n),c.getOpt(t).each(function(t){var n=t.components()[1].element;u(t,n)})},showCrop:function(){d.run(function(t){t.toggleVisibility(!0)})},hideCrop:function(){d.run(function(t){t.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var t=a.get();return{width:t.w,height:t.h}}}}var uC=0,aC={create:function(u,n,a,t,e){function c(t,n,e,o){var r=n.x+e*t.deltaX,i=n.y+o*t.deltaY,e=Math.max(20,n.w+e*t.deltaW),n=Math.max(20,n.h+o*t.deltaH),o=(u=Zk.clamp({x:r,y:i,w:e,h:n},a,"move"===t.name),g(a,u));b.fire("updateRect",{rect:o}),p(o)}function o(e){function t(t,n){Hc(f,"#"+l+"-"+t).each(function(t){ar(t,{left:n.x+"px",top:n.y+"px",width:Math.max(0,n.w)+"px",height:Math.max(0,n.h)+"px"})})}x(d,function(n){Hc(f,"#"+l+"-"+n.name).each(function(t){ar(t,{left:e.w*n.xMul+e.x+"px",top:e.h*n.yMul+e.y+"px"})})}),t("top",{x:n.x,y:n.y,w:n.w,h:e.y-n.y}),t("right",{x:e.x+e.w,y:e.y,w:n.w-e.x-e.w+n.x,h:e.h}),t("bottom",{x:n.x,y:e.y+e.h,w:n.w,h:n.h-e.y-e.h+n.y}),t("left",{x:n.x,y:e.y,w:e.x-n.x,h:e.h}),t("move",e)}function r(t){o(u=t)}var i,s=[],l="tox-crid-"+uC++,f=w.fromDom(t),d=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],m=["top","right","bottom","left"],g=function(t,n){return{x:n.x-t.x,y:n.y-t.y,w:n.w,h:n.h}},p=function(t){var n;r((n=a,{x:t.x+n.x,y:t.y+n.y,w:t.w,h:t.h}))};function h(t){_(t.target,"aria-grabbed","focus"===t.raw.type?"true":"false")}var v=w.fromTag("div"),b=(It(v,{id:l,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),_r(f,v),x(m,function(e){Hc(f,"#"+l).each(function(t){var n=w.fromTag("div");It(n,{id:l+"-"+e,class:"tox-croprect-block","data-mce-bogus":"all"}),A(n,"display","none"),_r(t,n)})}),x(d,function(e){Hc(f,"#"+l).each(function(t){var n=w.fromTag("div");It(n,{id:l+"-"+e.name,"aria-label":e.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:e.label}),va(n,["tox-croprect-handle","tox-croprect-handle-"+e.name]),A(n,"display","none"),_r(t,n)})}),i=C(d,function(n){var e;return rC(l,{document:t.ownerDocument,root:Yo(f).dom,handle:l+"-"+n.name,start:function(){e=u},drag:function(t){c(n,e,t.deltaX,t.deltaY)}})}),o(u),s.push(Ws(f,"focusin",h),Ws(f,"focusout",h),Ws(f,"keydown",function(n){function t(t,n,e,o,r){t.stopPropagation(),t.preventDefault(),c(i,e,o,r)}var i;x(d,function(t){if(nr(n.target,"id")===l+"-"+t.name)return i=t,!1});switch(n.raw.keyCode){case nC.LEFT:t(n,0,u,-10,0);break;case nC.RIGHT:t(n,0,u,10,0);break;case nC.UP:t(n,0,u,0,-10);break;case nC.DOWN:t(n,0,u,0,10);break;case nC.ENTER:case nC.SPACEBAR:n.prevent(),e()}})),D(D({},tC),{toggleVisibility:function(t){var n=X(X([],C(d,function(t){return"#"+l+"-"+t.name}),!0),C(m,function(t){return"#"+l+"-"+t}),!0).join(","),n=cm(f,n);x(n,t?function(t){return dr(t,"display")}:function(t){return A(t,"display","none")})},setClampRect:function(t){a=t,o(u)},setRect:r,getInnerRect:function(){return g(a,u)},setInnerRect:p,setViewPortRect:function(t){n=t,o(u)},destroy:function(){x(i,function(t){return t.destroy()}),i=[],x(s,function(t){return t.unbind()}),s=[]}}));return b}},cC=function(e){return new Cv(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},sC=function(t,n,e,o,r){return Uk({name:t,icon:K.some(n),disabled:e,tooltip:K.some(t),primary:!1,borderless:!1},o,r)},lC=function(t,n){n?nt.enable(t):nt.disable(t)};function fC(t){var e,o,n=T(t),r=Us(),i=(o=-1,{data:e=[],add:function(t){var n=e.splice(++o);return e.push(t),{state:t,removed:n}},undo:function(){if(0<o)return e[--o]},redo:function(){if(a())return e[++o]},canUndo:u,canRedo:a});function u(){return 0<o}function a(){return-1!==o&&o<e.length-1}function c(t){n.set(t)}function s(t){return{blob:t,url:URL.createObjectURL(t)}}function l(){r.on(d),r.clear()}function f(t){var t=s(t),n=(c(t),i.add(t).removed);return zS.each(n,d),t.url}i.add(t);var d=function(t){URL.revokeObjectURL(t.url)};return{getBlobState:function(){return n.get()},setBlobState:c,addBlobState:f,getTempState:function(){return r.get().getOrThunk(n.get)},updateTempState:function(t){t=s(t);return l(),r.set(t),t.url},addTempState:function(t){t=s(t);return r.set(t),t.url},applyTempState:function(n){return r.get().fold(Y,function(t){f(t.blob),n()})},destroyTempState:l,undo:function(){var t=i.undo();return c(t),t.url},redo:function(){var t=i.redo();return c(t),t.url},getHistoryStates:function(){return{undoEnabled:i.canUndo(),redoEnabled:i.canRedo()}}}}function dC(t,n){function i(t){return t.toBlob()}function r(t,n,e){var o=a.getBlobState().blob;d(t,o,n,function(t){return a.updateTempState(t)},e)}var o,u,a=fC(t.currentState),c=function(t){var n=a.getHistoryStates();p.updateButtonUndoStates(t,n.undoEnabled,n.redoEnabled),$(t,Qk.formActionEvent,{name:Qk.saveState(),value:n.undoEnabled})},s=function(t){$(t,Qk.formActionEvent,{name:Qk.disable(),value:{}})},l=function(t){e.getApplyButton(t).each(function(t){nt.enable(t)}),$(t,Qk.formActionEvent,{name:Qk.enable(),value:{}})},f=function(t,n){return s(t),g.updateSrc(t,n)},d=function(n,t,e,o,r){s(n),ik(t).then(e).then(i).then(o).then(function(t){return f(n,t)}).then(function(){c(n),r(),l(n)}).catch(function(t){console.log(t),n.getSystem().isConnected()&&l(n)})},m=function(t){var n=a.getBlobState().url;return a.destroyTempState(),c(t),n},g=iC(t.currentState.url),p=(o=it(sC("Undo","undo",!0,function(t){$(t,$k.undo(),{direction:1})},t=n)),u=it(sC("Redo","redo",!0,function(t){$(t,$k.redo(),{direction:1})},t)),{container:K0.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),u.asSpec(),sC("Zoom in","zoom-in",!1,function(t){$(t,$k.zoom(),{direction:1})},t),sC("Zoom out","zoom-out",!1,function(t){$(t,$k.zoom(),{direction:-1})},t)]}),updateButtonUndoStates:function(t,n,e){o.getOpt(t).each(function(t){lC(t,n)}),u.getOpt(t).each(function(t){lC(t,e)})}}),e=x0(g,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[e.memContainer.asSpec(),g.memContainer.asSpec(),p.container],behaviours:Z([tt.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),ot("image-tools-events",[Q($k.undo(),function(n,t){var e=a.undo();f(n,e).then(function(t){l(n),c(n)})}),Q($k.redo(),function(n,t){var e=a.redo();f(n,e).then(function(t){l(n),c(n)})}),Q($k.zoom(),function(t,n){n=n.event.direction;g.zoom(t,n)}),Q($k.back(),function(t,n){var e;t=m(e=t),f(e,t).then(function(t){l(e)}),(0,n.event.swap)(),g.hideCrop()}),Q($k.apply(),function(t,n){a.applyTempState(function(){m(t),(0,n.event.swap)()})}),Q($k.transform(),function(t,n){return r(t,n.event.transform,Y)}),Q($k.tempTransform(),function(t,n){var e;t=t,n=n.event.transform,e=a.getTempState().blob,d(t,e,n,function(t){return a.addTempState(t)},Y)}),Q($k.transformApply(),function(t,n){var e,o;e=t,t=n.event.transform,n=n.event.swap,o=a.getBlobState().blob,d(e,o,t,function(t){t=a.addBlobState(t);return m(e),t},n)}),Q($k.swap(),function(n,t){p.updateButtonUndoStates(n,!1,!1);var e=t.event.transform,o=t.event.swap;e.fold(function(){o()},function(t){r(n,t,o)})})]),PS.self()])}}function mC(t,n){function e(t){return{dom:{tag:"tr"},components:C(t,r)}}var o,r=function(t){return{dom:{tag:"td",innerHtml:n.translate(t)}}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(o=t.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:C(o,function(t){return{dom:{tag:"th",innerHtml:n.translate(t)}}})}]}),(o=t.cells,{dom:{tag:"tbody"},components:C(o,e)})],behaviours:Z([Q0.config({}),rt.config({})])}}function gC(e,n){var t=e.label.map(function(t){return ow(t,n)}),o=[nt.config({disabled:function(){return e.disabled||n.isDisabled()}}),Jb(),M.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:function(t){return J(t,cw),K.some(!0)}}),ot("textfield-change",[Q($i(),function(t,n){$(t,rw,{name:e.name})}),Q(uu(),function(t,n){$(t,rw,{name:e.name})})]),Q0.config({})],r=e.validation.map(function(e){return kw.config({getRoot:function(t){return zo(t.element)},invalidClass:"tox-invalid",validator:{validate:function(t){var t=tt.getValue(t),n=e.validator(t);return ww.pure(!0===n?B.value(t):B.error(n))},validateOnLoad:e.validateOnLoad}})}).toArray(),i=e.placeholder.fold(q({}),function(t){return{placeholder:n.translate(t)}}),u=e.inputMode.fold(q({}),function(t){return{inputmode:t}}),i=D(D({},i),u),u=S.parts.field({tag:!0===e.multiline?"textarea":"input",inputAttributes:i,inputClasses:[e.classname],inputBehaviours:Z(we([o,r])),selectOnFocus:!1,factory:gw}),i=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),o=[nt.config({disabled:function(){return e.disabled||n.isDisabled()},onDisabled:function(t){S.getField(t).each(nt.disable)},onEnabled:function(t){S.getField(t).each(nt.enable)}}),Jb()];return tw(t,u,i,o)}function pC(t){var n=T(null);return ia({readState:function(){return{timer:null!==n.get()?"set":"unset"}},setTimer:function(t){n.set(t)},cancel:function(){var t=n.get();null!==t&&t.cancel()}})}function hC(t,n,e){e=tt.getValue(e),tt.setValue(n,e),vC(n)}function vC(t){TO(t,function(t,n){return t.setSelectionRange(n.length,n.length)})}function bC(t,n,o){var r,e;return t.selectsOver&&(e=tt.getValue(n),r=t.getDisplayText(e),e=tt.getValue(o),0===t.getDisplayText(e).indexOf(r))?K.some(function(){var e;hC(0,n,o),e=r.length,TO(n,function(t,n){return t.setSelectionRange(e,n.length)})}):K.none()}function yC(t){return AO(ww.nu(t))}function xC(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Y}}function wC(t,n){return{type:"menuitem",value:n,text:t,meta:{attach:void 0},onAction:Y}}function SC(t,n){return e=t,t=pe(n,function(t){return t.type===e}),C(t,xC);var e}function kC(i,n,u){function r(t){t=tt.getValue(t),u.addToHistory(t.value,i.filetype)}var t,e,o,a=n.shared.providers,c=S.parts.field({factory:DO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":LO,type:"url"},minChars:0,responseTime:0,fetch:function(t){e=i.filetype,t=t,o=u,t=tt.getValue(t),r=void 0!==t.meta.text?t.meta.text:t.value;var e,o,r,t=o.getLinkInformation().fold(function(){return[]},function(t){var n=HO(r,PO(o.getHistory(e)));return"file"===e?VO([n,HO(r,FO(t)),HO(r,we([RO(t),IO(t),NO(t)]))]):n}),t=Hk(t,Hv.BUBBLE_TO_SANDBOX,n,!1);return ww.pure(t)},getHotspot:function(t){return g.getOpt(t)},onSetValue:function(t,n){t.hasConfigured(kw)&&kw.run(t).get(Y)},typeaheadBehaviours:Z(we([u.getValidationHandler().map(function(o){return kw.config({getRoot:function(t){return zo(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,n){l.getOpt(t).each(function(t){_(t.element,"title",a.translate(n))})}},validator:{validate:function(t){var n=tt.getValue(t);return BO(function(e){o({type:i.filetype,url:n.value},function(t){var n;"invalid"===t.status?(n=B.error(t.message),e(n)):(n=B.value(t.message),e(n))})})},validateOnLoad:!1}})}).toArray(),[nt.config({disabled:function(){return i.disabled||a.isDisabled()}}),Q0.config({}),ot("urlinput-events",we(["file"===i.filetype?[Q($i(),function(t){$(t,rw,{name:i.name})})]:[],[Q(Qi(),function(t){$(t,rw,{name:i.name}),r(t)}),Q(uu(),function(t){$(t,rw,{name:i.name}),r(t)})]]))]])),eventOrder:((c={})[$i()]=["streaming","urlinput-events","invalidating"],c),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:n.shared.getSink,parts:{menu:ob(!1,1,"normal")},onExecute:function(t,n,e){$(n,cw,{})},onItemExecute:function(t,n,e,o){r(t),$(t,rw,{name:i.name})}}),s=i.label.map(function(t){return ow(t,a)}),l=it((t="invalid",e=K.some(LO),Oh(f=void 0===(f="warning")?t:f,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+t],attributes:D({title:a.translate(o=void 0===o?t:o),"aria-live":"polite"},e.fold(function(){return{}},function(t){return{id:t}}))},a.icons))),f=it({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[l.asSpec()]}),d=u.getUrlPicker(i.filetype),m=E("browser.url.event"),g=it({dom:{tag:"div",classes:["tox-control-wrap"]},components:[c,f.asSpec()],behaviours:Z([nt.config({disabled:function(){return i.disabled||a.isDisabled()}})])}),p=it(Wk({name:i.name,icon:K.some("browse"),text:i.label.getOr(""),disabled:i.disabled,primary:!1,borderless:!0},function(t){return J(t,m)},a,[],["tox-browse-url"]));return S.sketch({dom:ew([]),components:s.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:we([[g.asSpec()],d.map(function(){return p.asSpec()}).toArray()])}]),fieldBehaviours:Z([nt.config({disabled:function(){return i.disabled||a.isDisabled()},onDisabled:function(t){S.getField(t).each(nt.disable),p.getOpt(t).each(nt.disable)},onEnabled:function(t){S.getField(t).each(nt.enable),p.getOpt(t).each(nt.enable)}}),Jb(),ot("url-input-events",[Q(m,function(o){y.getCurrent(o).each(function(n){var t=tt.getValue(n),e=D({fieldname:i.name},t);d.each(function(t){t(e).get(function(t){tt.setValue(n,t),$(o,rw,{name:i.name})})})})})])])})}function CC(e,n){function t(t){return t.element.dom.click(),K.some(!0)}function o(t){return Oh("checked"===t?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t]},n.icons)}var r=tt.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,n){t.element.dom.checked=n}}}),r=S.parts.field({factory:{sketch:v},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Z([PS.self(),nt.config({disabled:function(){return e.disabled||n.isDisabled()}}),Q0.config({}),rt.config({}),r,M.config({mode:"special",onEnter:t,onSpace:t,stopSpaceKeyup:!0}),ot("checkbox-events",[Q(Qi(),function(t,n){$(t,rw,{name:e.name})})])])}),i=S.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:n.translate(e.label)},behaviours:Z([Iw.config({})])}),u=it({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]});return S.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,u.asSpec(),i],fieldBehaviours:Z([nt.config({disabled:function(){return e.disabled||n.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){S.getField(t).each(nt.disable)},onEnabled:function(t){S.getField(t).each(nt.enable)}}),Jb()])})}function OC(r){return function(n,e,o){return O(e,"name").fold(function(){return r(e,o)},function(t){return n.field(t,r(e,o))})}}function _C(n,t,e){var o=Xr(e,{shared:{interpreter:function(t){return TC(n,t,o)}}});return TC(n,t,o)}function TC(n,e,o){return O(zO,e.type).fold(function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e},function(t){return t(n,e,o)})}function EC(t,n,e){var o={maxHeightFunction:el()};return function(){return e()?{type:"node",root:qo(t()),node:K.from(t()),bubble:il(12,12,jO),layouts:{onRtl:function(){return[Kd]},onLtr:function(){return[qd]}},overrides:o}:{type:"hotspot",hotspot:n(),bubble:il(-12,12,jO),layouts:{onRtl:function(){return[fs]},onLtr:function(){return[ds]}},overrides:o}}}function DC(t,n,e){return function(){return e()?{type:"node",root:qo(t()),node:K.from(t()),layouts:{onRtl:function(){return[gp]},onLtr:function(){return[gp]}}}:{type:"hotspot",hotspot:n(),layouts:{onRtl:function(){return[hs]},onLtr:function(){return[hs]}}}}}function AC(t,n,e){function o(){return w.fromDom(t.getBody())}function r(){return w.fromDom(t.getContentAreaContainer())}function i(){return s||!e()}var u,a,c,s=Lb(t);return{inlineDialog:EC(r,n,i),banner:DC(r,n,i),cursor:(a=t,function(){return{type:"selection",root:c(),getSelection:function(){var t=a.selection.getRng();return K.some(Cl.range(w.fromDom(t.startContainer),t.startOffset,w.fromDom(t.endContainer),t.endOffset))}}}),node:(u=c=o,function(t){return{type:"node",root:u(),node:t}})}}function BC(t){return{colorPicker:function(t,n){Qy(r)(t,n)},hasCustomColors:function(){return Uy(o)},getColors:function(){return jy(e)},getColorCols:(n=e=o=r=t,function(){return Xy(n)})};var n,e,o,r}function MC(t){return ve(t,function(t,n){var e;return He(n,"items")?(e=MC(n.items),{customFormats:t.customFormats.concat(e.customFormats),formats:t.formats.concat([{title:n.title,items:e.formats}])}):He(n,"inline")||He(n,"block")||He(n,"selector")?(e="custom-"+(d(n.name)?n.name:n.title.toLowerCase()),{customFormats:t.customFormats.concat([{name:e,format:n}]),formats:t.formats.concat([{title:n.title,format:e,icon:n.icon}])}):D(D({},t),{formats:t.formats.concat(n)})},{customFormats:[],formats:[]})}function FC(n,t){function e(t){x(t,function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)})}var o=MC(t);return n.formatter?e(o.customFormats):n.on("init",function(){e(o.customFormats)}),o.formats}function IC(t,n,e){return n={type:"formatter",isSelected:n(t.format),getStylePreview:e(t.format)},Xr(t,n)}function RC(o,t,r,i){function u(t){return C(t,function(t){var n,e=Be(t);return Le(t,"items")?(n=u(t.items),Xr(Xr(t,{type:"submenu"}),{getStyleItems:q(n)})):Le(t,"format")?IC(t,r,i):1===e.length&&de(e,"title")?Xr(t,{type:"separator"}):(e=d((n=t).name)?n.name:E(n.title),t={type:"formatter",format:t="custom-"+e,isSelected:r(t),getStylePreview:i(t)},n=Xr(n,t),o.formatter.register(e,n),n)})}return u(t)}function NC(e){function o(t){return function(){return e.formatter.match(t)}}function r(n){return function(){var t=e.formatter.get(n);return void 0!==t?K.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(n))}):K.none()}}function i(t){var n=t.items;return void 0!==n&&0<n.length?Se(n,i):[t.format]}var u=T([]),a=T([]),c=T([]),s=T([]),l=T(!1);return e.on("PreInit",function(t){var n=GO(e),n=RC(e,n,o,r);u.set(n),a.set(Se(n,i))}),e.on("addStyleModifications",function(t){var n=RC(e,t.items,o,r);c.set(n),l.set(t.replace),s.set(Se(n,i))}),{getData:function(){var t=l.get()?[]:u.get(),n=c.get();return t.concat(n)},getFlattenedKeys:function(){var t=l.get()?[]:a.get(),n=s.get();return t.concat(n)}}}function PC(e){return function(t){if(I(n=t)&&1===n.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}var n;return!1}}function VC(t,n,e,o,r){return{type:t,title:n,url:e,level:o,attach:r}}function HC(t){return t.innerText||t.textContent}function LC(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function zC(t){return KO(t)&&!qO(t)}function UC(t){return 0<XO(t.title).length}function jC(t){return d(t)&&/^https?/.test(t)}function WC(t){return p(t)&&ht(t,function(t){return!(h(t=t)&&t.length<=5&&ke(t,jC))}).isNone()}function GC(){var t,n=Fy.getItem(e_);if(null===n)return{};try{t=JSON.parse(n)}catch(t){if(t instanceof SyntaxError)return console.log("Local storage "+e_+" was not valid JSON",t),{};throw t}return WC(t)?t:(console.log("Local storage "+e_+" was not valid format",t),{})}function XC(t){var n=GC();return O(n,t).getOr([])}function YC(n,t){if(jC(n)){var e=GC(),o=O(e,t).getOr([]),o=pe(o,function(t){return t!==n}),t=(e[t]=[n].concat(o).slice(0,5),e);if(!WC(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));Fy.setItem(e_,JSON.stringify(t))}}function qC(t){return!!t}function KC(t){return Ie(zS.makeMap(t,/[, ]/),qC)}function JC(t){return K.from(t.getParam("file_picker_callback")).filter(R)}function $C(t,n){e=t,i=K.some(e.getParam("file_picker_types")).filter(qC),o=K.some(e.getParam("file_browser_callback_types")).filter(qC),r=i.or(o).map(KC);var e,o,r,i=JC(e).fold(U,function(t){return r.fold(j,function(t){return 0<Be(t).length&&t})});return k(i)?i?JC(t):K.none():i[n]?JC(t):K.none()}function QC(t){return K.from(t).filter(d).getOrUndefined()}function ZC(e){return{getHistory:XC,addToHistory:YC,getLinkInformation:function(){return!1===(t=e).getParam("typeahead_urls")?K.none():K.some({targets:n_(t.getBody()),anchorTop:QC(t.getParam("anchor_top","#top")),anchorBottom:QC(t.getParam("anchor_bottom","#bottom"))});var t},getValidationHandler:function(){return t=e,K.from(void 0===(n=(t=t).getParam("file_picker_validator_handler",void 0,"function"))?t.getParam("filepicker_validator_handler",void 0,"function"):n);var t,n},getUrlPicker:function(t){return $C(r=e,i=t).map(function(o){return function(n){return ww.nu(function(e){var t=D({filetype:i,fieldname:n.fieldname},K.from(n.meta).getOr({}));o.call(r,function(t,n){if(!d(t))throw new Error("Expected value to be string");if(void 0!==n&&!p(n))throw new Error("Expected meta to be a object");e({value:t,meta:n})},n.value,t)})}});var r,i}}}function t1(t){return l_(t).map(yr).getOrThunk(function(){return vr(0,0)})}function n1(t,n){var e=t.element;ma(e,n.transitionClass),pa(e,n.fadeOutClass),ma(e,n.fadeInClass),n.onShow(t)}function e1(t,n){var e=t.element;ma(e,n.transitionClass),pa(e,n.fadeInClass),ma(e,n.fadeOutClass),n.onHide(t)}function o1(t,n,e){return ke(t,function(t){switch(t){case"bottom":return n.bottom<=e.bottom;case"top":return n.y>=e.y}})}function r1(n,t){return t.getInitialPos().map(function(t){return Hr(t.bounds.x,t.bounds.y,wr(n),pr(n))})}function i1(t,n,e){e.setInitialPos({style:function(t){var n={},e=t.dom;if(qe(e))for(var o=0;o<e.style.length;o++){var r=e.style.item(o);n[r]=e.style[r]}return n}(t),position:cr(t,"position")||"static",bounds:n})}function u1(e,o,r){return r.getInitialPos().bind(function(t){switch(r.clearInitialPos(),t.position){case"static":return K.some(f_.static());case"absolute":var n=l_(e).map(Lr).getOrThunk(function(){return Lr(Qo())});return K.some(f_.absolute(ec("absolute",O(t.style,"left").map(function(t){return o.x-n.x}),O(t.style,"top").map(function(t){return o.y-n.y}),O(t.style,"right").map(function(t){return n.right-o.right}),O(t.style,"bottom").map(function(t){return n.bottom-o.bottom}))));default:return K.none()}})}function a1(t,n,e){var o,r,i,u;e.isDocked()&&(r=n,i=e,u=(o=t).element,i.setDocked(!1),m_(o,i).each(function(t){t.fold(function(){return g_(o,r,i)},function(t){return p_(o,r,i,t)},Y)}),i.setVisible(!0),r.contextual.each(function(t){ba(u,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(o)}),v_(o,r,i))}function c1(t,n){return de(b_.getModes(t),n)}function s1(t,n){n?(pa(t,x_.fadeOutClass),va(t,[x_.transitionClass,x_.fadeInClass])):(pa(t,x_.fadeInClass),va(t,[x_.fadeOutClass,x_.transitionClass]))}function l1(t,n){t=w.fromDom(t.getContainer()),n?(ma(t,w_),pa(t,S_)):(ma(t,S_),pa(t,w_))}function f1(r,t){function e(n){o().each(function(t){return n(t.element)})}function n(t){r.inline||k_(t),l1(r,b_.isDocked(t)),t.getSystem().broadcastOn([Am()],{}),o().each(function(t){return t.getSystem().broadcastOn([Am()],{})})}var i=Us(),o=t.getSink,u=r.inline?[]:[Es.config({channels:((u={})[y_()]={onReceive:k_},u)})];return X([rt.config({}),b_.config({contextual:D({lazyContext:function(t){var n=hr(t.element),e=r.inline?r.getContentAreaContainer():r.getContainer(),e=Lr(w.fromDom(e)),o=e.height-n,t=e.y+(c1(t,"top")?0:n);return K.some(Hr(e.x,t,e.width,o))},onShow:function(){e(function(t){return s1(t,!0)})},onShown:function(r){e(function(t){return ba(t,[x_.transitionClass,x_.fadeInClass])}),i.get().each(function(t){var n,e,o;n=r.element,o=Vo(e=t),Bs(o).filter(function(t){return!Io(e,t)}).filter(function(t){return Io(t,w.fromDom(o.dom.body))||Po(n,t)}).each(function(){return As(e)}),i.clear()})},onHide:function(t){var n;t=t.element,n=o,Ms(t).orThunk(function(){return n().toOptional().bind(function(t){return Ms(t.element)})}).fold(i.clear,i.set),e(function(t){return s1(t,!1)})},onHidden:function(){e(function(t){return ba(t,[x_.transitionClass])})}},x_),lazyViewport:function(t){var n=Ur(),e=r.getParam("toolbar_sticky_offset",0,"number"),o=n.y+(c1(t,"top")?e:0),t=n.height-(c1(t,"bottom")?e:0);return Hr(n.x,o,n.width,t)},modes:[t.header.getDockingMode()],onDocked:n,onUndocked:n})],u,!0)}function d1(t){return hi("menubutton",__,t)}function m1(t,n,e){var o=B_(n,t.element);("0px"===o?R_:N_)(t,n,e,K.some(o))}function g1(t,n,e){var o=D_(t,n),r=ha(o,n.shrinkingClass),i=B_(n,t.element),u=(I_(t,n),B_(n,t.element));(r?function(){A(t.element,A_(n),i),mr(t.element)}:function(){F_(t,n)})(),pa(o,n.shrinkingClass),ma(o,n.growingClass),I_(t,n),A(t.element,A_(n),u),e.setExpanded(),n.onStartGrow(t)}function p1(t,n,e){return t=D_(t,n),!0===ha(t,n.growingClass)}function h1(t,n,e){return t=D_(t,n),!0===ha(t,n.shrinkingClass)}function v1(t){return"<alloy.field."+t+">"}function b1(r,t){function n(t){return ig(r)}function e(e,o){return function(t,n){return og(t,r,n).map(function(t){return e(t,n)}).getOr(o)}}function o(t,n){return"true"!==nr(t.element,"aria-hidden")}var i,u=e(o,!1),a=e(function(t,n){var e;o(t)&&(e=t.element,A(e,"display","none"),_(e,"aria-hidden","true"),$(t,ku(),{name:n,visible:!1}))}),c=function(n,t){x(t,function(t){return i(n,t)})},s=e(function(t,n){var e;o(t)||(e=t.element,dr(e,"display"),rr(e,"aria-hidden"),$(t,ku(),{name:n,visible:!0}))}),u={getSlotNames:n,getSlot:function(t,n){return og(t,r,n)},isShowing:u,hideSlot:i=a,hideAllSlots:function(t){return c(t,n())},showSlot:s};return{uid:r.uid,dom:r.dom,components:t,behaviours:Nm(r.slotBehaviours),apis:u}}function y1(t){return{element:function(){return t.element.dom}}}function x1(e,o){var r=C(Be(o),function(t){var n=o[t],n=vi(hi("sidebar",z_,n));return{name:t,getApi:y1,onSetup:n.onSetup,onShow:n.onShow,onHide:n.onHide}});return C(r,function(t){var n=T(Y);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:wb.unnamedEvents([Zb(t,n),ty(t,n),Q(ku(),function(n,t){var e=t.event;ye(r,function(t){return t.name===e.name}).each(function(t){(e.visible?t.onShow:t.onHide)(t.getApi(n))})})])})})}function w1(t){return y.getCurrent(t).bind(function(t){return P_.isGrowing(t)||P_.hasGrown(t)?y.getCurrent(t).bind(function(n){return ye(L_.getSlotNames(n),function(t){return L_.isShowing(n,t)})}):K.none()})}function S1(t){y.getCurrent(t).each(function(t){return As(t.element)})}function k1(t,n,e,o){var r,i,u,a,c=n.element;r=e,u="data-mce-"+(i="tabindex"),K.from(t.iframeElement).map(w.fromDom).each(function(n){r?(er(n,i).each(function(t){return _(n,u,t)}),_(n,i,-1)):(rr(n,i),er(n,u).each(function(t){_(n,i,t),rr(n,u)}))}),e?(X_.block(n,(a=o,function(t,n){return{dom:{tag:"div",attributes:{"aria-label":a.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:em('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})),dr(c,"display"),rr(c,"aria-hidden"),t.hasFocus()&&S1(n)):(e=y.getCurrent(n).exists(function(t){return tc(t.element)}),X_.unblock(n),A(c,"display","none"),_(c,"aria-hidden","true"),e&&t.focus())}function C1(t,n,e){return{within:t,extra:n,withinWidth:e}}function O1(t,n,o){e=function(t,n){var e=o(t);return K.some({element:t,start:n,finish:n+e,width:e})};var e,t=ve(t,function(n,t){return e(t,n.len).fold(q(n),function(t){return{len:t.finish,list:n.list.concat([t])}})},{len:0,list:[]}).list,r=pe(t,function(t){return t.finish<=n}),i=he(r,function(t,n){return t+n.width},0);return{within:r,extra:t.slice(r.length),withinWidth:i}}function _1(t){return C(t,function(t){return t.element})}function T1(t,n,e,o){var r,i,u,a=(s=function(t,n,e){n=O1(n,t,e);return 0===n.extra.length?K.some(n):K.none()}(t,n,e).getOrThunk(function(){return O1(n,t-e(o),e)})).within,c=s.extra,s=s.withinWidth;return 1===c.length&&c[0].width<=e(o)?(i=s,r=_1((r=a).concat(c)),C1(r,[],i)):1<=c.length?(r=c,i=o,c=s,u=_1(u=a).concat([i]),C1(u,_1(r),c)):(u=s,C1(_1(a),[],u))}function E1(t,n){n=C(n,function(t){return Ta(t)}),a_.setGroups(t,n)}function D1(t,n){t=Cw.getCoupled(t,"toolbarSandbox"),l.isOpen(t)?l.close(t):l.open(t,n.toolbar())}function A1(t,e,o){q_(t,o,function(n){o.overflowGroups.set(n),e.getOpt(t).each(function(t){Q_.setGroups(t,tT(n))})})}function B1(n,e){og(n,e,"overflow-button").bind(function(){return og(n,e,"overflow")}).each(function(t){eT(n,e),P_.toggleGrow(t)})}function M1(t){var n=t.title.fold(function(){return{}},function(t){return{attributes:{title:t}}});return{dom:D({tag:"div",classes:["tox-toolbar__group"]},n),components:[Z_.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Z([Q0.config({}),rt.config({})])}}function F1(e,t){var n=Nu(function(t){var n=C(e.initGroups,rT);a_.setGroups(t,n)});return Z([$b.toolbarButton(e.providers.isDisabled),Jb(),M.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),ot("toolbar-events",[n])])}function I1(o){var t=iT(o),n=nT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return nT.sketch(D(D({},t),{lazySink:o.getSink,getOverflowBounds:function(){var t=o.moreDrawerData.lazyHeader().element,n=zr(t),t=Lo(t),e=zr(t),t=Math.max(t.dom.scrollHeight,e.height);return Hr(n.x+4,e.y,n.width-8,t)},parts:D(D({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}function R1(t){var n=oT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),e=oT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),t=iT(t);return oT.sketch(D(D({},t),{components:[n,e],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([y_()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([y_()],{type:"closed"})}}))}function N1(t){var n=t.cyclicKeying?"cyclic":"acyclic";return a_.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===pv.scrolling?["tox-toolbar--scrolling"]:[])},components:[a_.parts.groups({})],toolbarBehaviours:F1(t,n)})}function P1(n,e){var o=D(D({},cT),e.menus),r=0<Be(e.menus).length,t=void 0===e.menubar||!0===e.menubar?lT(aT):lT(!1===e.menubar?"":e.menubar),t=pe(t,function(t){var n=He(cT,t);return r?n||O(e.menus,t).exists(function(t){return He(t,"items")}):n}),t=C(t,function(t){t=o[t];return sT({title:t.title,items:lT(t.items)},e,n)});return pe(t,function(t){return 0<t.getItems().length&&me(t.getItems(),function(t){return"separator"!==t.type})})}function V1(t){function n(){t._skinLoaded=!0,Oy(t)}return function(){t.initialized?n():t.on("init",n)}}function H1(t,n){r=(u=n).getParam("skin"),i=u.getParam("skin_url"),!1!==r&&(r=r||"oxide",i=i?u.documentBaseURI.toAbsolute(i):Eb.baseURL+"/skins/ui/"+r);var e,o,r,i,u=i;u&&n.contentCSS.push(u+(t?"/content.inline":"/content")+".min.css"),!1===n.getParam("skin")==!1&&d(u)?Cv.all([fT(n,u+"/skin.min.css",n.ui.styleSheetLoader),(r=n,i=u,Ko(w.fromDom(r.getElement()))?fT(r,i+"/skin.shadowdom.min.css",Tb.DOM.styleSheetLoader):Cv.resolve())]).then(V1(n),(e=n,o="Skin could not be loaded",function(){return _y(e,{message:o})})):V1(n)()}function L1(o,r){return function(n){function t(){n.setActive(o.formatter.match(r));var t=o.formatter.formatChanged(r,n.setActive);e.set(t)}var e=Ls();return o.initialized?t():o.once("init",t),function(){o.off("init",t),e.clear()}}}function z1(t,n){return function(){return t.execCommand(n)}}function U1(t,u,a){function c(t,n,e){var o="formatter"===t.type&&a.isInvalid(t);return 0===n?o?[]:r(t,n,!1,e).toArray():r(t,n,o,e).toArray()}function i(t){var n=a.getCurrentValue(),e=a.shouldHide?0:1;return Se(t,function(t){return c(t,e,n)})}var r=function(t,n,e,o){var r,i=u.shared.providers.translate(t.title);return"separator"===t.type?K.some({type:"separator",text:i}):"submenu"===t.type?(r=Se(t.getStyleItems(),function(t){return c(t,n,o)}),0===n&&r.length<=0?K.none():K.some({type:"nestedmenuitem",text:i,disabled:r.length<=0,getSubmenuItems:function(){return Se(t.getStyleItems(),function(t){return c(t,n,o)})}})):K.some(D({type:"togglemenuitem",text:i,icon:t.icon,active:t.isSelected(o),disabled:e,onAction:a.onAction(t)},t.getStylePreview().fold(function(){return{}},function(t){return{meta:{style:t}}})))};return{validateItems:i,getFetch:function(o,r){return function(t,n){var e=r(),e=i(e);n(Hk(e,Hv.CLOSE_ON_EXECUTE,o,!1))}}}}function j1(t,n,e){var o=(r=hT(t,n,e)).items,r=r.getStyleItems,t=gT(t,"NodeChange",function(t){t=t.getComponent();e.updateText(t)});return Fk({text:e.icon.isSome()?K.none():e.text,icon:e.icon,tooltip:K.from(e.tooltip),role:K.none(),fetch:o.getFetch(n,r),onSetup:t,getApi:function(t){return{getComponent:q(t)}},columns:1,presets:"normal",classes:e.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",n.shared)}function W1(e){var t=vT(yT);return{tooltip:"Align",text:K.none(),icon:K.some("align-left"),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:K.none,getPreviewFor:function(t){return K.none},onAction:function(n){return function(){return ye(yT,function(t){return t.format===n.format}).each(function(t){return e.execCommand(t.command)})}},updateText:function(t){var n=ye(yT,function(t){return e.formatter.match(t.format)}).fold(q("left"),function(t){return t.title.toLowerCase()});$(t,Mk,{icon:"align-"+n})},dataset:t,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}}function G1(r){function o(){function n(t){return t?ST(t)[0]:""}var t=r.queryCommandValue("FontName"),e=u.data,o=t?t.toLowerCase():"";return{matchOpt:ye(e,function(t){t=t.format;return t.toLowerCase()===o||n(t).toLowerCase()===n(o).toLowerCase()}).orThunk(function(){return We(kT(o),{title:i,format:o})}),font:t}}var i="System Font",u=bT(r,"font_formats",xT,xO.SemiColon);return{tooltip:"Fonts",text:K.some(i),icon:K.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getCurrentValue:function(){return o().matchOpt},getPreviewFor:function(t){return function(){return K.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(t){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,t.format)})}},updateText:function(t){var n=o(),e=n.matchOpt,n=n.font,e=e.fold(q(n),function(t){return t.title});$(t,Bk,{text:e})},dataset:u,shouldHide:!1,isInvalid:U}}function X1(n){function o(){var o=K.none(),r=e.data,i=n.queryCommandValue("FontSize");if(i)for(var t=3;o.isNone()&&0<=t;t--)!function(t){var n=TT(i,t),e=ET(n);o=ye(r,function(t){return t.format===i||t.format===n||t.format===e})}(t);return{matchOpt:o,size:i}}var t=q(K.none),e=bT(n,"fontsize_formats",CT,xO.Space);return{tooltip:"Font sizes",text:K.some("12pt"),icon:K.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getPreviewFor:t,getCurrentValue:function(){return o().matchOpt},onAction:function(t){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("FontSize",!1,t.format)})}},updateText:function(t){var n=o(),e=n.matchOpt,n=n.size,e=e.fold(q(n),function(t){return t.title});$(t,Bk,{text:e})},dataset:e,shouldHide:!1,isInvalid:U}}function Y1(e){var o=bT(e,"block_formats",AT,xO.SemiColon);return{tooltip:"Blocks",text:K.some("Paragraph"),icon:K.none(),isSelectedFor:function(t){return function(){return e.formatter.match(t)}},getCurrentValue:K.none,getPreviewFor:function(n){return function(){var t=e.formatter.get(n);return K.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(n))})}},onAction:pT(e),updateText:function(t){var n=DT(e,function(){return o.data}).fold(q("Paragraph"),function(t){return t.title});$(t,Bk,{text:n})},dataset:o,shouldHide:!1,isInvalid:function(t){return!e.formatter.canApply(t.format)}}}function q1(o,t){return{tooltip:"Formats",text:K.some("Paragraph"),icon:K.none(),isSelectedFor:function(t){return function(){return o.formatter.match(t)}},getCurrentValue:K.none,getPreviewFor:function(n){return function(){var t=o.formatter.get(n);return void 0!==t?K.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styles:o.dom.parseStyle(o.formatter.getCssText(n))}):K.none()}},onAction:pT(o),updateText:function(t){function e(t){var n=t.items;return void 0!==n&&0<n.length?Se(n,e):[{title:t.title,format:t.format}]}var n=Se(GO(o),e),n=DT(o,q(n)).fold(q("Paragraph"),function(t){return t.title});$(t,Bk,{text:n})},shouldHide:o.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(t){return!o.formatter.canApply(t.format)},dataset:t}}function K1(n,e,t,o,r,i){return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]),attributes:RT(t,i)},components:oy([n.map(function(t){return _k(t,i.icons)}),e.map(function(t){return Ek(t,"tox-tbtn",i)})]),eventOrder:((t={})[Ui()]=["focusing","alloy.base.behaviour","common-button-display-events"],t),buttonBehaviours:Z([$b.toolbarButton(i.isDisabled),Jb(),ot("common-button-display-events",[Q(Ui(),function(t,n){n.event.prevent(),J(t,NT)})])].concat(o.map(function(t){return BT.config({channel:t,initialData:{icon:n,text:e},renderComponents:function(t,n){return oy([t.icon.map(function(t){return _k(t,i.icons)}),t.text.map(function(t){return Ek(t,"tox-tbtn",i)})])}})}).toArray()).concat(r.getOr([])))}}function J1(t,n,e){return PT(t,{toolbarButtonBehaviours:[].concat(0<e.length?[ot("toolbarButtonWith",e)]:[]),getApi:FT,onSetup:t.onSetup},n)}function $1(t,n,e){return Xr(PT(t,{toolbarButtonBehaviours:[et.config({}),m.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<e.length?[ot("toolbarToggleButtonWith",e)]:[]),getApi:IT,onSetup:t.onSetup},n))}function Q1(n,t){function e(e){return{isDisabled:function(){return nt.isDisabled(e)},setDisabled:function(t){return nt.set(e,t)},setIconFill:function(t,n){Hc(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){_(t,"fill",n)})},setIconStroke:function(t,n){Hc(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){_(t,"stroke",n)})},setActive:function(n){_(e.element,"aria-pressed",n),Hc(e.element,"span").each(function(t){e.getSystem().getByDom(t).each(function(t){return m.set(t,n)})})},isActive:function(){return Hc(e.element,"span").exists(function(t){return e.getSystem().getByDom(t).exists(m.isOn)})}}}var o,r,i,u=E("channel-update-split-dropdown-display"),a=T(Y),c={getApi:e,onSetup:n.onSetup};return MT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:D({"aria-pressed":!1},RT(n.tooltip,t.providers))},onExecute:function(t){n.onAction(e(t))},onItemExecute:function(t,n,e){},splitDropdownBehaviours:Z([$b.splitButton(t.providers.isDisabled),Jb(),ot("split-dropdown-events",[Q(NT,rt.focus),Zb(c,a),ty(c,a)]),Iw.config({})]),eventOrder:((c={})[yu()]=["alloy.base.behaviour","split-dropdown-events"],c),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:(o=e,r=n,i=t.providers,function(n){return ww.nu(function(t){return r.fetch(t)}).map(function(t){return K.from(W0(Xr(D0(E("menu-value"),t,function(t){r.onItemAction(o(n),t)},r.columns,r.presets,Hv.CLOSE_ON_EXECUTE,r.select.getOr(U),i),{movement:B0(r.columns,r.presets),menuBehaviours:wb.unnamedEvents("auto"!==r.columns?[]:[Nu(function(e,t){xb(e,4,Qv(r.presets)).each(function(t){var n=t.numRows,t=t.numColumns;M.setGridSize(e,n,t)})})])})))})}),parts:{menu:ob(!1,n.columns,n.presets)},components:[MT.parts.button(K1(n.icon,n.text,K.none(),K.some(u),K.some([m.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),MT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ph("chevron-down",t.providers.icons)},buttonBehaviours:Z([$b.splitButton(t.providers.isDisabled),Jb(),hh()])}),MT.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})}function Z1(o,r){return function(t,n,e){t=o(t).mapError(function(t){return yi(t)}).getOrDie();return r(t,n,e)}}function tO(n,t,e,o){var t=t.outerContainer,r=e.toolbar,i=e.buttons;a(r,d)?(r=r.map(function(t){t={toolbar:t,buttons:i,allowToolbarGroups:e.allowToolbarGroups};return GT(n,t,{backstage:o},K.none())}),uT.setToolbars(t,r)):uT.setToolbar(t,GT(n,e,{backstage:o},K.none()))}function nO(e,t){function n(){var t=c.get();t.left===u.innerWidth&&t.top===u.innerHeight||(c.set(vr(u.innerWidth,u.innerHeight)),Ty(e))}function o(){var t=e.getDoc().documentElement,n=s.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(s.set(vr(t.offsetWidth,t.offsetHeight)),Ty(e))}function r(t){return Ey(e,t)}var i=e.dom,u=e.getWin(),a=e.getDoc().documentElement,c=T(vr(u.innerWidth,u.innerHeight)),s=T(vr(a.offsetWidth,a.offsetHeight)),l=(i.bind(u,"resize",n),i.bind(u,"scroll",r),Gs(w.fromDom(e.getBody()),"load",o)),f=t.uiMothership.element;e.on("hide",function(){A(f,"display","none")}),e.on("show",function(){dr(f,"display")}),e.on("NodeChange",o),e.on("remove",function(){l.unbind(),i.unbind(u,"resize",n),i.unbind(u,"scroll",r),u=null})}function eO(n,t,e){return t=t.filter(function(t){return n<t}),e=e.filter(function(t){return t<n}),t.or(e).getOr(n)}function oO(r,i,t,n,o){function u(t){return p?t.fold(q(0),function(t){return 1<t.components().length?pr(t.components()[1].element):0}):0}function e(t){var n,e;void 0===t&&(t=!0),!l&&f&&v()&&(n=m.getDockingMode(),(e=b(o.get()))!==n)&&(y(e),t)&&k(!0)}var a=t.uiMothership,c=t.outerContainer,s=Tb.DOM,l=Lb(r),f=jb(r),d=Ab(r).or($T(r)),m=n.shared.header,g=m.isPositionedAtTop,p=(n=Rb(r))===pv.sliding||n===pv.floating,h=T(!1),v=function(){return h.get()&&!r.removed},b=function(t){switch(Pb(r)){case hv.auto:var n,e=uT.getToolbar(c),e=u(e),e=pr(t.element)-e,o=Lr(i);return!(o.y>e)&&(n=Lo(i),n=Math.max(n.dom.scrollHeight,pr(n)),o.bottom<n-e||Ur().bottom<o.bottom-e)?"bottom":"top";case hv.bottom:return"bottom";default:hv.top;return"top"}},y=function(t){var n=o.get(),t=(b_.setModes(n,[t]),m.setDockingMode(t),g()?Mc.TopToBottom:Mc.BottomToTop);_(n.element,ll,t)},x=function(){var t=d.getOrThunk(function(){var t=qT(cr(Qo(),"margin-left")).getOr(0);return wr(Qo())-yr(i).left+t});A(o.get().element,"max-width",t+"px")},w=function(){var t=uT.getToolbar(c),t=u(t),n=Lr(i),t=g()?Math.max(n.y-pr(o.get().element)+t,0):n.bottom;ar(c.element,{position:"absolute",top:Math.round(t)+"px",left:Math.round(n.x)+"px"})},S=function(){a.broadcastOn([Am()],{})},k=function(t){var n;void 0===t&&(t=!1),v()&&(l||x(),p&&uT.refreshToolbar(c),l||w(),f&&(n=o.get(),t?b_.reset(n):b_.refresh(n)),S())};return{isVisible:v,isPositionedAtTop:g,show:function(){h.set(!0),A(c.element,"display","flex"),s.addClass(r.getBody(),"mce-edit-focus"),dr(a.element,"display"),e(!1),k()},hide:function(){h.set(!1),t.outerContainer&&(A(c.element,"display","none"),s.removeClass(r.getBody(),"mce-edit-focus")),A(a.element,"display","none")},update:k,updateMode:e,repositionPopups:S}}function rO(i,u,a,t){function n(t){var n=(e=ZT(u,a.isPositionedAtTop())).pos,e=e.bounds,o=(r=c.get()).pos,r=r.bounds,r=e.height!==r.height||e.width!==r.width;c.set({pos:n,bounds:e}),r&&Ty(i,t),a.isVisible()&&(o!==n?a.update(!0):r&&(a.updateMode(),a.repositionPopups()))}var c=T(ZT(u,a.isPositionedAtTop())),e=(t||(i.on("activate",a.show),i.on("deactivate",a.hide)),i.on("SkinLoaded ResizeWindow",function(){return a.update(!0)}),i.on("NodeChange keydown",function(t){hp.requestAnimationFrame(function(){return n(t)})}),i.on("ScrollWindow",function(){return a.updateMode()}),Ls());e.set(Gs(w.fromDom(i.getBody()),"load",n)),i.on("remove",function(){e.clear()})}function iO(o,r){return Q(Dk,function(t,n){var e,t=o.get(t),t=(e=t,{hide:function(){return J(e,du())},getValue:function(){return tt.getValue(e)}});r.onAction(t,n.event.buttonApi)})}function uO(t,n,e){var o,r,i,u,e={backstage:{shared:{providers:e}}};return"contextformtogglebutton"===n.type?(o=t,i=e,(u=(r=n).original).primary,u=G(u,["primary"]),u=vi(Ph(D(D({},u),{type:"togglebutton",onAction:Y}))),$1(u,i.backstage.shared.providers,[iO(o,r)])):(u=t,i=e,(r=(o=n).original).primary,r=G(r,["primary"]),r=vi(Nh(D(D({},r),{type:"button",onAction:Y}))),J1(r,i.backstage.shared.providers,[iO(u,o)]))}function aO(t,n){var e=t.label.fold(function(){return{}},function(t){return{"aria-label":t}}),e=it(gw.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:e,selectOnFocus:!0,inputBehaviours:Z([M.config({mode:"special",onEnter:function(t){return o.findPrimary(t).map(function(t){return Eu(t),!0})},onLeft:function(t,n){return n.cut(),K.none()},onRight:function(t,n){return n.cut(),K.none()}})])})),o=eE(e,t.commands,n);return[{title:K.none(),items:[e.asSpec()]},{title:K.none(),items:o.asSpecs()}]}function cO(t,n,e){return n.bottom-t.y>=(e=void 0===e?.01:e)&&t.bottom-n.y>=e}function sO(t){var n,e=t.selection.getRng(),e=(n=(e=e).getBoundingClientRect()).height<=0&&n.width<=0?(e=Bt(w.fromDom(e.startContainer),e.startOffset).element,(Qe(e)?zo(e):K.some(e)).filter($e).map(function(t){return t.dom.getBoundingClientRect()}).getOr(n)):n;return t.inline?(n=Br(),Hr(n.left+e.left,n.top+e.top,e.width,e.height)):(n=zr(w.fromDom(t.getBody())),Hr(n.x+e.left,n.y+e.top,e.width,e.height))}function lO(t,n,e,o){void 0===o&&(o=0);var r,i=Gt(window),u=Lr(w.fromDom(t.getContentAreaContainer())),a=Bb(t)||Mb(t)||Ib(t),c=(c=u,l=i,s=o,{x:r=Math.max(c.x+s,l.x),width:Math.min(c.right-s,l.right)-r}),s=c.x,l=c.width;return t.inline&&!a?Hr(s,i.y,l,i.height):(r=n.header.isPositionedAtTop(),c=t,a=u,n=i,t=r,u=e,i=o,r=w.fromDom(c.getContainer()),e=Hc(r,".tox-editor-header").getOr(r),e=Lr(e),o=e.y>=a.bottom,t=t&&!o,c=c.inline&&t?{y:Math.max(e.bottom+i,n.y),bottom:n.bottom}:c.inline&&!t?{y:n.y,bottom:Math.min(e.y-i,n.bottom)}:(o="line"===u?Lr(r):a,t?{y:Math.max(e.bottom+i,n.y),bottom:Math.min(o.bottom-i,n.bottom)}:{y:Math.max(o.y+i,n.y),bottom:Math.min(e.y-i,n.bottom)}),Hr(s,u=c.y,l,c.bottom-u))}function fO(t){return"node"===t}function dO(t,n,e,o,r){var i,u,a,c=sO(t),s=o.lastElement().exists(function(t){return Io(e,t)});return u=e,t=(t=t).selection.getRng(),a=Bt(w.fromDom(t.startContainer),t.startOffset),t.startContainer===t.endContainer&&t.startOffset===t.endOffset-1&&Io(a.element,u)?s?Zd:gp:s?(i=n,t=o.getMode(),a=function(){return cO(c,Lr(n))&&!o.isReposition()?nm:Zd},u=lr(i,"position"),A(i,"position",t),t=a(i),u.each(function(t){return A(i,"position",t)}),t):("fixed"===o.getMode()?r.y+Br().top:r.y)+(pr(n)+12)<=c.y?gp:pp}function mO(a,t,c,n){function e(t){return fO(n)?[(u=t,function(t,n,e,o,r){var i=dO(a,o,u,c,r),t=D(D({},t),{y:r.y,height:r.height});return D(D({},i(t,n,e,o,r)),{alwaysFit:!0})})]:[];var u}return t?{onLtr:function(t){return[hs,fs,ds,ms,gs,ps].concat(e(t))},onRtl:function(t){return[hs,ds,fs,gs,ms,ps].concat(e(t))}}:{onLtr:function(t){return[ps,hs,ms,fs,gs,ds].concat(e(t))},onRtl:function(t){return[ps,hs,gs,ds,ms,fs].concat(e(t))}}}function gO(n,t){return t=pe(t,function(t){return t.predicate(n.dom)}),{contextToolbars:(t=dt(t,function(t){return"contexttoolbar"===t.type})).pass,contextForms:t.fail}}function pO(t,n,e){var o,r,i;return 0<(n=gO(t,n)).contextForms.length?K.some({elem:t,toolbars:[n.contextForms[0]]}):0<(e=gO(t,e)).contextForms.length?K.some({elem:t,toolbars:[e.contextForms[0]]}):0<n.contextToolbars.length||0<e.contextToolbars.length?(e=(o=n.contextToolbars.concat(e.contextToolbars)).length<=1?o:(n=function(n){return pe(o,function(t){return t.position===n})},r=(e=function(n){return me(o,function(t){return t.position===n})})("selection"),e=e("node"),r||e?e&&r?(e=n("node"),i=C(n("selection"),function(t){return D(D({},t),{position:"node"})}),e.concat(i)):n(r?"selection":"node"):n("line")),K.some({elem:t,toolbars:e})):K.none()}function hO(t,n,i){return t(n)?K.none():Mn(n,function(t){var n,e,o,r;return $e(t)&&(n=(e=gO(t,i.inNodeScope)).contextToolbars,0<(e=0<(e=e.contextForms).length?e:(o=n).length<=1?o:(r=function(n){return ye(o,function(t){return t.position===n})})("selection").orThunk(function(){return r("node")}).orThunk(function(){return r("line")}).map(function(t){return t.position}).fold(function(){return[]},function(n){return pe(o,function(t){return t.position===n})})).length)?K.some({elem:t,toolbars:e}):K.none()},t)}function vO(t,n){function e(t){return Io(t,o)}var o=w.fromDom(n.getBody()),r=w.fromDom(n.selection.getNode());return e(n=r)||Po(o,n)?pO(r,t.inNodeScope,t.inEditorScope).orThunk(function(){return hO(e,r,t)}):K.none()}function bO(e,r){function o(n,e){var o=vi(hi("ContextForm",Nv,e));(t[n]=o).launch.map(function(t){c["form:"+n]=D(D({},e.launch),{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){r(o)}})}),("editor"===o.scope?a:u).push(o),s[n]=o}function i(n,e){hi("ContextToolbar",Pv,e).each(function(t){("editor"===e.scope?a:u).push(t),s[n]=t})}var t={},u=[],a=[],c={},s={},n=Be(e);return x(n,function(t){var n=e[t];"contextform"===n.type?o(t,n):"contexttoolbar"===n.type&&i(t,n)}),{forms:t,inNodeScope:u,inEditorScope:a,lookupTable:s,formNavigators:c}}var yO,xO,wO=function(t){return!He(t,"items")},SO="data-value",kO=function(n,e,t,o){return C(t,function(t){return wO(t)?{type:"togglemenuitem",text:t.text,value:t.value,active:t.value===o,onAction:function(){tt.setValue(n,t.value),$(n,rw,{name:e}),rt.focus(n)}}:{type:"nestedmenuitem",text:t.text,getSubmenuItems:function(){return kO(n,e,t.items,o)}}})},CO=function(t,n){return Ae(t,function(t){return wO(t)?We(t.value===n,t):CO(t.items,n)})},OO=dg({name:"HtmlSelect",configFields:[i("options"),sf("selectBehaviours",[rt,tt]),s("selectClasses",[]),s("selectAttributes",{}),bn("data")],factory:function(e,t){var n=C(e.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),o=e.data.map(function(t){return Ai("initialValue",t)}).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Pm(e.selectBehaviours,[rt.config({}),tt.config({store:D({mode:"manual",getValue:function(t){return ya(t.element)},setValue:function(t,n){ye(e.options,function(t){return t.value===n}).isSome()&&xa(t.element,n)}},o)})])}}}),Ym=Object.freeze({__proto__:null,events:function(t,n){var e=t.stream.streams.setup(t,n);return Mu([Q(t.event,e),Pu(function(){return n.cancel()})].concat(t.cancelEvent.map(function(t){return[Q(t,function(){return n.cancel()})]}).getOr([])))}}),Lg=Object.freeze({__proto__:null,throttle:pC,init:function(t){return t.stream.streams.state(t)}}),Gu=[Si("stream",fn("mode",{throttle:[i("delay"),s("stopEvent",!0),$c("streams",{setup:function(t,n){var e=t.stream,o=Dh(t.onStream,e.delay);return n.setTimer(o),function(t,n){o.throttle(t,n),e.stopEvent&&n.stop()}},state:pC})]})),s("event","input"),bn("cancelEvent"),Na("onStream")],_O=Qa({fields:Gu,name:"streaming",active:Ym,state:Lg}),TO=function(t,n){var t=t.element,e=ya(t),o=t.dom;"number"!==nr(t,"type")&&n(o,e)},EO=q("alloy.typeahead.itemexecute"),qu=q([bn("lazySink"),i("fetch"),s("minChars",5),s("responseTime",1e3),t("onOpen"),s("getHotspot",K.some),s("getAnchorOverrides",q({})),s("layouts",K.none()),s("eventOrder",{}),Dn("model",{},[s("getDisplayText",function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value}),s("selectsOver",!0),s("populateFromBrowse",!0)]),t("onSetValue"),Ra("onExecute"),t("onItemExecute"),s("inputClasses",[]),s("inputAttributes",{}),s("inputStyles",{}),s("matchWidth",!0),s("useMinWidth",!1),s("dismissOnBlur",!0),Fa(["openClass"]),bn("initialData"),sf("typeaheadBehaviours",[rt,tt,_O,M,m,Cw]),wi("previewing",function(){return T(!0)})].concat(Pi()).concat(kx())),Gg=q([ks({schema:[Ma()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(n,e){o.previewing.get()?n.getSystem().getByUid(o.uid).each(function(t){bC(o.model,t,e).fold(function(){return gg.dehighlight(n,e)},function(t){return t()})}):n.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&hC(o.model,t,e)}),o.previewing.set(!1)},onExecute:function(t,n){return t.getSystem().getByUid(o.uid).toOptional().map(function(t){return $(t,EO(),{item:n}),!0})},onHover:function(t,n){o.previewing.set(!1),t.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&hC(o.model,t,n)})}}}})]),DO=Cf({name:"Typeahead",configFields:qu(),partFields:Gg(),factory:function(r,t,n,i){function e(t,n,e){r.previewing.set(!1);var o=Cw.getCoupled(t,"sandbox");l.isOpen(o)?y.getCurrent(o).each(function(t){gg.getHighlighted(t).fold(function(){e(t)},function(){Bu(o,t.element,"keydown",n)})}):Ew(r,u(t),t,o,i,function(t){y.getCurrent(t).each(e)},S0.HighlightFirst).get(Y)}function u(e){return function(t){return t.map(function(t){var n=Ve(t.menus),n=Se(n,function(t){return pe(t.items,function(t){return"item"===t.type})});return tt.getState(e).update(C(n,function(t){return t.data})),t})}}var o=mw(r),a=[rt.config({}),tt.config({onSetValue:r.onSetValue,store:D({mode:"dataset",getDataKey:function(t){return ya(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(t,n){xa(t.element,r.model.getDisplayText(n))}},r.initialData.map(function(t){return Ai("initialValue",t)}).getOr({}))}),_O.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:function(t,n){var e,o=Cw.getCoupled(t,"sandbox");rt.isFocused(t)&&ya(t.element).length>=r.minChars&&(e=y.getCurrent(o).bind(function(t){return gg.getHighlighted(t).map(tt.getValue)}),r.previewing.set(!0),Ew(r,u(t),t,o,i,function(t){y.getCurrent(o).each(function(t){e.fold(function(){r.model.selectsOver&&gg.highlightFirst(t)},function(n){gg.highlightBy(t,function(t){return tt.getValue(t).value===n.value}),gg.getHighlighted(t).orThunk(function(){return gg.highlightFirst(t),K.none()})})})},S0.HighlightFirst).get(Y))},cancelEvent:mu()}),M.config({mode:"special",onDown:function(t,n){return e(t,n,gg.highlightFirst),K.some(!0)},onEscape:function(t){t=Cw.getCoupled(t,"sandbox");return l.isOpen(t)?(l.close(t),K.some(!0)):K.none()},onUp:function(t,n){return e(t,n,gg.highlightLast),K.some(!0)},onEnter:function(n){var t,e=Cw.getCoupled(n,"sandbox"),o=l.isOpen(e);return o&&!r.previewing.get()?y.getCurrent(e).bind(function(t){return gg.getHighlighted(t)}).map(function(t){return $(n,EO(),{item:t}),!0}):(t=tt.getValue(n),J(n,mu()),r.onExecute(e,n,t),o&&l.close(e),K.some(!0))}}),m.config({toggleClass:r.markers.openClass,aria:{mode:"expanded"}}),Cw.config({others:{sandbox:function(t){return wx(r,t,{onOpen:function(){return m.on(t)},onClose:function(){return m.off(t)}})}}}),ot("typeaheadevents",[Hu(function(t){xx(r,u(t),t,i,Y,S0.HighlightFirst).get(Y)}),Q(EO(),function(t,n){var e=Cw.getCoupled(t,"sandbox");hC(r.model,t,n.event.item),J(t,mu()),r.onItemExecute(t,e,n.event.item,tt.getValue(t)),l.close(e),vC(t)})].concat(r.dismissOnBlur?[Q(iu(),function(t){t=Cw.getCoupled(t,"sandbox");Ms(t.element).isNone()&&l.close(t)})]:[]))];return{uid:r.uid,dom:mx(Xr(r,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:D(D({},o),Pm(r.typeaheadBehaviours,a)),eventOrder:r.eventOrder}}}),AO=function(i){return D(D({},i),{toCached:function(){return AO(i.toCached())},bindFuture:function(n){return AO(i.bind(function(t){return t.fold(function(t){return ww.pure(B.error(t))},function(t){return n(t)})}))},bindResult:function(n){return AO(i.map(function(t){return t.bind(n)}))},mapResult:function(n){return AO(i.map(function(t){return t.map(n)}))},mapError:function(n){return AO(i.map(function(t){return t.mapError(n)}))},foldResult:function(n,e){return i.map(function(t){return t.fold(n,e)})},withTimeout:function(t,r){return AO(ww.nu(function(n){var e=!1,o=setTimeout(function(){e=!0,n(B.error(r()))},t);i.get(function(t){e||(clearTimeout(o),n(t))})}))}})},BO=yC,MO={type:"separator"},FO=function(t){return SC("header",t.targets)},IO=function(t){return SC("anchor",t.targets)},RO=function(t){return K.from(t.anchorTop).map(function(t){return wC("<top>",t)}).toArray()},NO=function(t){return K.from(t.anchorBottom).map(function(t){return wC("<bottom>",t)}).toArray()},PO=function(t){return C(t,function(t){return wC(t,t)})},VO=function(t){return ve(t,function(t,n){return 0===t.length||0===n.length?t.concat(n):t.concat(MO,n)},[])},HO=function(t,n){var e=t.toLowerCase();return pe(n,function(t){var n=(void 0!==t.meta&&void 0!==t.meta.text?t.meta:t).text;return bt(n.toLowerCase(),e)||bt(t.value.toLowerCase(),e)})},LO=E("aria-invalid"),zO={bar:OC(function(t,n){return n=n.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:C(t.items,n.interpreter)}}),collection:OC(function(t,n){return dx(t,n.shared.providers)}),alertbanner:OC(function(t,n){return e=t,t=n.shared.providers,K0.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[vp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:ph(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:function(t){$(t,aw,{name:"alert-banner",value:e.url})},buttonBehaviours:Z([hh()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]});var e}),input:OC(function(t,n){return t=t,n=n.shared.providers,gC({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:K.none(),maximized:t.maximized},n)}),textarea:OC(function(t,n){return t=t,n=n.shared.providers,gC({name:t.name,multiline:!0,label:t.label,inputMode:K.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:K.none(),maximized:t.maximized},n)}),label:OC(function(t,n){return t=t,n=n.shared,e={dom:{tag:"label",innerHtml:n.providers.translate(t.label),classes:["tox-label"]}},t=C(t.items,n.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[e].concat(t),behaviours:Z([PS.self(),et.config({}),GS(K.none()),M.config({mode:"acyclic"})])};var e}),iframe:(yO=function(t,n){return n0(t,n.shared.providers)},function(t,n,e){n=Xr(n,{source:"dynamic"});return OC(yO)(t,n,e)}),button:OC(function(t,n){return b0(t,n.shared.providers)}),checkbox:OC(function(t,n){return CC(t,n.shared.providers)}),colorinput:OC(function(t,n){return Cx(t,n.shared,n.colorinput)}),colorpicker:OC(function(t){function n(t){return"tox-"+t}var e=Yx(qx,n),o=it(e.sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){$(t,aw,{name:"hex-valid",value:!0})},onInvalidHex:function(t){$(t,aw,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:Z([tt.config({store:{mode:"manual",getValue:function(t){t=o.get(t);return y.getCurrent(t).bind(function(t){return tt.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,n){var e=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),n=o.get(t);y.getCurrent(n).fold(function(){console.log("Can not find form")},function(t){tt.setValue(t,{hex:K.from(e[1]).getOr("")}),AS.getField(t,"hex").each(function(t){J(t,$i())})})}}}),PS.self()])}}),dropzone:OC(function(t,n){return $x(t,n.shared.providers)}),grid:OC(function(t,n){return n=n.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:C(t.items,n.interpreter)}}),listbox:OC(function(t,n){return e=t,r=(o=n).shared.providers,i=Ee(e.items).filter(wO),t=e.label.map(function(t){return ow(t,r)}),n={dom:{tag:"div",classes:["tox-listboxfield"]},components:[S.parts.field({dom:{},factory:{sketch:function(t){return Fk({uid:t.uid,text:i.map(function(t){return t.text}),icon:K.none(),tooltip:e.label,role:K.none(),fetch:function(t,n){t=kO(t,e.name,e.items,tt.getValue(t));n(Hk(t,Hv.CLOSE_ON_EXECUTE,o,!1))},onSetup:q(Y),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Q0.config({}),tt.config({store:{mode:"manual",initialValue:i.map(function(t){return t.value}).getOr(""),getValue:function(t){return nr(t.element,SO)},setValue:function(n,t){CO(e.items,t).each(function(t){_(n.element,SO,t.value),$(n,Bk,{text:t.text})})}}})]},"tox-listbox",o.shared)}}})]},S.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:we([t.toArray(),[n]]),fieldBehaviours:Z([nt.config({disabled:q(e.disabled),onDisabled:function(t){S.getField(t).each(nt.disable)},onEnabled:function(t){S.getField(t).each(nt.enable)}})])});var e,o,r,i}),selectbox:OC(function(t,n){return e=t,o=n.shared.providers,t=C(e.items,function(t){return{text:o.translate(t.text),value:t.value}}),n=e.label.map(function(t){return ow(t,o)}),t=S.parts.field({dom:{},selectAttributes:{size:e.size},options:t,factory:OO,selectBehaviours:Z([nt.config({disabled:function(){return e.disabled||o.isDisabled()}}),Q0.config({}),ot("selectbox-change",[Q(Qi(),function(t,n){$(t,rw,{name:e.name})})])])}),r=1<e.size?K.none():K.some(Oh("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},o.icons)),t={dom:{tag:"div",classes:["tox-selectfield"]},components:we([[t],r.toArray()])},S.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:we([n.toArray(),[t]]),fieldBehaviours:Z([nt.config({disabled:function(){return e.disabled||o.isDisabled()},onDisabled:function(t){S.getField(t).each(nt.disable)},onEnabled:function(t){S.getField(t).each(nt.enable)}}),Jb()])});var e,o,r}),sizeinput:OC(function(t,n){return Jk(t,n.shared.providers)}),urlinput:OC(function(t,n){return kC(t,n,n.urlinput)}),customeditor:OC(function(e){var o=Us(),n=it({dom:{tag:e.tag}}),r=Us();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Z([ot("custom-editor-events",[Nu(function(t){n.getOpt(t).each(function(n){(He(e,"init")?e.init(n.element.dom):LS.load(e.scriptId,e.scriptUrl).then(function(t){return t(n.element.dom,e.settings)})).then(function(n){r.on(function(t){n.setValue(t)}),r.clear(),o.set(n)})})})]),tt.config({store:{mode:"manual",getValue:function(){return o.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,n){o.get().fold(function(){r.set(n)},function(t){return t.setValue(n)})}}}),PS.self()]),components:[n.asSpec()]}}),htmlpanel:OC(function(t){return"presentation"===t.presets?K0.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):K0.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Z([Q0.config({}),rt.config({})])})}),imagetools:OC(function(t,n){return dC(t,n.shared.providers)}),table:OC(function(t,n){return mC(t,n.shared.providers)}),panel:OC(function(t,n){return{dom:{tag:"div",classes:t.classes},components:C(t.items,n.shared.interpreter)}})},UO={field:function(t,n){return n}},jO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},WO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],GO=function(n){return K.from(n.getParam("style_formats")).filter(h).map(function(t){t=FC(n,t);return n.getParam("style_formats_merge",!1,"boolean")?WO.concat(t):t}).getOr(WO)},XO=zS.trim,YO=PC("true"),qO=PC("false"),KO=function(t){for(;t=t.parentNode;){var n=t.contentEditable;if(n&&"inherit"!==n)return YO(t)}return!1},JO=function(t,n){return C(cm(w.fromDom(n),t),function(t){return t.dom})},$O=function(t){return(n=t)&&"A"===n.nodeName&&void 0!==(n.id||n.name)&&zC(t);var n},QO=function(t){return LC(t)&&zC(t)},ZO=function(t){var n,e=t.id||E("h");return VC("header",HC(t),"#"+e,LC(n=t)?parseInt(n.nodeName.substr(1),10):0,function(){t.id=e})},t_=function(t){var n=t.id||t.name,t=HC(t);return VC("anchor",t||"#"+n,"#"+n,0,Y)},n_=function(t){t=JO("h1,h2,h3,h4,h5,h6,a:not([href])",t);return pe(C(pe(t,QO),ZO).concat(C(pe(t,$O),t_)),UC)},e_="tinymce-url-history",o_=function(t,n,e){var o,r,i=T(!1),u={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=T(Vb(n)?"bottom":"top")).get,setDockingMode:o.set},a={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons},menuItems:function(){return n.ui.registry.getAll().menuItems},translate:bh.translate,isDisabled:function(){return n.mode.isReadOnly()||n.ui.isDisabled()},getSetting:n.getParam.bind(n)},interpreter:function(t){return TC(UO,t,a)},anchors:AC(n,e,u.isPositionedAtTop),header:u,getSink:function(){return B.value(t)}},urlinput:ZC(n),styleselect:NC(n),colorinput:BC(n),dialog:{isDraggableModal:(r=n,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return i.get()},setContextMenuState:function(t){return i.set(t)}};return a},r_=function(n,t,o){function e(n,e){x([t,o],function(t){t.broadcastEvent(n,e)})}function r(n,e){x([t,o],function(t){t.broadcastOn([n],e)})}function i(t){return r(Dm(),{target:t.target})}function u(t){return r(Dm(),{target:w.fromDom(t.target)})}function a(t){0===t.button&&r(Bm(),{target:w.fromDom(t.target)})}function c(){x(n.editorManager.get(),function(t){n!==t&&t.fire("DismissPopups",{relatedTarget:n})})}function s(t){return e(vu(),Xs(t))}function l(t){r(Am(),{}),e(bu(),Xs(t))}function f(){return r(Am(),{})}function d(t){t.state&&r(Dm(),{target:w.fromDom(n.getContainer())})}function m(t){r(Dm(),{target:w.fromDom(t.relatedTarget.getContainer())})}var g=Ds(),p=Ws(g,"touchstart",i),h=Ws(g,"touchmove",function(t){return e(pu(),t)}),v=Ws(g,"touchend",function(t){return e(hu(),t)}),b=Ws(g,"mousedown",i),y=Ws(g,"mouseup",function(t){0===t.raw.button&&r(Bm(),{target:t.target})});n.on("PostRender",function(){n.on("click",u),n.on("tap",u),n.on("mouseup",a),n.on("mousedown",c),n.on("ScrollWindow",s),n.on("ResizeWindow",l),n.on("ResizeEditor",f),n.on("AfterProgressState",d),n.on("DismissPopups",m)}),n.on("remove",function(){n.off("click",u),n.off("tap",u),n.off("mouseup",a),n.off("mousedown",c),n.off("ScrollWindow",s),n.off("ResizeWindow",l),n.off("ResizeEditor",f),n.off("AfterProgressState",d),n.off("DismissPopups",m),b.unbind(),p.unbind(),h.unbind(),v.unbind(),y.unbind()}),n.on("detach",function(){Jl(t),Jl(o),t.destroy(),o.destroy()})},i_=Xm,Hg=gl,qm=q([s("shell",!1),i("makeItem"),s("setupItem",Y),Vm.field("listBehaviours",[et])]),$0=$m({name:"items",overrides:function(){return{behaviours:Z([et.config({})])}}}),Pg=q([$0]),u_=Cf({name:q("CustomList")(),configFields:qm(),partFields:Pg(),factory:function(u,t,n,e){t=u.shell?{behaviours:[et.config({})],components:[]}:{behaviours:[],components:t};return{uid:u.uid,dom:u.dom,components:t.components,behaviours:Pm(u.listBehaviours,t.behaviours),apis:{setItems:function(r,i){var t;t=r,(u.shell?K.some(t):og(t,u,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(n){var t=et.contents(n),e=i.length,o=e-t.length,o=0<o?lt(o,function(){return u.makeItem()}):[],t=t.slice(e),e=(x(t,function(t){return et.remove(n,t)}),x(o,function(t){return et.append(n,t)}),et.contents(n));x(e,function(t,n){u.setupItem(r,t,i[n],n)})})}}}},apis:{setItems:function(t,n,e){t.setItems(n,e)}}}),wl=q([i("dom"),s("shell",!0),sf("toolbarBehaviours",[et])]),Km=q([$m({name:"groups",overrides:function(){return{behaviours:Z([et.config({})])}}})]),a_=Cf({name:"Toolbar",configFields:wl(),partFields:Km(),factory:function(e,t,n,o){t=e.shell?{behaviours:[et.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:t.components,behaviours:Pm(e.toolbarBehaviours,t.behaviours),apis:{setGroups:function(t,n){t=t,(e.shell?K.some(t):og(t,e,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){et.set(t,n)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)}}}),Ng=Y,ml=U,c_=q([]),s_=Object.freeze({__proto__:null,setup:Ng,isDocked:ml,getBehaviours:c_}),l_=function(t){return(ze(lr(t,"position"),"fixed")?K.none():Dt(t)).orThunk(function(){var n=w.fromTag("span");return zo(t).bind(function(t){_r(t,n);t=Dt(n);return Ar(n),t})})},f_=Ti([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),d_=function(t,n,e){var o,r,i,u,a,t=t.element;return ze(lr(t,"position"),"fixed")?(u=n,r1(i=t,a=e).filter(function(t){return o1(a.getModes(),t,u)}).bind(function(t){return u1(i,t,a)})):(n=n,e=e,r=Lr(t=t),o1(e.getModes(),r,n)?K.none():(i1(t,r,e),t=Ur(),e=r.x-t.x,o=n.y-t.y,t=t.bottom-n.bottom,r=r.y<=n.y,K.some(f_.fixed(ec("fixed",K.some(e),r?K.some(o):K.none(),K.none(),r?K.none():K.some(t))))))},m_=function(t,n){var e=t.element;return r1(e,n).bind(function(t){return u1(e,t,n)})},g_=function(n,t,e){e.setDocked(!1),x(["left","right","top","bottom","position"],function(t){return dr(n.element,t)}),t.onUndocked(n)},p_=function(t,n,e,o){var r="fixed"===o.position;e.setDocked(r),oc(t.element,o),(r?n.onDocked:n.onUndocked)(t)},h_=function(o,t,r,i,u){void 0===u&&(u=!1),t.contextual.each(function(e){e.lazyContext(o).each(function(t){n=i;var n,t=(t=t).y<n.bottom&&t.bottom>n.y;t!==r.isVisible()&&(r.setVisible(t),u&&!t?(va(o.element,[e.fadeOutClass]),e.onHide(o)):(t?n1:e1)(o,e))})})},v_=function(t,n,e){var o,r,i,u;t.getSystem().isConnected()&&(o=t,i=e,u=(r=n).lazyViewport(o),i.isDocked()&&h_(o,r,i,u),d_(o,u,i).each(function(t){t.fold(function(){return g_(o,r,i)},function(t){return p_(o,r,i,t)},function(t){h_(o,r,i,u,!0),p_(o,r,i,t)})}))},Gu=Object.freeze({__proto__:null,refresh:v_,reset:a1,isDocked:function(t,n,e){return e.isDocked()},getModes:function(t,n,e){return e.getModes()},setModes:function(t,n,e,o){return e.setModes(o)}}),Ym=Object.freeze({__proto__:null,events:function(o,r){return Mu([Hn(nu(),function(n,e){o.contextual.each(function(t){ha(n.element,t.transitionClass)&&(ba(n.element,[t.transitionClass,t.fadeInClass]),(r.isVisible()?t.onShown:t.onHidden)(n)),e.stop()})}),Q(vu(),function(t,n){v_(t,o,r)}),Q(bu(),function(t,n){a1(t,o,r)})])}}),Lg=[Ci("contextual",[n("fadeInClass"),n("fadeOutClass"),n("transitionClass"),gn("lazyContext"),t("onShow"),t("onShown"),t("onHide"),t("onHidden")]),Tn("lazyViewport",Ur),En("modes",["top","bottom"],li),t("onDocked"),t("onUndocked")],b_=Qa({fields:Lg,name:"docking",active:Ym,apis:Gu,state:Object.freeze({__proto__:null,init:function(t){var n=T(!1),e=T(!0),o=Us(),r=T(t.modes);return ia({isDocked:n.get,setDocked:n.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:e.get,setVisible:e.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+n.get()+", visible: "+e.get()+", modes: "+r.get().join(",")}})}})}),y_=q(E("toolbar-height-change")),x_={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},w_="tox-tinymce--toolbar-sticky-on",S_="tox-tinymce--toolbar-sticky-off",k_=function(o){var r=o.element;zo(r).each(function(t){var n,e="padding-"+b_.getModes(o)[0];b_.isDocked(o)?(n=wr(t),A(r,"width",n+"px"),A(t,e,hr(n=r)+(parseInt(cr(n,"margin-top"),10)||0)+(parseInt(cr(n,"margin-bottom"),10)||0)+"px")):(dr(r,"width"),dr(t,e))})},C_=Object.freeze({__proto__:null,setup:function(t,n,e){t.inline||(n.header.isPositionedAtTop()||t.on("ResizeEditor",function(){e().each(b_.reset)}),t.on("ResizeWindow ResizeEditor",function(){e().each(k_)}),t.on("SkinLoaded",function(){e().each(function(t){b_.isDocked(t)?b_.reset(t):b_.refresh(t)})}),t.on("FullscreenStateChanged",function(){e().each(b_.reset)})),t.on("AfterScrollIntoView",function(f){e().each(function(t){b_.refresh(t);var n,e,o,r,i,u,a,c,s,l,t=t.element;Mg(t)&&(n=f,e=Vo(t=t),o=e.dom.defaultView.innerHeight,r=Br(e),n=w.fromDom(n.elm),i=zr(n),n=pr(n),i=i.y,u=i+n,a=yr(t),t=pr(t),a=a.top,c=a+t,s=Math.abs(a-r.top)<2,l=Math.abs(c-(r.top+o))<2,s&&i<c?Mr(r.left,i-t,e):l&&a<u&&Mr(r.left,i-o+n+t,e))})}),t.on("PostRender",function(){l1(t,!1)})},isDocked:function(t){return t().map(b_.isDocked).getOr(!1)},getBehaviours:f1}),O_=g([n("type"),Si("items",rn([ai([n("name"),vn("items",li)]),li]))].concat(Vg)),Pi=[xn("text"),xn("tooltip"),xn("icon"),gn("fetch"),Tn("onSetup",function(){return Y})],__=g(X([n("type")],Pi,!0)),T_=g([n("type"),xn("tooltip"),xn("icon"),xn("text"),wn("select"),gn("fetch"),Tn("onSetup",function(){return Y}),On("presets","normal",["normal","color","listpreview"]),s("columns",1),gn("onAction"),gn("onItemAction")]),E_=dg({factory:function(n,e){var t={focus:M.focusIn,setMenus:function(t,n){n=C(n,function(n){var t={type:"menubutton",text:n.text,fetch:function(t){t(n.getItems())}},t=d1(t).mapError(function(t){return yi(t)}).getOrDie();return m0(t,"tox-mbtn",e.backstage,K.some("menuitem"))});et.set(t,n)}};return{uid:n.uid,dom:n.dom,components:[],behaviours:Z([et.config({}),ot("menubar-events",[Nu(function(t){n.onSetup(t)}),Q(Xi(),function(e,t){Hc(e.element,".tox-mbtn--active").each(function(n){Lc(t.event.target,".tox-mbtn").each(function(t){Io(n,t)||e.getSystem().getByDom(n).each(function(n){e.getSystem().getByDom(t).each(function(t){Fw.expand(t),Fw.close(n),rt.focus(t)})})})})}),Q(Su(),function(e,t){t.event.prevFocus.bind(function(t){return e.getSystem().getByDom(t).toOptional()}).each(function(n){t.event.newFocus.bind(function(t){return e.getSystem().getByDom(t).toOptional()}).each(function(t){Fw.isOpen(n)&&(Fw.expand(t),Fw.close(n))})})})]),M.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return n.onEscape(t),K.some(!0)}}),Q0.config({})]),apis:t,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[i("dom"),i("uid"),i("onEscape"),i("backstage"),s("onSetup",Y)],apis:{focus:function(t,n){t.focus(n)},setMenus:function(t,n,e){t.setMenus(n,e)}}}),D_=function(n,t){return t.getAnimationRoot.fold(function(){return n.element},function(t){return t(n)})},A_=function(t){return t.dimension.property},B_=function(t,n){return t.dimension.getDimension(n)},M_=function(t,n){t=D_(t,n);ba(t,[n.shrinkingClass,n.growingClass])},F_=function(t,n){pa(t.element,n.openClass),ma(t.element,n.closedClass),A(t.element,A_(n),"0px"),mr(t.element)},I_=function(t,n){pa(t.element,n.closedClass),ma(t.element,n.openClass),dr(t.element,A_(n))},R_=function(t,n,e,o){e.setCollapsed(),A(t.element,A_(n),B_(n,t.element)),mr(t.element),M_(t,n),F_(t,n),n.onStartShrink(t),n.onShrunk(t)},N_=function(t,n,e,o){o=o.getOrThunk(function(){return B_(n,t.element)}),e.setCollapsed(),A(t.element,A_(n),o),mr(t.element),e=D_(t,n);pa(e,n.growingClass),ma(e,n.shrinkingClass),F_(t,n),n.onStartShrink(t)},qu=Object.freeze({__proto__:null,refresh:function(t,n,e){e.isExpanded()&&(dr(t.element,A_(n)),e=B_(n,t.element),A(t.element,A_(n),e))},grow:function(t,n,e){e.isExpanded()||g1(t,n,e)},shrink:function(t,n,e){e.isExpanded()&&m1(t,n,e)},immediateShrink:function(t,n,e){e.isExpanded()&&R_(t,n,e)},hasGrown:function(t,n,e){return e.isExpanded()},hasShrunk:function(t,n,e){return e.isCollapsed()},isGrowing:p1,isShrinking:h1,isTransitioning:function(t,n,e){return p1(t,n)||h1(t,n)},toggleGrow:function(t,n,e){(e.isExpanded()?m1:g1)(t,n,e)},disableTransitions:M_}),Gg=Object.freeze({__proto__:null,exhibit:function(t,n,e){var o=n.expanded;return qn(o?{classes:[n.openClass],styles:{}}:{classes:[n.closedClass],styles:Ai(n.dimension.property,"0px")})},events:function(e,o){return Mu([Hn(nu(),function(t,n){n.event.raw.propertyName===e.dimension.property&&(M_(t,e),o.isExpanded()&&dr(t.element,e.dimension.property),(o.isExpanded()?e.onGrown:e.onShrunk)(t))})])}}),Xm=[i("closedClass"),i("openClass"),i("shrinkingClass"),i("growingClass"),bn("getAnimationRoot"),t("onShrunk"),t("onStartShrink"),t("onGrown"),t("onStartGrow"),s("expanded",!1),Si("dimension",fn("property",{width:[$c("property","width"),$c("getDimension",function(t){return wr(t)+"px"})],height:[$c("property","height"),$c("getDimension",function(t){return pr(t)+"px"})]}))],P_=Qa({fields:Xm,name:"sliding",active:Gg,apis:qu,state:Object.freeze({__proto__:null,init:function(t){var n=T(t.expanded);return ia({isExpanded:function(){return!0===n.get()},isCollapsed:function(){return!1===n.get()},setCollapsed:H(n.set,!1),setExpanded:H(n.set,!0),readState:function(){return"expanded: "+n.get()}})}})}),V_="container",H_=[sf("slotBehaviours",[])],gl=Ie({getSlotNames:function(t,n){return t.getSlotNames(n)},getSlot:function(t,n,e){return t.getSlot(n,e)},isShowing:function(t,n,e){return t.isShowing(n,e)},hideSlot:function(t,n,e){return t.hideSlot(n,e)},hideAllSlots:function(t,n){return t.hideAllSlots(n)},showSlot:function(t,n,e){return t.showSlot(n,e)}},Xn),L_=D(D({},gl),{sketch:function(t){var e,n={slot:function(t,n){return e.push(t),vf(V_,v1(t),n)},record:q(e=[])},t=t(n),n=n.record(),n=C(n,function(t){return Jm({name:t,pname:v1(t)})});return kf(V_,H_,n,b1,t)}}),z_=g([xn("icon"),xn("tooltip"),Tn("onShow",Y),Tn("onHide",Y),Tn("onSetup",function(){return Y})]),U_=function(o){var r=o.ui.registry.getAll().sidebars;x(Be(r),function(n){function e(){return ze(K.from(o.queryCommandValue("ToggleSidebar")),n)}var t=r[n];o.ui.registry.addToggleButton(n,{icon:t.icon,tooltip:t.tooltip,onAction:function(t){o.execCommand("ToggleSidebar",!1,n),t.setActive(e())},onSetup:function(t){function n(){return t.setActive(e())}return o.on("ToggleSidebar",n),function(){o.off("ToggleSidebar",n)}}})})},j_=function(n){return L_.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:x1(t,n),slotBehaviours:wb.unnamedEvents([Nu(function(t){return L_.hideAllSlots(t)})])}})},W_=E("FixSizeEvent"),G_=E("AutoSizeEvent"),$0=Object.freeze({__proto__:null,block:function(t,n,e,o){_(t.element,"aria-busy",!0);var r=n.getRoot(t).getOr(t),i=Z([M.config({mode:"special",onTab:function(){return K.some(!0)},onShiftTab:function(){return K.some(!0)}}),rt.config({})]),o=o(r,i),u=r.getSystem().build(o);et.append(r,Ta(u)),u.hasConfigured(M)&&n.focus&&M.focusIn(u),e.isBlocked()||n.onBlock(t),e.blockWith(function(){return et.remove(r,u)})},unblock:function(t,n,e){rr(t.element,"aria-busy"),e.isBlocked()&&n.onUnblock(t),e.clear()}}),qm=[Tn("getRoot",K.none),_n("focus",!0),t("onBlock"),t("onUnblock")],X_=Qa({fields:qm,name:"blocking",apis:$0,state:Object.freeze({__proto__:null,init:function(){var n=fc();return ia({readState:n.isSet,blockWith:function(t){n.set({destroy:t})},clear:n.clear,isBlocked:n.isSet})}})}),Y_=function(e,o,n){function r(t){var n;!u.get()||"focusin"===(n=t).type&&(n.composed?Ee(n.composedPath()):K.from(n.target)).map(w.fromDom).filter($e).exists(function(t){return ha(t,"mce-pastebin")})||(t.preventDefault(),S1(o()),e.editorManager.setActive(e))}function i(t){t!==u.get()&&(u.set(t),k1(e,o(),t,n.providers),e.fire("AfterProgressState",{state:t}))}var u=T(!1),a=Us();e.inline||e.on("PreInit",function(){e.dom.bind(e.getWin(),"focusin",r),e.on("BeforeExecCommand",function(t){"mcefocus"===t.command.toLowerCase()&&!0!==t.value&&r(t)})});e.on("ProgressState",function(t){var n;a.on(hp.clearTimeout),N(t.time)?(n=hp.setEditorTimeout(e,function(){return i(t.state)},t.time),a.set(n)):(i(t.state),a.clear())})},q_=function(t,n,e){var o,r,i=n.builtGroups.get();0!==i.length&&(o=yf(t,n,"primary"),t=Cw.getCoupled(t,"overflowGroup"),A(o.element,"visibility","hidden"),i=i.concat([t]),r=Ae(i,function(n){return Ms(n.element).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}),e([]),E1(o,i),i=wr(o.element),0===(i=T1(i,n.builtGroups.get(),function(t){return wr(t.element)},t)).extra.length?(et.remove(o,t),e([])):(E1(o,i.within),e(i.extra)),dr(o.element,"visibility"),mr(o.element),r.each(rt.focus))},Pg=q([sf("splitToolbarBehaviours",[Cw]),wi("builtGroups",function(){return T([])})]),Km=q([Fa(["overflowToggledClass"]),wn("getOverflowBounds"),i("lazySink"),wi("overflowGroups",function(){return T([])})].concat(Pg())),Ng=q([Jm({factory:a_,schema:wl(),name:"primary"}),ks({schema:wl(),name:"overflow"}),ks({name:"overflow-button"}),ks({name:"overflow-group"})]),K_=q(function(t,n){n=Math.floor(n);n=xr.max(t,n,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]),A(t,"max-width",n+"px")}),ml=q([Fa(["toggledClass"]),i("lazySink"),gn("fetch"),wn("getBounds"),Ci("fireDismissalEventInstead",[s("event",wu())]),yc()]),Lg=q([ks({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Z([m.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),ks({factory:a_,schema:wl(),name:"toolbar",overrides:function(n){return{toolbarBehaviours:Z([M.config({mode:"cyclic",onEscape:function(t){return og(t,n,"button").each(rt.focus),K.none()}})])}}})]),J_=function(t,n,e,o){var r=e.getBounds.map(function(t){return t()}),e=e.lazySink(t).getOrDie();ym.positionWithinBounds(e,n,{anchor:{type:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:K_()}}},r)},$_=function(t,n,e,o,r){a_.setGroups(n,r),J_(t,n,e,o),m.on(t)},Q_=Cf({name:"FloatingToolbarButton",factory:function(u,t,a,n){return D(D({},vp.sketch(D(D({},n.button()),{action:function(t){D1(t,n)},buttonBehaviours:Vm.augment({dump:n.button().buttonBehaviours},[Cw.config({others:{toolbarSandbox:function(t){return o=t,e=a,r=u,{dom:{tag:"div",attributes:{id:(i=zc()).id}},behaviours:Z([M.config({mode:"special",onEscape:function(t){return l.close(t),K.some(!0)}}),l.config({onOpen:function(t,n){r.fetch().get(function(t){$_(o,n,r,e.layouts,t),i.link(o.element),M.focusIn(n)})},onClose:function(){m.off(o),rt.focus(o),i.unlink(o.element)},isPartOf:function(t,n,e){return jc(n,e)||jc(o,e)},getAttachPoint:function(){return r.lazySink(o).getOrDie()}}),Es.config({channels:D(D({},Fm(D({isExtraPart:U},r.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))),Rm({doReposition:function(){l.getState(Cw.getCoupled(o,"toolbarSandbox")).each(function(t){J_(o,t,r,e.layouts)})}}))})])};var o,e,r,i}}})])}))),{apis:{setGroups:function(n,e){l.getState(Cw.getCoupled(n,"toolbarSandbox")).each(function(t){$_(n,t,u,a.layouts,e)})},reposition:function(n){l.getState(Cw.getCoupled(n,"toolbarSandbox")).each(function(t){J_(n,t,u,a.layouts)})},toggle:function(t){D1(t,n)},getToolbar:function(t){return l.getState(Cw.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return l.isOpen(Cw.getCoupled(t,"toolbarSandbox"))}}})},configFields:ml(),partFields:Lg(),apis:{setGroups:function(t,n,e){t.setGroups(n,e)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getToolbar:function(t,n){return t.getToolbar(n)},isOpen:function(t,n){return t.isOpen(n)}}}),Ym=q([i("items"),Fa(["itemSelector"]),sf("tgroupBehaviours",[M])]),Gu=q([Qc({name:"items",unit:"item"})]),Z_=Cf({name:"ToolbarGroup",configFields:Ym(),partFields:Gu(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,behaviours:Pm(t.tgroupBehaviours,[M.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),tT=function(t){return C(t,function(t){return Ta(t)})},nT=Cf({name:"SplitFloatingToolbar",configFields:Km(),partFields:Ng(),factory:function(e,t,n,o){var r=it(Q_.sketch({fetch:function(){return ww.nu(function(t){t(tT(e.overflowGroups.get()))})},layouts:{onLtr:function(){return[ds,fs]},onRtl:function(){return[fs,ds]},onBottomLtr:function(){return[gs,ms]},onBottomRtl:function(){return[ms,gs]}},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Pm(e.splitToolbarBehaviours,[Cw.config({others:{overflowGroup:function(){return Z_.sketch(D(D({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(t,n){e.builtGroups.set(C(n,t.getSystem().build)),A1(t,r,e)},refresh:function(t){return A1(t,r,e)},toggle:function(t){r.getOpt(t).each(function(t){Q_.toggle(t)})},isOpen:function(t){return r.getOpt(t).map(Q_.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each(function(t){Q_.reposition(t)})},getOverflow:function(t){return r.getOpt(t).bind(Q_.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},isOpen:function(t,n){return t.isOpen(n)},getOverflow:function(t,n){return t.getOverflow(n)}}}),Vg=q([Fa(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),t("onOpened"),t("onClosed")].concat(Pg())),Pi=q([Jm({factory:a_,schema:wl(),name:"primary"}),Jm({factory:a_,schema:wl(),name:"overflow",overrides:function(n){return{toolbarBehaviours:Z([P_.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:function(t){og(t,n,"overflow-button").each(function(t){m.off(t),rt.focus(t)}),n.onClosed(t)},onGrown:function(t){M.focusIn(t),n.onOpened(t)},onStartGrow:function(t){og(t,n,"overflow-button").each(m.on)}}),M.config({mode:"acyclic",onEscape:function(t){return og(t,n,"overflow-button").each(rt.focus),K.some(!0)}})])}}}),ks({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Z([m.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),ks({name:"overflow-group"})]),eT=function(t,e){og(t,e,"overflow").each(function(n){q_(t,e,function(t){t=C(t,function(t){return Ta(t)});a_.setGroups(n,t)}),og(t,e,"overflow-button").each(function(t){P_.hasGrown(n)&&m.on(t)}),P_.refresh(n)})},oT=Cf({name:"SplitSlidingToolbar",configFields:Vg(),partFields:Pi(),factory:function(o,t,n,e){var r="alloy.toolbar.toggle";return{uid:o.uid,dom:o.dom,components:t,behaviours:Pm(o.splitToolbarBehaviours,[Cw.config({others:{overflowGroup:function(n){return Z_.sketch(D(D({},e["overflow-group"]()),{items:[vp.sketch(D(D({},e["overflow-button"]()),{action:function(t){J(n,r)}}))]}))}}}),ot("toolbar-toggle-events",[Q(r,function(t){B1(t,o)})])]),apis:{setGroups:function(t,n){var e=n;e=C(n,t.getSystem().build),o.builtGroups.set(e),eT(t,o)},refresh:function(t){return eT(t,o)},toggle:function(t){return B1(t,o)},isOpen:function(t){return og(t,o,"overflow").map(P_.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},toggle:function(t,n){t.toggle(n)},isOpen:function(t,n){return t.isOpen(n)}}}),rT=function(t){return Z_.sketch(M1(t))},iT=function(t){var n=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":M1({title:K.none(),items:[]}),"overflow-button":p0({name:"more",icon:K.some("more-drawer"),disabled:!1,tooltip:K.some("More..."),primary:!1,borderless:!1},K.none(),t.providers)},splitToolbarBehaviours:F1(t,n)}},Xm=Hg.optional({factory:E_,name:"menubar",schema:[i("backstage")]}),Gg=Hg.optional({factory:{sketch:function(t){return u_.sketch({uid:t.uid,dom:t.dom,listBehaviours:Z([M.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return N1({type:t.type,uid:E("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),K.some(!0)}})},setupItem:function(t,n,e,o){a_.setGroups(n,e)},shell:!0})}},name:"multiple-toolbar",schema:[i("dom"),i("onEscape")]}),qu=Hg.optional({factory:{sketch:function(t){var n;return((n=t).type===pv.sliding?R1:n.type===pv.floating?I1:N1)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),K.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[i("dom"),i("onEscape"),i("getSink")]}),gl=Hg.optional({factory:{sketch:function(t){var n=t.editor,e=t.sticky?f1:c_;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Z(e(n,t.sharedBackstage))}}},name:"header",schema:[i("dom")]}),qm=Hg.optional({name:"socket",schema:[i("dom")]}),$0=Hg.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Z([Q0.config({}),rt.config({}),P_.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){y.getCurrent(t).each(L_.hideAllSlots),J(t,G_)},onGrown:function(t){J(t,G_)},onStartGrow:function(t){$(t,W_,{width:lr(t.element,"width").getOr("")})},onStartShrink:function(t){$(t,W_,{width:wr(t.element)+"px"})}}),et.config({}),y.config({find:function(t){t=et.contents(t);return Ee(t)}})])}],behaviours:Z([PS.childAt(0),ot("sidebar-sliding-events",[Q(W_,function(t,n){A(t.element,"width",n.event.width)}),Q(G_,function(t,n){dr(t.element,"width")})])])}}},name:"sidebar",schema:[i("dom")]}),ml=Hg.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Z([et.config({}),X_.config({focus:!1}),y.config({find:function(t){return Ee(t.components())}})]),components:[]}}},name:"throbber",schema:[i("dom")]}),uT=Cf({name:"OuterContainer",factory:function(o,t,n){return{uid:o.uid,dom:o.dom,components:t,apis:{getSocket:function(t){return i_.getPart(t,o,"socket")},setSidebar:function(t,e){i_.getPart(t,o,"sidebar").each(function(t){var n;n=e,y.getCurrent(t).each(function(t){return et.set(t,[j_(n)])})})},toggleSidebar:function(t,n){i_.getPart(t,o,"sidebar").each(function(t){var e;e=n,y.getCurrent(t).each(function(n){y.getCurrent(n).each(function(t){P_.hasGrown(n)?L_.isShowing(t,e)?P_.shrink(n):(L_.hideAllSlots(t),L_.showSlot(t,e)):(L_.hideAllSlots(t),L_.showSlot(t,e),P_.grow(n))})})})},whichSidebar:function(t){return i_.getPart(t,o,"sidebar").bind(w1).getOrNull()},getHeader:function(t){return i_.getPart(t,o,"header")},getToolbar:function(t){return i_.getPart(t,o,"toolbar")},setToolbar:function(t,n){i_.getPart(t,o,"toolbar").each(function(t){t.getApis().setGroups(t,n)})},setToolbars:function(t,n){i_.getPart(t,o,"multiple-toolbar").each(function(t){u_.setItems(t,n)})},refreshToolbar:function(t){i_.getPart(t,o,"toolbar").each(function(t){return t.getApis().refresh(t)})},toggleToolbarDrawer:function(t){i_.getPart(t,o,"toolbar").each(function(n){var t,e;t=n.getApis().toggle,e=function(t){return t(n)},null!=t?K.some(e(t)):K.none()})},isToolbarDrawerToggled:function(t){return i_.getPart(t,o,"toolbar").bind(function(n){return K.from(n.getApis().isOpen).map(function(t){return t(n)})}).getOr(!1)},getThrobber:function(t){return i_.getPart(t,o,"throbber")},focusToolbar:function(t){i_.getPart(t,o,"toolbar").orThunk(function(){return i_.getPart(t,o,"multiple-toolbar")}).each(function(t){M.focusIn(t)})},setMenubar:function(t,n){i_.getPart(t,o,"menubar").each(function(t){E_.setMenus(t,n)})},focusMenubar:function(t){i_.getPart(t,o,"menubar").each(function(t){E_.focus(t)})}},behaviours:o.behaviours}},configFields:[i("dom"),i("behaviours")],partFields:[gl,Xm,qu,Gg,qm,$0,ml],apis:{getSocket:function(t,n){return t.getSocket(n)},setSidebar:function(t,n,e){t.setSidebar(n,e)},toggleSidebar:function(t,n,e){t.toggleSidebar(n,e)},whichSidebar:function(t,n){return t.whichSidebar(n)},getHeader:function(t,n){return t.getHeader(n)},getToolbar:function(t,n){return t.getToolbar(n)},setToolbar:function(t,n,e){e=C(e,function(t){return rT(t)});t.setToolbar(n,e)},setToolbars:function(t,n,e){e=C(e,function(t){return C(t,rT)});t.setToolbars(n,e)},refreshToolbar:function(t,n){return t.refreshToolbar(n)},toggleToolbarDrawer:function(t,n){t.toggleToolbarDrawer(n)},isToolbarDrawerToggled:function(t,n){return t.isToolbarDrawerToggled(n)},getThrobber:function(t,n){return t.getThrobber(n)},setMenubar:function(t,n,e){t.setMenubar(n,e)},focusMenubar:function(t,n){t.focusMenubar(n)},focusToolbar:function(t,n){t.focusToolbar(n)}}}),aT="file edit view insert format tools table help",cT={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},sT=function(t,e,n){var o=n.getParam("removed_menuitems","").split(/[ ,]/);return{text:t.title,getItems:function(){return Se(t.items,function(t){var n=t.toLowerCase();return 0===n.trim().length||me(o,function(t){return t===n})?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]})}}},lT=function(t){return"string"==typeof t?t.split(" "):t},fT=function(e,o,r){return new Cv(function(t,n){r.load(o,t,n),e.on("remove",function(){return r.unload(o)})})},dT=H(H1,!1),mT=H(H1,!0),gT=function(o,r,i){return function(t){function n(){i(t),o.on(r,e)}var e=function(){return i(t)};return o.initialized?n():o.once("init",n),function(){o.off("init",n),o.off(r,e)}}},pT=function(n){return function(t){return function(){n.undoManager.transact(function(){n.focus(),n.execCommand("mceToggleFormat",!1,t.format)})}}},hT=function(t,n,e){var o=e.dataset,r="basic"===o.type?function(){return C(o.data,function(t){return IC(t,e.isSelectedFor,e.getPreviewFor)})}:o.getData;return{items:U1(0,n,e),getStyleItems:r}},vT=function(t){return{type:"basic",data:t}},bT=((Lg=xO=xO||{})[Lg.SemiColon=0]="SemiColon",Lg[Lg.Space=1]="Space",function(t,n,e,o){t=t.getParam(n,e,"string");return n=t,e=o===xO.SemiColon?n.replace(/;$/,"").split(";"):n.split(" "),{type:"basic",data:C(e,function(t){var n=t,e=t,t=t.split("=");return 1<t.length&&(n=t[0],e=t[1]),{title:n,format:e}})}}),yT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],xT="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",wT=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],ST=function(t){t=t.split(/\s*,\s*/);return C(t,function(t){return t.replace(/^['"]+|['"]+$/g,"")})},kT=function(t){var n;return 0===t.indexOf("-apple-system")&&(n=ST(t.toLowerCase()),ke(wT,function(t){return-1<n.indexOf(t.toLowerCase())}))},CT="8pt 10pt 12pt 14pt 18pt 24pt 36pt",OT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},_T={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},TT=function(t,n){return/[0-9.]+px$/.test(t)?function(t,n){n=Math.pow(10,n);return Math.round(t*n)/n}(72*parseInt(t,10)/96,n||0)+"pt":O(_T,t).getOr(t)},ET=function(t){return O(OT,t).getOr("")},DT=function(t,n){var e=n(),n=C(e,function(t){return t.format});return K.from(t.formatter.closest(n)).bind(function(n){return ye(e,function(t){return t.format===n})}).orThunk(function(){return We(t.formatter.match("p"),{title:"Paragraph",format:"p"})})},AT="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",Ym=Object.freeze({__proto__:null,events:function(o,r){function i(n,e){o.updateState.each(function(t){t=t(n,e);r.set(t)}),o.renderComponents.each(function(t){t=t(e,r.get()),t=C(t,n.getSystem().build);Yl(n,t)})}return Mu([Q(au(),function(t,n){var e;n.universal||(e=o.channel,de(n.channels,e)&&i(t,n.data))}),Nu(function(n,t){o.initialData.each(function(t){i(n,t)})})])}}),Gu=Object.freeze({__proto__:null,getState:function(t,n,e){return e}}),Km=[i("channel"),bn("renderComponents"),bn("updateState"),bn("initialData")],BT=Qa({fields:Km,name:"reflecting",active:Ym,apis:Gu,state:Object.freeze({__proto__:null,init:function(){var t=T(K.none());return{readState:function(){return t.get().getOr("none")},get:t.get,set:t.set,clear:function(){return t.set(K.none())}}}})}),Ng=q([i("toggleClass"),i("fetch"),Na("onExecute"),s("getHotspot",K.some),s("getAnchorOverrides",q({})),yc(),Na("onItemExecute"),bn("lazySink"),i("dom"),t("onOpen"),sf("splitDropdownBehaviours",[Cw,M,rt]),s("matchWidth",!1),s("useMinWidth",!1),s("eventOrder",{}),bn("role")].concat(kx())),Pg=Jm({factory:vp,schema:[i("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Z([rt.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(Eu)},buttonBehaviours:Z([m.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])}}}),wl=Jm({factory:vp,schema:[i("dom")],name:"button",defaults:function(){return{buttonBehaviours:Z([rt.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(n){n.getSystem().getByUid(e.uid).each(function(t){e.onExecute(t,n)})}}}}),Vg=q([Pg,wl,$m({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[i("text")],name:"aria-descriptor"}),ks({schema:[Ma()],name:"menu",defaults:function(o){return{onExecute:function(n,e){n.getSystem().getByUid(o.uid).each(function(t){o.onItemExecute(t,n,e)})}}}}),Xg()]),MT=Cf({name:"SplitDropdown",configFields:Ng(),partFields:Vg(),factory:function(o,t,n,e){function r(t){y.getCurrent(t).each(function(t){gg.highlightFirst(t),M.focusIn(t)})}function i(t){xx(o,v,t,e,r,S0.HighlightFirst).get(Y)}function u(t){return t=yf(t,o,"button"),Eu(t),K.some(!0)}var a=D(D({},Mu([Nu(function(e,t){og(e,o,"aria-descriptor").each(function(t){var n=E("aria");_(t.element,"id",n),_(e.element,"aria-describedby",n)})})])),Pd(K.some(i)));return{uid:o.uid,dom:o.dom,components:t,apis:{repositionMenus:function(t){m.isOn(t)&&Sx(t)}},eventOrder:D(D({},o.eventOrder),((t={})[cu()]=["disabling","toggling","alloy.base.behaviour"],t)),events:a,behaviours:Pm(o.splitDropdownBehaviours,[Cw.config({others:{sandbox:function(t){var n=yf(t,o,"arrow");return wx(o,t,{onOpen:function(){m.on(n),m.on(t)},onClose:function(){m.off(n),m.off(t)}})}}}),M.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t){return i(t),K.some(!0)}}),rt.config({}),m.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:o.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,n){return t.repositionMenus(n)}}}),FT=function(n){return{isDisabled:function(){return nt.isDisabled(n)},setDisabled:function(t){return nt.set(n,t)}}},IT=function(n){return{setActive:function(t){m.set(n,t)},isActive:function(){return m.isOn(n)},isDisabled:function(){return nt.isDisabled(n)},setDisabled:function(t){return nt.set(n,t)}}},RT=function(t,n){return t.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})},NT=E("focus-button"),PT=function(t,n,e){var o,r=T(Y),i=K1(t.icon,t.text,t.tooltip,K.none(),K.none(),e);return vp.sketch({dom:i.dom,components:i.components,eventOrder:Ak,buttonBehaviours:Z([ot("toolbar-button-events",[(o={onAction:t.onAction,getApi:n.getApi},Hu(function(n,t){Qb(o,n)(function(t){$(n,Dk,{buttonApi:t}),o.onAction(t)})})),Zb(n,r),ty(n,r)]),$b.toolbarButton(function(){return t.disabled||e.isDisabled()}),Jb()].concat(n.toolbarButtonBehaviours))})},VT=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],HT={button:Z1(Nh,function(t,n){return n=n.backstage.shared.providers,J1(t,n,[])}),togglebutton:Z1(Ph,function(t,n){return n=n.backstage.shared.providers,$1(t,n,[])}),menubutton:Z1(d1,function(t,n){return m0(t,"tox-tbtn",n.backstage,K.none())}),splitbutton:Z1(function(t){return hi("SplitButton",T_,t)},function(t,n){return Q1(t,n.backstage.shared)}),grouptoolbarbutton:Z1(function(t){return hi("GroupToolbarButton",O_,t)},function(t,n,e){var o=e.ui.registry.getAll().buttons;(r={})[ll]=n.backstage.shared.header.isPositionedAtTop()?Mc.TopToBottom:Mc.BottomToTop;if(Rb(e)!==pv.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");var r,i=t,t=n.backstage,u=function(t){return GT(e,{buttons:o,toolbar:t,allowToolbarGroups:!1},n,K.none())};return t=t.shared,Q_.sketch({lazySink:t.getSink,fetch:function(){return ww.nu(function(t){t(C(u(i.items),rT))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:K1(i.icon,i.text,i.tooltip,K.none(),K.none(),t.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:r}}}})}),styleSelectButton:function(t,n){return t=t,n=n.backstage,e=D({type:"advanced"},n.styleselect),j1(t,n,q1(t,e));var e},fontsizeSelectButton:function(t,n){return n=n.backstage,j1(t,n,X1(t))},fontSelectButton:function(t,n){return n=n.backstage,j1(t,n,G1(t))},formatButton:function(t,n){return n=n.backstage,j1(t,n,Y1(t))},alignMenuButton:function(t,n){return n=n.backstage,j1(t,n,W1(t))}},LT=function(n,e,o){return O(HT,n.type).fold(function(){return console.error("skipping button defined by",n),K.none()},function(t){return K.some(t(n,e,o))})},zT={styleselect:HT.styleSelectButton,fontsizeselect:HT.fontsizeSelectButton,fontselect:HT.fontSelectButton,formatselect:HT.formatButton,align:HT.alignMenuButton},UT=function(e){var t=C(VT,function(t){var n=pe(t.items,function(t){return He(e,t)||He(zT,t)});return{name:t.name,items:n}});return pe(t,function(t){return 0<t.items.length})},jT=function(t){t=t.split("|");return C(t,function(t){return{items:t.trim().split(" ")}})},WT=function(t){return a(t,function(t){return He(t,"name")&&He(t,"items")})},GT=function(a,c,s,l){n=(t=c).toolbar,t=c.buttons;var t=!1===n?[]:void 0===n||!0===n?UT(t):d(n)?jT(n):WT(n)?n:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]),n=C(t,function(t){var n=Se(t.items,function(t){return 0===t.trim().length?[]:(n=a,e=c.buttons,o=t,r=c.allowToolbarGroups,i=s,u=l,O(e,o.toLowerCase()).orThunk(function(){return u.bind(function(t){return Ae(t,function(t){return O(e,t+o.toLowerCase())})})}).fold(function(){return O(zT,o.toLowerCase()).map(function(t){return t(n,i)}).orThunk(function(){return K.none()})},function(t){return"grouptoolbarbutton"!==t.type||r?LT(t,i,n):(console.warn("Ignoring the '"+o+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),K.none())}).toArray());var n,e,o,r,i,u});return{title:K.from(a.translate(t.name)),items:n}});return pe(n,function(t){return 0<t.items.length})},Pi=Ao(),XT=Pi.os.isiOS()&&Pi.os.version.major<=12,YT=Object.freeze({__proto__:null,render:function(e,n,t,o,r){var i,u,a,c=T(0),s=n.outerContainer,r=(dT(e),w.fromDom(r.targetNode)),l=qo(Yo(r)),r=(f=n.mothership,Em(r,f,Or),Kl(l,n.uiMothership),e.on("PostRender",function(){tO(e,n,t,o),c.set(e.getWin().innerWidth),uT.setMenubar(s,P1(e,t)),uT.setSidebar(s,t.sidebar),nO(e,n)}),uT.getSocket(s).getOrDie("Could not find expected socket element")),l=(XT&&(ar(r.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),i=function(){e.fire("ScrollContent")},u=20,a=null,f=Ws(r.element,"scroll",{cancel:function(){b(a)||(clearTimeout(a),a=null)},throttle:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];b(a)&&(a=setTimeout(function(){a=null,i.apply(null,t)},u))}}.throttle),e.on("remove",f.unbind)),qh(e,n),e.addCommand("ToggleSidebar",function(t,n){uT.toggleSidebar(s,n),e.fire("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",function(){return uT.whichSidebar(s)}),Rb(e)),f=(l!==pv.sliding&&l!==pv.floating||e.on("ResizeWindow ResizeEditor ResizeContent",function(){var t=e.getWin().innerWidth;t!==c.get()&&(uT.refreshToolbar(n.outerContainer),c.set(t))}),{enable:function(){Kb(n,!1)},disable:function(){Kb(n,!0)},isDisabled:function(){return nt.isDisabled(s)}});return{iframeContainer:r.element.dom,editorContainer:s.element.dom,api:f}}}),qT=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?K.some(parseInt(""+t,10)):K.none()},KT=function(t){return N(t)?t+"px":t},JT=function(t){var n,e,o,r;return e=jh(n=t),o=Xh(n),r=Yh(n),qT(e).map(function(t){return eO(t,o,r)}).getOr(jh(t))},$T=function(t){var n=Wh(t),e=Gh(t),o=Ab(t);return qT(n).map(function(t){return eO(t,e,o)})},QT=function(t){return $T(t).getOr(Wh(t))},ZT=function(t,n){t=Lr(t);return{pos:n?t.y:t.bottom,bounds:t}},tE=Object.freeze({__proto__:null,render:function(n,e,o,r,t){function i(){var t;s.get()?f.show():(s.set(uT.getHeader(c).getOrDie()),t=zb(n),Kl(t,u),Kl(t,a),tO(n,e,o,r),uT.setMenubar(c,P1(n,o)),f.show(),rO(n,l,f,d),n.nodeChanged())}var u=e.mothership,a=e.uiMothership,c=e.outerContainer,s=T(null),l=w.fromDom(t.targetNode),f=oO(n,l,e,r,s),d=n.getParam("toolbar_persist",!1,"boolean");mT(n);return n.on("show",i),n.on("hide",f.hide),d||(n.on("focus",i),n.on("blur",f.hide)),n.on("init",function(){(n.hasFocus()||d)&&i()}),qh(n,e),{editorContainer:c.element.dom,api:{show:function(){f.show()},hide:function(){f.hide()},enable:function(){Kb(e,!1)},disable:function(){Kb(e,!0)},isDisabled:function(){return nt.isDisabled(c)}}}}}),nE="contexttoolbar-hide",eE=function(n,t,e){var o=C(t,function(t){return it(uO(n,t,e))});return{asSpecs:function(){return C(o,function(t){return t.asSpec()})},findPrimary:function(e){return Ae(t,function(t,n){return t.primary?K.from(o[n]).bind(function(t){return t.getOpt(e)}).filter(L(nt.isDisabled)):K.none()})}}},oE=aO,rE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},iE={maxHeightFunction:el(),maxWidthFunction:K_()},uE=E("forward-slide"),aE=E("backward-slide"),cE=E("change-slide-event"),sE="tox-pop--resizing",lE="tox-pop--transition",fE=function(i,t,u,r){function a(){var t,n,e;return!x()||(t=y(),n=ze(v.get(),"node")?(e=i,p.get().filter($o).map(zr).getOrThunk(function(){return sO(e)})):sO(i),t.height<=0)||!cO(n,t)}function n(){p.clear(),h.clear(),v.clear(),dp.hide(b)}function e(){var t;dp.isOpen(b)&&(t=b.element,dr(t,"display"),a()?A(t,"display","none"):(h.set(0),dp.reposition(b)))}function c(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Z([M.config({mode:"acyclic"}),ot("pop-dialog-wrap-events",[Nu(function(t){i.shortcuts.add("ctrl+F9","focus statusbar",function(){return M.focusIn(t)})}),Pu(function(t){i.shortcuts.remove("ctrl+F9")})])])}}function s(t,n){var e,o,n="node"===t?m.anchors.node(n):m.anchors.cursor(),r=(r=i,t=t,e=g(),o={lastElement:p.get,isReposition:function(){return ze(h.get(),0)},getMode:function(){return ym.getMode(u)}},"line"===t?{bubble:il(12,0,rE),layouts:{onLtr:function(){return[vs]},onRtl:function(){return[bs]}},overrides:iE}:{bubble:il(0,12,rE,1/12),layouts:mO(r,e,o,t),overrides:iE});return Xr(n,r)}function o(t,n){var e,o;k.cancel(),x()&&(e=S(t),t=t[0].position,o=s(t,n),v.set(t),h.set(1),t=b.element,dr(t,"display"),ze(je(n,p.get(),Io),!0)||(pa(t,lE),ym.reset(u,b)),dp.showWithinBounds(b,c(e),{anchor:o,transition:{classes:[lE],mode:"placement"}},function(){return K.some(y())}),n.fold(p.clear,p.set),a())&&A(t,"display","none")}var l,f,d=r.backstage,m=d.shared,g=Ao().deviceType.isTouch,p=Us(),h=Us(),v=Us(),b=_a((l={sink:u,onEscape:function(){return i.focus(),K.some(!0)}},f=T([]),dp.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){f.set([]),dp.getContent(t).each(function(t){dr(t.element,"visibility")}),pa(t.element,sE),dr(t.element,"width")},inlineBehaviours:Z([ot("context-toolbar-events",[Hn(nu(),function(t,n){"width"===n.event.raw.propertyName&&(pa(t.element,sE),dr(t.element,"width"))}),Q(cE,function(t,n){var e=t.element,o=(dr(e,"width"),wr(e)),r=(dp.setContent(t,n.event.contents),ma(e,sE),wr(e));A(e,"width",o+"px"),dp.getContent(t).each(function(t){n.event.focus.bind(function(t){return As(t),Ms(e)}).orThunk(function(){return M.focusIn(t),Bs(Yo(e))})}),hp.setTimeout(function(){A(t.element,"width",r+"px")},0)}),Q(uE,function(n,t){dp.getContent(n).each(function(t){f.set(f.get().concat([{bar:t,focus:Bs(Yo(n.element))}]))}),$(n,cE,{contents:t.event.forwardContents,focus:K.none()})}),Q(aE,function(n,t){pt(f.get()).each(function(t){f.set(f.get().slice(0,f.get().length-1)),$(n,cE,{contents:Ta(t.bar),focus:t.focus})})})]),M.config({mode:"special",onEscape:function(n){return pt(f.get()).fold(function(){return l.onEscape()},function(t){return J(n,aE),K.some(!0)})}})]),lazySink:function(){return B.value(l.sink)}}))),y=function(){var t=v.get().getOr("node"),n=fO(t)?1:0;return lO(i,m,t,n)},x=function(){return!(i.removed||g()&&d.isContextMenuOpen())},w=no(function(){return bO(t,function(t){t=S([t]);$(b,uE,{forwardContents:c(t)})})}),S=function(t){var n=i.ui.registry.getAll().buttons,e=w(),o=D(D({},n),e.formNavigators),n=Rb(i)===pv.scrolling?pv.scrolling:pv.default,e=we(C(t,function(t){return"contexttoolbar"===t.type?GT(i,{buttons:o,toolbar:t.items,allowToolbarGroups:!1},r,K.some(["form:"])):(n=m.providers,oE(t,n));var n}));return N1({type:n,uid:E("context-toolbar"),initGroups:e,onEscape:K.none,cyclicKeying:!0,providers:m.providers})},k=Dh(function(){var t;i.hasFocus()&&!i.removed&&(ha(b.element,lE)?k.throttle():(t=w(),vO(t,i).fold(n,function(t){o(t.toolbars,K.some(t.elem))})))},17);i.on("init",function(){i.on("remove",n),i.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",e),i.on("click keyup focus SetContent",k.throttle),i.on(nE,n),i.on("contexttoolbar-show",function(n){var t=w();O(t.lookupTable,n.toolbarKey).each(function(t){o([t],We(n.target!==i,n.target)),dp.getContent(b).each(M.focusIn)})}),i.on("focusout",function(t){hp.setEditorTimeout(i,function(){Ms(u.element).isNone()&&Ms(b.element).isNone()&&n()},0)}),i.on("SwitchMode",function(){i.mode.isReadOnly()&&n()}),i.on("AfterProgressState",function(t){t.state?n():i.hasFocus()&&k.throttle()}),i.on("NodeChange",function(t){Ms(b.element).fold(k.throttle,Y)})})},dE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},mE=(Hg=["Infinity",(Hg="[0-9]+")+"\\."+gE(Hg)+gE(gl="[eE][+-]?[0-9]+"),"\\."+Hg+gE(gl),Hg+gE(gl)].join("|"),new RegExp("^("+("[+-]?(?:"+Hg+")")+")(.*)$"));function gE(t){return"(?:"+t+")?"}function pE(t,n){return e=n,K.from(mE.exec(t)).bind(function(t){var n=Number(t[1]),t=t[2];return rA(t,e)?K.some({value:n,unit:t}):K.none()}).map(function(t){return t.value+t.unit});var e}function hE(u,a){function n(){var t=a.getOptions(u),r=a.getCurrent(u).map(a.hash),i=Us();return C(t,function(o){return{type:"togglemenuitem",text:a.display(o),onSetup:function(n){function t(t){t&&(i.on(function(t){return t.setActive(!1)}),i.set(n)),n.setActive(t)}t(ze(r,a.hash(o)));var e=a.watcher(u,o,t);return function(){i.clear(),e()}},onAction:function(){return a.setCurrent(u,o)}}})}u.ui.registry.addMenuButton(a.name,{tooltip:a.text,icon:a.icon,fetch:function(t){return t(n())},onSetup:a.onToolbarSetup}),u.ui.registry.addNestedMenuItem(a.name,{type:"nestedmenuitem",text:a.text,getSubmenuItems:n,onSetup:a.onMenuSetup})}function vE(n){var e;hE(n,iA),e=n,K.from(e.getParam("content_langs",void 0,"array")).map(function(t){return{name:"language",text:"Language",icon:"language",getOptions:q(t),hash:function(t){return u(t.customCode)?t.code:t.code+"/"+t.customCode},display:function(t){return t.title},watcher:function(t,n,e){return t.formatter.formatChanged("lang",e,!1,{value:n.code,customValue:n.customCode}).unbind},getCurrent:function(t){t=w.fromDom(t.selection.getNode());return Fi(t,function(t){return K.some(t).filter($e).bind(function(n){return er(n,"lang").map(function(t){return{code:t,customCode:er(n,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(t,n){return t.execCommand("Lang",!1,n)},onToolbarSetup:function(t){var n=Ls();return t.setActive(e.formatter.match("lang",{},void 0,!0)),n.set(e.formatter.formatChanged("lang",t.setActive,!0)),n.clear}}}).each(function(t){return hE(n,t)})}function bE(t,n){var e,o,r,i,u,a,c,s;e=hT(r=t,u=n,W1(r)),r.ui.registry.addNestedMenuItem("align",{text:u.shared.providers.translate("Align"),getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}}),o=hT(r=t,u=n,G1(r)),r.ui.registry.addNestedMenuItem("fontformats",{text:u.shared.providers.translate("Fonts"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}),r=t,c=D({type:"advanced"},(u=n).styleselect),i=hT(r,u,q1(r,c)),r.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return i.items.validateItems(i.getStyleItems())}}),a=hT(u=t,n,Y1(u)),u.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return a.items.validateItems(a.getStyleItems())}}),s=hT(c=t,n,X1(c)),c.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return s.items.validateItems(s.getStyleItems())}})}function yE(t){var n;t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:gT(n=t,"NodeChange",function(t){t.setDisabled(!n.queryCommandState("outdent"))}),onAction:z1(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:z1(t,"indent")})}function xE(t,n){return function(){t.execCommand("mceToggleFormat",!1,n)}}function wE(t){var e=t;zS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t,n){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:L1(e,t.name),onAction:xE(e,t.name)})});for(var n,o,r=1;r<=6;r++){var i="h"+r;e.ui.registry.addToggleButton(i,{text:i.toUpperCase(),tooltip:"Heading "+r,onSetup:L1(e,i),onAction:xE(e,i)})}n=t,zS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){n.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:z1(n,t.action)})}),o=t,zS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){o.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:z1(o,t.action),onSetup:L1(o,t.name)})})}function SE(t){var n;wE(t),n=t,zS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){n.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:z1(n,t.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:xE(n,"code")})}function kE(n,e){return gT(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(t){t.setDisabled(n.mode.isReadOnly()||!n.undoManager[e]())})}function CE(t){var n;(n=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:kE(n,"hasUndo"),onAction:z1(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:kE(n,"hasRedo"),onAction:z1(n,"redo")}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:kE(n,"hasUndo"),onAction:z1(n,"undo")}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:kE(n,"hasRedo"),onAction:z1(n,"redo")})}function OE(t){var n;t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:gT(n=t,"VisualAid",function(t){t.setActive(n.hasVisual)}),onAction:z1(t,"mceToggleVisualAid")})}function _E(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:z1(t,"mceToggleVisualAid")}),OE(t)}function TE(t,n){return{type:"makeshift",x:t,y:n}}function EE(t){return"longpress"===t.type||0===t.type.indexOf("touch")}function DE(t,n){var e,t=Tb.DOM.getPos(t);return e=t.x,t=t.y,TE(n.x+e,n.y+t)}function AE(t,n){return"contextmenu"===n.type||"longpress"===n.type?t.inline?EE(e=n)?(o=e.touches[0],TE(o.pageX,o.pageY)):TE(e.pageX,e.pageY):DE(t.getContentAreaContainer(),EE(o=n)?(e=o.touches[0],TE(e.clientX,e.clientY)):TE(o.clientX,o.clientY)):BE(t);var e,o}function BE(t){return{type:"selection",root:w.fromDom(t.selection.getNode())}}function ME(t,n,e){switch(e){case"node":return o=t,{type:"node",node:K.some(w.fromDom(o.selection.getNode())),root:w.fromDom(o.getBody())};case"point":return AE(t,n);case"selection":return BE(t)}var o}function FE(t,n,e,o,r,i){var e=e(),u=ME(t,n,i);Hk(e,Hv.CLOSE_ON_EXECUTE,o,!1).map(function(t){n.preventDefault(),dp.showMenuAt(r,{anchor:u},{menu:{markers:tb("normal")},data:t})})}function IE(t){function n(){hp.setEditorTimeout(t,function(){t.selection.setRng(r)},10),i()}function e(t){t.preventDefault(),t.stopImmediatePropagation()}function o(){return i()}var r=t.selection.getRng(),i=(t.once("touchend",n),t.on("mousedown",e,!0),t.once("longpresscancel",o),function(){t.off("touchend",n),t.off("longpresscancel",o),t.off("mousedown",e)})}function RE(n,e,t,o,r,i,u){var a=function(t,n,e){t=ME(t,n,e);return D({bubble:il(0,"point"===e?12:0,cA),layouts:aA,overrides:{maxWidthFunction:K_(),maxHeightFunction:el()}},t)}(n,e,i);Hk(t,Hv.CLOSE_ON_EXECUTE,o,!0).map(function(t){e.preventDefault(),dp.showMenuWithinBounds(r,{anchor:a},{menu:{markers:tb("normal"),highlightImmediately:u},data:t,type:"horizontal"},function(){return K.some(lO(n,o.shared,"node"===i?"node":"selection"))}),n.fire(nE)})}function NE(n,e,o,r,i,u){function t(){var t=o();RE(n,e,t,r,i,u,h())}var a,c,s,l,f=Ao(),d=f.os.isiOS(),m=f.os.isOSX(),g=f.os.isAndroid(),p=f.deviceType.isTouch(),h=function(){return!(g||d||m&&p)};(m||d)&&"node"!==u?(a=function(){IE(n),t()},f=e,(l=(c=n).selection).isCollapsed()||f.touches.length<1||(s=f.touches[0],f=l.getRng(),!Nl(c.getWin(),Cl.domRange(f)).exists(function(t){return t.left<=s.clientX&&t.right>=s.clientX&&t.top<=s.clientY&&t.bottom>=s.clientY}))?(n.once("selectionchange",a),n.once("touchend",function(){return n.off("selectionchange",a)})):a()):t()}function PE(t){return"string"==typeof t?t.split(/[ ,]/):t}function VE(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")}function HE(t){return n="contextmenu",e="link linkchecker image imagetools table spellchecker configurepermanentpen",o=(t=t).ui.registry.getAll().contextMenus,K.from(t.getParam(n)).map(PE).getOrThunk(function(){return pe(PE(e),function(t){return He(o,t)})});var n,e,o}function LE(t){return d(t)?"|"===t:"separator"===t.type}function zE(n){function t(t){return{text:t.text,icon:t.icon,disabled:t.disabled,shortcut:t.shortcut}}var e;if(d(n))return n;switch(n.type){case"separator":return sA;case"submenu":return D(D({type:"nestedmenuitem"},t(n)),{getSubmenuItems:function(){var t=n.getSubmenuItems();return d(t)?t:C(t,zE)}});default:return D(D({type:"menuitem"},t(n)),{onAction:(e=n.onAction,function(){return e()})})}}function UE(t,n){var e;return 0===n.length?t:(e=pt(t).filter(function(t){return!LE(t)}).fold(function(){return[]},function(t){return[sA]}),t.concat(e).concat(n).concat([sA]))}function jE(t,n){return"longpress"!==n.type&&(2!==n.button||n.target===t.getBody()&&""===n.pointerType)}function WE(t,n){return jE(t,n)?t.selection.getStart(!0):n.target}function GE(n){return function(t){return t.translate(-n.left,-n.top)}}function XE(n){return function(t){return t.translate(n.left,n.top)}}function YE(e){return function(t,n){return ve(e,function(t,n){return n(t)},vr(t,n))}}function qE(t,n,e){return t.fold(YE([XE(e),GE(n)]),YE([GE(n)]),YE([]))}function KE(t,n,e){return t.fold(YE([XE(e)]),YE([]),YE([XE(n)]))}function JE(t,n,e){return t.fold(YE([]),YE([GE(e)]),YE([XE(n),GE(e)]))}function $E(t,n,e){return t=t.fold(function(t,n){return{position:K.some("absolute"),left:K.some(t+"px"),top:K.some(n+"px")}},function(t,n){return{position:K.some("absolute"),left:K.some(t-e.left+"px"),top:K.some(n-e.top+"px")}},function(t,n){return{position:K.some("fixed"),left:K.some(t+"px"),top:K.some(n+"px")}}),D({right:K.none(),bottom:K.none()},t)}function QE(t,n){return t=nr(t,n),u(t)?NaN:parseInt(t,10)}function ZE(t,n,e,o){return n=n,t=(t=t).element,r=QE(t,n.leftAttr),t=QE(t,n.topAttr),(isNaN(r)||isNaN(t)?K.none():K.some(vr(r,t))).fold(function(){return e},function(t){return pA(t.left+o.left,t.top+o.top)});var r}function tD(t,n,e,o,r,i){var u,a,c,s,e=ZE(t,n,e,o),l=n.mustSnap?(u=e,a=r,c=i,s=n.getSnapPoints(t),vA(s,u,a,c).orThunk(function(){return ve(s,function(n,e){var t=e.sensor,o=fA(u,t,e.range.left,e.range.top,a,c);return n.deltas.fold(function(){return{deltas:K.some(o),snap:K.some(e)}},function(t){return(o.left+o.top)/2<=(t.left+t.top)/2?{deltas:K.some(o),snap:K.some(e)}:n})},{deltas:K.none(),snap:K.none()}).snap.map(function(t){return{output:dA(t.output,u,a,c),extra:t.extra}})})):(o=e,d=r,m=i,l=n.getSnapPoints(t),vA(l,o,d,m)),f=qE(e,r,i),d=n,m=f;return o=(o=t).element,_(o,d.leftAttr,m.left+"px"),_(o,d.topAttr,m.top+"px"),l.fold(function(){return{coord:pA(f.left,f.top),extra:K.none()}},function(t){return{coord:t.output,extra:t.extra}})}function nD(t,n){t.getSystem().addToGui(n),yA(n)}function eD(t,n,e){return t.getSystem().build(K0.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[n]},events:e}))}function oD(n){return t=lr(n,"left"),e=lr(n,"top"),o=lr(n,"position"),r=function(t,n,e){return("fixed"===e?pA:mA)(parseInt(t,10),parseInt(n,10))},(t.isSome()&&e.isSome()&&o.isSome()?K.some(r(t.getOrDie(),e.getOrDie(),o.getOrDie())):K.none()).getOrThunk(function(){var t=yr(n);return gA(t.left,t.top)});var t,e,o,r}function rD(e,t,r,i,u,a,n){var o,c,s,l,f,d;return t=t=t.fold(function(){e=a.left,o=a.top;var e,o,t=r.fold(function(t,n){return mA(t+e,n+o)},function(t,n){return gA(t+e,n+o)},function(t,n){return pA(t+e,n+o)}),t=qE(t,i,u);return pA(t.left,t.top)},function(n){var t=tD(e,n,r,a,i,u);return t.extra.each(function(t){n.onSensor(e,t)}),t.coord}),o=i,c=u,s=(n=n).bounds,l=KE(t,o,c),f=cs(l.left,s.x,s.x+s.width-n.width),l=cs(l.top,s.y,s.y+s.height-n.height),d=gA(f,l),t.fold(function(){var t=JE(d,o,c);return mA(t.left,t.top)},q(d),function(){var t=qE(d,o,c);return pA(t.left,t.top)})}function iD(n,e,t,o,r){var o=t.update(o,r),i=t.getStartData().getOrThunk(function(){return SA(e,n)});o.each(function(t){wA(n,e,i,t)})}function uD(n,t,e,o){t.each(xA),e.snaps.each(function(t){hA(n,t)}),t=e.getTarget(n.element),o.reset(),e.onDrop(n,t)}function aD(t){return function(n,e){function o(t){e.setStartData(SA(n,t))}return Mu(X([Q(vu(),function(t){e.getStartData().each(function(){return o(t)})})],t(n,e,o),!0))}}function cD(i,u,a){return[Q(Ui(),function(n,t){var e,o,r;0===t.event.raw.button&&(t.stop(),t={drop:t=function(){return uD(n,K.some(o),i,u)},delayDrop:(e=ex(t,200)).schedule,forceDrop:t,move:function(t){e.cancel(),iD(n,i,u,kA,t)}},o=eD(n,i.blockerClass,(r=t,Mu([Q(Ui(),r.forceDrop),Q(Gi(),r.drop),Q(ji(),function(t,n){r.move(n.event)}),Q(Wi(),r.delayDrop)]))),a(n),nD(n,o))})]}function sD(r,i,u){function a(t){uD(t,c.get(),r,i),c.clear()}var c=Us();return[Q(Vi(),function(n,t){t.stop();function e(){return a(n)}var o,t={drop:e,delayDrop:Y,forceDrop:e,move:function(t){iD(n,r,i,CA,t)}},t=eD(n,r.blockerClass,(o=t,Mu([Q(Vi(),o.forceDrop),Q(Li(),o.drop),Q(zi(),o.drop),Q(Hi(),function(t,n){o.move(n.event)})])));c.set(t);u(n),nD(n,t)}),Q(Hi(),function(t,n){n.stop(),iD(t,r,i,CA,n.event)}),Q(Li(),function(t,n){n.stop(),a(t)}),Q(zi(),a)]}function lD(t,o,r,i,n,e){return t.fold(function(){return OA.snap({sensor:gA(r-20,i-20),range:vr(n,e),output:gA(K.some(r),K.some(i)),extra:{td:o}})},function(t){var n=r-20,e=i-20,t=t.element.dom.getBoundingClientRect();return OA.snap({sensor:gA(n,e),range:vr(40,40),output:gA(K.some(r-t.width/2),K.some(i-t.height/2)),extra:{td:o}})})}function fD(t,r,i){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,n){var e,o,n=n.td;e=r.get(),o=n,e.exists(function(t){return Io(t,o)})||(r.set(n),i(n))},mustSnap:!0}}function dD(t){return it(vp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Z([OA.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Iw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}function mD(i,o,r){return o.delimiter||(o.delimiter=""),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Z([M.config({mode:"flow",selector:"div[role=button]"}),nt.config({disabled:r.isDisabled}),Jb(),Q0.config({}),et.config({}),ot("elementPathEvents",[Nu(function(n,t){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return M.focusIn(n)}),i.on("NodeChange",function(t){var e,t=function(t){for(var n=[],e=t.length;0<e--;){var o=t[e];if(1===o.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1}(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||n.push({name:r.name,element:o}),r.isPropagationStopped())break}}return n}(t.parents);0<t.length?et.set(n,(t=C((t=t)||[],function(n,t){return vp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":t,"tab-index":-1,"aria-level":t+1},innerHtml:n.name},action:function(t){i.focus(),i.selection.select(n.element),i.nodeChanged()},buttonBehaviours:Z([$b.button(r.isDisabled),Jb()])})}),e={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+o.delimiter+" "}},ve(t.slice(1),function(t,n){return t.push(e),t.push(n),t},[t[0]]))):et.set(n,[])})})])]),components:[]}}function gD(t,n,e){var o,r,i,u,a=w.fromDom(t.getContainer());o=t,n=n,e=e,r=pr(a),i=wr(a),(u={}).height=eO(r+n.top,Xh(o),Yh(o)),e===eA.Both&&(u.width=eO(i+n.left,Gh(o),Ab(o))),Fe(u,function(t,n){return A(a,n,KT(t))}),t.fire("ResizeEditor")}function pD(t,n,e,o){return e=vr(20*e,20*o),gD(t,e,n),K.some(!0)}function hD(o,t){e=!(n=o).hasPlugin("autoresize");var n,e,r=!1===(n=n.getParam("resize",e))?eA.None:"both"===n?eA.Both:eA.Vertical;return r===eA.None?K.none():K.some(Oh("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},behaviours:[OA.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,n,e){return gD(o,e,r)},blockerClass:"tox-blocker"}),M.config({mode:"special",onLeft:function(){return pD(o,r,-1,0)},onRight:function(){return pD(o,r,1,0)},onUp:function(){return pD(o,r,0,-1)},onDown:function(){return pD(o,r,0,1)}}),Q0.config({}),rt.config({})]},t.icons))}function vD(t,o){function r(t,n,e){et.set(t,[Sa(o.translate(["{0} "+e,n[e]]))])}var n;return vp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Z([$b.button(o.isDisabled),Jb(),Q0.config({}),et.config({}),tt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),ot("wordcount-events",[Hu(function(t){var n=tt.getValue(t),e="words"===n.mode?"characters":"words";tt.setValue(t,{mode:e,count:n.count}),r(t,n.count,e)}),Nu(function(e){t.on("wordCountUpdate",function(t){var n=tt.getValue(e).mode;tt.setValue(e,{mode:n,count:t.wordCount}),r(e,t.wordCount,n)})})])]),eventOrder:((n={})[cu()]=["disabling","alloy.base.behaviour","wordcount-events"],n)})}function bD(i){function t(){A(E.element,"width",document.body.clientWidth+"px")}function u(){return B.value(p)}function a(){return e.bind(function(t){return uT.getThrobber(t)}).getOrDie("Could not find throbber element")}var n=i.inline,c=n?tE:YT,s=jb(i)?C_:s_,e=K.none(),o=(r=Ao()).browser.isIE()?["tox-platform-ie"]:[],r=r.deviceType.isTouch()?["tox-platform-touch"]:[],l=Vb(i),f=zb(i),d=bh.isRtl()?{attributes:{dir:"rtl"}}:{},m={attributes:((m={})[ll]=l?Mc.BottomToTop:Mc.TopToBottom,m)},g=function(){return e.bind(uT.getHeader)},p=_a((f=Io(Qo(),f)&&"grid"===cr(f,"display"),d={dom:D({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(o).concat(r)},d),behaviours:Z([ym.config({useFixed:function(){return s.isDocked(g)}})])},y={dom:{styles:{width:document.body.clientWidth+"px"}},events:Mu([Q(bu(),t)])},Xr(d,f?y:{}))),h=it({dom:{tag:"div",classes:["tox-anchorbar"]}}),v=o_(p,i,function(){return e.bind(function(t){return h.getOpt(t)}).getOrDie("Could not find a anchor bar element")}),d=uT.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:v,onEscape:function(){i.focus()}}),b=Rb(i),f=uT.parts.toolbar(D({dom:{tag:"div",classes:["tox-toolbar"]},getSink:u,providers:v.shared.providers,onEscape:function(){i.focus()},type:b,lazyToolbar:function(){return e.bind(function(t){return uT.getToolbar(t)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return g().getOrDie("Could not find header element")}},m)),y=uT.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:v.shared.providers,onEscape:function(){i.focus()},type:b}),x=uT.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),w=uT.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),S=uT.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:v}),k=i.getParam("statusbar",!0,"boolean")&&!n?K.some(TA(i,v.shared.providers)):K.none(),x={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[x,w]},w=Ib(i),C=Mb(i),O=Bb(i),m=uT.parts.header({dom:D({tag:"div",classes:["tox-editor-header"]},m),components:we([O?[d]:[],w?[y]:C?[f]:[],Lb(i)?[]:[h.asSpec()]]),sticky:jb(i),editor:i,sharedBackstage:v.shared}),O=we([l?[]:[m],n?[]:[x],l?[m]:[]]),d=we([[{dom:{tag:"div",classes:["tox-editor-container"]},components:O}],n?[]:k.toArray(),[S]]),w=Ub(i),y=D(D({role:"application"},bh.isRtl()?{dir:"rtl"}:{}),w?{"aria-hidden":"true"}:{}),_=_a(uT.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(l?["tox-tinymce--toolbar-bottom"]:[]).concat(r).concat(o),styles:D({visibility:"hidden"},w?{opacity:"0",border:"0"}:{}),attributes:y},components:d,behaviours:Z([Jb(),nt.config({disableClass:"tox-tinymce--disabled"}),M.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),e=K.some(_),T=(i.shortcuts.add("alt+F9","focus menubar",function(){uT.focusMenubar(_)}),i.shortcuts.add("alt+F10","focus toolbar",function(){uT.focusToolbar(_)}),i.addCommand("ToggleToolbarDrawer",function(){uT.toggleToolbarDrawer(_)}),i.addQueryStateHandler("ToggleToolbarDrawer",function(){return uT.isToolbarDrawerToggled(_)}),J0(_)),E=J0(p);return r_(i,T,E),{mothership:T,uiMothership:E,backstage:v,renderUI:function(){s.setup(i,v.shared,g),uA(i,v),lA(i,u,v),U_(i),Y_(i,a,v.shared),Ie(Nb(i),function(t,n){i.ui.registry.addGroupToolbarButton(n,t)});var t=i.ui.registry.getAll(),n=t.buttons,e=t.menuItems,o=t.contextToolbars,t=t.sidebars,r=Fb(i),e={menuItems:e,menus:Wb(i),menubar:Gb(i),toolbar:r.getOrThunk(function(){return Xb(i)}),allowToolbarGroups:b===pv.floating,buttons:n,sidebar:t},r=(fE(i,o,p,{backstage:v}),_A(i,p),i.getElement()),o=(n=KT(JT(i)),t=KT(QT(i)),i.inline||(fr("div","width",t)&&A(_.element,"width",t),fr("div","height",n)?A(_.element,"height",n):A(_.element,"height","200px")),n),t={mothership:T,uiMothership:E,outerContainer:_};return c.render(i,t,e,v,{targetNode:r,height:o})},getUi:function(){return{channels:{broadcastAll:E.broadcast,broadcastOn:E.broadcastOn,register:Y}}}}}function yD(t){return[n("type"),Si("columns",si),t]}function xD(n){return xi("items","items",qr(),ui(gi(function(t){return hi("Checking item of "+n,JA,t).fold(function(t){return B.error(yi(t))},function(t){return B.value(t)})})))}function wD(t){return p(t)?[t].concat(Se(Ve(t),wD)):h(t)?Se(t,wD):[]}function SD(t){return d(t.type)&&d(t.name)}function kD(t){return{internalDialog:vi(hi("dialog",QA,t)),dataValidator:function(t){t=eB(t),t=Se(t,function(n){return nB(n).fold(function(){return[]},function(t){return[Si(n.name,t)]})});return g(t)}(t),initialData:t.initialData}}function CD(t){var e=[],o={};return Fe(t,function(t,n){t.fold(function(){e.push(n)},function(t){o[n]=t})}),0<e.length?B.error(e):B.value(o)}function OD(t,n){A(t,"height",n+"px"),Ao().browser.isIE()?dr(t,"flex-basis"):A(t,"flex-basis",n+"px")}function _D(t,a,n){Pc(t,'[role="dialog"]').each(function(u){Hc(u,'[role="tablist"]').each(function(i){n.get().map(function(t){return A(a,"height","0"),A(a,"flex-basis","0"),Math.min(t,(t=a,e=i,o=Lo(n=u).dom,r=Pc(n,".tox-dialog-wrap").getOr(n),r="fixed"===cr(r,"position")?Math.max(o.clientHeight,window.innerHeight):Math.max(o.offsetHeight,o.scrollHeight),o=pr(t),t=t.dom.offsetLeft>=e.dom.offsetLeft+wr(e)?Math.max(pr(e),o):o,e=parseInt(cr(n,"margin-top"),10)||0,o=parseInt(cr(n,"margin-bottom"),10)||0,r-(pr(n)+e+o-t)));var n,e,o,r}).each(function(t){OD(a,t)})})})}function TD(t){return Hc(t,'[role="tabpanel"]')}function ED(i){var u;return u=Us(),{smartTabHeight:{extraEvents:[Nu(function(t){var o=t.element;TD(o).each(function(n){var e;A(n,"visibility","hidden"),t.getSystem().getByDom(n).toOptional().each(function(t){o=n,r=t;var e,o,r,t=C(e=i,function(t,n){et.set(r,e[n].view());n=o.dom.getBoundingClientRect();return et.set(r,[]),n.height});Ee(gt(t,function(t,n){return n<t?-1:t<n?1:0})).fold(u.clear,u.set)}),_D(o,n,u),dr(n,"visibility"),e=t,Ee(i).each(function(t){return iB.showTab(e,t.value)}),hp.requestAnimationFrame(function(){_D(o,n,u)})})}),Q(bu(),function(t){var n=t.element;TD(n).each(function(t){_D(n,t,u)})}),Q(dw,function(t,n){var r=t.element;TD(r).each(function(n){var t=Bs(Yo(n)),e=(A(n,"visibility","hidden"),lr(n,"height").map(function(t){return parseInt(t,10)})),o=(dr(n,"height"),dr(n,"flex-basis"),n.dom.getBoundingClientRect().height);e.forall(function(t){return t<o})?(u.set(o),_D(r,n,u)):e.each(function(t){OD(n,t)}),dr(n,"visibility"),t.each(As)})})],selectFirst:!1},naiveTabHeight:{extraEvents:[],selectFirst:!0}}}function DD(t,e){function o(t){var t=tt.getValue(t),t=CD(t).getOr({}),n=i.get(),n=Xr(n,t);i.set(n)}function r(t){var n=i.get();tt.setValue(t,n)}var i=T({}),u=T(null),t=C(t.tabs,function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[AS.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"]},components:C(t.items,function(t){return _C(n,t,e)}),formBehaviours:Z([M.config({mode:"acyclic",useTabstopAt:L(t0)}),ot("TabView.form.events",[Nu(r),Pu(o)]),Es.config({channels:Bi([{key:uB,value:{onReceive:o}},{key:aB,value:{onReceive:r}}])})])}})]}}}),n=ED(t).smartTabHeight;return iB.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,n,e){n=tt.getValue(n);$(t,fw,{name:n,oldName:u.get()}),u.set(n)},tabs:t,components:[iB.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[rB.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Z([Q0.config({})])}),iB.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:n.selectFirst,tabSectionBehaviours:Z([ot("tabpanel",n.extraEvents),M.config({mode:"acyclic"}),y.config({find:function(t){return Ee(iB.getViewItems(t))}}),tt.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([uB],{}),i.get()},setValue:function(t,n){i.set(n),t.getSystem().broadcastOn([aB],{})}}})])})}function AD(t,n,r,e){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:D(D({},n.map(function(t){return{id:t}}).getOr({})),e?{"aria-live":"polite"}:{})},components:[],behaviours:Z([PS.childAt(0),BT.config({channel:lB,updateState:function(t,n){return K.some({isTabPanel:function(){return"tabpanel"===n.body.type}})},renderComponents:function(t){return"tabpanel"!==t.body.type?[(e=t.body,o=r,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(n=it(AS.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:C(e.items,function(t){return _C(n,t,o)})}}))).asSpec()]}],behaviours:Z([M.config({mode:"acyclic",useTabstopAt:L(t0)}),PS.memento(n),jS(n,{postprocess:function(t){return CD(t).fold(function(t){return console.error(t),{}},v)}})])})]:[DD(t.body,r)];var e,o,n},initialData:t})])}}function BD(t,n){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,n]}}function MD(t,n){return EA.parts.close(vp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close")}},action:t,buttonBehaviours:Z([Q0.config({})])}))}function FD(){return EA.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function ID(t,n){return EA.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:em("<p>"+gh(n.translate(t))+"</p>")}]}]})}function RD(t){return EA.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function ND(t,n){return[K0.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),K0.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:n})]}function PD(n){var t="tox-dialog",e=t+"-wrap",o=e+"__backdrop",r=t+"__disable-scroll";return EA.sketch({lazySink:n.lazySink,onEscape:function(t){return n.onEscape(t),K.some(!0)},useTabstopAt:function(t){return!t0(t)},dom:{tag:"div",classes:[t].concat(n.extraClasses),styles:D({position:"relative"},n.extraStyles)},components:X([n.header,n.body],n.footer.toArray(),!0),parts:{blocker:{dom:em('<div class="'+e+'"></div>'),components:[{dom:{tag:"div",classes:mB?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:e,modalBehaviours:Z(X([rt.config({}),ot("dialog-events",n.dialogEvents.concat([Hn(Yi(),function(t,n){M.focusIn(t)})])),ot("scroll-lock",[Nu(function(){ma(Qo(),r)}),Pu(function(){pa(Qo(),r)})])],n.extraBehaviours,!0)),eventOrder:D(((t={})[cu()]=["dialog-events"],t[yu()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[xu()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),n.eventOrder)})}function VD(t){return vp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[Oh("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(t){J(t,uw)}})}function HD(t,n,e){function o(t){return[Sa(e.translate(t.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:D({},n.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:Z([BT.config({channel:sB,renderComponents:o})])}}function LD(){return{dom:em('<div class="tox-dialog__draghandle"></div>')}}function zD(t,n){return t={title:n.shared.providers.translate(t),draggable:n.dialog.isDraggableModal()},n=n.shared.providers,e=EA.parts.title(HD(t,K.none(),n)),o=EA.parts.draghandle(LD()),n=EA.parts.close(VD(n)),e=[e].concat(t.draggable?[o]:[]).concat([n]),K0.sketch({dom:em('<div class="tox-dialog__header"></div>'),components:e});var e,o}function UD(t,n,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:em('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function jD(t,o,n){return{onClose:function(){return n.closeWindow()},onBlock:function(e){EA.setBusy(t(),function(t,n){return UD(e.message,n,o)})},onUnblock:function(){EA.setIdle(t())}}}function WD(t,n,e,o){return _a(PD(D(D({},t),{lazySink:o.shared.getSink,extraBehaviours:X([BT.config({channel:cB,updateState:function(t,n){return K.some(n)},initialData:n}),XS({})],t.extraBehaviours,!0),onEscape:function(t){J(t,uw)},dialogEvents:e,eventOrder:((o={})[au()]=[BT.name(),Es.name()],o[yu()]=["scroll-lock",BT.name(),"messages","dialog-events","alloy.base.behaviour"],o[xu()]=["alloy.base.behaviour","dialog-events","messages",BT.name(),"scroll-lock"],o)})))}function GD(t){return C(t,function(t){var n,e;return"menu"===t.type?(e=C((n=t).items,function(t){var n=T(!1);return D(D({},t),{storage:n})}),D(D({},n),{items:e})):t})}function XD(t){return ve(t,function(t,n){return"menu"===n.type?ve(n.items,function(t,n){return t[n.name]=n.storage,t},t):t},{})}function YD(t,e){return[Iu(Yi(),$S),t(iw,function(t,n){e.onClose(),n.onClose()}),t(uw,function(t,n,e,o){n.onCancel(t),J(o,iw)}),Q(lw,function(t,n){return e.onUnblock()}),Q(sw,function(t,n){return e.onBlock(n.event)})]}function qD(t,n){function e(t,n){return K0.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:C(n,function(t){return t.memento.asSpec()})})}return n=n.map(function(t){return t.footerButtons}).getOr([]),n=dt(n,function(t){return"start"===t.align}),[e("start",n.pass),e("end",n.fail)]}function KD(t,e){return{dom:em('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Z([BT.config({channel:fB,initialData:t,updateState:function(t,n){var r=C(n.buttons,function(t){var n=it(v0(t,t.type,e));return{name:t.name,align:t.align,memento:n}});return K.some({lookupByName:function(t,n){return e=t,o=n,ye(r,function(t){return t.name===o}).bind(function(t){return t.memento.getOpt(e)});var e,o},footerButtons:r})},renderComponents:qD})])}}function JD(t,n){return EA.parts.footer(KD(t,n))}function $D(n,e){var o;return n.getRoot().getSystem().isConnected()?(o=y.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper()),AS.getField(o,e).fold(function(){var t=n.getFooter();return BT.getState(t).get().bind(function(t){return t.lookupByName(o,e)})},function(t){return K.some(t)})):K.none()}function QD(i,o,u){function t(t){var n=i.getRoot();n.getSystem().isConnected()&&t(n)}var a={getData:function(){var t=i.getRoot(),t=t.getSystem().isConnected()?i.getFormWrapper():t,t=tt.getValue(t),n=Ie(u,function(t){return t.get()});return D(D({},t),n)},setData:function(r){t(function(t){var n=a.getData(),e=D(D({},n),r),n=function(t,n){t=t.getRoot();return BT.getState(t).get().map(function(t){return vi(hi("data",t.dataValidator,n))}).getOr(n)}(i,e),o=i.getFormWrapper();tt.setValue(o,n),Fe(u,function(t,n){He(e,n)&&t.set(e[n])})})},disable:function(t){$D(i,t).each(nt.disable)},enable:function(t){$D(i,t).each(nt.enable)},focus:function(t){$D(i,t).each(rt.focus)},block:function(n){if(!d(n))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){$(t,sw,{message:n})})},unblock:function(){t(function(t){J(t,lw)})},showTab:function(e){t(function(t){var n=i.getBody();BT.getState(n).get().exists(function(t){return t.isTabPanel()})&&y.getCurrent(n).each(function(t){iB.showTab(t,e)})})},redial:function(e){t(function(t){var n=o(e);t.getSystem().broadcastOn([cB],n),t.getSystem().broadcastOn([sB],n.internalDialog),t.getSystem().broadcastOn([lB],n.internalDialog),t.getSystem().broadcastOn([fB],n.internalDialog),a.setData(n.initialData)})},close:function(){t(function(t){J(t,iw)})}};return a}function ZD(n){function t(t){n.getSystem().isConnected()&&t(n)}return{block:function(n){if(!d(n))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(t){$(t,sw,{message:n})})},unblock:function(){t(function(t){J(t,lw)})},close:function(){t(function(t){J(t,iw)})},sendMessage:function(n){t(function(t){t.getSystem().broadcastOn([dB],n)})}}}function tA(t){return p(t)&&-1!==xB.indexOf(t.mceAction)}function nA(t){function o(t,a,c,s){return oB.open(function(t,n,e){function o(){return r.on(function(t){dp.reposition(t),b_.refresh(t)})}var n=CB(n,e),r=Us(),i=l.shared.header.isPositionedAtTop(),u=bB({dataValidator:e,initialData:n,internalDialog:t},{redial:oB.redial,closeWindow:function(){r.on(dp.hide),f.off("ResizeEditor",o),r.clear(),c(u.instanceApi)}},l,s),e=_a(dp.sketch(D(D({lazySink:l.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},i?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Z(X([ot("window-manager-inline-events",[Q(wu(),function(t,n){J(u.dialog,uw)})])],_B(f,d,i),!0)),isExtraPart:function(t,n){return OB(n)}})));return r.set(e),dp.showWithin(e,Ta(u.dialog),{anchor:a},K.some(Qo())),d&&i||(b_.refresh(e),f.on("ResizeEditor",o)),u.instanceApi.setData(n),M.focusIn(u.dialog),u.instanceApi},t)}var l=t.backstage,f=t.editor,d=jb(f),e=SB(t),r=kB(t);return{open:function(t,n,e){return void 0!==n&&"toolbar"===n.inline?o(t,l.shared.anchors.inlineDialog(),e,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?o(t,l.shared.anchors.cursor(),e,n.ariaAttrs):(r=e,oB.open(function(t,n,e){var o=vB({dataValidator:e,initialData:n,internalDialog:t},{redial:oB.redial,closeWindow:function(){EA.hide(o.dialog),r(o.instanceApi)}},l);return EA.show(o.dialog),o.instanceApi.setData(n),o.instanceApi},t));var r},openUrl:function(t,n){return e=n,oB.openUrl(function(t){var n=wB(t,{closeWindow:function(){EA.hide(n.dialog),e(n.instanceApi)}},f,l);return EA.show(n.dialog),n.instanceApi},t);var e},alert:function(t,n){e.open(t,function(){n()})},close:function(t){t.close()},confirm:function(t,n){r.open(t,function(t){n(t)})}}}var eA,oA,rA=function(n,t){return me(t,function(t){return me(dE[t],function(t){return n===t})})},iA={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(t){return pE(t,["fixed","relative","empty"]).getOr(t)},display:v,watcher:function(t,n,e){return t.formatter.formatChanged("lineheight",e,!1,{value:n}).unbind},getCurrent:function(t){return K.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,n){return t.execCommand("LineHeight",!1,n)}},uA=function(t,n){var e,o,r;e=t,x([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:z1(e,t.cmd),onSetup:L1(e,t.name)})}),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:z1(e,"JustifyNone")}),SE(t),bE(t,n),CE(t),Gy(n=t),o=T(_0),r=T(_0),Jy(n,"forecolor","forecolor","Text color",o),Jy(n,"backcolor","hilitecolor","Background color",r),$y(n,"forecolor","forecolor","Text color"),$y(n,"backcolor","hilitecolor","Background color"),_E(t),yE(t),vE(t)},aA={onLtr:function(){return[hs,fs,ds,ms,gs,ps,gp,pp,Kd,Yd,qd,Xd]},onRtl:function(){return[hs,ds,fs,gs,ms,ps,gp,pp,qd,Xd,Kd,Yd]}},cA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},sA={type:"separator"},lA=function(u,t,r){function n(t){return dp.hide(c)}function e(i){var t,n,e,o;VE(u)&&i.preventDefault(),n=u,i.ctrlKey&&!VE(n)||!1===u.getParam("contextmenu")||(n=i,e=(t=u).getParam("contextmenu_avoid_overlap","","string"),o=jE(t,n)?"selection":"point",n=yt(e)&&(t=WE(t,n),nx(w.fromDom(t),e))?"node":o,(a()?NE:FE)(u,i,function(){var t=WE(u,i),n=u.ui.registry.getAll(),e=HE(u),o=n.contextMenus,n=e,r=t;return 0<(n=ve(n,function(n,t){return O(o,t.toLowerCase()).map(function(t){var t=t.update(r);return d(t)?UE(n,t.split(" ")):0<t.length?(t=C(t,zE),UE(n,t)):n}).getOrThunk(function(){return n.concat([t])})},[])).length&&LE(n[n.length-1])&&n.pop(),n},r,c,n))}var a=Ao().deviceType.isTouch,c=_a(dp.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return u.focus()},onShow:function(){return r.setContextMenuState(!0)},onHide:function(){return r.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Z([ot("dismissContextMenu",[Q(wu(),function(t,n){l.close(t),u.focus()})])])}));u.on("init",function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(a()?"":" ResizeWindow");u.on(t,n),u.on("longpress contextmenu",e)})},Xm=Ti([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),fA=function(t,n,e,o,r,i){t=KE(t,r,i),n=KE(n,r,i),r=Math.abs(t.left-n.left),i=Math.abs(t.top-n.top);return vr(r,i)},dA=function(t,i,u,a){function n(o,r){return function(t,n){var e=o(i,u,a);return r(t.getOr(e.left),n.getOr(e.top))}}return t.fold(n(JE,mA),n(KE,gA),n(qE,pA))},mA=Xm.offset,gA=Xm.absolute,pA=Xm.fixed,hA=function(t,n){t=t.element,rr(t,n.leftAttr),rr(t,n.topAttr)},vA=function(t,e,o,r){return Ae(t,function(t){var n=t.sensor;return function(t,n,e,o,r,i){t=KE(t,r,i),n=KE(n,r,i);return Math.abs(t.left-n.left)<=e&&Math.abs(t.top-n.top)<=o}(e,n,t.range.left,t.range.top,o,r)?K.some({output:dA(t.output,e,o,r),extra:t.extra}):K.none()})},qu=Object.freeze({__proto__:null,snapTo:function(t,n,e,o){var r=n.getTarget(t.element);n.repositionTarget&&(n=Vo(t.element),t=Br(n),n=t1(r),t={coord:dA((o=o).output,o.output,t,n),extra:o.extra},o=$E(t.coord,0,n),Rt(r,o))}}),bA="data-initial-z-index",yA=function(t){zo(t.element).filter($e).each(function(n){lr(n,"z-index").each(function(t){_(n,bA,t)}),A(n,"z-index",cr(t.element,"z-index"))})},xA=function(t){zo(t.element).filter($e).each(function(n){er(n,bA).fold(function(){return dr(n,"z-index")},function(t){return A(n,"z-index",t)}),rr(n,bA)}),t.getSystem().removeFromGui(t)},Gg=Ci("snaps",[i("getSnapPoints"),t("onSensor"),i("leftAttr"),i("topAttr"),s("lazyViewport",Ur),s("mustSnap",!1)]),qm=[s("useFixed",U),i("blockerClass"),s("getTarget",v),s("onDrag",Y),s("repositionTarget",!0),s("onDrop",Y),Tn("getBounds",Ur),Gg],wA=function(t,n,e,o){var r,i,u,a=n.getTarget(t.element);n.repositionTarget&&(u=Vo(t.element),u=Br(u),r=t1(a),i=oD(a),i=rD(t,n.snaps,i,u,r,o,e),u=$E(i,0,r),Rt(a,u)),n.onDrag(t,a,o)},SA=function(t,n){return{bounds:t.getBounds(),height:hr(n.element),width:Sr(n.element)}},kA=Object.freeze({__proto__:null,getData:function(t){return K.from(vr(t.x,t.y))},getDelta:function(t,n){return vr(n.left-t.left,n.top-t.top)}}),$0=X(X([],qm,!0),[$c("dragger",{handlers:aD(cD)})],!1),CA=Object.freeze({__proto__:null,getData:function(t){var t=t.raw.touches;return 1===t.length?(t=(t=t)[0],K.some(vr(t.clientX,t.clientY))):K.none()},getDelta:function(t,n){return vr(n.left-t.left,n.top-t.top)}}),ml=X(X([],qm,!0),[$c("dragger",{handlers:aD(sD)})],!1),Lg=X(X([],qm,!0),[$c("dragger",{handlers:aD(function(t,n,e){return X(X([],cD(t,n,e),!0),sD(t,n,e),!0)})})],!1),OA=Za({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:$0,touch:ml,mouseOrTouch:Lg}),name:"dragging",active:{events:function(t,n){return t.dragger.handlers(t,n)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:K.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var r=K.none(),n=K.none(),t=q({});return ia({readState:t,reset:function(){r=K.none(),n=K.none()},update:function(o,t){return o.getData(t).bind(function(t){return n=o,e=t,t=r.map(function(t){return n.getDelta(t,e)}),r=K.some(e),t;var n,e})},getStartData:function(){return n},setStartData:function(t){n=K.some(t)}})}}),apis:qu}),_A=function(i,e){function n(t){var n=zr(t);return lD(g.getOpt(e),t,n.x,n.y,n.width,n.height)}function o(t){var n=zr(t);return lD(p.getOpt(e),t,n.right,n.bottom,n.width,n.height)}function r(t,n,e,o){e=e(n),OA.snapTo(t,e),b(t,n,function(t){return t[o]<0},function(t,n){return t[o]>n})}function u(t){return r(h,t,n,"top")}function a(t){return r(v,t,o,"bottom")}var c=T([]),s=T([]),t=T(!1),l=Us(),f=Us(),d=fD(function(){return C(c.get(),n)},l,function(n){f.get().each(function(t){i.fire("TableSelectorChange",{start:n,finish:t})})}),m=fD(function(){return C(s.get(),o)},f,function(n){l.get().each(function(t){i.fire("TableSelectorChange",{start:t,finish:n})})}),g=dD(d),p=dD(m),h=_a(g.asSpec()),v=_a(p.asSpec()),b=function(t,n,e,o){var n=n.dom.getBoundingClientRect(),r=(dr(t.element,"display"),Et(w.fromDom(i.getBody())).dom.innerHeight),e=e(n),o=o(n,r);(e||o)&&A(t.element,"display","none")};Ao().deviceType.isTouch()&&(i.on("TableSelectionChange",function(n){t.get()||(Cm(e,h),Cm(e,v),t.set(!0)),l.set(n.start),f.set(n.finish),n.otherCells.each(function(t){c.set(t.upOrLeftCells),s.set(t.downOrRightCells),u(n.start),a(n.finish)})}),i.on("ResizeEditor ResizeWindow ScrollContent",function(){l.get().each(u),f.get().each(a)}),i.on("TableSelectionClear",function(){t.get()&&(ql(h),ql(v),t.set(!1)),l.clear(),f.clear()}))},TA=((Km=eA=eA||{})[Km.None=0]="None",Km[Km.Both=1]="Both",Km[Km.Vertical=2]="Vertical",function(t,n){var e,o=function(){var t=bh.translate(["Powered by {0}","Tiny"]);return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+t+'">'+t+"</a>"}}};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(e=[],t.getParam("elementpath",!0,"boolean")&&e.push(mD(t,{},n)),t.hasPlugin("wordcount")&&e.push(vD(t,n)),t.getParam("branding",!0,"boolean")&&e.push(o()),e=0<e.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:e}]:[],o=hD(t,n),e.concat(o.toArray()))}}),Ym=q([i("lazySink"),bn("dragBlockClass"),Tn("getBounds",Ur),s("useTabstopAt",j),s("eventOrder",{}),sf("modalBehaviours",[M]),Ra("onExecute"),Pa("onEscape")]),Gu={sketch:v},Pg=q([$m({name:"draghandle",overrides:function(t,n){return{behaviours:Z([OA.config({mode:"mouse",getTarget:function(t){return Pc(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(n,null,2)).message),getBounds:t.getDragBounds})])}}}),Jm({schema:[i("dom")],name:"title"}),Jm({factory:Gu,schema:[i("dom")],name:"close"}),Jm({factory:Gu,schema:[i("dom")],name:"body"}),$m({factory:Gu,schema:[i("dom")],name:"footer"}),ks({factory:{sketch:function(t,n){return D(D({},t),{dom:n.dom,components:n.components})}},schema:[s("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),s("components",[])],name:"blocker"})]),EA=Cf({name:"ModalDialog",configFields:Ym(),partFields:Pg(),factory:function(i,t,n,o){var r=Us(),e=E("modal-events"),u=D(D({},i.eventOrder),((u={})[yu()]=[e].concat(i.eventOrder["alloy.system.attached"]||[]),u));return{uid:i.uid,dom:i.dom,components:t,apis:{show:function(t){r.set(t);var n=i.lazySink(t).getOrDie(),e=o.blocker(),e=n.getSystem().build(D(D({},e),{components:e.components.concat([Ta(t)]),behaviours:Z([rt.config({}),ot("dialog-blocker-events",[Hn(Yi(),function(){M.focusIn(t)})])])}));Cm(n,e),M.focusIn(t)},hide:function(n){r.clear(),zo(n.element).each(function(t){n.getSystem().getByDom(t).each(function(t){ql(t)})})},getBody:function(t){return yf(t,i,"body")},getFooter:function(t){return yf(t,i,"footer")},setIdle:function(t){X_.unblock(t)},setBusy:function(t,n){X_.block(t,n)}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Pm(i.modalBehaviours,[et.config({}),M.config({mode:"cyclic",onEnter:i.onExecute,onEscape:i.onEscape,useTabstopAt:i.useTabstopAt}),X_.config({getRoot:r.get}),ot(e,[Nu(function(t){var n,e,o,r;e=t.element,n=yf(t,i,"title").element,r=er(e,"id").fold(function(){var t=E("dialog-label");return _(n,"id",t),t},v),_(e,"aria-labelledby",r),e=t.element,o=yf(t,i,"body").element,r=K.from(nr(e,"id")).fold(function(){var t=E("dialog-describe");return _(o,"id",t),t},v),_(e,"aria-describedby",r)})])])}},apis:{show:function(t,n){t.show(n)},hide:function(t,n){t.hide(n)},getBody:function(t,n){return t.getBody(n)},getFooter:function(t,n){return t.getFooter(n)},setBusy:function(t,n,e){t.setBusy(n,e)},setIdle:function(t,n){t.setIdle(n)}}}),wl=g([n("type"),n("name")].concat(hm)),Xg=fi,Ng=[xi("name","name",Kr(function(){return E("button-name")}),li),xn("icon"),On("align","end",["start","end"]),_n("primary",!1),_n("disabled",!1)],Vg=X(X([],Ng,!0),[n("text")],!1),Pi=X([mn("type",["submit","cancel","custom"])],Vg,!0),gl=X([mn("type",["menu"]),xn("text"),xn("tooltip"),xn("icon"),vn("items",wl)],Ng,!0),Hg=fn("type",{submit:Pi,cancel:Pi,custom:Pi,menu:gl}),Ti=[n("type"),n("text"),mn("level",["info","warn","error","success"]),n("icon"),s("url","")],DA=g(Ti),Xm=[n("type"),n("text"),_n("disabled",!1),_n("primary",!1),xi("name","name",Kr(function(){return E("button-name")}),li),xn("icon"),_n("borderless",!1)],AA=g(Xm),Gg=[n("type"),n("name"),n("label"),_n("disabled",!1)],BA=g(Gg),qm=fi,$0=[n("type"),n("name")],ml=$0.concat([xn("label")]),Lg=ml.concat([s("columns","auto")]),MA=g(Lg),qu=ai([n("value"),n("text"),n("icon")]),FA=g(ml),Km=li,IA=g(ml),Gu=li,RA=$0.concat([Cn("tag","textarea"),n("scriptId"),n("scriptUrl"),_i("settings",void 0,ao)]),NA=$0.concat([Cn("tag","textarea"),gn("init")]),PA=gi(function(t){return hi("customeditor.old",ii(NA),t).orThunk(function(){return hi("customeditor.new",ii(RA),t)})}),ks=li,VA=g(ml),Ym=ui(uo),Pg=[n("type"),n("html"),On("presets","presentation",["presentation","document"])],HA=g(Pg),hm=ml.concat([_n("sandboxed",!0)]),LA=g(hm),wl=li,Ng=ml.concat([Si("currentState",g([i("blob"),n("url")]))]),zA=g(Ng),Pi=ml.concat([xn("inputMode"),xn("placeholder"),_n("maximized",!1),_n("disabled",!1)]),UA=g(Pi),gl=li,Ti=[n("text"),n("value")],Xm=[n("text"),vn("items",(oA=no(function(){return jA}),{extract:function(t,n){return oA().extract(t,n)},toString:function(){return oA().toString()}}))],jA=rn([g(Ti),g(Xm)]),Gg=ml.concat([vn("items",jA),_n("disabled",!1)]),WA=g(Gg),Lg=li,ao=ml.concat([hn("items",[n("text"),n("value")]),kn("size",1),_n("disabled",!1)]),GA=g(ao),$0=li,uo=ml.concat([_n("constrain",!0),_n("disabled",!1)]),XA=g(uo),Pg=g([n("width"),n("height")]),hm=[n("type"),vn("header",li),vn("cells",ui(li))],YA=g(hm),Ng=ml.concat([xn("placeholder"),_n("maximized",!1),_n("disabled",!1)]),qA=g(Ng),Pi=li,Ti=ml.concat([On("filetype","file",["image","media","file"]),s("disabled",!1)]),KA=g(Ti),Xm=g([n("value"),s("meta",{})]),JA=on(function(){return sn("type",{alertbanner:DA,bar:g((t=xD("bar"),[n("type"),t])),button:AA,checkbox:BA,colorinput:FA,colorpicker:IA,dropzone:VA,grid:g(yD(xD("grid"))),iframe:LA,input:UA,listbox:WA,selectbox:GA,sizeinput:XA,textarea:qA,urlinput:KA,customeditor:PA,htmlpanel:HA,imagetools:zA,collection:MA,label:g((t=xD("label"),[n("type"),n("label"),t])),table:YA,panel:$A});var t}),Gg=[n("type"),s("classes",[]),vn("items",JA)],$A=g(Gg),ao=[xi("name","name",Kr(function(){return E("tab-name")}),li),n("title"),vn("items",JA)],uo=[n("type"),hn("tabs",ao)],hm=g(uo),Ng=Vg,ml=Hg,QA=g([n("title"),Si("body",sn("type",{panel:$A,tabpanel:hm})),Cn("size","normal"),vn("buttons",ml),s("initialData",{}),Tn("onAction",Y),Tn("onChange",Y),Tn("onSubmit",Y),Tn("onClose",Y),Tn("onCancel",Y),s("onTabChange",Y)]),Ti=g(X([mn("type",["cancel","custom"])],Ng,!0)),ZA=g([n("title"),n("url"),yn("height"),yn("width"),Sn("buttons",Ti),Tn("onAction",Y),Tn("onCancel",Y),Tn("onClose",Y),Tn("onMessage",Y)]),tB={checkbox:qm,colorinput:Km,colorpicker:Gu,dropzone:Ym,input:gl,iframe:wl,sizeinput:Pg,selectbox:$0,listbox:Lg,size:Pg,textarea:Pi,urlinput:Xm,customeditor:ks,collection:qu,togglemenuitem:Xg},nB=function(t){return K.from(tB[t.type])},eB=function(t){return pe(wD(t),SD)},oB={open:function(t,n){n=kD(n);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,n){return t(vi(hi("dialog",ZA,n)))},redial:kD},Gg=dg({name:"TabButton",configFields:[s("uid",void 0),i("value"),xi("dom","dom",Zt(function(){return{attributes:{role:"tab",id:E("aria"),"aria-selected":"false"}}}),ci()),bn("action"),s("domModification",{}),sf("tabButtonBehaviours",[rt,M,tt]),i("view")],factory:function(t,n){return{uid:t.uid,dom:t.dom,components:t.components,events:Pd(t.action),behaviours:Pm(t.tabButtonBehaviours,[rt.config({}),M.config({mode:"execution",useSpace:!0,useEnter:!0}),tt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),ao=q([i("tabs"),i("dom"),s("clickToDismiss",!1),sf("tabbarBehaviours",[gg,M]),Fa(["tabClass","selectedClass"])]),uo=Qc({factory:Gg,name:"tabs",unit:"tab",overrides:function(o){function r(t,n){gg.dehighlight(t,n),$(t,Ou(),{tabbar:t,button:n})}function i(t,n){gg.highlight(t,n),$(t,Cu(),{tabbar:t,button:n})}return{action:function(t){var n=t.getSystem().getByUid(o.uid).getOrDie(),e=gg.isHighlighted(n,t);(e&&o.clickToDismiss?r:e?Y:i)(n,t)},domModification:{classes:[o.markers.tabClass]}}}}),Vg=q([uo]),rB=Cf({name:"Tabbar",configFields:ao(),partFields:Vg(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Pm(t.tabbarBehaviours,[gg.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,n){_(n.element,"aria-selected","true")},onDehighlight:function(t,n){_(n.element,"aria-selected","false")}}),M.config({mode:"flow",getInitial:function(t){return gg.getHighlighted(t).map(function(t){return t.element})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),Hg=dg({name:"Tabview",configFields:[sf("tabviewBehaviours",[et])],factory:function(t,n){return{uid:t.uid,dom:t.dom,behaviours:Pm(t.tabviewBehaviours,[et.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),hm=q([s("selectFirst",!0),t("onChangeTab"),t("onDismissTab"),s("tabs",[]),sf("tabSectionBehaviours",[])]),ml=Jm({factory:rB,schema:[i("dom"),pn("markers",[i("tabClass"),i("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),Ng=Jm({factory:Hg,name:"tabview"}),Ti=q([ml,Ng]),iB=Cf({name:"TabSection",configFields:hm(),partFields:Ti(),factory:function(r,t,n,e){function o(t,n){og(t,r,"tabbar").each(function(t){n(t).each(Eu)})}return{uid:r.uid,dom:r.dom,components:t,behaviours:Nm(r.tabSectionBehaviours),events:Mu(we([r.selectFirst?[Nu(function(t,n){o(t,gg.getFirst)})]:[],[Q(Cu(),function(t,n){var e,o,n=n.event.button;e=n,o=tt.getValue(e),og(e,r,"tabview").each(function(n){ye(r.tabs,function(t){return t.value===o}).each(function(t){t=t.view();er(e.element,"id").each(function(t){_(n.element,"aria-labelledby",t)}),et.set(n,t),r.onChangeTab(n,e,t)})})}),Q(Ou(),function(t,n){n=n.event.button;r.onDismissTab(t,n)})]])),apis:{getViewItems:function(t){return og(t,r,"tabview").map(function(t){return et.contents(t)}).getOr([])},showTab:function(t,e){o(t,function(n){var t=gg.getCandidates(n);return ye(t,function(t){return tt.getValue(t)===e}).filter(function(t){return!gg.isHighlighted(n,t)})})}}}},apis:{getViewItems:function(t,n){return t.getViewItems(n)},showTab:function(t,n,e){t.showTab(n,e)}}}),uB="send-data-to-section",aB="send-data-to-view",cB=E("update-dialog"),sB=E("update-title"),lB=E("update-body"),fB=E("update-footer"),dB=E("body-send-message"),mB=ry.deviceType.isTouch(),gB=function(u,t){function n(t,i){return Q(t,function(e,o){var n,r;n=e,r=function(t,n){i(u(),t,o.event,e)},BT.getState(n).get().each(function(t){r(t,n)})})}return X(X([],YD(n,t),!0),[n(aw,function(t,n,e){n.onAction(t,{name:e.name})})],!1)},pB=function(u,t,c){function n(t,i){return Q(t,function(e,o){var n,r;n=e,r=function(t,n){i(u(),t,o.event,e)},BT.getState(n).get().each(function(t){r(t.internalDialog,n)})})}return X(X([],YD(n,t),!0),[n(cw,function(t,n){n.onSubmit(t)}),n(rw,function(t,n,e){n.onChange(t,{name:e.name})}),n(aw,function(t,n,e,o){function r(){return M.focusIn(o)}function i(t){return or(t,"disabled")||er(t,"aria-disabled").exists(function(t){return"true"===t})}var u=Yo(o.element),a=Bs(u);n.onAction(t,{name:e.name,value:e.value}),Bs(u).fold(r,function(n){i(n)||a.exists(function(t){return Po(n,t)&&i(t)})?r():c().toOptional().filter(function(t){return!Po(t.element,n)}).each(r)})}),n(fw,function(t,n,e){n.onTabChange(t,{newTabName:e.name,oldTabName:e.oldName})}),Pu(function(t){var n=u();tt.setValue(t,n.getData())})],!1)},hB=KD,vB=function(t,n,e){var o=zD(t.internalDialog.title,e),r=function(t,n){t=AD(t,K.none(),n,!1);return EA.parts.body(t)}({body:t.internalDialog.body},e),i=GD(t.internalDialog.buttons),u=XD(i),i=JD({buttons:i},e),a=pB(function(){return l},jD(function(){return s},e.shared.providers,n),e.shared.getSink),c=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),o={header:o,body:r,footer:K.some(i),extraClasses:c,extraBehaviours:[],extraStyles:{}},s=WD(o,t,a,e),r={getRoot:q(s),getBody:function(){return EA.getBody(s)},getFooter:function(){return EA.getFooter(s)},getFormWrapper:function(){var t=EA.getBody(s);return y.getCurrent(t).getOr(t)}},l=QD(r,n.redial,u);return{dialog:s,instanceApi:l}},bB=function(t,n,o,e){var r=E("dialog-label"),i=E("dialog-content"),u=it((u={title:t.internalDialog.title,draggable:!0},c=r,s=o.shared.providers,K0.sketch({dom:em('<div class="tox-dialog__header"></div>'),components:[HD(u,K.some(c),s),LD(),VD(s)],containerBehaviours:Z([OA.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Lc(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),a=it((c={body:t.internalDialog.body},s=o,e=e,AD(c,K.some(i),s,e))),c=GD(t.internalDialog.buttons),s=XD(c),l=it(hB({buttons:c},o)),e=pB(function(){return d},{onBlock:function(e){X_.block(f,function(t,n){return UD(e.message,n,o.shared.providers)})},onUnblock:function(){X_.unblock(f)},onClose:function(){return n.closeWindow()}},o.shared.getSink),f=_a({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((c={role:"dialog"})["aria-labelledby"]=r,c["aria-describedby"]=i,c)},eventOrder:((r={})[au()]=[BT.name(),Es.name()],r[cu()]=["execute-on-form"],r[yu()]=["reflecting","execute-on-form"],r),behaviours:Z([M.config({mode:"cyclic",onEscape:function(t){return J(t,iw),K.some(!0)},useTabstopAt:function(t){return!t0(t)&&("button"!==Je(t)||"disabled"!==nr(t,"disabled"))}}),BT.config({channel:cB,updateState:function(t,n){return K.some(n)},initialData:t}),rt.config({}),ot("execute-on-form",e.concat([Hn(Yi(),function(t,n){M.focusIn(t)})])),X_.config({getRoot:function(){return K.some(f)}}),et.config({}),XS({})]),components:[u.asSpec(),a.asSpec(),l.asSpec()]}),d=QD({getRoot:q(f),getFooter:function(){return l.get(f)},getBody:function(){return a.get(f)},getFormWrapper:function(){var t=a.get(f);return y.getCurrent(t).getOr(t)}},n.redial,s);return{dialog:f,instanceApi:d}},yB=tinymce.util.Tools.resolve("tinymce.util.URI"),xB=["insertContent","setContent","execCommand","close","block","unblock"],wB=function(u,t,a,n){var e=zD(u.title,n),o=function(t){t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Qx({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Z([Q0.config({}),rt.config({})])})]}],behaviours:Z([M.config({mode:"acyclic",useTabstopAt:L(t0)})])};return EA.parts.body(t)}(u),r=u.buttons.bind(function(t){return 0===t.length?K.none():K.some(JD({buttons:t},n))}),t=gB(function(){return g},jD(function(){return m},n.shared.providers,t)),i=D(D({},u.height.fold(function(){return{}},function(t){return{height:t+"px","max-height":t+"px"}})),u.width.fold(function(){return{}},function(t){return{width:t+"px","max-width":t+"px"}})),c=u.width.isNone()&&u.height.isNone()?["tox-dialog--width-lg"]:[],s=new yB(u.url,{base_uri:new yB(window.location.href)}),l=s.protocol+"://"+s.host+(s.port?":"+s.port:""),f=Ls(),d=[ot("messages",[Nu(function(){var t=Ws(w.fromDom(window),"message",function(t){if(s.isSameOrigin(new yB(t.raw.origin))){t=t.raw.data;if(tA(t)){var n=a,e=g,o=t;switch(o.mceAction){case"insertContent":n.insertContent(o.content);break;case"setContent":n.setContent(o.content);break;case"execCommand":var r=!!k(o.ui)&&o.ui;n.execCommand(o.cmd,r,o.value);break;case"close":e.close();break;case"block":e.block(o.message);break;case"unblock":e.unblock()}}else!tA(i=t)&&p(i)&&He(i,"mceAction")&&u.onMessage(g,t)}var i});f.set(t)}),Pu(f.clear)]),Es.config({channels:((d={})[dB]={onReceive:function(t,n){Hc(t.element,"iframe").each(function(t){t.dom.contentWindow.postMessage(n,l)})}},d)})],m=WD({header:e,body:o,footer:r,extraClasses:c,extraBehaviours:d,extraStyles:i},u,t,n),g=ZD(m);return{dialog:m,instanceApi:g}},SB=function(a){var c=a.backstage.shared;return{open:function(t,n){function e(){EA.hide(u),n()}var o=it(v0({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:K.none()},"cancel",a.backstage)),r=FD(),i=MD(e,c.providers),u=_a(PD({lazySink:function(){return c.getSink()},header:BD(r,i),body:ID(t,c.providers),footer:K.some(RD(ND([],[o.asSpec()]))),onEscape:e,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Q(uw,e)],eventOrder:{}})),r=(EA.show(u),o.get(u));rt.focus(r)}}},kB=function(c){var s=c.backstage.shared;return{open:function(t,n){function e(t){EA.hide(a),n(t)}var o=it(v0({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:K.none()},"submit",c.backstage)),r=v0({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:K.none()},"cancel",c.backstage),i=FD(),u=MD(function(){return e(!1)},s.providers),a=_a(PD({lazySink:function(){return s.getSink()},header:BD(i,u),body:ID(t,s.providers),footer:K.some(RD(ND([],[r,o.asSpec()]))),onEscape:function(){return e(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Q(uw,function(){return e(!1)}),Q(cw,function(){return e(!0)})],eventOrder:{}})),i=(EA.show(a),o.get(a));rt.focus(i)}}},CB=function(t,n){return vi(hi("data",n,t))},OB=function(t){return nx(t,".tox-alert-dialog")||nx(t,".tox-confirm-dialog")},_B=function(t,n,e){return n&&e?[]:[b_.config({contextual:{lazyContext:function(){return K.some(Lr(w.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]};W.add("silver",function(t){var n=bD(t),e=n.uiMothership,o=n.backstage,r=n.renderUI,n=n.getUi,i=(G0(t,o.shared),nA({editor:t,backstage:o}));return{renderUI:r,getWindowManagerImpl:q(i),getNotificationManagerImpl:function(){return Eh(t,{backstage:o},e)},ui:n()}})}();